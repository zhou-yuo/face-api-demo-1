var t1=(je,y)=>()=>(y||je((y={exports:{}}).exports,y),y.exports);var n1=t1((exports,module)=>{(function(){const y=document.createElement("link").relList;if(y&&y.supports&&y.supports("modulepreload"))return;for(const Ge of document.querySelectorAll('link[rel="modulepreload"]'))$e(Ge);new MutationObserver(Ge=>{for(const Ke of Ge)if(Ke.type==="childList")for(const qe of Ke.addedNodes)qe.tagName==="LINK"&&qe.rel==="modulepreload"&&$e(qe)}).observe(document,{childList:!0,subtree:!0});function v(Ge){const Ke={};return Ge.integrity&&(Ke.integrity=Ge.integrity),Ge.referrerPolicy&&(Ke.referrerPolicy=Ge.referrerPolicy),Ge.crossOrigin==="use-credentials"?Ke.credentials="include":Ge.crossOrigin==="anonymous"?Ke.credentials="omit":Ke.credentials="same-origin",Ke}function $e(Ge){if(Ge.ep)return;Ge.ep=!0;const Ke=v(Ge);fetch(Ge.href,Ke)}})();/**
* @vue/shared v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(je,y){const v=new Set(je.split(","));return $e=>v.has($e)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=je=>je.charCodeAt(0)===111&&je.charCodeAt(1)===110&&(je.charCodeAt(2)>122||je.charCodeAt(2)<97),isModelListener=je=>je.startsWith("onUpdate:"),extend=Object.assign,remove=(je,y)=>{const v=je.indexOf(y);v>-1&&je.splice(v,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(je,y)=>hasOwnProperty$1.call(je,y),isArray=Array.isArray,isMap=je=>toTypeString(je)==="[object Map]",isSet=je=>toTypeString(je)==="[object Set]",isDate=je=>toTypeString(je)==="[object Date]",isFunction=je=>typeof je=="function",isString=je=>typeof je=="string",isSymbol=je=>typeof je=="symbol",isObject=je=>je!==null&&typeof je=="object",isPromise=je=>(isObject(je)||isFunction(je))&&isFunction(je.then)&&isFunction(je.catch),objectToString=Object.prototype.toString,toTypeString=je=>objectToString.call(je),toRawType=je=>toTypeString(je).slice(8,-1),isPlainObject=je=>toTypeString(je)==="[object Object]",isIntegerKey=je=>isString(je)&&je!=="NaN"&&je[0]!=="-"&&""+parseInt(je,10)===je,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=je=>{const y=Object.create(null);return v=>y[v]||(y[v]=je(v))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(je=>je.replace(camelizeRE,(y,v)=>v?v.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(je=>je.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(je=>je.charAt(0).toUpperCase()+je.slice(1)),toHandlerKey=cacheStringFunction(je=>je?`on${capitalize(je)}`:""),hasChanged=(je,y)=>!Object.is(je,y),invokeArrayFns=(je,y)=>{for(let v=0;v<je.length;v++)je[v](y)},def=(je,y,v)=>{Object.defineProperty(je,y,{configurable:!0,enumerable:!1,value:v})},looseToNumber=je=>{const y=parseFloat(je);return isNaN(y)?je:y};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(je){if(isArray(je)){const y={};for(let v=0;v<je.length;v++){const $e=je[v],Ge=isString($e)?parseStringStyle($e):normalizeStyle($e);if(Ge)for(const Ke in Ge)y[Ke]=Ge[Ke]}return y}else if(isString(je)||isObject(je))return je}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(je){const y={};return je.replace(styleCommentRE,"").split(listDelimiterRE).forEach(v=>{if(v){const $e=v.split(propertyDelimiterRE);$e.length>1&&(y[$e[0].trim()]=$e[1].trim())}}),y}function normalizeClass(je){let y="";if(isString(je))y=je;else if(isArray(je))for(let v=0;v<je.length;v++){const $e=normalizeClass(je[v]);$e&&(y+=$e+" ")}else if(isObject(je))for(const v in je)je[v]&&(y+=v+" ");return y.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(je){return!!je||je===""}function looseCompareArrays(je,y){if(je.length!==y.length)return!1;let v=!0;for(let $e=0;v&&$e<je.length;$e++)v=looseEqual(je[$e],y[$e]);return v}function looseEqual(je,y){if(je===y)return!0;let v=isDate(je),$e=isDate(y);if(v||$e)return v&&$e?je.getTime()===y.getTime():!1;if(v=isSymbol(je),$e=isSymbol(y),v||$e)return je===y;if(v=isArray(je),$e=isArray(y),v||$e)return v&&$e?looseCompareArrays(je,y):!1;if(v=isObject(je),$e=isObject(y),v||$e){if(!v||!$e)return!1;const Ge=Object.keys(je).length,Ke=Object.keys(y).length;if(Ge!==Ke)return!1;for(const qe in je){const Ye=je.hasOwnProperty(qe),Je=y.hasOwnProperty(qe);if(Ye&&!Je||!Ye&&Je||!looseEqual(je[qe],y[qe]))return!1}}return String(je)===String(y)}function looseIndexOf(je,y){return je.findIndex(v=>looseEqual(v,y))}const toDisplayString=je=>isString(je)?je:je==null?"":isArray(je)||isObject(je)&&(je.toString===objectToString||!isFunction(je.toString))?JSON.stringify(je,replacer,2):String(je),replacer=(je,y)=>y&&y.__v_isRef?replacer(je,y.value):isMap(y)?{[`Map(${y.size})`]:[...y.entries()].reduce((v,[$e,Ge],Ke)=>(v[stringifySymbol($e,Ke)+" =>"]=Ge,v),{})}:isSet(y)?{[`Set(${y.size})`]:[...y.values()].map(v=>stringifySymbol(v))}:isSymbol(y)?stringifySymbol(y):isObject(y)&&!isArray(y)&&!isPlainObject(y)?String(y):y,stringifySymbol=(je,y="")=>{var v;return isSymbol(je)?`Symbol(${(v=je.description)!=null?v:y})`:je};/**
* @vue/reactivity v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(y=!1){this.detached=y,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!y&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(y){if(this._active){const v=activeEffectScope;try{return activeEffectScope=this,y()}finally{activeEffectScope=v}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(y){if(this._active){let v,$e;for(v=0,$e=this.effects.length;v<$e;v++)this.effects[v].stop();for(v=0,$e=this.cleanups.length;v<$e;v++)this.cleanups[v]();if(this.scopes)for(v=0,$e=this.scopes.length;v<$e;v++)this.scopes[v].stop(!0);if(!this.detached&&this.parent&&!y){const Ge=this.parent.scopes.pop();Ge&&Ge!==this&&(this.parent.scopes[this.index]=Ge,Ge.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(je,y=activeEffectScope){y&&y.active&&y.effects.push(je)}function getCurrentScope(){return activeEffectScope}let activeEffect;class ReactiveEffect{constructor(y,v,$e,Ge){this.fn=y,this.trigger=v,this.scheduler=$e,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,Ge)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let y=0;y<this._depsLength;y++){const v=this.deps[y];if(v.computed&&(triggerComputed(v.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(y){this._dirtyLevel=y?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let y=shouldTrack,v=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=v,shouldTrack=y}}stop(){var y;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(y=this.onStop)==null||y.call(this),this.active=!1)}}function triggerComputed(je){return je.value}function preCleanupEffect(je){je._trackId++,je._depsLength=0}function postCleanupEffect(je){if(je.deps.length>je._depsLength){for(let y=je._depsLength;y<je.deps.length;y++)cleanupDepEffect(je.deps[y],je);je.deps.length=je._depsLength}}function cleanupDepEffect(je,y){const v=je.get(y);v!==void 0&&y._trackId!==v&&(je.delete(y),je.size===0&&je.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const je=trackStack.pop();shouldTrack=je===void 0?!0:je}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(je,y,v){if(y.get(je)!==je._trackId){y.set(je,je._trackId);const $e=je.deps[je._depsLength];$e!==y?($e&&cleanupDepEffect($e,je),je.deps[je._depsLength++]=y):je._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(je,y,v){pauseScheduling();for(const $e of je.keys()){let Ge;$e._dirtyLevel<y&&(Ge??(Ge=je.get($e)===$e._trackId))&&($e._shouldSchedule||($e._shouldSchedule=$e._dirtyLevel===0),$e._dirtyLevel=y),$e._shouldSchedule&&(Ge??(Ge=je.get($e)===$e._trackId))&&($e.trigger(),(!$e._runnings||$e.allowRecurse)&&$e._dirtyLevel!==2&&($e._shouldSchedule=!1,$e.scheduler&&queueEffectSchedulers.push($e.scheduler)))}resetScheduling()}const createDep=(je,y)=>{const v=new Map;return v.cleanup=je,v.computed=y,v},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(je,y,v){if(shouldTrack&&activeEffect){let $e=targetMap.get(je);$e||targetMap.set(je,$e=new Map);let Ge=$e.get(v);Ge||$e.set(v,Ge=createDep(()=>$e.delete(v))),trackEffect(activeEffect,Ge)}}function trigger(je,y,v,$e,Ge,Ke){const qe=targetMap.get(je);if(!qe)return;let Ye=[];if(y==="clear")Ye=[...qe.values()];else if(v==="length"&&isArray(je)){const Je=Number($e);qe.forEach((Qe,st)=>{(st==="length"||!isSymbol(st)&&st>=Je)&&Ye.push(Qe)})}else switch(v!==void 0&&Ye.push(qe.get(v)),y){case"add":isArray(je)?isIntegerKey(v)&&Ye.push(qe.get("length")):(Ye.push(qe.get(ITERATE_KEY)),isMap(je)&&Ye.push(qe.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(je)||(Ye.push(qe.get(ITERATE_KEY)),isMap(je)&&Ye.push(qe.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(je)&&Ye.push(qe.get(ITERATE_KEY));break}pauseScheduling();for(const Je of Ye)Je&&triggerEffects(Je,4);resetScheduling()}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(je=>je!=="arguments"&&je!=="caller").map(je=>Symbol[je]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const je={};return["includes","indexOf","lastIndexOf"].forEach(y=>{je[y]=function(...v){const $e=toRaw(this);for(let Ke=0,qe=this.length;Ke<qe;Ke++)track($e,"get",Ke+"");const Ge=$e[y](...v);return Ge===-1||Ge===!1?$e[y](...v.map(toRaw)):Ge}}),["push","pop","shift","unshift","splice"].forEach(y=>{je[y]=function(...v){pauseTracking(),pauseScheduling();const $e=toRaw(this)[y].apply(this,v);return resetScheduling(),resetTracking(),$e}}),je}function hasOwnProperty(je){isSymbol(je)||(je=String(je));const y=toRaw(this);return track(y,"has",je),y.hasOwnProperty(je)}class BaseReactiveHandler{constructor(y=!1,v=!1){this._isReadonly=y,this._isShallow=v}get(y,v,$e){const Ge=this._isReadonly,Ke=this._isShallow;if(v==="__v_isReactive")return!Ge;if(v==="__v_isReadonly")return Ge;if(v==="__v_isShallow")return Ke;if(v==="__v_raw")return $e===(Ge?Ke?shallowReadonlyMap:readonlyMap:Ke?shallowReactiveMap:reactiveMap).get(y)||Object.getPrototypeOf(y)===Object.getPrototypeOf($e)?y:void 0;const qe=isArray(y);if(!Ge){if(qe&&hasOwn(arrayInstrumentations,v))return Reflect.get(arrayInstrumentations,v,$e);if(v==="hasOwnProperty")return hasOwnProperty}const Ye=Reflect.get(y,v,$e);return(isSymbol(v)?builtInSymbols.has(v):isNonTrackableKeys(v))||(Ge||track(y,"get",v),Ke)?Ye:isRef(Ye)?qe&&isIntegerKey(v)?Ye:Ye.value:isObject(Ye)?Ge?readonly(Ye):reactive(Ye):Ye}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(y=!1){super(!1,y)}set(y,v,$e,Ge){let Ke=y[v];if(!this._isShallow){const Je=isReadonly(Ke);if(!isShallow($e)&&!isReadonly($e)&&(Ke=toRaw(Ke),$e=toRaw($e)),!isArray(y)&&isRef(Ke)&&!isRef($e))return Je?!1:(Ke.value=$e,!0)}const qe=isArray(y)&&isIntegerKey(v)?Number(v)<y.length:hasOwn(y,v),Ye=Reflect.set(y,v,$e,Ge);return y===toRaw(Ge)&&(qe?hasChanged($e,Ke)&&trigger(y,"set",v,$e):trigger(y,"add",v,$e)),Ye}deleteProperty(y,v){const $e=hasOwn(y,v);y[v];const Ge=Reflect.deleteProperty(y,v);return Ge&&$e&&trigger(y,"delete",v,void 0),Ge}has(y,v){const $e=Reflect.has(y,v);return(!isSymbol(v)||!builtInSymbols.has(v))&&track(y,"has",v),$e}ownKeys(y){return track(y,"iterate",isArray(y)?"length":ITERATE_KEY),Reflect.ownKeys(y)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(y=!1){super(!0,y)}set(y,v){return!0}deleteProperty(y,v){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=je=>je,getProto=je=>Reflect.getPrototypeOf(je);function get(je,y,v=!1,$e=!1){je=je.__v_raw;const Ge=toRaw(je),Ke=toRaw(y);v||(hasChanged(y,Ke)&&track(Ge,"get",y),track(Ge,"get",Ke));const{has:qe}=getProto(Ge),Ye=$e?toShallow:v?toReadonly:toReactive;if(qe.call(Ge,y))return Ye(je.get(y));if(qe.call(Ge,Ke))return Ye(je.get(Ke));je!==Ge&&je.get(y)}function has(je,y=!1){const v=this.__v_raw,$e=toRaw(v),Ge=toRaw(je);return y||(hasChanged(je,Ge)&&track($e,"has",je),track($e,"has",Ge)),je===Ge?v.has(je):v.has(je)||v.has(Ge)}function size(je,y=!1){return je=je.__v_raw,!y&&track(toRaw(je),"iterate",ITERATE_KEY),Reflect.get(je,"size",je)}function add(je){je=toRaw(je);const y=toRaw(this);return getProto(y).has.call(y,je)||(y.add(je),trigger(y,"add",je,je)),this}function set(je,y){y=toRaw(y);const v=toRaw(this),{has:$e,get:Ge}=getProto(v);let Ke=$e.call(v,je);Ke||(je=toRaw(je),Ke=$e.call(v,je));const qe=Ge.call(v,je);return v.set(je,y),Ke?hasChanged(y,qe)&&trigger(v,"set",je,y):trigger(v,"add",je,y),this}function deleteEntry(je){const y=toRaw(this),{has:v,get:$e}=getProto(y);let Ge=v.call(y,je);Ge||(je=toRaw(je),Ge=v.call(y,je)),$e&&$e.call(y,je);const Ke=y.delete(je);return Ge&&trigger(y,"delete",je,void 0),Ke}function clear(){const je=toRaw(this),y=je.size!==0,v=je.clear();return y&&trigger(je,"clear",void 0,void 0),v}function createForEach(je,y){return function($e,Ge){const Ke=this,qe=Ke.__v_raw,Ye=toRaw(qe),Je=y?toShallow:je?toReadonly:toReactive;return!je&&track(Ye,"iterate",ITERATE_KEY),qe.forEach((Qe,st)=>$e.call(Ge,Je(Qe),Je(st),Ke))}}function createIterableMethod(je,y,v){return function(...$e){const Ge=this.__v_raw,Ke=toRaw(Ge),qe=isMap(Ke),Ye=je==="entries"||je===Symbol.iterator&&qe,Je=je==="keys"&&qe,Qe=Ge[je](...$e),st=v?toShallow:y?toReadonly:toReactive;return!y&&track(Ke,"iterate",Je?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Mt,done:on}=Qe.next();return on?{value:Mt,done:on}:{value:Ye?[st(Mt[0]),st(Mt[1])]:st(Mt),done:on}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(je){return function(...y){return je==="delete"?!1:je==="clear"?void 0:this}}function createInstrumentations(){const je={get(Ke){return get(this,Ke)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},y={get(Ke){return get(this,Ke,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},v={get(Ke){return get(this,Ke,!0)},get size(){return size(this,!0)},has(Ke){return has.call(this,Ke,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},$e={get(Ke){return get(this,Ke,!0,!0)},get size(){return size(this,!0)},has(Ke){return has.call(this,Ke,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(Ke=>{je[Ke]=createIterableMethod(Ke,!1,!1),v[Ke]=createIterableMethod(Ke,!0,!1),y[Ke]=createIterableMethod(Ke,!1,!0),$e[Ke]=createIterableMethod(Ke,!0,!0)}),[je,v,y,$e]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(je,y){const v=y?je?shallowReadonlyInstrumentations:shallowInstrumentations:je?readonlyInstrumentations:mutableInstrumentations;return($e,Ge,Ke)=>Ge==="__v_isReactive"?!je:Ge==="__v_isReadonly"?je:Ge==="__v_raw"?$e:Reflect.get(hasOwn(v,Ge)&&Ge in $e?v:$e,Ge,Ke)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(je){switch(je){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(je){return je.__v_skip||!Object.isExtensible(je)?0:targetTypeMap(toRawType(je))}function reactive(je){return isReadonly(je)?je:createReactiveObject(je,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(je){return createReactiveObject(je,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(je){return createReactiveObject(je,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(je){return createReactiveObject(je,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(je,y,v,$e,Ge){if(!isObject(je)||je.__v_raw&&!(y&&je.__v_isReactive))return je;const Ke=Ge.get(je);if(Ke)return Ke;const qe=getTargetType(je);if(qe===0)return je;const Ye=new Proxy(je,qe===2?$e:v);return Ge.set(je,Ye),Ye}function isReactive(je){return isReadonly(je)?isReactive(je.__v_raw):!!(je&&je.__v_isReactive)}function isReadonly(je){return!!(je&&je.__v_isReadonly)}function isShallow(je){return!!(je&&je.__v_isShallow)}function isProxy(je){return je?!!je.__v_raw:!1}function toRaw(je){const y=je&&je.__v_raw;return y?toRaw(y):je}function markRaw(je){return Object.isExtensible(je)&&def(je,"__v_skip",!0),je}const toReactive=je=>isObject(je)?reactive(je):je,toReadonly=je=>isObject(je)?readonly(je):je;class ComputedRefImpl{constructor(y,v,$e,Ge){this.getter=y,this._setter=v,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>y(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!Ge,this.__v_isReadonly=$e}get value(){const y=toRaw(this);return(!y._cacheable||y.effect.dirty)&&hasChanged(y._value,y._value=y.effect.run())&&triggerRefValue(y,4),trackRefValue(y),y.effect._dirtyLevel>=2&&triggerRefValue(y,2),y._value}set value(y){this._setter(y)}get _dirty(){return this.effect.dirty}set _dirty(y){this.effect.dirty=y}}function computed$1(je,y,v=!1){let $e,Ge;const Ke=isFunction(je);return Ke?($e=je,Ge=NOOP):($e=je.get,Ge=je.set),new ComputedRefImpl($e,Ge,Ke||!Ge,v)}function trackRefValue(je){var y;shouldTrack&&activeEffect&&(je=toRaw(je),trackEffect(activeEffect,(y=je.dep)!=null?y:je.dep=createDep(()=>je.dep=void 0,je instanceof ComputedRefImpl?je:void 0)))}function triggerRefValue(je,y=4,v){je=toRaw(je);const $e=je.dep;$e&&triggerEffects($e,y)}function isRef(je){return!!(je&&je.__v_isRef===!0)}function ref(je){return createRef(je,!1)}function createRef(je,y){return isRef(je)?je:new RefImpl(je,y)}class RefImpl{constructor(y,v){this.__v_isShallow=v,this.dep=void 0,this.__v_isRef=!0,this._rawValue=v?y:toRaw(y),this._value=v?y:toReactive(y)}get value(){return trackRefValue(this),this._value}set value(y){const v=this.__v_isShallow||isShallow(y)||isReadonly(y);y=v?y:toRaw(y),hasChanged(y,this._rawValue)&&(this._rawValue=y,this._value=v?y:toReactive(y),triggerRefValue(this,4))}}function unref(je){return isRef(je)?je.value:je}const shallowUnwrapHandlers={get:(je,y,v)=>unref(Reflect.get(je,y,v)),set:(je,y,v,$e)=>{const Ge=je[y];return isRef(Ge)&&!isRef(v)?(Ge.value=v,!0):Reflect.set(je,y,v,$e)}};function proxyRefs(je){return isReactive(je)?je:new Proxy(je,shallowUnwrapHandlers)}/**
* @vue/runtime-core v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(je,...y){pauseTracking();const v=stack.length?stack[stack.length-1].component:null,$e=v&&v.appContext.config.warnHandler,Ge=getComponentTrace();if($e)callWithErrorHandling($e,v,11,[je+y.map(Ke=>{var qe,Ye;return(Ye=(qe=Ke.toString)==null?void 0:qe.call(Ke))!=null?Ye:JSON.stringify(Ke)}).join(""),v&&v.proxy,Ge.map(({vnode:Ke})=>`at <${formatComponentName(v,Ke.type)}>`).join(`
`),Ge]);else{const Ke=[`[Vue warn]: ${je}`,...y];Ge.length&&Ke.push(`
`,...formatTrace(Ge)),console.warn(...Ke)}resetTracking()}function getComponentTrace(){let je=stack[stack.length-1];if(!je)return[];const y=[];for(;je;){const v=y[0];v&&v.vnode===je?v.recurseCount++:y.push({vnode:je,recurseCount:0});const $e=je.component&&je.component.parent;je=$e&&$e.vnode}return y}function formatTrace(je){const y=[];return je.forEach((v,$e)=>{y.push(...$e===0?[]:[`
`],...formatTraceEntry(v))}),y}function formatTraceEntry({vnode:je,recurseCount:y}){const v=y>0?`... (${y} recursive calls)`:"",$e=je.component?je.component.parent==null:!1,Ge=` at <${formatComponentName(je.component,je.type,$e)}`,Ke=">"+v;return je.props?[Ge,...formatProps(je.props),Ke]:[Ge+Ke]}function formatProps(je){const y=[],v=Object.keys(je);return v.slice(0,3).forEach($e=>{y.push(...formatProp($e,je[$e]))}),v.length>3&&y.push(" ..."),y}function formatProp(je,y,v){return isString(y)?(y=JSON.stringify(y),v?y:[`${je}=${y}`]):typeof y=="number"||typeof y=="boolean"||y==null?v?y:[`${je}=${y}`]:isRef(y)?(y=formatProp(je,toRaw(y.value),!0),v?y:[`${je}=Ref<`,y,">"]):isFunction(y)?[`${je}=fn${y.name?`<${y.name}>`:""}`]:(y=toRaw(y),v?y:[`${je}=`,y])}function callWithErrorHandling(je,y,v,$e){try{return $e?je(...$e):je()}catch(Ge){handleError(Ge,y,v)}}function callWithAsyncErrorHandling(je,y,v,$e){if(isFunction(je)){const Ge=callWithErrorHandling(je,y,v,$e);return Ge&&isPromise(Ge)&&Ge.catch(Ke=>{handleError(Ke,y,v)}),Ge}if(isArray(je)){const Ge=[];for(let Ke=0;Ke<je.length;Ke++)Ge.push(callWithAsyncErrorHandling(je[Ke],y,v,$e));return Ge}}function handleError(je,y,v,$e=!0){const Ge=y?y.vnode:null;if(y){let Ke=y.parent;const qe=y.proxy,Ye=`https://vuejs.org/error-reference/#runtime-${v}`;for(;Ke;){const Qe=Ke.ec;if(Qe){for(let st=0;st<Qe.length;st++)if(Qe[st](je,qe,Ye)===!1)return}Ke=Ke.parent}const Je=y.appContext.config.errorHandler;if(Je){pauseTracking(),callWithErrorHandling(Je,null,10,[je,qe,Ye]),resetTracking();return}}logError(je,v,Ge,$e)}function logError(je,y,v,$e=!0){console.error(je)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(je){const y=currentFlushPromise||resolvedPromise;return je?y.then(this?je.bind(this):je):y}function findInsertionIndex(je){let y=flushIndex+1,v=queue.length;for(;y<v;){const $e=y+v>>>1,Ge=queue[$e],Ke=getId(Ge);Ke<je||Ke===je&&Ge.pre?y=$e+1:v=$e}return y}function queueJob(je){(!queue.length||!queue.includes(je,isFlushing&&je.allowRecurse?flushIndex+1:flushIndex))&&(je.id==null?queue.push(je):queue.splice(findInsertionIndex(je.id),0,je),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(je){const y=queue.indexOf(je);y>flushIndex&&queue.splice(y,1)}function queuePostFlushCb(je){isArray(je)?pendingPostFlushCbs.push(...je):(!activePostFlushCbs||!activePostFlushCbs.includes(je,je.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(je),queueFlush()}function flushPreFlushCbs(je,y,v=isFlushing?flushIndex+1:0){for(;v<queue.length;v++){const $e=queue[v];if($e&&$e.pre){if(je&&$e.id!==je.uid)continue;queue.splice(v,1),v--,$e()}}}function flushPostFlushCbs(je){if(pendingPostFlushCbs.length){const y=[...new Set(pendingPostFlushCbs)].sort((v,$e)=>getId(v)-getId($e));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...y);return}for(activePostFlushCbs=y,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=je=>je.id==null?1/0:je.id,comparator=(je,y)=>{const v=getId(je)-getId(y);if(v===0){if(je.pre&&!y.pre)return-1;if(y.pre&&!je.pre)return 1}return v};function flushJobs(je){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const y=queue[flushIndex];y&&y.active!==!1&&callWithErrorHandling(y,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(je,y,...v){if(je.isUnmounted)return;const $e=je.vnode.props||EMPTY_OBJ;let Ge=v;const Ke=y.startsWith("update:"),qe=Ke&&y.slice(7);if(qe&&qe in $e){const st=`${qe==="modelValue"?"model":qe}Modifiers`,{number:Mt,trim:on}=$e[st]||EMPTY_OBJ;on&&(Ge=v.map(sn=>isString(sn)?sn.trim():sn)),Mt&&(Ge=v.map(looseToNumber))}let Ye,Je=$e[Ye=toHandlerKey(y)]||$e[Ye=toHandlerKey(camelize(y))];!Je&&Ke&&(Je=$e[Ye=toHandlerKey(hyphenate(y))]),Je&&callWithAsyncErrorHandling(Je,je,6,Ge);const Qe=$e[Ye+"Once"];if(Qe){if(!je.emitted)je.emitted={};else if(je.emitted[Ye])return;je.emitted[Ye]=!0,callWithAsyncErrorHandling(Qe,je,6,Ge)}}function normalizeEmitsOptions(je,y,v=!1){const $e=y.emitsCache,Ge=$e.get(je);if(Ge!==void 0)return Ge;const Ke=je.emits;let qe={},Ye=!1;if(!isFunction(je)){const Je=Qe=>{const st=normalizeEmitsOptions(Qe,y,!0);st&&(Ye=!0,extend(qe,st))};!v&&y.mixins.length&&y.mixins.forEach(Je),je.extends&&Je(je.extends),je.mixins&&je.mixins.forEach(Je)}return!Ke&&!Ye?(isObject(je)&&$e.set(je,null),null):(isArray(Ke)?Ke.forEach(Je=>qe[Je]=null):extend(qe,Ke),isObject(je)&&$e.set(je,qe),qe)}function isEmitListener(je,y){return!je||!isOn(y)?!1:(y=y.slice(2).replace(/Once$/,""),hasOwn(je,y[0].toLowerCase()+y.slice(1))||hasOwn(je,hyphenate(y))||hasOwn(je,y))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(je){const y=currentRenderingInstance;return currentRenderingInstance=je,currentScopeId=je&&je.type.__scopeId||null,y}function withCtx(je,y=currentRenderingInstance,v){if(!y||je._n)return je;const $e=(...Ge)=>{$e._d&&setBlockTracking(-1);const Ke=setCurrentRenderingInstance(y);let qe;try{qe=je(...Ge)}finally{setCurrentRenderingInstance(Ke),$e._d&&setBlockTracking(1)}return qe};return $e._n=!0,$e._c=!0,$e._d=!0,$e}function markAttrsAccessed(){}function renderComponentRoot(je){const{type:y,vnode:v,proxy:$e,withProxy:Ge,propsOptions:[Ke],slots:qe,attrs:Ye,emit:Je,render:Qe,renderCache:st,props:Mt,data:on,setupState:sn,ctx:fn,inheritAttrs:hn}=je,to=setCurrentRenderingInstance(je);let Xr,co;try{if(v.shapeFlag&4){const fo=Ge||$e,Uo=fo;Xr=normalizeVNode(Qe.call(Uo,fo,st,Mt,sn,on,fn)),co=Ye}else{const fo=y;Xr=normalizeVNode(fo.length>1?fo(Mt,{attrs:Ye,slots:qe,emit:Je}):fo(Mt,null)),co=y.props?Ye:getFunctionalFallthrough(Ye)}}catch(fo){blockStack.length=0,handleError(fo,je,1),Xr=createVNode(Comment)}let lo=Xr;if(co&&hn!==!1){const fo=Object.keys(co),{shapeFlag:Uo}=lo;fo.length&&Uo&7&&(Ke&&fo.some(isModelListener)&&(co=filterModelListeners(co,Ke)),lo=cloneVNode(lo,co))}return v.dirs&&(lo=cloneVNode(lo),lo.dirs=lo.dirs?lo.dirs.concat(v.dirs):v.dirs),v.transition&&(lo.transition=v.transition),Xr=lo,setCurrentRenderingInstance(to),Xr}const getFunctionalFallthrough=je=>{let y;for(const v in je)(v==="class"||v==="style"||isOn(v))&&((y||(y={}))[v]=je[v]);return y},filterModelListeners=(je,y)=>{const v={};for(const $e in je)(!isModelListener($e)||!($e.slice(9)in y))&&(v[$e]=je[$e]);return v};function shouldUpdateComponent(je,y,v){const{props:$e,children:Ge,component:Ke}=je,{props:qe,children:Ye,patchFlag:Je}=y,Qe=Ke.emitsOptions;if(y.dirs||y.transition)return!0;if(v&&Je>=0){if(Je&1024)return!0;if(Je&16)return $e?hasPropsChanged($e,qe,Qe):!!qe;if(Je&8){const st=y.dynamicProps;for(let Mt=0;Mt<st.length;Mt++){const on=st[Mt];if(qe[on]!==$e[on]&&!isEmitListener(Qe,on))return!0}}}else return(Ge||Ye)&&(!Ye||!Ye.$stable)?!0:$e===qe?!1:$e?qe?hasPropsChanged($e,qe,Qe):!0:!!qe;return!1}function hasPropsChanged(je,y,v){const $e=Object.keys(y);if($e.length!==Object.keys(je).length)return!0;for(let Ge=0;Ge<$e.length;Ge++){const Ke=$e[Ge];if(y[Ke]!==je[Ke]&&!isEmitListener(v,Ke))return!0}return!1}function updateHOCHostEl({vnode:je,parent:y},v){for(;y;){const $e=y.subTree;if($e.suspense&&$e.suspense.activeBranch===je&&($e.el=je.el),$e===je)(je=y.vnode).el=v,y=y.parent;else break}}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),isSuspense=je=>je.__isSuspense;function queueEffectWithSuspense(je,y){y&&y.pendingBranch?isArray(je)?y.effects.push(...je):y.effects.push(je):queuePostFlushCb(je)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(je,y){return doWatch(je,null,y)}const INITIAL_WATCHER_VALUE={};function watch(je,y,v){return doWatch(je,y,v)}function doWatch(je,y,{immediate:v,deep:$e,flush:Ge,once:Ke,onTrack:qe,onTrigger:Ye}=EMPTY_OBJ){if(y&&Ke){const mo=y;y=(...rd)=>{mo(...rd),Uo()}}const Je=currentInstance,Qe=mo=>$e===!0?mo:traverse(mo,$e===!1?1:void 0);let st,Mt=!1,on=!1;if(isRef(je)?(st=()=>je.value,Mt=isShallow(je)):isReactive(je)?(st=()=>Qe(je),Mt=!0):isArray(je)?(on=!0,Mt=je.some(mo=>isReactive(mo)||isShallow(mo)),st=()=>je.map(mo=>{if(isRef(mo))return mo.value;if(isReactive(mo))return Qe(mo);if(isFunction(mo))return callWithErrorHandling(mo,Je,2)})):isFunction(je)?y?st=()=>callWithErrorHandling(je,Je,2):st=()=>(sn&&sn(),callWithAsyncErrorHandling(je,Je,3,[fn])):st=NOOP,y&&$e){const mo=st;st=()=>traverse(mo())}let sn,fn=mo=>{sn=lo.onStop=()=>{callWithErrorHandling(mo,Je,4),sn=lo.onStop=void 0}},hn;if(isInSSRComponentSetup)if(fn=NOOP,y?v&&callWithAsyncErrorHandling(y,Je,3,[st(),on?[]:void 0,fn]):st(),Ge==="sync"){const mo=useSSRContext();hn=mo.__watcherHandles||(mo.__watcherHandles=[])}else return NOOP;let to=on?new Array(je.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Xr=()=>{if(!(!lo.active||!lo.dirty))if(y){const mo=lo.run();($e||Mt||(on?mo.some((rd,od)=>hasChanged(rd,to[od])):hasChanged(mo,to)))&&(sn&&sn(),callWithAsyncErrorHandling(y,Je,3,[mo,to===INITIAL_WATCHER_VALUE?void 0:on&&to[0]===INITIAL_WATCHER_VALUE?[]:to,fn]),to=mo)}else lo.run()};Xr.allowRecurse=!!y;let co;Ge==="sync"?co=Xr:Ge==="post"?co=()=>queuePostRenderEffect(Xr,Je&&Je.suspense):(Xr.pre=!0,Je&&(Xr.id=Je.uid),co=()=>queueJob(Xr));const lo=new ReactiveEffect(st,NOOP,co),fo=getCurrentScope(),Uo=()=>{lo.stop(),fo&&remove(fo.effects,lo)};return y?v?Xr():to=lo.run():Ge==="post"?queuePostRenderEffect(lo.run.bind(lo),Je&&Je.suspense):lo.run(),hn&&hn.push(Uo),Uo}function instanceWatch(je,y,v){const $e=this.proxy,Ge=isString(je)?je.includes(".")?createPathGetter($e,je):()=>$e[je]:je.bind($e,$e);let Ke;isFunction(y)?Ke=y:(Ke=y.handler,v=y);const qe=setCurrentInstance(this),Ye=doWatch(Ge,Ke.bind($e),v);return qe(),Ye}function createPathGetter(je,y){const v=y.split(".");return()=>{let $e=je;for(let Ge=0;Ge<v.length&&$e;Ge++)$e=$e[v[Ge]];return $e}}function traverse(je,y,v=0,$e){if(!isObject(je)||je.__v_skip)return je;if(y&&y>0){if(v>=y)return je;v++}if($e=$e||new Set,$e.has(je))return je;if($e.add(je),isRef(je))traverse(je.value,y,v,$e);else if(isArray(je))for(let Ge=0;Ge<je.length;Ge++)traverse(je[Ge],y,v,$e);else if(isSet(je)||isMap(je))je.forEach(Ge=>{traverse(Ge,y,v,$e)});else if(isPlainObject(je))for(const Ge in je)traverse(je[Ge],y,v,$e);return je}function withDirectives(je,y){if(currentRenderingInstance===null)return je;const v=getExposeProxy(currentRenderingInstance)||currentRenderingInstance.proxy,$e=je.dirs||(je.dirs=[]);for(let Ge=0;Ge<y.length;Ge++){let[Ke,qe,Ye,Je=EMPTY_OBJ]=y[Ge];Ke&&(isFunction(Ke)&&(Ke={mounted:Ke,updated:Ke}),Ke.deep&&traverse(qe),$e.push({dir:Ke,instance:v,value:qe,oldValue:void 0,arg:Ye,modifiers:Je}))}return je}function invokeDirectiveHook(je,y,v,$e){const Ge=je.dirs,Ke=y&&y.dirs;for(let qe=0;qe<Ge.length;qe++){const Ye=Ge[qe];Ke&&(Ye.oldValue=Ke[qe].value);let Je=Ye.dir[$e];Je&&(pauseTracking(),callWithAsyncErrorHandling(Je,v,8,[je.el,Ye,je,y]),resetTracking())}}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(je,y){return isFunction(je)?extend({name:je.name},y,{setup:je}):je}const isAsyncWrapper=je=>!!je.type.__asyncLoader,isKeepAlive=je=>je.type.__isKeepAlive;function onActivated(je,y){registerKeepAliveHook(je,"a",y)}function onDeactivated(je,y){registerKeepAliveHook(je,"da",y)}function registerKeepAliveHook(je,y,v=currentInstance){const $e=je.__wdc||(je.__wdc=()=>{let Ge=v;for(;Ge;){if(Ge.isDeactivated)return;Ge=Ge.parent}return je()});if(injectHook(y,$e,v),v){let Ge=v.parent;for(;Ge&&Ge.parent;)isKeepAlive(Ge.parent.vnode)&&injectToKeepAliveRoot($e,y,v,Ge),Ge=Ge.parent}}function injectToKeepAliveRoot(je,y,v,$e){const Ge=injectHook(y,je,$e,!0);onUnmounted(()=>{remove($e[y],Ge)},v)}function injectHook(je,y,v=currentInstance,$e=!1){if(v){const Ge=v[je]||(v[je]=[]),Ke=y.__weh||(y.__weh=(...qe)=>{if(v.isUnmounted)return;pauseTracking();const Ye=setCurrentInstance(v),Je=callWithAsyncErrorHandling(y,v,je,qe);return Ye(),resetTracking(),Je});return $e?Ge.unshift(Ke):Ge.push(Ke),Ke}}const createHook=je=>(y,v=currentInstance)=>(!isInSSRComponentSetup||je==="sp")&&injectHook(je,(...$e)=>y(...$e),v),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(je,y=currentInstance){injectHook("ec",je,y)}const getPublicInstance=je=>je?isStatefulComponent(je)?getExposeProxy(je)||je.proxy:getPublicInstance(je.parent):null,publicPropertiesMap=extend(Object.create(null),{$:je=>je,$el:je=>je.vnode.el,$data:je=>je.data,$props:je=>je.props,$attrs:je=>je.attrs,$slots:je=>je.slots,$refs:je=>je.refs,$parent:je=>getPublicInstance(je.parent),$root:je=>getPublicInstance(je.root),$emit:je=>je.emit,$options:je=>resolveMergedOptions(je),$forceUpdate:je=>je.f||(je.f=()=>{je.effect.dirty=!0,queueJob(je.update)}),$nextTick:je=>je.n||(je.n=nextTick.bind(je.proxy)),$watch:je=>instanceWatch.bind(je)}),hasSetupBinding=(je,y)=>je!==EMPTY_OBJ&&!je.__isScriptSetup&&hasOwn(je,y),PublicInstanceProxyHandlers={get({_:je},y){if(y==="__v_skip")return!0;const{ctx:v,setupState:$e,data:Ge,props:Ke,accessCache:qe,type:Ye,appContext:Je}=je;let Qe;if(y[0]!=="$"){const sn=qe[y];if(sn!==void 0)switch(sn){case 1:return $e[y];case 2:return Ge[y];case 4:return v[y];case 3:return Ke[y]}else{if(hasSetupBinding($e,y))return qe[y]=1,$e[y];if(Ge!==EMPTY_OBJ&&hasOwn(Ge,y))return qe[y]=2,Ge[y];if((Qe=je.propsOptions[0])&&hasOwn(Qe,y))return qe[y]=3,Ke[y];if(v!==EMPTY_OBJ&&hasOwn(v,y))return qe[y]=4,v[y];shouldCacheAccess&&(qe[y]=0)}}const st=publicPropertiesMap[y];let Mt,on;if(st)return y==="$attrs"&&track(je.attrs,"get",""),st(je);if((Mt=Ye.__cssModules)&&(Mt=Mt[y]))return Mt;if(v!==EMPTY_OBJ&&hasOwn(v,y))return qe[y]=4,v[y];if(on=Je.config.globalProperties,hasOwn(on,y))return on[y]},set({_:je},y,v){const{data:$e,setupState:Ge,ctx:Ke}=je;return hasSetupBinding(Ge,y)?(Ge[y]=v,!0):$e!==EMPTY_OBJ&&hasOwn($e,y)?($e[y]=v,!0):hasOwn(je.props,y)||y[0]==="$"&&y.slice(1)in je?!1:(Ke[y]=v,!0)},has({_:{data:je,setupState:y,accessCache:v,ctx:$e,appContext:Ge,propsOptions:Ke}},qe){let Ye;return!!v[qe]||je!==EMPTY_OBJ&&hasOwn(je,qe)||hasSetupBinding(y,qe)||(Ye=Ke[0])&&hasOwn(Ye,qe)||hasOwn($e,qe)||hasOwn(publicPropertiesMap,qe)||hasOwn(Ge.config.globalProperties,qe)},defineProperty(je,y,v){return v.get!=null?je._.accessCache[y]=0:hasOwn(v,"value")&&this.set(je,y,v.value,null),Reflect.defineProperty(je,y,v)}};function normalizePropsOrEmits(je){return isArray(je)?je.reduce((y,v)=>(y[v]=null,y),{}):je}let shouldCacheAccess=!0;function applyOptions(je){const y=resolveMergedOptions(je),v=je.proxy,$e=je.ctx;shouldCacheAccess=!1,y.beforeCreate&&callHook(y.beforeCreate,je,"bc");const{data:Ge,computed:Ke,methods:qe,watch:Ye,provide:Je,inject:Qe,created:st,beforeMount:Mt,mounted:on,beforeUpdate:sn,updated:fn,activated:hn,deactivated:to,beforeDestroy:Xr,beforeUnmount:co,destroyed:lo,unmounted:fo,render:Uo,renderTracked:mo,renderTriggered:rd,errorCaptured:od,serverPrefetch:fd,expose:hd,inheritAttrs:vd,components:Td,directives:Od,filters:Md}=y;if(Qe&&resolveInjections(Qe,$e,null),qe)for(const pd in qe){const _d=qe[pd];isFunction(_d)&&($e[pd]=_d.bind(v))}if(Ge){const pd=Ge.call(v,v);isObject(pd)&&(je.data=reactive(pd))}if(shouldCacheAccess=!0,Ke)for(const pd in Ke){const _d=Ke[pd],Bd=isFunction(_d)?_d.bind(v,v):isFunction(_d.get)?_d.get.bind(v,v):NOOP,$d=!isFunction(_d)&&isFunction(_d.set)?_d.set.bind(v):NOOP,jd=computed({get:Bd,set:$d});Object.defineProperty($e,pd,{enumerable:!0,configurable:!0,get:()=>jd.value,set:Pd=>jd.value=Pd})}if(Ye)for(const pd in Ye)createWatcher(Ye[pd],$e,v,pd);if(Je){const pd=isFunction(Je)?Je.call(v):Je;Reflect.ownKeys(pd).forEach(_d=>{provide(_d,pd[_d])})}st&&callHook(st,je,"c");function Ud(pd,_d){isArray(_d)?_d.forEach(Bd=>pd(Bd.bind(v))):_d&&pd(_d.bind(v))}if(Ud(onBeforeMount,Mt),Ud(onMounted,on),Ud(onBeforeUpdate,sn),Ud(onUpdated,fn),Ud(onActivated,hn),Ud(onDeactivated,to),Ud(onErrorCaptured,od),Ud(onRenderTracked,mo),Ud(onRenderTriggered,rd),Ud(onBeforeUnmount,co),Ud(onUnmounted,fo),Ud(onServerPrefetch,fd),isArray(hd))if(hd.length){const pd=je.exposed||(je.exposed={});hd.forEach(_d=>{Object.defineProperty(pd,_d,{get:()=>v[_d],set:Bd=>v[_d]=Bd})})}else je.exposed||(je.exposed={});Uo&&je.render===NOOP&&(je.render=Uo),vd!=null&&(je.inheritAttrs=vd),Td&&(je.components=Td),Od&&(je.directives=Od)}function resolveInjections(je,y,v=NOOP){isArray(je)&&(je=normalizeInject(je));for(const $e in je){const Ge=je[$e];let Ke;isObject(Ge)?"default"in Ge?Ke=inject(Ge.from||$e,Ge.default,!0):Ke=inject(Ge.from||$e):Ke=inject(Ge),isRef(Ke)?Object.defineProperty(y,$e,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:qe=>Ke.value=qe}):y[$e]=Ke}}function callHook(je,y,v){callWithAsyncErrorHandling(isArray(je)?je.map($e=>$e.bind(y.proxy)):je.bind(y.proxy),y,v)}function createWatcher(je,y,v,$e){const Ge=$e.includes(".")?createPathGetter(v,$e):()=>v[$e];if(isString(je)){const Ke=y[je];isFunction(Ke)&&watch(Ge,Ke)}else if(isFunction(je))watch(Ge,je.bind(v));else if(isObject(je))if(isArray(je))je.forEach(Ke=>createWatcher(Ke,y,v,$e));else{const Ke=isFunction(je.handler)?je.handler.bind(v):y[je.handler];isFunction(Ke)&&watch(Ge,Ke,je)}}function resolveMergedOptions(je){const y=je.type,{mixins:v,extends:$e}=y,{mixins:Ge,optionsCache:Ke,config:{optionMergeStrategies:qe}}=je.appContext,Ye=Ke.get(y);let Je;return Ye?Je=Ye:!Ge.length&&!v&&!$e?Je=y:(Je={},Ge.length&&Ge.forEach(Qe=>mergeOptions(Je,Qe,qe,!0)),mergeOptions(Je,y,qe)),isObject(y)&&Ke.set(y,Je),Je}function mergeOptions(je,y,v,$e=!1){const{mixins:Ge,extends:Ke}=y;Ke&&mergeOptions(je,Ke,v,!0),Ge&&Ge.forEach(qe=>mergeOptions(je,qe,v,!0));for(const qe in y)if(!($e&&qe==="expose")){const Ye=internalOptionMergeStrats[qe]||v&&v[qe];je[qe]=Ye?Ye(je[qe],y[qe]):y[qe]}return je}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(je,y){return y?je?function(){return extend(isFunction(je)?je.call(this,this):je,isFunction(y)?y.call(this,this):y)}:y:je}function mergeInject(je,y){return mergeObjectOptions(normalizeInject(je),normalizeInject(y))}function normalizeInject(je){if(isArray(je)){const y={};for(let v=0;v<je.length;v++)y[je[v]]=je[v];return y}return je}function mergeAsArray(je,y){return je?[...new Set([].concat(je,y))]:y}function mergeObjectOptions(je,y){return je?extend(Object.create(null),je,y):y}function mergeEmitsOrPropsOptions(je,y){return je?isArray(je)&&isArray(y)?[...new Set([...je,...y])]:extend(Object.create(null),normalizePropsOrEmits(je),normalizePropsOrEmits(y??{})):y}function mergeWatchOptions(je,y){if(!je)return y;if(!y)return je;const v=extend(Object.create(null),je);for(const $e in y)v[$e]=mergeAsArray(je[$e],y[$e]);return v}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(je,y){return function($e,Ge=null){isFunction($e)||($e=extend({},$e)),Ge!=null&&!isObject(Ge)&&(Ge=null);const Ke=createAppContext(),qe=new WeakSet;let Ye=!1;const Je=Ke.app={_uid:uid$1++,_component:$e,_props:Ge,_container:null,_context:Ke,_instance:null,version,get config(){return Ke.config},set config(Qe){},use(Qe,...st){return qe.has(Qe)||(Qe&&isFunction(Qe.install)?(qe.add(Qe),Qe.install(Je,...st)):isFunction(Qe)&&(qe.add(Qe),Qe(Je,...st))),Je},mixin(Qe){return Ke.mixins.includes(Qe)||Ke.mixins.push(Qe),Je},component(Qe,st){return st?(Ke.components[Qe]=st,Je):Ke.components[Qe]},directive(Qe,st){return st?(Ke.directives[Qe]=st,Je):Ke.directives[Qe]},mount(Qe,st,Mt){if(!Ye){const on=createVNode($e,Ge);return on.appContext=Ke,Mt===!0?Mt="svg":Mt===!1&&(Mt=void 0),st&&y?y(on,Qe):je(on,Qe,Mt),Ye=!0,Je._container=Qe,Qe.__vue_app__=Je,getExposeProxy(on.component)||on.component.proxy}},unmount(){Ye&&(je(null,Je._container),delete Je._container.__vue_app__)},provide(Qe,st){return Ke.provides[Qe]=st,Je},runWithContext(Qe){const st=currentApp;currentApp=Je;try{return Qe()}finally{currentApp=st}}};return Je}}let currentApp=null;function provide(je,y){if(currentInstance){let v=currentInstance.provides;const $e=currentInstance.parent&&currentInstance.parent.provides;$e===v&&(v=currentInstance.provides=Object.create($e)),v[je]=y}}function inject(je,y,v=!1){const $e=currentInstance||currentRenderingInstance;if($e||currentApp){const Ge=$e?$e.parent==null?$e.vnode.appContext&&$e.vnode.appContext.provides:$e.parent.provides:currentApp._context.provides;if(Ge&&je in Ge)return Ge[je];if(arguments.length>1)return v&&isFunction(y)?y.call($e&&$e.proxy):y}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=je=>Object.getPrototypeOf(je)===internalObjectProto;function initProps(je,y,v,$e=!1){const Ge={},Ke=createInternalObject();je.propsDefaults=Object.create(null),setFullProps(je,y,Ge,Ke);for(const qe in je.propsOptions[0])qe in Ge||(Ge[qe]=void 0);v?je.props=$e?Ge:shallowReactive(Ge):je.type.props?je.props=Ge:je.props=Ke,je.attrs=Ke}function updateProps(je,y,v,$e){const{props:Ge,attrs:Ke,vnode:{patchFlag:qe}}=je,Ye=toRaw(Ge),[Je]=je.propsOptions;let Qe=!1;if(($e||qe>0)&&!(qe&16)){if(qe&8){const st=je.vnode.dynamicProps;for(let Mt=0;Mt<st.length;Mt++){let on=st[Mt];if(isEmitListener(je.emitsOptions,on))continue;const sn=y[on];if(Je)if(hasOwn(Ke,on))sn!==Ke[on]&&(Ke[on]=sn,Qe=!0);else{const fn=camelize(on);Ge[fn]=resolvePropValue(Je,Ye,fn,sn,je,!1)}else sn!==Ke[on]&&(Ke[on]=sn,Qe=!0)}}}else{setFullProps(je,y,Ge,Ke)&&(Qe=!0);let st;for(const Mt in Ye)(!y||!hasOwn(y,Mt)&&((st=hyphenate(Mt))===Mt||!hasOwn(y,st)))&&(Je?v&&(v[Mt]!==void 0||v[st]!==void 0)&&(Ge[Mt]=resolvePropValue(Je,Ye,Mt,void 0,je,!0)):delete Ge[Mt]);if(Ke!==Ye)for(const Mt in Ke)(!y||!hasOwn(y,Mt))&&(delete Ke[Mt],Qe=!0)}Qe&&trigger(je.attrs,"set","")}function setFullProps(je,y,v,$e){const[Ge,Ke]=je.propsOptions;let qe=!1,Ye;if(y)for(let Je in y){if(isReservedProp(Je))continue;const Qe=y[Je];let st;Ge&&hasOwn(Ge,st=camelize(Je))?!Ke||!Ke.includes(st)?v[st]=Qe:(Ye||(Ye={}))[st]=Qe:isEmitListener(je.emitsOptions,Je)||(!(Je in $e)||Qe!==$e[Je])&&($e[Je]=Qe,qe=!0)}if(Ke){const Je=toRaw(v),Qe=Ye||EMPTY_OBJ;for(let st=0;st<Ke.length;st++){const Mt=Ke[st];v[Mt]=resolvePropValue(Ge,Je,Mt,Qe[Mt],je,!hasOwn(Qe,Mt))}}return qe}function resolvePropValue(je,y,v,$e,Ge,Ke){const qe=je[v];if(qe!=null){const Ye=hasOwn(qe,"default");if(Ye&&$e===void 0){const Je=qe.default;if(qe.type!==Function&&!qe.skipFactory&&isFunction(Je)){const{propsDefaults:Qe}=Ge;if(v in Qe)$e=Qe[v];else{const st=setCurrentInstance(Ge);$e=Qe[v]=Je.call(null,y),st()}}else $e=Je}qe[0]&&(Ke&&!Ye?$e=!1:qe[1]&&($e===""||$e===hyphenate(v))&&($e=!0))}return $e}function normalizePropsOptions(je,y,v=!1){const $e=y.propsCache,Ge=$e.get(je);if(Ge)return Ge;const Ke=je.props,qe={},Ye=[];let Je=!1;if(!isFunction(je)){const st=Mt=>{Je=!0;const[on,sn]=normalizePropsOptions(Mt,y,!0);extend(qe,on),sn&&Ye.push(...sn)};!v&&y.mixins.length&&y.mixins.forEach(st),je.extends&&st(je.extends),je.mixins&&je.mixins.forEach(st)}if(!Ke&&!Je)return isObject(je)&&$e.set(je,EMPTY_ARR),EMPTY_ARR;if(isArray(Ke))for(let st=0;st<Ke.length;st++){const Mt=camelize(Ke[st]);validatePropName(Mt)&&(qe[Mt]=EMPTY_OBJ)}else if(Ke)for(const st in Ke){const Mt=camelize(st);if(validatePropName(Mt)){const on=Ke[st],sn=qe[Mt]=isArray(on)||isFunction(on)?{type:on}:extend({},on);if(sn){const fn=getTypeIndex(Boolean,sn.type),hn=getTypeIndex(String,sn.type);sn[0]=fn>-1,sn[1]=hn<0||fn<hn,(fn>-1||hasOwn(sn,"default"))&&Ye.push(Mt)}}}const Qe=[qe,Ye];return isObject(je)&&$e.set(je,Qe),Qe}function validatePropName(je){return je[0]!=="$"&&!isReservedProp(je)}function getType(je){return je===null?"null":typeof je=="function"?je.name||"":typeof je=="object"&&je.constructor&&je.constructor.name||""}function isSameType(je,y){return getType(je)===getType(y)}function getTypeIndex(je,y){return isArray(y)?y.findIndex(v=>isSameType(v,je)):isFunction(y)&&isSameType(y,je)?0:-1}const isInternalKey=je=>je[0]==="_"||je==="$stable",normalizeSlotValue=je=>isArray(je)?je.map(normalizeVNode):[normalizeVNode(je)],normalizeSlot=(je,y,v)=>{if(y._n)return y;const $e=withCtx((...Ge)=>normalizeSlotValue(y(...Ge)),v);return $e._c=!1,$e},normalizeObjectSlots=(je,y,v)=>{const $e=je._ctx;for(const Ge in je){if(isInternalKey(Ge))continue;const Ke=je[Ge];if(isFunction(Ke))y[Ge]=normalizeSlot(Ge,Ke,$e);else if(Ke!=null){const qe=normalizeSlotValue(Ke);y[Ge]=()=>qe}}},normalizeVNodeSlots=(je,y)=>{const v=normalizeSlotValue(y);je.slots.default=()=>v},initSlots=(je,y)=>{const v=je.slots=createInternalObject();if(je.vnode.shapeFlag&32){const $e=y._;$e?(extend(v,y),def(v,"_",$e)):normalizeObjectSlots(y,v)}else y&&normalizeVNodeSlots(je,y)},updateSlots=(je,y,v)=>{const{vnode:$e,slots:Ge}=je;let Ke=!0,qe=EMPTY_OBJ;if($e.shapeFlag&32){const Ye=y._;Ye?v&&Ye===1?Ke=!1:(extend(Ge,y),!v&&Ye===1&&delete Ge._):(Ke=!y.$stable,normalizeObjectSlots(y,Ge)),qe=y}else y&&(normalizeVNodeSlots(je,y),qe={default:1});if(Ke)for(const Ye in Ge)!isInternalKey(Ye)&&qe[Ye]==null&&delete Ge[Ye]};function setRef(je,y,v,$e,Ge=!1){if(isArray(je)){je.forEach((on,sn)=>setRef(on,y&&(isArray(y)?y[sn]:y),v,$e,Ge));return}if(isAsyncWrapper($e)&&!Ge)return;const Ke=$e.shapeFlag&4?getExposeProxy($e.component)||$e.component.proxy:$e.el,qe=Ge?null:Ke,{i:Ye,r:Je}=je,Qe=y&&y.r,st=Ye.refs===EMPTY_OBJ?Ye.refs={}:Ye.refs,Mt=Ye.setupState;if(Qe!=null&&Qe!==Je&&(isString(Qe)?(st[Qe]=null,hasOwn(Mt,Qe)&&(Mt[Qe]=null)):isRef(Qe)&&(Qe.value=null)),isFunction(Je))callWithErrorHandling(Je,Ye,12,[qe,st]);else{const on=isString(Je),sn=isRef(Je);if(on||sn){const fn=()=>{if(je.f){const hn=on?hasOwn(Mt,Je)?Mt[Je]:st[Je]:Je.value;Ge?isArray(hn)&&remove(hn,Ke):isArray(hn)?hn.includes(Ke)||hn.push(Ke):on?(st[Je]=[Ke],hasOwn(Mt,Je)&&(Mt[Je]=st[Je])):(Je.value=[Ke],je.k&&(st[je.k]=Je.value))}else on?(st[Je]=qe,hasOwn(Mt,Je)&&(Mt[Je]=qe)):sn&&(Je.value=qe,je.k&&(st[je.k]=qe))};qe?(fn.id=-1,queuePostRenderEffect(fn,v)):fn()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(je){return baseCreateRenderer(je)}function baseCreateRenderer(je,y){const v=getGlobalThis();v.__VUE__=!0;const{insert:$e,remove:Ge,patchProp:Ke,createElement:qe,createText:Ye,createComment:Je,setText:Qe,setElementText:st,parentNode:Mt,nextSibling:on,setScopeId:sn=NOOP,insertStaticContent:fn}=je,hn=(md,Ad,Nd,Hd=null,Kd=null,Qd=null,rp=void 0,np=null,ip=!!Ad.dynamicChildren)=>{if(md===Ad)return;md&&!isSameVNodeType(md,Ad)&&(Hd=cp(md),Pd(md,Kd,Qd,!0),md=null),Ad.patchFlag===-2&&(ip=!1,Ad.dynamicChildren=null);const{type:Zd,ref:sp,shapeFlag:yp}=Ad;switch(Zd){case Text:to(md,Ad,Nd,Hd);break;case Comment:Xr(md,Ad,Nd,Hd);break;case Static:md==null&&co(Ad,Nd,Hd,rp);break;case Fragment:Td(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip);break;default:yp&1?Uo(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip):yp&6?Od(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip):(yp&64||yp&128)&&Zd.process(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip,_p)}sp!=null&&Kd&&setRef(sp,md&&md.ref,Qd,Ad||md,!Ad)},to=(md,Ad,Nd,Hd)=>{if(md==null)$e(Ad.el=Ye(Ad.children),Nd,Hd);else{const Kd=Ad.el=md.el;Ad.children!==md.children&&Qe(Kd,Ad.children)}},Xr=(md,Ad,Nd,Hd)=>{md==null?$e(Ad.el=Je(Ad.children||""),Nd,Hd):Ad.el=md.el},co=(md,Ad,Nd,Hd)=>{[md.el,md.anchor]=fn(md.children,Ad,Nd,Hd,md.el,md.anchor)},lo=({el:md,anchor:Ad},Nd,Hd)=>{let Kd;for(;md&&md!==Ad;)Kd=on(md),$e(md,Nd,Hd),md=Kd;$e(Ad,Nd,Hd)},fo=({el:md,anchor:Ad})=>{let Nd;for(;md&&md!==Ad;)Nd=on(md),Ge(md),md=Nd;Ge(Ad)},Uo=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip)=>{Ad.type==="svg"?rp="svg":Ad.type==="math"&&(rp="mathml"),md==null?mo(Ad,Nd,Hd,Kd,Qd,rp,np,ip):fd(md,Ad,Kd,Qd,rp,np,ip)},mo=(md,Ad,Nd,Hd,Kd,Qd,rp,np)=>{let ip,Zd;const{props:sp,shapeFlag:yp,transition:bp,dirs:Cp}=md;if(ip=md.el=qe(md.type,Qd,sp&&sp.is,sp),yp&8?st(ip,md.children):yp&16&&od(md.children,ip,null,Hd,Kd,resolveChildrenNamespace(md,Qd),rp,np),Cp&&invokeDirectiveHook(md,null,Hd,"created"),rd(ip,md,md.scopeId,rp,Hd),sp){for(const Lp in sp)Lp!=="value"&&!isReservedProp(Lp)&&Ke(ip,Lp,null,sp[Lp],Qd,md.children,Hd,Kd,Jd);"value"in sp&&Ke(ip,"value",null,sp.value,Qd),(Zd=sp.onVnodeBeforeMount)&&invokeVNodeHook(Zd,Hd,md)}Cp&&invokeDirectiveHook(md,null,Hd,"beforeMount");const Dp=needTransition(Kd,bp);Dp&&bp.beforeEnter(ip),$e(ip,Ad,Nd),((Zd=sp&&sp.onVnodeMounted)||Dp||Cp)&&queuePostRenderEffect(()=>{Zd&&invokeVNodeHook(Zd,Hd,md),Dp&&bp.enter(ip),Cp&&invokeDirectiveHook(md,null,Hd,"mounted")},Kd)},rd=(md,Ad,Nd,Hd,Kd)=>{if(Nd&&sn(md,Nd),Hd)for(let Qd=0;Qd<Hd.length;Qd++)sn(md,Hd[Qd]);if(Kd){let Qd=Kd.subTree;if(Ad===Qd){const rp=Kd.vnode;rd(md,rp,rp.scopeId,rp.slotScopeIds,Kd.parent)}}},od=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip=0)=>{for(let Zd=ip;Zd<md.length;Zd++){const sp=md[Zd]=np?cloneIfMounted(md[Zd]):normalizeVNode(md[Zd]);hn(null,sp,Ad,Nd,Hd,Kd,Qd,rp,np)}},fd=(md,Ad,Nd,Hd,Kd,Qd,rp)=>{const np=Ad.el=md.el;let{patchFlag:ip,dynamicChildren:Zd,dirs:sp}=Ad;ip|=md.patchFlag&16;const yp=md.props||EMPTY_OBJ,bp=Ad.props||EMPTY_OBJ;let Cp;if(Nd&&toggleRecurse(Nd,!1),(Cp=bp.onVnodeBeforeUpdate)&&invokeVNodeHook(Cp,Nd,Ad,md),sp&&invokeDirectiveHook(Ad,md,Nd,"beforeUpdate"),Nd&&toggleRecurse(Nd,!0),Zd?hd(md.dynamicChildren,Zd,np,Nd,Hd,resolveChildrenNamespace(Ad,Kd),Qd):rp||_d(md,Ad,np,null,Nd,Hd,resolveChildrenNamespace(Ad,Kd),Qd,!1),ip>0){if(ip&16)vd(np,Ad,yp,bp,Nd,Hd,Kd);else if(ip&2&&yp.class!==bp.class&&Ke(np,"class",null,bp.class,Kd),ip&4&&Ke(np,"style",yp.style,bp.style,Kd),ip&8){const Dp=Ad.dynamicProps;for(let Lp=0;Lp<Dp.length;Lp++){const Mp=Dp[Lp],jp=yp[Mp],ev=bp[Mp];(ev!==jp||Mp==="value")&&Ke(np,Mp,jp,ev,Kd,md.children,Nd,Hd,Jd)}}ip&1&&md.children!==Ad.children&&st(np,Ad.children)}else!rp&&Zd==null&&vd(np,Ad,yp,bp,Nd,Hd,Kd);((Cp=bp.onVnodeUpdated)||sp)&&queuePostRenderEffect(()=>{Cp&&invokeVNodeHook(Cp,Nd,Ad,md),sp&&invokeDirectiveHook(Ad,md,Nd,"updated")},Hd)},hd=(md,Ad,Nd,Hd,Kd,Qd,rp)=>{for(let np=0;np<Ad.length;np++){const ip=md[np],Zd=Ad[np],sp=ip.el&&(ip.type===Fragment||!isSameVNodeType(ip,Zd)||ip.shapeFlag&70)?Mt(ip.el):Nd;hn(ip,Zd,sp,null,Hd,Kd,Qd,rp,!0)}},vd=(md,Ad,Nd,Hd,Kd,Qd,rp)=>{if(Nd!==Hd){if(Nd!==EMPTY_OBJ)for(const np in Nd)!isReservedProp(np)&&!(np in Hd)&&Ke(md,np,Nd[np],null,rp,Ad.children,Kd,Qd,Jd);for(const np in Hd){if(isReservedProp(np))continue;const ip=Hd[np],Zd=Nd[np];ip!==Zd&&np!=="value"&&Ke(md,np,Zd,ip,rp,Ad.children,Kd,Qd,Jd)}"value"in Hd&&Ke(md,"value",Nd.value,Hd.value,rp)}},Td=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip)=>{const Zd=Ad.el=md?md.el:Ye(""),sp=Ad.anchor=md?md.anchor:Ye("");let{patchFlag:yp,dynamicChildren:bp,slotScopeIds:Cp}=Ad;Cp&&(np=np?np.concat(Cp):Cp),md==null?($e(Zd,Nd,Hd),$e(sp,Nd,Hd),od(Ad.children||[],Nd,sp,Kd,Qd,rp,np,ip)):yp>0&&yp&64&&bp&&md.dynamicChildren?(hd(md.dynamicChildren,bp,Nd,Kd,Qd,rp,np),(Ad.key!=null||Kd&&Ad===Kd.subTree)&&traverseStaticChildren(md,Ad,!0)):_d(md,Ad,Nd,sp,Kd,Qd,rp,np,ip)},Od=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip)=>{Ad.slotScopeIds=np,md==null?Ad.shapeFlag&512?Kd.ctx.activate(Ad,Nd,Hd,rp,ip):Md(Ad,Nd,Hd,Kd,Qd,rp,ip):Fd(md,Ad,ip)},Md=(md,Ad,Nd,Hd,Kd,Qd,rp)=>{const np=md.component=createComponentInstance(md,Hd,Kd);if(isKeepAlive(md)&&(np.ctx.renderer=_p),setupComponent(np),np.asyncDep){if(Kd&&Kd.registerDep(np,Ud),!md.el){const ip=np.subTree=createVNode(Comment);Xr(null,ip,Ad,Nd)}}else Ud(np,md,Ad,Nd,Kd,Qd,rp)},Fd=(md,Ad,Nd)=>{const Hd=Ad.component=md.component;if(shouldUpdateComponent(md,Ad,Nd))if(Hd.asyncDep&&!Hd.asyncResolved){pd(Hd,Ad,Nd);return}else Hd.next=Ad,invalidateJob(Hd.update),Hd.effect.dirty=!0,Hd.update();else Ad.el=md.el,Hd.vnode=Ad},Ud=(md,Ad,Nd,Hd,Kd,Qd,rp)=>{const np=()=>{if(md.isMounted){let{next:sp,bu:yp,u:bp,parent:Cp,vnode:Dp}=md;{const ap=locateNonHydratedAsyncRoot(md);if(ap){sp&&(sp.el=Dp.el,pd(md,sp,rp)),ap.asyncDep.then(()=>{md.isUnmounted||np()});return}}let Lp=sp,Mp;toggleRecurse(md,!1),sp?(sp.el=Dp.el,pd(md,sp,rp)):sp=Dp,yp&&invokeArrayFns(yp),(Mp=sp.props&&sp.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Mp,Cp,sp,Dp),toggleRecurse(md,!0);const jp=renderComponentRoot(md),ev=md.subTree;md.subTree=jp,hn(ev,jp,Mt(ev.el),cp(ev),md,Kd,Qd),sp.el=jp.el,Lp===null&&updateHOCHostEl(md,jp.el),bp&&queuePostRenderEffect(bp,Kd),(Mp=sp.props&&sp.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Mp,Cp,sp,Dp),Kd)}else{let sp;const{el:yp,props:bp}=Ad,{bm:Cp,m:Dp,parent:Lp}=md,Mp=isAsyncWrapper(Ad);if(toggleRecurse(md,!1),Cp&&invokeArrayFns(Cp),!Mp&&(sp=bp&&bp.onVnodeBeforeMount)&&invokeVNodeHook(sp,Lp,Ad),toggleRecurse(md,!0),yp&&wp){const jp=()=>{md.subTree=renderComponentRoot(md),wp(yp,md.subTree,md,Kd,null)};Mp?Ad.type.__asyncLoader().then(()=>!md.isUnmounted&&jp()):jp()}else{const jp=md.subTree=renderComponentRoot(md);hn(null,jp,Nd,Hd,md,Kd,Qd),Ad.el=jp.el}if(Dp&&queuePostRenderEffect(Dp,Kd),!Mp&&(sp=bp&&bp.onVnodeMounted)){const jp=Ad;queuePostRenderEffect(()=>invokeVNodeHook(sp,Lp,jp),Kd)}(Ad.shapeFlag&256||Lp&&isAsyncWrapper(Lp.vnode)&&Lp.vnode.shapeFlag&256)&&md.a&&queuePostRenderEffect(md.a,Kd),md.isMounted=!0,Ad=Nd=Hd=null}},ip=md.effect=new ReactiveEffect(np,NOOP,()=>queueJob(Zd),md.scope),Zd=md.update=()=>{ip.dirty&&ip.run()};Zd.id=md.uid,toggleRecurse(md,!0),Zd()},pd=(md,Ad,Nd)=>{Ad.component=md;const Hd=md.vnode.props;md.vnode=Ad,md.next=null,updateProps(md,Ad.props,Hd,Nd),updateSlots(md,Ad.children,Nd),pauseTracking(),flushPreFlushCbs(md),resetTracking()},_d=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip=!1)=>{const Zd=md&&md.children,sp=md?md.shapeFlag:0,yp=Ad.children,{patchFlag:bp,shapeFlag:Cp}=Ad;if(bp>0){if(bp&128){$d(Zd,yp,Nd,Hd,Kd,Qd,rp,np,ip);return}else if(bp&256){Bd(Zd,yp,Nd,Hd,Kd,Qd,rp,np,ip);return}}Cp&8?(sp&16&&Jd(Zd,Kd,Qd),yp!==Zd&&st(Nd,yp)):sp&16?Cp&16?$d(Zd,yp,Nd,Hd,Kd,Qd,rp,np,ip):Jd(Zd,Kd,Qd,!0):(sp&8&&st(Nd,""),Cp&16&&od(yp,Nd,Hd,Kd,Qd,rp,np,ip))},Bd=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip)=>{md=md||EMPTY_ARR,Ad=Ad||EMPTY_ARR;const Zd=md.length,sp=Ad.length,yp=Math.min(Zd,sp);let bp;for(bp=0;bp<yp;bp++){const Cp=Ad[bp]=ip?cloneIfMounted(Ad[bp]):normalizeVNode(Ad[bp]);hn(md[bp],Cp,Nd,null,Kd,Qd,rp,np,ip)}Zd>sp?Jd(md,Kd,Qd,!0,!1,yp):od(Ad,Nd,Hd,Kd,Qd,rp,np,ip,yp)},$d=(md,Ad,Nd,Hd,Kd,Qd,rp,np,ip)=>{let Zd=0;const sp=Ad.length;let yp=md.length-1,bp=sp-1;for(;Zd<=yp&&Zd<=bp;){const Cp=md[Zd],Dp=Ad[Zd]=ip?cloneIfMounted(Ad[Zd]):normalizeVNode(Ad[Zd]);if(isSameVNodeType(Cp,Dp))hn(Cp,Dp,Nd,null,Kd,Qd,rp,np,ip);else break;Zd++}for(;Zd<=yp&&Zd<=bp;){const Cp=md[yp],Dp=Ad[bp]=ip?cloneIfMounted(Ad[bp]):normalizeVNode(Ad[bp]);if(isSameVNodeType(Cp,Dp))hn(Cp,Dp,Nd,null,Kd,Qd,rp,np,ip);else break;yp--,bp--}if(Zd>yp){if(Zd<=bp){const Cp=bp+1,Dp=Cp<sp?Ad[Cp].el:Hd;for(;Zd<=bp;)hn(null,Ad[Zd]=ip?cloneIfMounted(Ad[Zd]):normalizeVNode(Ad[Zd]),Nd,Dp,Kd,Qd,rp,np,ip),Zd++}}else if(Zd>bp)for(;Zd<=yp;)Pd(md[Zd],Kd,Qd,!0),Zd++;else{const Cp=Zd,Dp=Zd,Lp=new Map;for(Zd=Dp;Zd<=bp;Zd++){const Np=Ad[Zd]=ip?cloneIfMounted(Ad[Zd]):normalizeVNode(Ad[Zd]);Np.key!=null&&Lp.set(Np.key,Zd)}let Mp,jp=0;const ev=bp-Dp+1;let ap=!1,dp=0;const Ep=new Array(ev);for(Zd=0;Zd<ev;Zd++)Ep[Zd]=0;for(Zd=Cp;Zd<=yp;Zd++){const Np=md[Zd];if(jp>=ev){Pd(Np,Kd,Qd,!0);continue}let Zp;if(Np.key!=null)Zp=Lp.get(Np.key);else for(Mp=Dp;Mp<=bp;Mp++)if(Ep[Mp-Dp]===0&&isSameVNodeType(Np,Ad[Mp])){Zp=Mp;break}Zp===void 0?Pd(Np,Kd,Qd,!0):(Ep[Zp-Dp]=Zd+1,Zp>=dp?dp=Zp:ap=!0,hn(Np,Ad[Zp],Nd,null,Kd,Qd,rp,np,ip),jp++)}const Ap=ap?getSequence(Ep):EMPTY_ARR;for(Mp=Ap.length-1,Zd=ev-1;Zd>=0;Zd--){const Np=Dp+Zd,Zp=Ad[Np],vv=Np+1<sp?Ad[Np+1].el:Hd;Ep[Zd]===0?hn(null,Zp,Nd,vv,Kd,Qd,rp,np,ip):ap&&(Mp<0||Zd!==Ap[Mp]?jd(Zp,Nd,vv,2):Mp--)}}},jd=(md,Ad,Nd,Hd,Kd=null)=>{const{el:Qd,type:rp,transition:np,children:ip,shapeFlag:Zd}=md;if(Zd&6){jd(md.component.subTree,Ad,Nd,Hd);return}if(Zd&128){md.suspense.move(Ad,Nd,Hd);return}if(Zd&64){rp.move(md,Ad,Nd,_p);return}if(rp===Fragment){$e(Qd,Ad,Nd);for(let yp=0;yp<ip.length;yp++)jd(ip[yp],Ad,Nd,Hd);$e(md.anchor,Ad,Nd);return}if(rp===Static){lo(md,Ad,Nd);return}if(Hd!==2&&Zd&1&&np)if(Hd===0)np.beforeEnter(Qd),$e(Qd,Ad,Nd),queuePostRenderEffect(()=>np.enter(Qd),Kd);else{const{leave:yp,delayLeave:bp,afterLeave:Cp}=np,Dp=()=>$e(Qd,Ad,Nd),Lp=()=>{yp(Qd,()=>{Dp(),Cp&&Cp()})};bp?bp(Qd,Dp,Lp):Lp()}else $e(Qd,Ad,Nd)},Pd=(md,Ad,Nd,Hd=!1,Kd=!1)=>{const{type:Qd,props:rp,ref:np,children:ip,dynamicChildren:Zd,shapeFlag:sp,patchFlag:yp,dirs:bp}=md;if(np!=null&&setRef(np,null,Nd,md,!0),sp&256){Ad.ctx.deactivate(md);return}const Cp=sp&1&&bp,Dp=!isAsyncWrapper(md);let Lp;if(Dp&&(Lp=rp&&rp.onVnodeBeforeUnmount)&&invokeVNodeHook(Lp,Ad,md),sp&6)zd(md.component,Nd,Hd);else{if(sp&128){md.suspense.unmount(Nd,Hd);return}Cp&&invokeDirectiveHook(md,null,Ad,"beforeUnmount"),sp&64?md.type.remove(md,Ad,Nd,Kd,_p,Hd):Zd&&(Qd!==Fragment||yp>0&&yp&64)?Jd(Zd,Ad,Nd,!1,!0):(Qd===Fragment&&yp&384||!Kd&&sp&16)&&Jd(ip,Ad,Nd),Hd&&yd(md)}(Dp&&(Lp=rp&&rp.onVnodeUnmounted)||Cp)&&queuePostRenderEffect(()=>{Lp&&invokeVNodeHook(Lp,Ad,md),Cp&&invokeDirectiveHook(md,null,Ad,"unmounted")},Nd)},yd=md=>{const{type:Ad,el:Nd,anchor:Hd,transition:Kd}=md;if(Ad===Fragment){Ld(Nd,Hd);return}if(Ad===Static){fo(md);return}const Qd=()=>{Ge(Nd),Kd&&!Kd.persisted&&Kd.afterLeave&&Kd.afterLeave()};if(md.shapeFlag&1&&Kd&&!Kd.persisted){const{leave:rp,delayLeave:np}=Kd,ip=()=>rp(Nd,Qd);np?np(md.el,Qd,ip):ip()}else Qd()},Ld=(md,Ad)=>{let Nd;for(;md!==Ad;)Nd=on(md),Ge(md),md=Nd;Ge(Ad)},zd=(md,Ad,Nd)=>{const{bum:Hd,scope:Kd,update:Qd,subTree:rp,um:np}=md;Hd&&invokeArrayFns(Hd),Kd.stop(),Qd&&(Qd.active=!1,Pd(rp,md,Ad,Nd)),np&&queuePostRenderEffect(np,Ad),queuePostRenderEffect(()=>{md.isUnmounted=!0},Ad),Ad&&Ad.pendingBranch&&!Ad.isUnmounted&&md.asyncDep&&!md.asyncResolved&&md.suspenseId===Ad.pendingId&&(Ad.deps--,Ad.deps===0&&Ad.resolve())},Jd=(md,Ad,Nd,Hd=!1,Kd=!1,Qd=0)=>{for(let rp=Qd;rp<md.length;rp++)Pd(md[rp],Ad,Nd,Hd,Kd)},cp=md=>md.shapeFlag&6?cp(md.component.subTree):md.shapeFlag&128?md.suspense.next():on(md.anchor||md.el);let mp=!1;const gp=(md,Ad,Nd)=>{md==null?Ad._vnode&&Pd(Ad._vnode,null,null,!0):hn(Ad._vnode||null,md,Ad,null,null,null,Nd),mp||(mp=!0,flushPreFlushCbs(),flushPostFlushCbs(),mp=!1),Ad._vnode=md},_p={p:hn,um:Pd,m:jd,r:yd,mt:Md,mc:od,pc:_d,pbc:hd,n:cp,o:je};let vp,wp;return{render:gp,hydrate:vp,createApp:createAppAPI(gp,vp)}}function resolveChildrenNamespace({type:je,props:y},v){return v==="svg"&&je==="foreignObject"||v==="mathml"&&je==="annotation-xml"&&y&&y.encoding&&y.encoding.includes("html")?void 0:v}function toggleRecurse({effect:je,update:y},v){je.allowRecurse=y.allowRecurse=v}function needTransition(je,y){return(!je||je&&!je.pendingBranch)&&y&&!y.persisted}function traverseStaticChildren(je,y,v=!1){const $e=je.children,Ge=y.children;if(isArray($e)&&isArray(Ge))for(let Ke=0;Ke<$e.length;Ke++){const qe=$e[Ke];let Ye=Ge[Ke];Ye.shapeFlag&1&&!Ye.dynamicChildren&&((Ye.patchFlag<=0||Ye.patchFlag===32)&&(Ye=Ge[Ke]=cloneIfMounted(Ge[Ke]),Ye.el=qe.el),v||traverseStaticChildren(qe,Ye)),Ye.type===Text&&(Ye.el=qe.el)}}function getSequence(je){const y=je.slice(),v=[0];let $e,Ge,Ke,qe,Ye;const Je=je.length;for($e=0;$e<Je;$e++){const Qe=je[$e];if(Qe!==0){if(Ge=v[v.length-1],je[Ge]<Qe){y[$e]=Ge,v.push($e);continue}for(Ke=0,qe=v.length-1;Ke<qe;)Ye=Ke+qe>>1,je[v[Ye]]<Qe?Ke=Ye+1:qe=Ye;Qe<je[v[Ke]]&&(Ke>0&&(y[$e]=v[Ke-1]),v[Ke]=$e)}}for(Ke=v.length,qe=v[Ke-1];Ke-- >0;)v[Ke]=qe,qe=y[qe];return v}function locateNonHydratedAsyncRoot(je){const y=je.subTree.component;if(y)return y.asyncDep&&!y.asyncResolved?y:locateNonHydratedAsyncRoot(y)}const isTeleport=je=>je.__isTeleport,Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(je=!1){blockStack.push(currentBlock=je?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(je){isBlockTreeEnabled+=je}function setupBlock(je){return je.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(je),je}function createElementBlock(je,y,v,$e,Ge,Ke){return setupBlock(createBaseVNode(je,y,v,$e,Ge,Ke,!0))}function isVNode(je){return je?je.__v_isVNode===!0:!1}function isSameVNodeType(je,y){return je.type===y.type&&je.key===y.key}const normalizeKey=({key:je})=>je??null,normalizeRef=({ref:je,ref_key:y,ref_for:v})=>(typeof je=="number"&&(je=""+je),je!=null?isString(je)||isRef(je)||isFunction(je)?{i:currentRenderingInstance,r:je,k:y,f:!!v}:je:null);function createBaseVNode(je,y=null,v=null,$e=0,Ge=null,Ke=je===Fragment?0:1,qe=!1,Ye=!1){const Je={__v_isVNode:!0,__v_skip:!0,type:je,props:y,key:y&&normalizeKey(y),ref:y&&normalizeRef(y),scopeId:currentScopeId,slotScopeIds:null,children:v,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:Ke,patchFlag:$e,dynamicProps:Ge,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return Ye?(normalizeChildren(Je,v),Ke&128&&je.normalize(Je)):v&&(Je.shapeFlag|=isString(v)?8:16),isBlockTreeEnabled>0&&!qe&&currentBlock&&(Je.patchFlag>0||Ke&6)&&Je.patchFlag!==32&&currentBlock.push(Je),Je}const createVNode=_createVNode;function _createVNode(je,y=null,v=null,$e=0,Ge=null,Ke=!1){if((!je||je===NULL_DYNAMIC_COMPONENT)&&(je=Comment),isVNode(je)){const Ye=cloneVNode(je,y,!0);return v&&normalizeChildren(Ye,v),isBlockTreeEnabled>0&&!Ke&&currentBlock&&(Ye.shapeFlag&6?currentBlock[currentBlock.indexOf(je)]=Ye:currentBlock.push(Ye)),Ye.patchFlag|=-2,Ye}if(isClassComponent(je)&&(je=je.__vccOpts),y){y=guardReactiveProps(y);let{class:Ye,style:Je}=y;Ye&&!isString(Ye)&&(y.class=normalizeClass(Ye)),isObject(Je)&&(isProxy(Je)&&!isArray(Je)&&(Je=extend({},Je)),y.style=normalizeStyle(Je))}const qe=isString(je)?1:isSuspense(je)?128:isTeleport(je)?64:isObject(je)?4:isFunction(je)?2:0;return createBaseVNode(je,y,v,$e,Ge,qe,Ke,!0)}function guardReactiveProps(je){return je?isProxy(je)||isInternalObject(je)?extend({},je):je:null}function cloneVNode(je,y,v=!1){const{props:$e,ref:Ge,patchFlag:Ke,children:qe}=je,Ye=y?mergeProps($e||{},y):$e;return{__v_isVNode:!0,__v_skip:!0,type:je.type,props:Ye,key:Ye&&normalizeKey(Ye),ref:y&&y.ref?v&&Ge?isArray(Ge)?Ge.concat(normalizeRef(y)):[Ge,normalizeRef(y)]:normalizeRef(y):Ge,scopeId:je.scopeId,slotScopeIds:je.slotScopeIds,children:qe,target:je.target,targetAnchor:je.targetAnchor,staticCount:je.staticCount,shapeFlag:je.shapeFlag,patchFlag:y&&je.type!==Fragment?Ke===-1?16:Ke|16:Ke,dynamicProps:je.dynamicProps,dynamicChildren:je.dynamicChildren,appContext:je.appContext,dirs:je.dirs,transition:je.transition,component:je.component,suspense:je.suspense,ssContent:je.ssContent&&cloneVNode(je.ssContent),ssFallback:je.ssFallback&&cloneVNode(je.ssFallback),el:je.el,anchor:je.anchor,ctx:je.ctx,ce:je.ce}}function createTextVNode(je=" ",y=0){return createVNode(Text,null,je,y)}function normalizeVNode(je){return je==null||typeof je=="boolean"?createVNode(Comment):isArray(je)?createVNode(Fragment,null,je.slice()):typeof je=="object"?cloneIfMounted(je):createVNode(Text,null,String(je))}function cloneIfMounted(je){return je.el===null&&je.patchFlag!==-1||je.memo?je:cloneVNode(je)}function normalizeChildren(je,y){let v=0;const{shapeFlag:$e}=je;if(y==null)y=null;else if(isArray(y))v=16;else if(typeof y=="object")if($e&65){const Ge=y.default;Ge&&(Ge._c&&(Ge._d=!1),normalizeChildren(je,Ge()),Ge._c&&(Ge._d=!0));return}else{v=32;const Ge=y._;!Ge&&!isInternalObject(y)?y._ctx=currentRenderingInstance:Ge===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?y._=1:(y._=2,je.patchFlag|=1024))}else isFunction(y)?(y={default:y,_ctx:currentRenderingInstance},v=32):(y=String(y),$e&64?(v=16,y=[createTextVNode(y)]):v=8);je.children=y,je.shapeFlag|=v}function mergeProps(...je){const y={};for(let v=0;v<je.length;v++){const $e=je[v];for(const Ge in $e)if(Ge==="class")y.class!==$e.class&&(y.class=normalizeClass([y.class,$e.class]));else if(Ge==="style")y.style=normalizeStyle([y.style,$e.style]);else if(isOn(Ge)){const Ke=y[Ge],qe=$e[Ge];qe&&Ke!==qe&&!(isArray(Ke)&&Ke.includes(qe))&&(y[Ge]=Ke?[].concat(Ke,qe):qe)}else Ge!==""&&(y[Ge]=$e[Ge])}return y}function invokeVNodeHook(je,y,v,$e=null){callWithAsyncErrorHandling(je,y,7,[v,$e])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(je,y,v){const $e=je.type,Ge=(y?y.appContext:je.appContext)||emptyAppContext,Ke={uid:uid++,vnode:je,type:$e,parent:y,appContext:Ge,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:y?y.provides:Object.create(Ge.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions($e,Ge),emitsOptions:normalizeEmitsOptions($e,Ge),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:$e.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:v,suspenseId:v?v.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ke.ctx={_:Ke},Ke.root=y?y.root:Ke,Ke.emit=emit.bind(null,Ke),je.ce&&je.ce(Ke),Ke}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const je=getGlobalThis(),y=(v,$e)=>{let Ge;return(Ge=je[v])||(Ge=je[v]=[]),Ge.push($e),Ke=>{Ge.length>1?Ge.forEach(qe=>qe(Ke)):Ge[0](Ke)}};internalSetCurrentInstance=y("__VUE_INSTANCE_SETTERS__",v=>currentInstance=v),setInSSRSetupState=y("__VUE_SSR_SETTERS__",v=>isInSSRComponentSetup=v)}const setCurrentInstance=je=>{const y=currentInstance;return internalSetCurrentInstance(je),je.scope.on(),()=>{je.scope.off(),internalSetCurrentInstance(y)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(je){return je.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(je,y=!1){y&&setInSSRSetupState(y);const{props:v,children:$e}=je.vnode,Ge=isStatefulComponent(je);initProps(je,v,Ge,y),initSlots(je,$e);const Ke=Ge?setupStatefulComponent(je,y):void 0;return y&&setInSSRSetupState(!1),Ke}function setupStatefulComponent(je,y){const v=je.type;je.accessCache=Object.create(null),je.proxy=new Proxy(je.ctx,PublicInstanceProxyHandlers);const{setup:$e}=v;if($e){const Ge=je.setupContext=$e.length>1?createSetupContext(je):null,Ke=setCurrentInstance(je);pauseTracking();const qe=callWithErrorHandling($e,je,0,[je.props,Ge]);if(resetTracking(),Ke(),isPromise(qe)){if(qe.then(unsetCurrentInstance,unsetCurrentInstance),y)return qe.then(Ye=>{handleSetupResult(je,Ye,y)}).catch(Ye=>{handleError(Ye,je,0)});je.asyncDep=qe}else handleSetupResult(je,qe,y)}else finishComponentSetup(je,y)}function handleSetupResult(je,y,v){isFunction(y)?je.type.__ssrInlineRender?je.ssrRender=y:je.render=y:isObject(y)&&(je.setupState=proxyRefs(y)),finishComponentSetup(je,v)}let compile;function finishComponentSetup(je,y,v){const $e=je.type;if(!je.render){if(!y&&compile&&!$e.render){const Ge=$e.template||resolveMergedOptions(je).template;if(Ge){const{isCustomElement:Ke,compilerOptions:qe}=je.appContext.config,{delimiters:Ye,compilerOptions:Je}=$e,Qe=extend(extend({isCustomElement:Ke,delimiters:Ye},qe),Je);$e.render=compile(Ge,Qe)}}je.render=$e.render||NOOP}{const Ge=setCurrentInstance(je);pauseTracking();try{applyOptions(je)}finally{resetTracking(),Ge()}}}const attrsProxyHandlers={get(je,y){return track(je,"get",""),je[y]}};function createSetupContext(je){const y=v=>{je.exposed=v||{}};return{attrs:new Proxy(je.attrs,attrsProxyHandlers),slots:je.slots,emit:je.emit,expose:y}}function getExposeProxy(je){if(je.exposed)return je.exposeProxy||(je.exposeProxy=new Proxy(proxyRefs(markRaw(je.exposed)),{get(y,v){if(v in y)return y[v];if(v in publicPropertiesMap)return publicPropertiesMap[v](je)},has(y,v){return v in y||v in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=je=>je.replace(classifyRE,y=>y.toUpperCase()).replace(/[-_]/g,"");function getComponentName(je,y=!0){return isFunction(je)?je.displayName||je.name:je.name||y&&je.__name}function formatComponentName(je,y,v=!1){let $e=getComponentName(y);if(!$e&&y.__file){const Ge=y.__file.match(/([^/\\]+)\.\w+$/);Ge&&($e=Ge[1])}if(!$e&&je&&je.parent){const Ge=Ke=>{for(const qe in Ke)if(Ke[qe]===y)return qe};$e=Ge(je.components||je.parent.type.components)||Ge(je.appContext.components)}return $e?classify($e):v?"App":"Anonymous"}function isClassComponent(je){return isFunction(je)&&"__vccOpts"in je}const computed=(je,y)=>computed$1(je,y,isInSSRComponentSetup),version="3.4.25";/**
* @vue/runtime-dom v3.4.25
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(je,y,v)=>{y.insertBefore(je,v||null)},remove:je=>{const y=je.parentNode;y&&y.removeChild(je)},createElement:(je,y,v,$e)=>{const Ge=y==="svg"?doc.createElementNS(svgNS,je):y==="mathml"?doc.createElementNS(mathmlNS,je):doc.createElement(je,v?{is:v}:void 0);return je==="select"&&$e&&$e.multiple!=null&&Ge.setAttribute("multiple",$e.multiple),Ge},createText:je=>doc.createTextNode(je),createComment:je=>doc.createComment(je),setText:(je,y)=>{je.nodeValue=y},setElementText:(je,y)=>{je.textContent=y},parentNode:je=>je.parentNode,nextSibling:je=>je.nextSibling,querySelector:je=>doc.querySelector(je),setScopeId(je,y){je.setAttribute(y,"")},insertStaticContent(je,y,v,$e,Ge,Ke){const qe=v?v.previousSibling:y.lastChild;if(Ge&&(Ge===Ke||Ge.nextSibling))for(;y.insertBefore(Ge.cloneNode(!0),v),!(Ge===Ke||!(Ge=Ge.nextSibling)););else{templateContainer.innerHTML=$e==="svg"?`<svg>${je}</svg>`:$e==="mathml"?`<math>${je}</math>`:je;const Ye=templateContainer.content;if($e==="svg"||$e==="mathml"){const Je=Ye.firstChild;for(;Je.firstChild;)Ye.appendChild(Je.firstChild);Ye.removeChild(Je)}y.insertBefore(Ye,v)}return[qe?qe.nextSibling:y.firstChild,v?v.previousSibling:y.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(je,y,v){const $e=je[vtcKey];$e&&(y=(y?[y,...$e]:[...$e]).join(" ")),y==null?je.removeAttribute("class"):v?je.setAttribute("class",y):je.className=y}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(je,y,v){const $e=je.style,Ge=isString(v);let Ke=!1;if(v&&!Ge){if(y)if(isString(y))for(const qe of y.split(";")){const Ye=qe.slice(0,qe.indexOf(":")).trim();v[Ye]==null&&setStyle($e,Ye,"")}else for(const qe in y)v[qe]==null&&setStyle($e,qe,"");for(const qe in v)qe==="display"&&(Ke=!0),setStyle($e,qe,v[qe])}else if(Ge){if(y!==v){const qe=$e[CSS_VAR_TEXT];qe&&(v+=";"+qe),$e.cssText=v,Ke=displayRE.test(v)}}else y&&je.removeAttribute("style");vShowOriginalDisplay in je&&(je[vShowOriginalDisplay]=Ke?$e.display:"",je[vShowHidden]&&($e.display="none"))}const importantRE=/\s*!important$/;function setStyle(je,y,v){if(isArray(v))v.forEach($e=>setStyle(je,y,$e));else if(v==null&&(v=""),y.startsWith("--"))je.setProperty(y,v);else{const $e=autoPrefix(je,y);importantRE.test(v)?je.setProperty(hyphenate($e),v.replace(importantRE,""),"important"):je[$e]=v}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(je,y){const v=prefixCache[y];if(v)return v;let $e=camelize(y);if($e!=="filter"&&$e in je)return prefixCache[y]=$e;$e=capitalize($e);for(let Ge=0;Ge<prefixes.length;Ge++){const Ke=prefixes[Ge]+$e;if(Ke in je)return prefixCache[y]=Ke}return y}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(je,y,v,$e,Ge){if($e&&y.startsWith("xlink:"))v==null?je.removeAttributeNS(xlinkNS,y.slice(6,y.length)):je.setAttributeNS(xlinkNS,y,v);else{const Ke=isSpecialBooleanAttr(y);v==null||Ke&&!includeBooleanAttr(v)?je.removeAttribute(y):je.setAttribute(y,Ke?"":v)}}function patchDOMProp(je,y,v,$e,Ge,Ke,qe){if(y==="innerHTML"||y==="textContent"){$e&&qe($e,Ge,Ke),je[y]=v??"";return}const Ye=je.tagName;if(y==="value"&&Ye!=="PROGRESS"&&!Ye.includes("-")){const Qe=Ye==="OPTION"?je.getAttribute("value")||"":je.value,st=v??"";(Qe!==st||!("_value"in je))&&(je.value=st),v==null&&je.removeAttribute(y),je._value=v;return}let Je=!1;if(v===""||v==null){const Qe=typeof je[y];Qe==="boolean"?v=includeBooleanAttr(v):v==null&&Qe==="string"?(v="",Je=!0):Qe==="number"&&(v=0,Je=!0)}try{je[y]=v}catch{}Je&&je.removeAttribute(y)}function addEventListener(je,y,v,$e){je.addEventListener(y,v,$e)}function removeEventListener(je,y,v,$e){je.removeEventListener(y,v,$e)}const veiKey=Symbol("_vei");function patchEvent(je,y,v,$e,Ge=null){const Ke=je[veiKey]||(je[veiKey]={}),qe=Ke[y];if($e&&qe)qe.value=$e;else{const[Ye,Je]=parseName(y);if($e){const Qe=Ke[y]=createInvoker($e,Ge);addEventListener(je,Ye,Qe,Je)}else qe&&(removeEventListener(je,Ye,qe,Je),Ke[y]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(je){let y;if(optionsModifierRE.test(je)){y={};let $e;for(;$e=je.match(optionsModifierRE);)je=je.slice(0,je.length-$e[0].length),y[$e[0].toLowerCase()]=!0}return[je[2]===":"?je.slice(3):hyphenate(je.slice(2)),y]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(je,y){const v=$e=>{if(!$e._vts)$e._vts=Date.now();else if($e._vts<=v.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation($e,v.value),y,5,[$e])};return v.value=je,v.attached=getNow(),v}function patchStopImmediatePropagation(je,y){if(isArray(y)){const v=je.stopImmediatePropagation;return je.stopImmediatePropagation=()=>{v.call(je),je._stopped=!0},y.map($e=>Ge=>!Ge._stopped&&$e&&$e(Ge))}else return y}const isNativeOn=je=>je.charCodeAt(0)===111&&je.charCodeAt(1)===110&&je.charCodeAt(2)>96&&je.charCodeAt(2)<123,patchProp=(je,y,v,$e,Ge,Ke,qe,Ye,Je)=>{const Qe=Ge==="svg";y==="class"?patchClass(je,$e,Qe):y==="style"?patchStyle(je,v,$e):isOn(y)?isModelListener(y)||patchEvent(je,y,v,$e,qe):(y[0]==="."?(y=y.slice(1),!0):y[0]==="^"?(y=y.slice(1),!1):shouldSetAsProp(je,y,$e,Qe))?patchDOMProp(je,y,$e,Ke,qe,Ye,Je):(y==="true-value"?je._trueValue=$e:y==="false-value"&&(je._falseValue=$e),patchAttr(je,y,$e,Qe))};function shouldSetAsProp(je,y,v,$e){if($e)return!!(y==="innerHTML"||y==="textContent"||y in je&&isNativeOn(y)&&isFunction(v));if(y==="spellcheck"||y==="draggable"||y==="translate"||y==="form"||y==="list"&&je.tagName==="INPUT"||y==="type"&&je.tagName==="TEXTAREA")return!1;if(y==="width"||y==="height"){const Ge=je.tagName;if(Ge==="IMG"||Ge==="VIDEO"||Ge==="CANVAS"||Ge==="SOURCE")return!1}return isNativeOn(y)&&isString(v)?!1:y in je}const getModelAssigner=je=>{const y=je.props["onUpdate:modelValue"]||!1;return isArray(y)?v=>invokeArrayFns(y,v):y},assignKey=Symbol("_assign"),vModelSelect={deep:!0,created(je,{value:y,modifiers:{number:v}},$e){const Ge=isSet(y);addEventListener(je,"change",()=>{const Ke=Array.prototype.filter.call(je.options,qe=>qe.selected).map(qe=>v?looseToNumber(getValue(qe)):getValue(qe));je[assignKey](je.multiple?Ge?new Set(Ke):Ke:Ke[0]),je._assigning=!0,nextTick(()=>{je._assigning=!1})}),je[assignKey]=getModelAssigner($e)},mounted(je,{value:y,modifiers:{number:v}}){setSelected(je,y)},beforeUpdate(je,y,v){je[assignKey]=getModelAssigner(v)},updated(je,{value:y,modifiers:{number:v}}){je._assigning||setSelected(je,y)}};function setSelected(je,y,v){const $e=je.multiple,Ge=isArray(y);if(!($e&&!Ge&&!isSet(y))){for(let Ke=0,qe=je.options.length;Ke<qe;Ke++){const Ye=je.options[Ke],Je=getValue(Ye);if($e)if(Ge){const Qe=typeof Je;Qe==="string"||Qe==="number"?Ye.selected=y.some(st=>String(st)===String(Je)):Ye.selected=looseIndexOf(y,Je)>-1}else Ye.selected=y.has(Je);else if(looseEqual(getValue(Ye),y)){je.selectedIndex!==Ke&&(je.selectedIndex=Ke);return}}!$e&&je.selectedIndex!==-1&&(je.selectedIndex=-1)}}function getValue(je){return"_value"in je?je._value:je.value}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...je)=>{const y=ensureRenderer().createApp(...je),{mount:v}=y;return y.mount=$e=>{const Ge=normalizeContainer($e);if(!Ge)return;const Ke=y._component;!isFunction(Ke)&&!Ke.render&&!Ke.template&&(Ke.template=Ge.innerHTML),Ge.innerHTML="";const qe=v(Ge,!1,resolveRootNamespace(Ge));return Ge instanceof Element&&(Ge.removeAttribute("v-cloak"),Ge.setAttribute("data-v-app","")),qe},y};function resolveRootNamespace(je){if(je instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&je instanceof MathMLElement)return"mathml"}function normalizeContainer(je){return isString(je)?document.querySelector(je):je}function sleep(je){return new Promise(y=>setTimeout(y,je))}function countdownTimer(je,y){return new Promise(v=>{const $e=setInterval(()=>{if(je===0)return clearInterval($e),v(!0),!1;y&&y(je),je--},1e3)})}function getRandomElements(je,y){const v=je.slice(),$e=[];let Ge=v.length;const Ke=[];if(y>Ge)return null;for(;y--;){const qe=Math.floor(Math.random()*Ge);$e[y]=v[qe in Ke?Ke[qe]:qe],Ke[qe]=--Ge in Ke?Ke[Ge]:Ge}return $e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var t=function(je,y){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,$e){v.__proto__=$e}||function(v,$e){for(var Ge in $e)$e.hasOwnProperty(Ge)&&(v[Ge]=$e[Ge])})(je,y)};function e(je,y){function v(){this.constructor=je}t(je,y),je.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}function n(je,y,v,$e){return new(v||(v=Promise))(function(Ge,Ke){function qe(Qe){try{Je($e.next(Qe))}catch(st){Ke(st)}}function Ye(Qe){try{Je($e.throw(Qe))}catch(st){Ke(st)}}function Je(Qe){Qe.done?Ge(Qe.value):new v(function(st){st(Qe.value)}).then(qe,Ye)}Je(($e=$e.apply(je,[])).next())})}function r(je,y){var v,$e,Ge,Ke,qe={label:0,sent:function(){if(1&Ge[0])throw Ge[1];return Ge[1]},trys:[],ops:[]};return Ke={next:Ye(0),throw:Ye(1),return:Ye(2)},typeof Symbol=="function"&&(Ke[Symbol.iterator]=function(){return this}),Ke;function Ye(Je){return function(Qe){return function(st){if(v)throw new TypeError("Generator is already executing.");for(;qe;)try{if(v=1,$e&&(Ge=2&st[0]?$e.return:st[0]?$e.throw||((Ge=$e.return)&&Ge.call($e),0):$e.next)&&!(Ge=Ge.call($e,st[1])).done)return Ge;switch($e=0,Ge&&(st=[2&st[0],Ge.value]),st[0]){case 0:case 1:Ge=st;break;case 4:return qe.label++,{value:st[1],done:!1};case 5:qe.label++,$e=st[1],st=[0];continue;case 7:st=qe.ops.pop(),qe.trys.pop();continue;default:if(!(Ge=(Ge=qe.trys).length>0&&Ge[Ge.length-1])&&(st[0]===6||st[0]===2)){qe=0;continue}if(st[0]===3&&(!Ge||st[1]>Ge[0]&&st[1]<Ge[3])){qe.label=st[1];break}if(st[0]===6&&qe.label<Ge[1]){qe.label=Ge[1],Ge=st;break}if(Ge&&qe.label<Ge[2]){qe.label=Ge[2],qe.ops.push(st);break}Ge[2]&&qe.ops.pop(),qe.trys.pop();continue}st=y.call(je,qe)}catch(Mt){st=[6,Mt],$e=0}finally{v=Ge=0}if(5&st[0])throw st[1];return{value:st[0]?st[1]:void 0,done:!0}}([Je,Qe])}}}var o=function(){function je(y){this.global=y,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return je.prototype.setPlatform=function(y,v){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+v+"."),this.platformName=y,this.platform=v},je.prototype.registerFlag=function(y,v,$e){if(this.flagRegistry[y]={evaluationFn:v,setHook:$e},this.urlFlags[y]!=null){var Ge=this.urlFlags[y];console.warn("Setting feature override from URL "+y+": "+Ge+"."),this.set(y,Ge)}},je.prototype.get=function(y){return y in this.flags?this.flags[y]:(this.flags[y]=this.evaluateFlag(y),this.flags[y])},je.prototype.getNumber=function(y){return this.get(y)},je.prototype.getBool=function(y){return this.get(y)},je.prototype.getFlags=function(){return this.flags},Object.defineProperty(je.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),je.prototype.set=function(y,v){if(this.flagRegistry[y]==null)throw new Error("Cannot set flag "+y+" as it has not been registered.");this.flags[y]=v,this.flagRegistry[y].setHook!=null&&this.flagRegistry[y].setHook(v)},je.prototype.evaluateFlag=function(y){if(this.flagRegistry[y]==null)throw new Error("Cannot evaluate flag '"+y+"': no evaluation function found.");return this.flagRegistry[y].evaluationFn()},je.prototype.setFlags=function(y){this.flags=Object.assign({},y)},je.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},je.prototype.populateURLFlags=function(){var y=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var v,$e,Ge=(v=this.global.location.search,$e={},v.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(Ke){for(var qe=[],Ye=1;Ye<arguments.length;Ye++)qe[Ye-1]=arguments[Ye];return a($e,qe[0],qe[1]),qe.join("=")}),$e);"tfjsflags"in Ge&&Ge.tfjsflags.split(",").forEach(function(Ke){var qe=Ke.split(":"),Ye=qe[0],Je=qe[1];y.urlFlags[Ye]=function(Qe,st){if((st=st.toLowerCase())==="true"||st==="false")return st==="true";if(""+ +st===st)return+st;throw new Error("Could not parse value flag value "+st+" for flag "+Qe+".")}(Ye,Je)})}},je}();function a(je,y,v){je[decodeURIComponent(y)]=decodeURIComponent(v||"")}function i(){return s}var s=null,u=new Map,c=new Map;function l(je,y){var v=g(je,y);return u.get(v)}function h(je){return c.get(je)}function f(je){for(var y=u.entries(),v=[];;){var $e=y.next(),Ge=$e.done,Ke=$e.value;if(Ge)break;var qe=Ke[0],Ye=Ke[1];qe.split("_")[0]===je&&v.push(Ye)}return v}function d(je){var y=je.kernelName,v=je.backendName,$e=g(y,v);if(u.has($e))throw new Error("The kernel '"+y+"' for backend '"+v+"' is already registered");u.set($e,je)}function p(je){var y=je.kernelName;c.has(y)&&console.warn("Overriding the gradient for '"+y+"'"),c.set(y,je)}function g(je,y){return y+"_"+je}function x(je,y,v){return Math.max(je,Math.min(y,v))}function b(je){return je%2==0?je:je+1}function w(je){for(var y=0,v=0;v<je.length;v++)y+=je[v];return y}function C(je,y){if(!je)throw new Error(typeof y=="string"?y:y())}function E(je,y,v){v===void 0&&(v=""),C(S(je,y),function(){return v+" Shapes "+je+" and "+y+" must match"})}function R(je){C(je!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function I(je,y,v){if(y===void 0&&(y=[]),v===void 0&&(v=!1),y==null&&(y=[]),Array.isArray(je)||V(je)&&!v)for(var $e=0;$e<je.length;++$e)I(je[$e],y,v);else y.push(je);return y}function k(je){if(je.length===0)return 1;for(var y=je[0],v=1;v<je.length;v++)y*=je[v];return y}function S(je,y){if(je===y)return!0;if(je==null||y==null||je.length!==y.length)return!1;for(var v=0;v<je.length;v++)if(je[v]!==y[v])return!1;return!0}function A(je){return je%1==0}function D(je){if(Math.tanh!=null)return Math.tanh(je);if(je===1/0)return 1;if(je===-1/0)return-1;var y=Math.exp(2*je);return(y-1)/(y+1)}function T(je){var y=Math.ceil(Math.sqrt(je));return[y,Math.ceil(je/y)]}function N(je,y){return y<=je.length?je:je+" ".repeat(y-je.length)}function F(je,y,v){return y===void 0&&(y=function($e){return 0}),new Promise(function($e,Ge){var Ke=0,qe=function(){if(je())$e();else{Ke++;var Ye=y(Ke);v!=null&&Ke>=v?Ge():setTimeout(qe,Ye)}};qe()})}function _(je,y){for(var v=1,$e=-1,Ge=0;Ge<je.length;++Ge)if(je[Ge]>=0)v*=je[Ge];else if(je[Ge]===-1){if($e!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+$e+" and dim "+Ge);$e=Ge}else if(je[Ge]<0)throw Error("Shapes can not be < 0. Found "+je[Ge]+" at dim "+Ge);if($e===-1){if(y>0&&y!==v)throw Error("Size("+y+") must match the product of shape "+je);return je}if(v===0)throw Error("Cannot infer the missing size in ["+je+"] when there are 0 elements");if(y%v!=0)throw Error("The implicit shape can't be a fractional number. Got "+y+" / "+v);var Ke=je.slice();return Ke[$e]=y/v,Ke}function O(je,y){var v=y.length;return C((je=je==null?y.map(function($e,Ge){return Ge}):[].concat(je)).every(function($e){return $e>=-v&&$e<v}),function(){return"All values in axis param must be in range [-"+v+", "+v+") but got axis "+je}),C(je.every(function($e){return A($e)}),function(){return"All values in axis param must be integers but got axis "+je}),je.map(function($e){return $e<0?v+$e:$e})}function M(je,y){for(var v=[],$e=[],Ge=y!=null&&Array.isArray(y)&&y.length===0,Ke=y==null||Ge?null:O(y,je).sort(),qe=0,Ye=0;Ye<je.length;++Ye){if(Ke!=null){if(Ke[qe]===Ye&&je[Ye]!==1)throw new Error("Can't squeeze axis "+Ye+" since its dim '"+je[Ye]+"' is not 1");(Ke[qe]==null||Ke[qe]>Ye)&&je[Ye]===1&&(v.push(je[Ye]),$e.push(Ye)),Ke[qe]<=Ye&&qe++}je[Ye]!==1&&(v.push(je[Ye]),$e.push(Ye))}return{newShape:v,keptDims:$e}}function B(je,y){var v=null;if(je==null||je==="float32")v=new Float32Array(y);else if(je==="int32")v=new Int32Array(y);else{if(je!=="bool")throw new Error("Unknown data type "+je);v=new Uint8Array(y)}return v}function P(je,y){var v=null;if(je==null||je==="float32")v=new Float32Array(y);else if(je==="int32")v=new Int32Array(y);else if(je==="bool")v=new Uint8Array(y);else{if(je!=="string")throw new Error("Unknown data type "+je);v=new Array(y)}return v}function L(je,y){for(var v=0;v<je.length;v++){var $e=je[v];if(isNaN($e)||!isFinite($e))throw Error("A tensor of type "+y+" being uploaded contains "+$e+".")}}function W(je){return je==="bool"||je==="complex64"||je==="float32"||je==="int32"||je==="string"}function U(je,y){return y!=="complex64"&&(y!=="float32"||je==="complex64")&&(y!=="int32"||je==="float32"||je==="complex64")&&(y!=="bool"||je!=="bool")}function V(je){return je instanceof Float32Array||je instanceof Int32Array||je instanceof Uint8Array}function z(je){if(je==="float32"||je==="int32")return 4;if(je==="complex64")return 8;if(je==="bool")return 1;throw new Error("Unknown dtype "+je)}function G(je){if(je==null)return 0;var y=0;return je.forEach(function(v){return y+=v.length}),y}function H(je){return typeof je=="string"||je instanceof String}function q(je){return typeof je=="boolean"}function K(je){return typeof je=="number"}function j(je){return Array.isArray(je)?j(je[0]):je instanceof Float32Array?"float32":je instanceof Int32Array||je instanceof Uint8Array?"int32":K(je)?"float32":H(je)?"string":q(je)?"bool":"float32"}function X(je){return!!(je&&je.constructor&&je.call&&je.apply)}function Y(je,y){for(var v=y;v<je;++v)if(je%v==0)return v;return je}function $(je){var y=je.length;if(y<2)return[];var v=new Array(y-1);v[y-2]=je[y-1];for(var $e=y-3;$e>=0;--$e)v[$e]=v[$e+1]*je[$e+1];return v}function Q(je,y,v){if(y==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(je)&&(je=I(je)),v&&L(je,y),function(Ke,qe){return Ke instanceof Float32Array&&qe==="float32"||Ke instanceof Int32Array&&qe==="int32"||Ke instanceof Uint8Array&&qe==="bool"}(je,y))return je;if(y==null||y==="float32"||y==="complex64")return new Float32Array(je);if(y==="int32")return new Int32Array(je);if(y==="bool"){for(var $e=new Uint8Array(je.length),Ge=0;Ge<$e.length;++Ge)Math.round(je[Ge])!==0&&($e[Ge]=1);return $e}throw new Error("Unknown data type "+y)}function J(je,y){if(je.length===0)return y[0];var v=je.reduce(function($e,Ge){return $e*Ge});if(v===0)return[];if(v!==y.length)throw new Error("["+je+"] does not match the input size.");return function $e(Ge,Ke,qe){var Ye=new Array;if(Ke.length===1)for(var Je=Ke[0],Qe=0;Qe<Je;Qe++)Ye[Qe]=qe[Ge+Qe];else{Je=Ke[0];var st=Ke.slice(1),Mt=st.reduce(function(on,sn){return on*sn});for(Qe=0;Qe<Je;Qe++)Ye[Qe]=$e(Ge+Qe*Mt,st,qe)}return Ye}(0,je,y)}function Z(je,y){for(var v=tt(je,y),$e=0;$e<v.length;$e++)v[$e]=1;return v}function tt(je,y){if(y==null||y==="float32"||y==="complex64")return new Float32Array(je);if(y==="int32")return new Int32Array(je);if(y==="bool")return new Uint8Array(je);throw new Error("Unknown data type "+y)}function et(){return i().platform.now()}function nt(je){je.forEach(function(y){C(Number.isInteger(y)&&y>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+je+"]."})})}function rt(je,y){return y===void 0&&(y="utf-8"),y=y||"utf-8",i().platform.encode(je,y)}function ot(je,y){return y===void 0&&(y="utf-8"),y=y||"utf-8",i().platform.decode(je,y)}function at(je,y,v){if(y===0)return 0;if(y===1)return je[0];for(var $e=je[je.length-1],Ge=0;Ge<je.length-1;++Ge)$e+=v[Ge]*je[Ge];return $e}function it(je,y,v){if(y===0)return[];if(y===1)return[je];for(var $e=new Array(y),Ge=0;Ge<$e.length-1;++Ge)$e[Ge]=Math.floor(je/v[Ge]),je-=$e[Ge]*v[Ge];return $e[$e.length-1]=je,$e}var ut=function(){function je(y,v){this.backendTimer=y,this.logger=v,v==null&&(this.logger=new ct)}return je.prototype.profileKernel=function(y,v,$e){var Ge,Ke=this,qe=this.backendTimer.time(function(){Ge=$e()});return Ge.forEach(function(Ye){Ye.data().then(function(Je){(function(Qe,st,Mt){if(st!=="float32")return!1;for(var on=0;on<Qe.length;on++){var sn=Qe[on];if(isNaN(sn)||!isFinite(sn))return console.warn("Found "+sn+" in the result of '"+Mt+"'"),!0}})(Je,Ye.dtype,y),qe.then(function(Qe){var st="";Qe.getExtraProfileInfo!=null&&(st=Qe.getExtraProfileInfo()),Ke.logger.logKernelProfile(y,Ye,Je,Qe.kernelMs,v,st)})})}),Ge},je}(),ct=function(){function je(){}return je.prototype.logKernelProfile=function(y,v,$e,Ge,Ke,qe){var Ye=typeof Ge=="number"?N(Ge+"ms",9):Ge.error,Je=N(y,25),Qe=v.rank,st=v.size,Mt=N(v.shape.toString(),14),on="";for(var sn in Ke){var fn=Ke[sn].shape||v.shape,hn=fn.length;on+=sn+": "+hn+"D "+(hn>0?fn:"")+" "}console.log("%c"+Je+"	%c"+Ye+"	%c"+Qe+"D "+Mt+"	%c"+st+"	%c"+on+"	%c"+qe,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},je}(),lt=20,ht=3,ft=7;function dt(je,y,v,$e){var Ge=$(y),Ke=function(Qe,st,Mt,on){var sn=k(st),fn=on[on.length-1],hn=new Array(fn).fill(0),to=st.length,Xr=Mt==="complex64"?mt(Qe):Qe;if(to>1)for(var co=0;co<sn/fn;co++)for(var lo=co*fn,fo=0;fo<fn;fo++)hn[fo]=Math.max(hn[fo],pt(Xr[lo+fo],0,Mt).length);return hn}(je,y,v,Ge),qe=y.length,Ye=function Qe(st,Mt,on,sn,fn,hn){hn===void 0&&(hn=!0);var to=on==="complex64"?2:1,Xr=Mt[0],co=Mt.length;if(co===0)return on==="complex64"?[pt(mt(st)[0],0,on)]:on==="bool"?[vt(st[0])]:[st[0].toString()];if(co===1){if(Xr>lt){var lo=ht*to,fo=Array.from(st.slice(0,lo)),Uo=Array.from(st.slice((Xr-ht)*to,Xr*to));return on==="complex64"&&(fo=mt(fo),Uo=mt(Uo)),["["+fo.map(function(Fd,Ud){return pt(Fd,fn[Ud],on)}).join(", ")+", ..., "+Uo.map(function(Fd,Ud){return pt(Fd,fn[Xr-ht+Ud],on)}).join(", ")+"]"]}return["["+(on==="complex64"?mt(st):Array.from(st)).map(function(Fd,Ud){return pt(Fd,fn[Ud],on)}).join(", ")+"]"]}var mo=Mt.slice(1),rd=sn.slice(1),od=sn[0]*to,fd=[];if(Xr>lt){for(var hd=0;hd<ht;hd++){var vd=(Td=hd*od)+od;fd.push.apply(fd,Qe(st.slice(Td,vd),mo,on,rd,fn,!1))}for(fd.push("..."),hd=Xr-ht;hd<Xr;hd++)vd=(Td=hd*od)+od,fd.push.apply(fd,Qe(st.slice(Td,vd),mo,on,rd,fn,hd===Xr-1))}else for(hd=0;hd<Xr;hd++){var Td;vd=(Td=hd*od)+od,fd.push.apply(fd,Qe(st.slice(Td,vd),mo,on,rd,fn,hd===Xr-1))}var Od=co===2?",":"";for(fd[0]="["+fd[0]+Od,hd=1;hd<fd.length-1;hd++)fd[hd]=" "+fd[hd]+Od;var Md=`,
`;for(hd=2;hd<co;hd++)Md+=`
`;return fd[fd.length-1]=" "+fd[fd.length-1]+"]"+(hn?"":Md),fd}(je,y,v,Ge,Ke),Je=["Tensor"];return $e&&(Je.push("  dtype: "+v),Je.push("  rank: "+qe),Je.push("  shape: ["+y+"]"),Je.push("  values:")),Je.push(Ye.map(function(Qe){return"    "+Qe}).join(`
`)),Je.join(`
`)}function pt(je,y,v){return N(Array.isArray(je)?parseFloat(je[0].toFixed(ft))+" + "+parseFloat(je[1].toFixed(ft))+"j":H(je)?"'"+je+"'":v==="bool"?vt(je):parseFloat(je.toFixed(ft)).toString(),y)}function vt(je){return je===0?"false":"true"}function mt(je){for(var y=[],v=0;v<je.length;v+=2)y.push([je[v],je[v+1]]);return y}var gt=function(){function je(y,v,$e){var Ge=this;if(this.dtype=v,this.shape=y.slice(),this.size=k(y),$e!=null){var Ke=$e.length;C(Ke===this.size,function(){return"Length of values '"+Ke+"' does not match the size inferred by the shape '"+Ge.size+"'."})}if(v==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=$e||P(v,this.size),this.strides=$(y)}return je.prototype.set=function(y){for(var v=this,$e=[],Ge=1;Ge<arguments.length;Ge++)$e[Ge-1]=arguments[Ge];$e.length===0&&($e=[0]),C($e.length===this.rank,function(){return"The number of provided coordinates ("+$e.length+") must match the rank ("+v.rank+")"});var Ke=this.locToIndex($e);this.values[Ke]=y},je.prototype.get=function(){for(var y=[],v=0;v<arguments.length;v++)y[v]=arguments[v];y.length===0&&(y=[0]);for(var $e=0,Ge=0,Ke=y;Ge<Ke.length;Ge++){var qe=Ke[Ge];if(qe<0||qe>=this.shape[$e]){var Ye="Requested out of range element at "+y+".   Buffer shape="+this.shape;throw new Error(Ye)}$e++}for(var Je=y[y.length-1],Qe=0;Qe<y.length-1;++Qe)Je+=this.strides[Qe]*y[Qe];return this.values[Je]},je.prototype.locToIndex=function(y){if(this.rank===0)return 0;if(this.rank===1)return y[0];for(var v=y[y.length-1],$e=0;$e<y.length-1;++$e)v+=this.strides[$e]*y[$e];return v},je.prototype.indexToLoc=function(y){if(this.rank===0)return[];if(this.rank===1)return[y];for(var v=new Array(this.shape.length),$e=0;$e<v.length-1;++$e)v[$e]=Math.floor(y/this.strides[$e]),y-=v[$e]*this.strides[$e];return v[v.length-1]=y,v},Object.defineProperty(je.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),je.prototype.toTensor=function(){return yt().makeTensor(this.values,this.shape,this.dtype)},je}(),yt=null,xt=null,bt=null,wt=function(){function je(y,v,$e,Ge){this.kept=!1,this.isDisposedInternal=!1,this.shape=y.slice(),this.dtype=v||"float32",this.size=k(y),this.strides=$(y),this.dataId=$e,this.id=Ge,this.rankType=this.rank<5?this.rank.toString():"higher"}return je.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},je.prototype.asScalar=function(){return this.throwIfDisposed(),C(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},je.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},je.prototype.as2D=function(y,v){return this.throwIfDisposed(),this.reshape([y,v])},je.prototype.as3D=function(y,v,$e){return this.throwIfDisposed(),this.reshape([y,v,$e])},je.prototype.as4D=function(y,v,$e,Ge){return this.throwIfDisposed(),this.reshape([y,v,$e,Ge])},je.prototype.as5D=function(y,v,$e,Ge,Ke){return this.throwIfDisposed(),this.reshape([y,v,$e,Ge,Ke])},je.prototype.asType=function(y){return this.throwIfDisposed(),xt.cast(this,y)},Object.defineProperty(je.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),je.prototype.buffer=function(){return n(this,void 0,void 0,function(){var y;return r(this,function(v){switch(v.label){case 0:return[4,this.data()];case 1:return y=v.sent(),[2,xt.buffer(this.shape,this.dtype,y)]}})})},je.prototype.bufferSync=function(){return xt.buffer(this.shape,this.dtype,this.dataSync())},je.prototype.array=function(){return n(this,void 0,void 0,function(){var y;return r(this,function(v){switch(v.label){case 0:return[4,this.data()];case 1:return y=v.sent(),[2,J(this.shape,y)]}})})},je.prototype.arraySync=function(){return J(this.shape,this.dataSync())},je.prototype.data=function(){return n(this,void 0,void 0,function(){var y,v;return r(this,function($e){switch($e.label){case 0:return this.throwIfDisposed(),y=yt().read(this.dataId),this.dtype!=="string"?[3,2]:[4,y];case 1:v=$e.sent();try{return[2,v.map(function(Ge){return ot(Ge)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}$e.label=2;case 2:return[2,y]}})})},je.prototype.dataSync=function(){this.throwIfDisposed();var y=yt().readSync(this.dataId);if(this.dtype==="string")try{return y.map(function(v){return ot(v)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return y},je.prototype.bytes=function(){return n(this,void 0,void 0,function(){var y;return r(this,function(v){switch(v.label){case 0:return this.throwIfDisposed(),[4,yt().read(this.dataId)];case 1:return y=v.sent(),this.dtype==="string"?[2,y]:[2,new Uint8Array(y.buffer)]}})})},je.prototype.dispose=function(){this.isDisposed||(yt().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(je.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),je.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},je.prototype.toFloat=function(){return this.asType("float32")},je.prototype.toInt=function(){return this.asType("int32")},je.prototype.toBool=function(){return this.asType("bool")},je.prototype.print=function(y){return y===void 0&&(y=!1),xt.print(this,y)},je.prototype.reshape=function(y){return this.throwIfDisposed(),xt.reshape(this,y)},je.prototype.reshapeAs=function(y){return this.throwIfDisposed(),this.reshape(y.shape)},je.prototype.expandDims=function(y){return y===void 0&&(y=0),xt.expandDims(this,y)},je.prototype.cumsum=function(y,v,$e){return y===void 0&&(y=0),v===void 0&&(v=!1),$e===void 0&&($e=!1),xt.cumsum(this,y,v,$e)},je.prototype.squeeze=function(y){return this.throwIfDisposed(),xt.squeeze(this,y)},je.prototype.clone=function(){return this.throwIfDisposed(),xt.clone(this)},je.prototype.oneHot=function(y,v,$e){return this.throwIfDisposed(),xt.oneHot(this,y,v,$e)},je.prototype.toString=function(y){return y===void 0&&(y=!1),dt(this.dataSync(),this.shape,this.dtype,y)},je.prototype.tile=function(y){return this.throwIfDisposed(),xt.tile(this,y)},je.prototype.gather=function(y,v){return v===void 0&&(v=0),this.throwIfDisposed(),xt.gather(this,y,v)},je.prototype.matMul=function(y,v,$e){return v===void 0&&(v=!1),$e===void 0&&($e=!1),this.throwIfDisposed(),xt.matMul(this,y,v,$e)},je.prototype.dot=function(y){return this.throwIfDisposed(),xt.dot(this,y)},je.prototype.norm=function(y,v,$e){return y===void 0&&(y="euclidean"),v===void 0&&(v=null),$e===void 0&&($e=!1),this.throwIfDisposed(),xt.norm(this,y,v,$e)},je.prototype.slice=function(y,v){return this.throwIfDisposed(),xt.slice(this,y,v)},je.prototype.reverse=function(y){return this.throwIfDisposed(),xt.reverse(this,y)},je.prototype.concat=function(y,v){return v===void 0&&(v=0),this.throwIfDisposed(),y instanceof je&&(y=[y]),xt.concat([this].concat(y),v)},je.prototype.split=function(y,v){return v===void 0&&(v=0),this.throwIfDisposed(),xt.split(this,y,v)},je.prototype.stack=function(y,v){return v===void 0&&(v=0),xt.stack([this,y],v)},je.prototype.unstack=function(y){return y===void 0&&(y=0),xt.unstack(this,y)},je.prototype.pad=function(y,v){return v===void 0&&(v=0),xt.pad(this,y,v)},je.prototype.batchNormalization=function(y,v,$e,Ge,Ke){return $e===void 0&&($e=.001),bt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(y,v,Ke,Ge,$e)},je.prototype.batchNorm=function(y,v,$e,Ge,Ke){return Ke===void 0&&(Ke=.001),this.throwIfDisposed(),xt.batchNorm(this,y,v,$e,Ge,Ke)},je.prototype.all=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.all(this,y,v)},je.prototype.any=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.any(this,y,v)},je.prototype.logSumExp=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.logSumExp(this,y,v)},je.prototype.sum=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.sum(this,y,v)},je.prototype.prod=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.prod(this,y,v)},je.prototype.mean=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.mean(this,y,v)},je.prototype.min=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.min(this,y,v)},je.prototype.max=function(y,v){return y===void 0&&(y=null),v===void 0&&(v=!1),this.throwIfDisposed(),xt.max(this,y,v)},je.prototype.argMin=function(y){return y===void 0&&(y=null),this.throwIfDisposed(),xt.argMin(this,y)},je.prototype.argMax=function(y){return y===void 0&&(y=null),this.throwIfDisposed(),xt.argMax(this,y)},je.prototype.cast=function(y){return this.throwIfDisposed(),xt.cast(this,y)},je.prototype.add=function(y){return this.throwIfDisposed(),xt.add(this,y)},je.prototype.addStrict=function(y){return this.throwIfDisposed(),xt.addStrict(this,y)},je.prototype.atan2=function(y){return this.throwIfDisposed(),xt.atan2(this,y)},je.prototype.sub=function(y){return this.throwIfDisposed(),xt.sub(this,y)},je.prototype.subStrict=function(y){return this.throwIfDisposed(),xt.subStrict(this,y)},je.prototype.pow=function(y){return this.throwIfDisposed(),xt.pow(this,y)},je.prototype.powStrict=function(y){return this.throwIfDisposed(),xt.powStrict(this,y)},je.prototype.mul=function(y){return this.throwIfDisposed(),xt.mul(this,y)},je.prototype.mulStrict=function(y){return this.throwIfDisposed(),xt.mulStrict(this,y)},je.prototype.div=function(y){return this.throwIfDisposed(),xt.div(this,y)},je.prototype.divNoNan=function(y){return this.throwIfDisposed(),xt.divNoNan(this,y)},je.prototype.floorDiv=function(y){return this.throwIfDisposed(),xt.floorDiv(this,y)},je.prototype.divStrict=function(y){return this.throwIfDisposed(),xt.divStrict(this,y)},je.prototype.minimum=function(y){return this.throwIfDisposed(),xt.minimum(this,y)},je.prototype.minimumStrict=function(y){return this.throwIfDisposed(),xt.minimumStrict(this,y)},je.prototype.maximum=function(y){return this.throwIfDisposed(),xt.maximum(this,y)},je.prototype.maximumStrict=function(y){return this.throwIfDisposed(),xt.maximumStrict(this,y)},je.prototype.mod=function(y){return this.throwIfDisposed(),xt.mod(this,y)},je.prototype.modStrict=function(y){return this.throwIfDisposed(),xt.modStrict(this,y)},je.prototype.squaredDifferenceStrict=function(y){return this.throwIfDisposed(),xt.squaredDifferenceStrict(this,y)},je.prototype.transpose=function(y){return this.throwIfDisposed(),xt.transpose(this,y)},je.prototype.notEqual=function(y){return this.throwIfDisposed(),xt.notEqual(this,y)},je.prototype.notEqualStrict=function(y){return this.throwIfDisposed(),xt.notEqualStrict(this,y)},je.prototype.less=function(y){return this.throwIfDisposed(),xt.less(this,y)},je.prototype.lessStrict=function(y){return this.throwIfDisposed(),xt.lessStrict(this,y)},je.prototype.equal=function(y){return this.throwIfDisposed(),xt.equal(this,y)},je.prototype.equalStrict=function(y){return this.throwIfDisposed(),xt.equalStrict(this,y)},je.prototype.lessEqual=function(y){return this.throwIfDisposed(),xt.lessEqual(this,y)},je.prototype.lessEqualStrict=function(y){return this.throwIfDisposed(),xt.lessEqualStrict(this,y)},je.prototype.greater=function(y){return this.throwIfDisposed(),xt.greater(this,y)},je.prototype.greaterStrict=function(y){return this.throwIfDisposed(),xt.greaterStrict(this,y)},je.prototype.greaterEqual=function(y){return this.throwIfDisposed(),xt.greaterEqual(this,y)},je.prototype.greaterEqualStrict=function(y){return this.throwIfDisposed(),xt.greaterEqualStrict(this,y)},je.prototype.logicalAnd=function(y){return this.throwIfDisposed(),xt.logicalAnd(this,y)},je.prototype.logicalOr=function(y){return this.throwIfDisposed(),xt.logicalOr(this,y)},je.prototype.logicalNot=function(){return this.throwIfDisposed(),xt.logicalNot(this)},je.prototype.logicalXor=function(y){return this.throwIfDisposed(),xt.logicalXor(this,y)},je.prototype.where=function(y,v){return this.throwIfDisposed(),xt.where(y,this,v)},je.prototype.neg=function(){return this.throwIfDisposed(),xt.neg(this)},je.prototype.ceil=function(){return this.throwIfDisposed(),xt.ceil(this)},je.prototype.floor=function(){return this.throwIfDisposed(),xt.floor(this)},je.prototype.sign=function(){return this.throwIfDisposed(),xt.sign(this)},je.prototype.isNaN=function(){return this.throwIfDisposed(),xt.isNaN(this)},je.prototype.isInf=function(){return this.throwIfDisposed(),xt.isInf(this)},je.prototype.isFinite=function(){return this.throwIfDisposed(),xt.isFinite(this)},je.prototype.exp=function(){return this.throwIfDisposed(),xt.exp(this)},je.prototype.expm1=function(){return this.throwIfDisposed(),xt.expm1(this)},je.prototype.log=function(){return this.throwIfDisposed(),xt.log(this)},je.prototype.log1p=function(){return this.throwIfDisposed(),xt.log1p(this)},je.prototype.sqrt=function(){return this.throwIfDisposed(),xt.sqrt(this)},je.prototype.rsqrt=function(){return this.throwIfDisposed(),xt.rsqrt(this)},je.prototype.square=function(){return this.throwIfDisposed(),xt.square(this)},je.prototype.reciprocal=function(){return this.throwIfDisposed(),xt.reciprocal(this)},je.prototype.abs=function(){return this.throwIfDisposed(),xt.abs(this)},je.prototype.clipByValue=function(y,v){return this.throwIfDisposed(),xt.clipByValue(this,y,v)},je.prototype.relu=function(){return this.throwIfDisposed(),xt.relu(this)},je.prototype.relu6=function(){return this.throwIfDisposed(),xt.relu6(this)},je.prototype.elu=function(){return this.throwIfDisposed(),xt.elu(this)},je.prototype.selu=function(){return this.throwIfDisposed(),xt.selu(this)},je.prototype.leakyRelu=function(y){return y===void 0&&(y=.2),this.throwIfDisposed(),xt.leakyRelu(this,y)},je.prototype.prelu=function(y){return this.throwIfDisposed(),xt.prelu(this,y)},je.prototype.sigmoid=function(){return this.throwIfDisposed(),xt.sigmoid(this)},je.prototype.logSigmoid=function(){return this.throwIfDisposed(),xt.logSigmoid(this)},je.prototype.softplus=function(){return this.throwIfDisposed(),xt.softplus(this)},je.prototype.zerosLike=function(){return this.throwIfDisposed(),xt.zerosLike(this)},je.prototype.onesLike=function(){return this.throwIfDisposed(),xt.onesLike(this)},je.prototype.sin=function(){return this.throwIfDisposed(),xt.sin(this)},je.prototype.cos=function(){return this.throwIfDisposed(),xt.cos(this)},je.prototype.tan=function(){return this.throwIfDisposed(),xt.tan(this)},je.prototype.asin=function(){return this.throwIfDisposed(),xt.asin(this)},je.prototype.acos=function(){return this.throwIfDisposed(),xt.acos(this)},je.prototype.atan=function(){return this.throwIfDisposed(),xt.atan(this)},je.prototype.sinh=function(){return this.throwIfDisposed(),xt.sinh(this)},je.prototype.cosh=function(){return this.throwIfDisposed(),xt.cosh(this)},je.prototype.tanh=function(){return this.throwIfDisposed(),xt.tanh(this)},je.prototype.asinh=function(){return this.throwIfDisposed(),xt.asinh(this)},je.prototype.acosh=function(){return this.throwIfDisposed(),xt.acosh(this)},je.prototype.atanh=function(){return this.throwIfDisposed(),xt.atanh(this)},je.prototype.erf=function(){return this.throwIfDisposed(),xt.erf(this)},je.prototype.round=function(){return this.throwIfDisposed(),xt.round(this)},je.prototype.step=function(y){return y===void 0&&(y=0),this.throwIfDisposed(),xt.step(this,y)},je.prototype.softmax=function(y){return y===void 0&&(y=-1),this.throwIfDisposed(),xt.softmax(this,y)},je.prototype.logSoftmax=function(y){return y===void 0&&(y=-1),this.throwIfDisposed(),xt.logSoftmax(this,y)},je.prototype.resizeBilinear=function(y,v){return v===void 0&&(v=!1),this.throwIfDisposed(),xt.image.resizeBilinear(this,y,v)},je.prototype.resizeNearestNeighbor=function(y,v){return v===void 0&&(v=!1),this.throwIfDisposed(),xt.image.resizeNearestNeighbor(this,y,v)},je.prototype.conv1d=function(y,v,$e,Ge,Ke,qe){return Ge===void 0&&(Ge="NWC"),Ke===void 0&&(Ke=1),this.throwIfDisposed(),xt.conv1d(this,y,v,$e,Ge,Ke,qe)},je.prototype.conv2d=function(y,v,$e,Ge,Ke,qe){return Ge===void 0&&(Ge="NHWC"),Ke===void 0&&(Ke=[1,1]),this.throwIfDisposed(),xt.conv2d(this,y,v,$e,Ge,Ke,qe)},je.prototype.conv2dTranspose=function(y,v,$e,Ge,Ke){return this.throwIfDisposed(),xt.conv2dTranspose(this,y,v,$e,Ge,Ke)},je.prototype.depthwiseConv2D=function(y,v,$e,Ge,Ke,qe){return Ge===void 0&&(Ge="NHWC"),Ke===void 0&&(Ke=[1,1]),this.throwIfDisposed(),xt.depthwiseConv2d(this,y,v,$e,Ge,Ke,qe)},je.prototype.separableConv2d=function(y,v,$e,Ge,Ke,qe){return Ke===void 0&&(Ke=[1,1]),qe===void 0&&(qe="NHWC"),this.throwIfDisposed(),xt.separableConv2d(this,y,v,$e,Ge,Ke,qe)},je.prototype.avgPool=function(y,v,$e,Ge){return this.throwIfDisposed(),xt.avgPool(this,y,v,$e,Ge)},je.prototype.maxPool=function(y,v,$e,Ge){return this.throwIfDisposed(),xt.maxPool(this,y,v,$e,Ge)},je.prototype.localResponseNormalization=function(y,v,$e,Ge){return y===void 0&&(y=5),v===void 0&&(v=1),$e===void 0&&($e=1),Ge===void 0&&(Ge=.5),xt.localResponseNormalization(this,y,v,$e,Ge)},je.prototype.pool=function(y,v,$e,Ge,Ke){return this.throwIfDisposed(),xt.pool(this,y,v,$e,Ge,Ke)},je.prototype.variable=function(y,v,$e){return y===void 0&&(y=!0),this.throwIfDisposed(),yt().makeVariable(this,y,v,$e)},je.prototype.unsortedSegmentSum=function(y,v){return this.throwIfDisposed(),xt.unsortedSegmentSum(this,y,v)},je.prototype.batchToSpaceND=function(y,v){return this.throwIfDisposed(),xt.batchToSpaceND(this,y,v)},je.prototype.spaceToBatchND=function(y,v){return this.throwIfDisposed(),xt.spaceToBatchND(this,y,v)},je.prototype.topk=function(y,v){return y===void 0&&(y=1),v===void 0&&(v=!0),this.throwIfDisposed(),xt.topk(this,y,v)},je.prototype.stridedSlice=function(y,v,$e,Ge,Ke,qe,Ye,Je){return Ge===void 0&&(Ge=0),Ke===void 0&&(Ke=0),qe===void 0&&(qe=0),Ye===void 0&&(Ye=0),Je===void 0&&(Je=0),this.throwIfDisposed(),xt.stridedSlice(this,y,v,$e,Ge,Ke,qe,Ye,Je)},je.prototype.depthToSpace=function(y,v){return this.throwIfDisposed(),xt.depthToSpace(this,y,v)},je.prototype.fft=function(){return this.throwIfDisposed(),xt.spectral.fft(this)},je.prototype.ifft=function(){return this.throwIfDisposed(),xt.spectral.ifft(this)},je.prototype.rfft=function(){return this.throwIfDisposed(),xt.spectral.rfft(this)},je.prototype.irfft=function(){return this.throwIfDisposed(),xt.spectral.irfft(this)},je}();Object.defineProperty(wt,Symbol.hasInstance,{value:function(je){return!!je&&je.dataId!=null&&je.shape!=null&&je.dtype!=null}});var Ct,Et,Rt,It,kt,St=function(je){function y(v,$e,Ge,Ke){var qe=je.call(this,v.shape,v.dtype,v.dataId,Ke)||this;return qe.trainable=$e,qe.name=Ge,qe}return e(y,je),y.prototype.assign=function(v){if(v.dtype!==this.dtype)throw new Error("dtype of the new value ("+v.dtype+") and previous value ("+this.dtype+") must match");if(!S(v.shape,this.shape))throw new Error("shape of the new value ("+v.shape+") and previous value ("+this.shape+") must match");yt().disposeTensor(this),this.dataId=v.dataId,yt().incRef(this,null)},y.prototype.dispose=function(){yt().disposeVariable(this),this.isDisposedInternal=!0},y}(wt);Object.defineProperty(St,Symbol.hasInstance,{value:function(je){return je instanceof wt&&je.assign!=null&&je.assign instanceof Function}}),function(je){je.R0="R0",je.R1="R1",je.R2="R2",je.R3="R3",je.R4="R4",je.R5="R5",je.R6="R6"}(Ct||(Ct={})),function(je){je.float32="float32",je.int32="int32",je.bool="int32",je.complex64="complex64"}(Et||(Et={})),function(je){je.float32="float32",je.int32="int32",je.bool="bool",je.complex64="complex64"}(Rt||(Rt={})),function(je){je.float32="float32",je.int32="float32",je.bool="float32",je.complex64="complex64"}(It||(It={})),function(je){je.float32="complex64",je.int32="complex64",je.bool="complex64",je.complex64="complex64"}(kt||(kt={}));var At={float32:It,int32:Et,bool:Rt,complex64:kt};function Dt(je,y){if(je==="string"||y==="string"){if(je==="string"&&y==="string")return"string";throw new Error("Can not upcast "+je+" with "+y)}return At[je][y]}function Tt(je){return Dt(je,"int32")}function Nt(je,y){if(je.dtype===y.dtype)return[je,y];var v=Dt(je.dtype,y.dtype);return[je.cast(v),y.cast(v)]}function Ft(je,y){C(je.dtype===y.dtype,function(){return"The dtypes of the first("+je.dtype+") and second("+y.dtype+") input must match"})}function _t(je){var y=[];return function v($e,Ge,Ke){if($e!=null){if($e instanceof wt)return void Ge.push($e);if(qe=$e,!(!Array.isArray(qe)&&typeof qe!="object")){var qe,Ye=$e;for(var Je in Ye){var Qe=Ye[Je];Ke.has(Qe)||(Ke.add(Qe),v(Qe,Ge,Ke))}}}}(je,y,new Set),y}var Ot,Bt=function(){function je(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return je.prototype.dispose=function(){for(var y in this.registeredVariables)this.registeredVariables[y].dispose()},je}(),Pt=function(){function je(y){this.ENV=y,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Bt}return je.prototype.ready=function(){return n(this,void 0,void 0,function(){var y,v,$e;return r(this,function(Ge){switch(Ge.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];y=this.getSortedBackends(),v=0,Ge.label=1;case 1:return v<y.length?($e=y[v],[4,this.initializeBackend($e).success]):[3,5];case 2:return Ge.sent()?[4,this.setBackend($e)]:[3,4];case 3:return Ge.sent(),[2];case 4:return v++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(je.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var y=this.initializeBackendsAndReturnBest(),v=y.name;if(y.asyncInit)throw new Error("The highest priority backend '"+v+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(v)}return this.backendInstance},enumerable:!0,configurable:!0}),je.prototype.backendNames=function(){return Object.keys(this.registryFactory)},je.prototype.findBackend=function(y){return!(y in this.registry)&&(!(y in this.registryFactory)||this.initializeBackend(y).asyncInit)?null:this.registry[y]},je.prototype.findBackendFactory=function(y){return y in this.registryFactory?this.registryFactory[y].factory:null},je.prototype.registerBackend=function(y,v,$e){return $e===void 0&&($e=1),y in this.registryFactory?(console.warn(y+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[y]={factory:v,priority:$e},!0)},je.prototype.setBackend=function(y){return n(this,void 0,void 0,function(){var v,$e,Ge;return r(this,function(Ke){switch(Ke.label){case 0:if(this.registryFactory[y]==null)throw new Error("Backend name '"+y+"' not found in registry");return this.backendName=y,this.registry[y]!=null?[3,4]:(this.backendInstance=null,v=this.initializeBackend(y),$e=v.success,v.asyncInit?[4,$e]:[3,2]);case 1:return Ge=Ke.sent(),[3,3];case 2:Ge=$e,Ke.label=3;case 3:if(!Ge)return[2,!1];Ke.label=4;case 4:return this.backendInstance=this.registry[y],this.setupRegisteredKernels(),this.profiler=new ut(this.backendInstance),[2,!0]}})})},je.prototype.setupRegisteredKernels=function(){var y=this;f(this.backendName).forEach(function(v){v.setupFunc!=null&&v.setupFunc(y.backendInstance)})},je.prototype.disposeRegisteredKernels=function(y){var v=this;f(y).forEach(function($e){$e.disposeFunc!=null&&$e.disposeFunc(v.registry[y])})},je.prototype.initializeBackend=function(y){var v=this,$e=this.registryFactory[y];if($e==null)throw new Error("Cannot initialize backend "+y+", no registration found.");try{var Ge=$e.factory();if(Promise.resolve(Ge)===Ge){var Ke=++this.pendingBackendInitId,qe=Ge.then(function(Ye){return!(Ke<v.pendingBackendInitId)&&(v.registry[y]=Ye,v.pendingBackendInit=null,!0)}).catch(function(Ye){return!(Ke<v.pendingBackendInitId)&&(v.pendingBackendInit=null,console.warn("Initialization of backend "+y+" failed"),console.warn(Ye.stack||Ye.message),!1)});return this.pendingBackendInit=qe,{success:qe,asyncInit:!0}}return this.registry[y]=Ge,{success:!0,asyncInit:!1}}catch(Ye){return console.warn("Initialization of backend "+y+" failed"),console.warn(Ye.stack||Ye.message),{success:!1,asyncInit:!1}}},je.prototype.removeBackend=function(y){if(!(y in this.registryFactory))throw new Error(y+" backend not found in registry");this.backendName===y&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,y in this.registry&&(this.disposeRegisteredKernels(y),this.registry[y].dispose(),delete this.registry[y]),delete this.registryFactory[y],this.backendName===y&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},je.prototype.getSortedBackends=function(){var y=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(v,$e){return y.registryFactory[$e].priority-y.registryFactory[v].priority})},je.prototype.initializeBackendsAndReturnBest=function(){for(var y=this.getSortedBackends(),v=0;v<y.length;v++){var $e=y[v],Ge=this.initializeBackend($e),Ke=Ge.success,qe=Ge.asyncInit;if(qe||Ke)return{name:$e,asyncInit:qe}}throw new Error("Could not initialize any backends, all backend initializations failed.")},je.prototype.moveData=function(y,v){var $e=this.state.tensorInfo.get(v),Ge=$e.backend,Ke=this.readSync(v);Ge.disposeData(v),$e.backend=y,y.move(v,Ke,$e.shape,$e.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},je.prototype.tidy=function(y,v){var $e,Ge=this,Ke=null;if(v==null){if(typeof y!="function")throw new Error("Please provide a function to tidy()");v=y}else{if(typeof y!="string"&&!(y instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof v!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");Ke=y}return this.scopedRun(function(){return Ge.startScope(Ke)},function(){return Ge.endScope($e)},function(){return($e=v())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),$e})},je.prototype.scopedRun=function(y,v,$e){y();try{var Ge=$e();return v(),Ge}catch(Ke){throw v(),Ke}},je.prototype.nextTensorId=function(){return je.nextTensorId++},je.prototype.nextVariableId=function(){return je.nextVariableId++},je.prototype.clone=function(y){var v=this.makeTensorFromDataId(y.dataId,y.shape,y.dtype),$e={x:y};return this.addTapeNode(this.state.activeScope.name,$e,[v],function(Ge){return{x:function(){return Ge.toFloat()}}},[]),v},je.prototype.runKernel=function(y,v,$e,Ge,Ke){return this.runKernelFunc(null,v,null,y,$e,Ge,Ke)},je.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},je.prototype.checkKernelForMemLeak=function(y,v,$e){var Ge=this.backend.numDataIds(),Ke=0;$e.forEach(function(Je){Ke+=Je.dtype==="complex64"?3:1});var qe=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],Ye=Ge-v-Ke-qe;if(Ye>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+Ye+" data ids) after running '"+y+"'")},je.prototype.runKernelFunc=function(y,v,$e,Ge,Ke,qe,Ye){var Je,Qe=this;qe===void 0&&(qe=[]),Ye===void 0&&(Ye=[]);var st=[],Mt=this.isTapeOn();Ge==null&&(Ge=this.state.activeScope!=null?this.state.activeScope.name:"");var on,sn=function(co){Mt&&(st=co.map(function(lo){return Qe.keep(Qe.clone(lo))}))},fn=this.state.numBytes,hn=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var to,Xr=l(Ge,this.backendName);return on=Xr!=null?function(){var co=Qe.backend.numDataIds();to=Xr.kernelFunc({inputs:v,attrs:Ke,backend:Qe.backend});var lo=Array.isArray(to)?to:[to];Qe.shouldCheckForMemLeaks()&&Qe.checkKernelForMemLeak(Ge,co,lo);var fo=lo.map(function(mo){var rd=mo.dataId,od=mo.shape,fd=mo.dtype;return Qe.makeTensorFromDataId(rd,od,fd)}),Uo=fo.filter(function(mo,rd){return Ye[rd]});return sn((qe||[]).slice().concat(Uo)),fo}:function(){var co=Qe.backend.numDataIds();to=Qe.tidy(function(){return y(Qe.backend,sn)});var lo=Array.isArray(to)?to:[to];return Qe.shouldCheckForMemLeaks()&&Qe.checkKernelForMemLeak(Ge,co,lo),lo},this.scopedRun(function(){return Qe.state.kernelDepth++},function(){return Qe.state.kernelDepth--},function(){Je=Qe.ENV.getBool("DEBUG")?Qe.profiler.profileKernel(Ge,v,function(){return on()}):on()}),Mt&&this.addTapeNode(Ge,v,Je,$e,st),this.state.profiling&&this.state.activeProfile.kernels.push({name:Ge,bytesAdded:this.state.numBytes-fn,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-hn,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(v).map(function(co){return v[co].shape}),outputShapes:Je.map(function(co){return co.shape})}),Array.isArray(to)?Je:Je[0]},je.prototype.makeTensor=function(y,v,$e,Ge){if(y==null)throw new Error("Values passed to engine.makeTensor() are null");$e=$e||"float32",Ge=Ge||this.backend;var Ke=y;$e==="string"&&H(y[0])&&(Ke=y.map(function(st){return rt(st)}));var qe=Ge.write(Ke,v,$e),Ye=new wt(v,$e,qe,this.nextTensorId());if(this.incRef(Ye,Ge),$e==="string"){var Je=this.state.tensorInfo.get(qe),Qe=G(Ke);this.state.numBytes+=Qe-Je.bytes,Je.bytes=Qe}return Ye},je.prototype.makeTensorFromDataId=function(y,v,$e,Ge){var Ke=new wt(v,$e=$e||"float32",y,this.nextTensorId());return this.incRef(Ke,Ge),Ke},je.prototype.makeVariable=function(y,v,$e,Ge){v===void 0&&(v=!0),$e=$e||this.nextVariableId().toString(),Ge!=null&&Ge!==y.dtype&&(y=y.asType(Ge));var Ke=new St(y,v,$e,this.nextTensorId());if(this.state.registeredVariables[Ke.name]!=null)throw new Error("Variable with name "+Ke.name+" was already registered");return this.state.registeredVariables[Ke.name]=Ke,this.incRef(Ke,this.backend),Ke},je.prototype.incRef=function(y,v){var $e=this.state.tensorInfo.has(y.dataId)?this.state.tensorInfo.get(y.dataId).refCount:0;if(this.state.numTensors++,y.dtype==="string"&&this.state.numStringTensors++,$e===0){this.state.numDataBuffers++;var Ge=0;y.dtype!=="complex64"&&y.dtype!=="string"&&(Ge=y.size*z(y.dtype)),this.state.tensorInfo.set(y.dataId,{backend:v||this.backend,dtype:y.dtype,shape:y.shape,bytes:Ge,refCount:0}),this.state.numBytes+=Ge}this.state.tensorInfo.get(y.dataId).refCount++,y instanceof St||this.track(y)},je.prototype.disposeTensor=function(y){if(this.state.tensorInfo.has(y.dataId)){this.state.numTensors--,y.dtype==="string"&&this.state.numStringTensors--;var v=this.state.tensorInfo.get(y.dataId);v.refCount<=1?(y.dtype!=="complex64"&&(this.state.numBytes-=v.bytes),this.state.numDataBuffers--,v.backend.disposeData(y.dataId),this.state.tensorInfo.delete(y.dataId)):this.state.tensorInfo.get(y.dataId).refCount--}},je.prototype.disposeVariables=function(){for(var y in this.state.registeredVariables){var v=this.state.registeredVariables[y];this.disposeVariable(v)}},je.prototype.disposeVariable=function(y){this.disposeTensor(y),this.state.registeredVariables[y.name]!=null&&delete this.state.registeredVariables[y.name]},je.prototype.memory=function(){var y=this.backend.memory();return y.numTensors=this.state.numTensors,y.numDataBuffers=this.state.numDataBuffers,y.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(y.unreliable=!0,y.reasons==null&&(y.reasons=[]),y.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),y},je.prototype.profile=function(y){return n(this,void 0,void 0,function(){var v,$e;return r(this,function(Ge){return this.state.profiling=!0,v=this.state.numBytes,$e=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=y(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(Ke){return Ke.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-v,this.state.activeProfile.newTensors=this.state.numTensors-$e,[2,this.state.activeProfile]})})},je.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},je.prototype.addTapeNode=function(y,v,$e,Ge,Ke){var qe=this,Ye={id:this.state.nextTapeNodeId++,kernelName:y,inputs:v,outputs:$e,saved:Ke},Je=h(y);Je!=null&&(Ge=Je.gradFunc),Ge!=null&&(Ye.gradient=function(Qe){return Qe=Qe.map(function(st,Mt){if(st==null){var on=$e[Mt],sn=tt(on.size,on.dtype);return qe.makeTensor(sn,on.shape,on.dtype)}return st}),Ge(Qe.length>1?Qe:Qe[0],Ke)}),this.state.activeTape.push(Ye)},je.prototype.keep=function(y){return y.kept=!0,y},je.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},je.prototype.endTape=function(){this.state.gradientDepth--},je.prototype.startScope=function(y){var v={track:[],name:"unnamed scope",id:this.state.nextScopeId++};y&&(v.name=y),this.state.scopeStack.push(v),this.state.activeScope=v},je.prototype.endScope=function(y){for(var v=this,$e=_t(y),Ge=new Set($e.map(function(Je){return Je.id})),Ke=0;Ke<this.state.activeScope.track.length;Ke++){var qe=this.state.activeScope.track[Ke];qe.kept||Ge.has(qe.id)||qe.dispose()}var Ye=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],$e.forEach(function(Je){Je.kept||Je.scopeId!==Ye.id||v.track(Je)})},je.prototype.gradients=function(y,v,$e,Ge){var Ke=this;if(Ge===void 0&&(Ge=!1),C(v.length>0,function(){return"gradients() received an empty list of xs."}),$e!=null&&$e.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+$e.dtype+"'");var qe=this.scopedRun(function(){return Ke.startTape()},function(){return Ke.endTape()},function(){return Ke.tidy("forward",y)});C(qe instanceof wt,function(){return"The result y returned by f() must be a tensor."});var Ye=function(Je,Qe,st){for(var Mt={},on={},sn=0;sn<Qe.length;sn++)Mt[Qe[sn].id]=!0;for(sn=0;sn<Je.length;sn++){var fn=(mo=Je[sn]).inputs;for(var hn in fn){for(var to=fn[hn],Xr=!1,co=0;co<Qe.length;co++)if(Mt[to.id]){mo.outputs.forEach(function(hd){return Mt[hd.id]=!0}),Xr=!0,on[mo.id]=!0;break}if(Xr)break}}var lo={};lo[st.id]=!0;var fo={};for(sn=Je.length-1;sn>=0;sn--)for(fn=(mo=Je[sn]).inputs,co=0;co<mo.outputs.length;co++)if(lo[mo.outputs[co].id]){for(var hn in fn)lo[fn[hn].id]=!0,fo[mo.id]=!0;break}var Uo=[];for(sn=0;sn<Je.length;sn++){var mo;if(on[(mo=Je[sn]).id]&&fo[mo.id]){var rd={};for(var hn in mo.inputs){var od=mo.inputs[hn];Mt[od.id]&&(rd[hn]=od)}var fd=Object.assign({},mo);fd.inputs=rd,fd.outputs=mo.outputs,Uo.push(fd)}}return Uo}(this.state.activeTape,v,qe);if(!Ge&&Ye.length===0&&v.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var Je,Qe,st={};st[qe.id]=$e??(Je=qe.shape,Qe=Z(k(Je),"float32"),Lt.makeTensor(Qe,Je,"float32")),function(on,sn,fn){for(var hn=function(Xr){var co=sn[Xr],lo=[];if(co.outputs.forEach(function(rd){var od=on[rd.id];od!=null?lo.push(od):lo.push(null)}),co.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+co.kernelName+".");var fo=co.gradient(lo),Uo=function(rd){if(!(rd in fo))throw new Error("Cannot backprop through input "+rd+". Available gradients found: "+Object.keys(fo)+".");var od=fn(function(){return fo[rd]()});if(od.dtype!=="float32")throw new Error("Error in gradient for op "+co.kernelName+". The gradient of input "+rd+" must have 'float32' dtype, but has '"+od.dtype+"'");var fd=co.inputs[rd];if(!S(od.shape,fd.shape))throw new Error("Error in gradient for op "+co.kernelName+". The gradient of input '"+rd+"' has shape '"+od.shape+"', which does not match the shape of the input '"+fd.shape+"'");if(on[fd.id]==null)on[fd.id]=od;else{var hd=on[fd.id];on[fd.id]=hd.add(od),hd.dispose()}};for(var mo in co.inputs)Uo(mo)},to=sn.length-1;to>=0;to--)hn(to)}(st,Ye,function(on){return Ke.tidy(on)});var Mt=v.map(function(on){return st[on.id]});return Ke.state.gradientDepth===0&&(Ke.state.activeTape.forEach(function(on){for(var sn=0,fn=on.saved;sn<fn.length;sn++)fn[sn].dispose()}),Ke.state.activeTape=null),{value:qe,grads:Mt}})},je.prototype.customGrad=function(y){var v=this;return C(X(y),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var $e,Ge=[],Ke=0;Ke<arguments.length;Ke++)Ge[Ke]=arguments[Ke];C(Ge.every(function(Ye){return Ye instanceof wt}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var qe={};return Ge.forEach(function(Ye,Je){qe[Je]=Ye}),v.runKernelFunc(function(Ye,Je){return C(($e=y.apply(void 0,Ge.concat([Je]))).value instanceof wt,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),C(X($e.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),$e.value},qe,function(Ye,Je){var Qe=$e.gradFunc(Ye,Je),st=Array.isArray(Qe)?Qe:[Qe];C(st.length===Ge.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),C(st.every(function(on){return on instanceof wt}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var Mt={};return st.forEach(function(on,sn){Mt[sn]=function(){return on}}),Mt})}},je.prototype.readSync=function(y){return this.state.tensorInfo.get(y).backend.readSync(y)},je.prototype.read=function(y){return this.state.tensorInfo.get(y).backend.read(y)},je.prototype.time=function(y){return n(this,void 0,void 0,function(){var v,$e;return r(this,function(Ge){switch(Ge.label){case 0:return v=et(),[4,this.backend.time(y)];case 1:return($e=Ge.sent()).wallMs=et()-v,[2,$e]}})})},je.prototype.track=function(y){return this.state.activeScope!=null&&(y.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(y)),y},Object.defineProperty(je.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),je.prototype.reset=function(){for(var y in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Bt,this.registry)this.disposeRegisteredKernels(y),this.registry[y].dispose(),delete this.registry[y];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},je.nextTensorId=0,je.nextVariableId=0,je}(),Lt=function(){var je=function(){if(Ot==null){var v=void 0;if(typeof window<"u")v=window;else if(typeof global<"u")v=global;else if(typeof process<"u")v=process;else{if(typeof self>"u")throw new Error("Could not find a global object");v=self}Ot=v}return Ot}();if(je._tfengine==null){var y=new o(je);je._tfengine=new Pt(y)}return function(v){s=v}(je._tfengine.ENV),yt=function(){return je._tfengine},je._tfengine}();function Wt(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ut=i();Ut.registerFlag("DEBUG",function(){return!1},function(je){je&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ut.registerFlag("IS_BROWSER",function(){return Wt()}),Ut.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ut.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ut.registerFlag("PROD",function(){return!1}),Ut.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ut.getBool("DEBUG")}),Ut.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ut.registerFlag("IS_TEST",function(){return!1});var Vt,zt,Gt,Ht={},qt={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function Kt(je,y){Ht[je]=y}function jt(je){je in Ht||(Ht[je]=function(v){if(v!==1&&v!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var $e=function(Ge){if(typeof OffscreenCanvas<"u"&&Ge===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(v);return $e.addEventListener("webglcontextlost",function(Ge){Ge.preventDefault(),delete Ht[v]},!1),v===1?$e.getContext("webgl",qt)||$e.getContext("experimental-webgl",qt):$e.getContext("webgl2",qt)}(je));var y=Ht[je];return y.isContextLost()?(delete Ht[je],jt(je)):(y.disable(y.DEPTH_TEST),y.disable(y.STENCIL_TEST),y.disable(y.BLEND),y.disable(y.DITHER),y.disable(y.POLYGON_OFFSET_FILL),y.disable(y.SAMPLE_COVERAGE),y.enable(y.SCISSOR_TEST),y.enable(y.CULL_FACE),y.cullFace(y.BACK),Ht[je])}function Xt(je,y){return[y,je]}function Yt(je){var y=k(je);return T(Math.ceil(y/4))}function $t(je,y){return[Math.max(1,Math.ceil(y/2)),Math.max(1,Math.ceil(je/2))]}function Qt(je,y){var v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt=je;return i().getNumber("WEBGL_VERSION")===2?(v=Mt.R32F,$e=Mt.R16F,Ge=Mt.RGBA16F,Ke=Mt.RGBA32F,qe=Mt.RED,Ye=4,Je=1,Qe=Mt.HALF_FLOAT,st=Mt.FLOAT):(v=je.RGBA,$e=je.RGBA,Ge=je.RGBA,Ke=Mt.RGBA,qe=je.RGBA,Ye=4,Je=4,Qe=y!=null?y.HALF_FLOAT_OES:null,st=je.FLOAT),{internalFormatFloat:v,internalFormatHalfFloat:$e,internalFormatPackedHalfFloat:Ge,internalFormatPackedFloat:Ke,textureFormatFloat:qe,downloadTextureFormat:je.RGBA,downloadUnpackNumChannels:Ye,defaultNumChannels:Je,textureTypeHalfFloat:Qe,textureTypeFloat:st}}function Jt(je,y,v){var $e=v();return y&&function(Ge){var Ke=Ge.getError();if(Ke!==Ge.NO_ERROR)throw new Error("WebGL Error: "+ne(Ge,Ke))}(je),$e}(function(je){je[je.DENSE=0]="DENSE",je[je.SHARED_BATCH=1]="SHARED_BATCH"})(Vt||(Vt={})),function(je){je[je.RENDER=0]="RENDER",je[je.UPLOAD=1]="UPLOAD",je[je.PIXELS=2]="PIXELS",je[je.DOWNLOAD=3]="DOWNLOAD"}(zt||(zt={})),function(je){je[je.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",je[je.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",je[je.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",je[je.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",je[je.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Gt||(Gt={}));var Zt=596e-10,te=65504;function ee(je){return!!(i().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||je===0||Zt<Math.abs(je)&&Math.abs(je)<te)}function ne(je,y){switch(y){case je.NO_ERROR:return"NO_ERROR";case je.INVALID_ENUM:return"INVALID_ENUM";case je.INVALID_VALUE:return"INVALID_VALUE";case je.INVALID_OPERATION:return"INVALID_OPERATION";case je.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case je.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case je.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+y}}function re(je,y,v){return ke(je,y,function(){return je.getExtension(v)},'Extension "'+v+'" not supported on this browser.')}function oe(je,y,v){var $e=ke(je,y,function(){return je.createShader(je.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Jt(je,y,function(){return je.shaderSource($e,v)}),Jt(je,y,function(){return je.compileShader($e)}),je.getShaderParameter($e,je.COMPILE_STATUS)===!1)throw console.log(je.getShaderInfoLog($e)),new Error("Failed to compile vertex shader.");return $e}function ae(je,y,v){var $e=ke(je,y,function(){return je.createShader(je.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Jt(je,y,function(){return je.shaderSource($e,v)}),Jt(je,y,function(){return je.compileShader($e)}),je.getShaderParameter($e,je.COMPILE_STATUS)===!1)throw function(Ge,Ke){var qe=ue.exec(Ke);if(qe==null)return console.log("Couldn't parse line number in error: "+Ke),void console.log(Ge);for(var Ye=+qe[1],Je=Ge.split(`
`),Qe=Je.length.toString().length+2,st=Je.map(function(to,Xr){return N((Xr+1).toString(),Qe)+to}),Mt=0,on=0;on<st.length;on++)Mt=Math.max(st[on].length,Mt);var sn=st.slice(0,Ye-1),fn=st.slice(Ye-1,Ye),hn=st.slice(Ye);console.log(sn.join(`
`)),console.log(Ke.split(`
`)[0]),console.log("%c "+N(fn[0],Mt),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(hn.join(`
`))}(v,je.getShaderInfoLog($e)),new Error("Failed to compile fragment shader.");return $e}var ie,se,ue=/ERROR: [0-9]+:([0-9]+):/g;function ce(je,y){return ke(je,y,function(){return je.createProgram()},"Unable to create WebGLProgram.")}function le(je,y,v){if(Jt(je,y,function(){return je.linkProgram(v)}),je.getProgramParameter(v,je.LINK_STATUS)===!1)throw console.log(je.getProgramInfoLog(v)),new Error("Failed to link vertex and fragment shaders.")}function he(je,y,v){if(Jt(je,y,function(){return je.validateProgram(v)}),je.getProgramParameter(v,je.VALIDATE_STATUS)===!1)throw console.log(je.getProgramInfoLog(v)),new Error("Shader program validation failed.")}function fe(je,y,v){var $e=ke(je,y,function(){return je.createBuffer()},"Unable to create WebGLBuffer");return Jt(je,y,function(){return je.bindBuffer(je.ARRAY_BUFFER,$e)}),Jt(je,y,function(){return je.bufferData(je.ARRAY_BUFFER,v,je.STATIC_DRAW)}),$e}function de(je,y,v){var $e=ke(je,y,function(){return je.createBuffer()},"Unable to create WebGLBuffer");return Jt(je,y,function(){return je.bindBuffer(je.ELEMENT_ARRAY_BUFFER,$e)}),Jt(je,y,function(){return je.bufferData(je.ELEMENT_ARRAY_BUFFER,v,je.STATIC_DRAW)}),$e}function pe(je,y){return ke(je,y,function(){return je.createTexture()},"Unable to create WebGLTexture.")}function ve(je,y){var v=i().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(je<=0||y<=0){var $e="["+je+"x"+y+"]";throw new Error("Requested texture size "+$e+" is invalid.")}if(je>v||y>v)throw $e="["+je+"x"+y+"]",new Error("Requested texture size "+$e+" greater than WebGL maximum on this browser / GPU "+("["+v+"x"+v+"]")+".")}function me(je,y){return ke(je,y,function(){return je.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function ge(je,y,v,$e,Ge,Ke,qe,Ye){var Je=je.getAttribLocation(v,$e);return Je!==-1&&(Jt(je,y,function(){return je.bindBuffer(je.ARRAY_BUFFER,Ge)}),Jt(je,y,function(){return je.vertexAttribPointer(Je,Ke,je.FLOAT,!1,qe,Ye)}),Jt(je,y,function(){return je.enableVertexAttribArray(Je)}),!0)}function ye(je,y,v,$e){Se(je,$e),Jt(je,y,function(){return je.activeTexture(je.TEXTURE0+$e)}),Jt(je,y,function(){return je.bindTexture(je.TEXTURE_2D,v)})}function xe(je,y,v,$e){return ke(je,y,function(){return je.getUniformLocation(v,$e)},'uniform "'+$e+'" not present in program.')}function be(je,y,v){return je.getUniformLocation(y,v)}function we(je,y,v,$e,Ge,Ke){Jt(je,y,function(){return ye(je,y,$e,Ke)}),Jt(je,y,function(){return je.uniform1i(Ge,Ke)})}function Ce(je,y,v,$e){Jt(je,y,function(){return je.bindFramebuffer(je.FRAMEBUFFER,$e)}),Jt(je,y,function(){return je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,v,0)})}function Ee(je,y,v){Jt(je,y,function(){return je.bindFramebuffer(je.FRAMEBUFFER,v)}),Jt(je,y,function(){return je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,null,0)})}function Re(je){var y=je.checkFramebufferStatus(je.FRAMEBUFFER);if(y!==je.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ie(je,y))}function Ie(je,y){switch(y){case je.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case je.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case je.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case je.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+y}}function ke(je,y,v,$e){var Ge=Jt(je,y,function(){return v()});if(Ge==null)throw new Error($e);return Ge}function Se(je,y){var v=je.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,$e=y+je.TEXTURE0;if($e<je.TEXTURE0||$e>v)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+v+"]")+".")}function Ae(je,y){return y===void 0&&(y=2),k(je.slice(0,je.length-y))}function De(je){if(je.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[je.length>1?je[je.length-2]:1,je[je.length-1]]}function Te(je){var y=[1,1,1];return je.length===0||je.length===1&&je[0]===1||(y=[Ae(je)].concat(De(je))),y}function Ne(je,y){var v;y===void 0&&(y=!1);var $e=i().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(y&&($e*=2,(je=je.map(function(Qe,st){return st>=je.length-2?b(je[st]):je[st]})).length===1&&(je=[2,je[0]])),je.length!==2){var Ge=M(je);je=Ge.newShape}var Ke=k(je);if(je.length<=1&&Ke<=$e)return[1,Ke];if(je.length===2&&je[0]<=$e&&je[1]<=$e)return je;if(je.length===3&&je[0]*je[1]<=$e&&je[2]<=$e)return[je[0]*je[1],je[2]];if(je.length===3&&je[0]<=$e&&je[1]*je[2]<=$e)return[je[0],je[1]*je[2]];if(je.length===4&&je[0]*je[1]*je[2]<=$e&&je[3]<=$e)return[je[0]*je[1]*je[2],je[3]];if(je.length===4&&je[0]<=$e&&je[1]*je[2]*je[3]<=$e)return[je[0],je[1]*je[2]*je[3]];if(y){var qe=Ae(je),Ye=2,Je=2;return je.length&&(Ye=(v=De(je))[0],Je=v[1]),T(Ke=qe*(Ye/2)*(Je/2)).map(function(Qe){return 2*Qe})}return T(Ke)}function Fe(je){return je%2==0}function _e(je,y){if(S(je=je.slice(-2),y=y.slice(-2))||!je.length||!y.length||je[0]===0||je[1]===0||y[0]===0||y[1]===0)return!0;if(je.length!==y.length){var v=je.slice(-1)[0],$e=y.slice(-1)[0];if(v===$e||Fe(v)&&Fe($e)&&(je[0]===1||y[0]===1))return!0}return je[1]===y[1]&&Fe(je[0])&&Fe(y[0])}function Oe(je){if(ie==null){var y=jt(je);ie=y.getParameter(y.MAX_TEXTURE_SIZE)}return ie}function Me(je){if(se==null){var y=jt(je);se=y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,se)}function Be(je){if(je===0)return 0;var y=jt(je);return Pe(y,"EXT_disjoint_timer_query_webgl2")&&je===2?2:Pe(y,"EXT_disjoint_timer_query")?1:0}function Pe(je,y){return je.getExtension(y)!=null}function Le(je){try{if(jt(je)!=null)return!0}catch{return!1}return!1}function We(je){if(je===0)return!1;var y=jt(je);if(je===1){if(!Pe(y,"OES_texture_float"))return!1}else if(!Pe(y,"EXT_color_buffer_float"))return!1;return Ve(y)}function Ue(je){if(je===0)return!1;var y=jt(je);if(je!==1){if(Pe(y,"EXT_color_buffer_float"))return Ve(y);if(Pe(y,"EXT_color_buffer_half_float")){var v=y.getExtension("EXT_color_buffer_half_float");return function($e,Ge){var Ke=Qt($e,Ge),qe=$e.createTexture();$e.bindTexture($e.TEXTURE_2D,qe),$e.texImage2D($e.TEXTURE_2D,0,Ke.internalFormatHalfFloat,1,1,0,Ke.textureFormatFloat,Ke.textureTypeHalfFloat,null);var Ye=$e.createFramebuffer();$e.bindFramebuffer($e.FRAMEBUFFER,Ye),$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,qe,0);var Je=$e.checkFramebufferStatus($e.FRAMEBUFFER)===$e.FRAMEBUFFER_COMPLETE;return $e.bindTexture($e.TEXTURE_2D,null),$e.bindFramebuffer($e.FRAMEBUFFER,null),$e.deleteTexture(qe),$e.deleteFramebuffer(Ye),Je}(y,v)}return!1}return!!Pe(y,"OES_texture_float")&&!!Pe(y,"WEBGL_color_buffer_float")&&Ve(y)}function Ve(je){var y=Qt(je),v=je.createTexture();je.bindTexture(je.TEXTURE_2D,v),je.texImage2D(je.TEXTURE_2D,0,y.internalFormatFloat,1,1,0,y.textureFormatFloat,y.textureTypeFloat,null);var $e=je.createFramebuffer();je.bindFramebuffer(je.FRAMEBUFFER,$e),je.framebufferTexture2D(je.FRAMEBUFFER,je.COLOR_ATTACHMENT0,je.TEXTURE_2D,v,0);var Ge=je.checkFramebufferStatus(je.FRAMEBUFFER)===je.FRAMEBUFFER_COMPLETE;return je.bindTexture(je.TEXTURE_2D,null),je.bindFramebuffer(je.FRAMEBUFFER,null),je.deleteTexture(v),je.deleteFramebuffer($e),Ge}function ze(je){return je===2&&jt(je).fenceSync!=null}var He=i();function Xe(je){i().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(je+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Ze(je,y){return Lt.tidy(je,y)}function tn(je){_t(je).forEach(function(y){return y.dispose()})}function en(je){return Lt.keep(je)}function dn(){for(var je=[],y=0;y<arguments.length;y++)je[y]=arguments[y];i().getBool("IS_TEST")||console.warn.apply(console,je)}function pn(je,y){var v=je;if(V(je))return y==="string"?[]:[je.length];if(!Array.isArray(je))return[];for(var $e=[];Array.isArray(v)||V(v)&&y!=="string";)$e.push(v.length),v=v[0];return Array.isArray(je)&&i().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function Ge(Ke,qe,Ye){if(Ye=Ye||[],!Array.isArray(Ke)&&!V(Ke))return void C(qe.length===0,function(){return"Element arr["+Ye.join("][")+"] is a primitive, but should be an array/TypedArray of "+qe[0]+" elements"});C(qe.length>0,function(){return"Element arr["+Ye.join("][")+"] should be a primitive, but is an array of "+Ke.length+" elements"}),C(Ke.length===qe[0],function(){return"Element arr["+Ye.join("][")+"] should have "+qe[0]+" elements, but has "+Ke.length+" elements"});for(var Je=qe.slice(1),Qe=0;Qe<Ke.length;++Qe)Ge(Ke[Qe],Je,Ye.concat(Qe))}(je,$e,[]),$e}function vn(je,y,v,$e){if(je!=null&&(je!=="numeric"&&je!==y||je==="numeric"&&y==="string"))throw new Error("Argument '"+v+"' passed to '"+$e+"' must be "+je+" tensor, but got "+y+" tensor")}function mn(je,y,v,$e){if($e===void 0&&($e="numeric"),je instanceof wt)return vn($e,je.dtype,y,v),je;var Ge=j(je);if(Ge!=="string"&&["bool","int32","float32"].indexOf($e)>=0&&(Ge=$e),vn($e,Ge,y,v),je==null||!V(je)&&!Array.isArray(je)&&typeof je!="number"&&typeof je!="boolean"&&typeof je!="string"){var Ke=je==null?"null":je.constructor.name;throw new Error("Argument '"+y+"' passed to '"+v+"' must be a Tensor or TensorLike, but got '"+Ke+"'")}var qe=pn(je,Ge);V(je)||Array.isArray(je)||(je=[je]);var Ye=Ge!=="string"?Q(je,Ge,i().getBool("DEBUG")):I(je,[],!0);return Lt.makeTensor(Ye,qe,Ge)}function gn(je,y,v,$e){if($e===void 0&&($e="numeric"),!Array.isArray(je))throw new Error("Argument "+y+" passed to "+v+" must be a `Tensor[]` or `TensorLike[]`");return je.map(function(Ge,Ke){return mn(Ge,y+"["+Ke+"]",v)},$e)}function yn(je,y){for(var v=0;v<je.length;++v)if(je[je.length-v-1]!==y-1-v)return!1;return!0}function xn(je,y,v){for(var $e=je.length+y.length,Ge=[],Ke=0,qe=0,Ye=0;Ye<$e;Ye++)v.indexOf(Ye)===-1?Ge.push(je[Ke++]):Ge.push(y[qe++]);return Ge}function bn(je,y){for(var v=[],$e=je.length,Ge=0;Ge<$e;Ge++)y.indexOf(Ge)===-1&&v.push(je[Ge]);return[v,y.map(function(Ke){return je[Ke]})]}function wn(je,y){return xn(je,y.map(function(v){return 1}),y)}function Cn(je,y,v){C(yn(y,v),function(){return je+" supports only inner-most axes for now. Got axes "+y+" and rank-"+v+" input."})}function En(je,y){if(yn(je,y))return null;for(var v=[],$e=0;$e<y;++$e)je.indexOf($e)===-1&&v.push($e);return je.forEach(function(Ge){return v.push(Ge)}),v}function Rn(je){return je.map(function(y,v){return[v,y]}).sort(function(y,v){return y[1]-v[1]}).map(function(y){return y[0]})}function In(je,y){for(var v=[],$e=y-je;$e<y;++$e)v.push($e);return v}function kn(je,y){var v=je[0].length;je.forEach(function(Ge,Ke){C(Ge.length===v,function(){return"Error in concat"+v+"D: rank of tensors["+Ke+"] must be the same as the rank of the rest ("+v+")"})}),C(y>=0&&y<v,function(){return"Error in concat"+v+"D: axis must be between 0 and "+(v-1)+"."});var $e=je[0];je.forEach(function(Ge,Ke){for(var qe=0;qe<v;qe++)C(qe===y||Ge[qe]===$e[qe],function(){return"Error in concat"+v+"D: Shape of tensors["+Ke+"] ("+Ge+") does not match the shape of the rest ("+$e+") along the non-concatenated axis "+Ke+"."})})}function Sn(je,y){for(var v=je[0].slice(),$e=1;$e<je.length;$e++)v[y]+=je[$e][y];return v}function An(je){var y=Object.keys(je);if(y.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+y.length+" keys.");var v=y[0],$e=je[v];v.endsWith("_")&&(v=v.substring(0,v.length-1));var Ge=function(){for(var Ke=[],qe=0;qe<arguments.length;qe++)Ke[qe]=arguments[qe];Lt.startScope(v);try{var Ye=$e.apply(void 0,Ke);return Ye instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Lt.endScope(Ye),Ye}catch(Je){throw Lt.endScope(null),Je}};return Object.defineProperty(Ge,"name",{value:v,configurable:!0}),Ge}He.registerFlag("HAS_WEBGL",function(){return He.getNumber("WEBGL_VERSION")>0}),He.registerFlag("WEBGL_VERSION",function(){return Le(2)?2:Le(1)?1:0}),He.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return He.get("WEBGL_VERSION")===2}),He.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),He.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),He.registerFlag("WEBGL_PACK",function(){return He.getBool("HAS_WEBGL")}),He.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_CLIP",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),He.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_PACK_REDUCE",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_LAZILY_UNPACK",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_CONV_IM2COL",function(){return He.getBool("WEBGL_PACK")}),He.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return Oe(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return Me(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var je=He.getNumber("WEBGL_VERSION");return je===0?0:Be(je)}),He.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return He.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(je=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(je)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(je.substr(0,4))));var je}),He.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return We(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!He.getBool("WEBGL_FORCE_F16_TEXTURES")&&He.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),He.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return Ue(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return ze(He.getNumber("WEBGL_VERSION"))}),He.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return He.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),bt=Xe;var Dn=An({complex_:function(je,y){var v=mn(je,"real","complex"),$e=mn(y,"imag","complex");return E(v.shape,$e.shape,"real and imag shapes, "+v.shape+" and "+$e.shape+", must match in call to tf.complex()."),Lt.runKernelFunc(function(Ge){return Ge.complex(v,$e)},{$real:v,$imag:$e})}}),Tn=An({real_:function(je){var y=mn(je,"input","real");return Lt.runKernelFunc(function(v){return v.real(y)},{$input:y})}}),Nn=An({imag_:function(je){var y=mn(je,"input","imag");return Lt.runKernelFunc(function(v){return v.imag(y)},{$input:y})}});function Fn(je,y,v){return _n(je,y,pn(je,v),v)}function _n(je,y,v,$e){if($e==null&&($e=j(je)),$e==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!V(je)&&!Array.isArray(je)&&typeof je!="number"&&typeof je!="boolean"&&typeof je!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(y!=null){nt(y);var Ge=k(y),Ke=k(v);C(Ge===Ke,function(){return"Based on the provided shape, ["+y+"], the tensor should have "+Ge+" values but has "+Ke});for(var qe=0;qe<v.length;++qe){var Ye=v[qe],Je=qe!==v.length-1||Ye!==k(y.slice(qe));C(v[qe]===y[qe]||!Je,function(){return"Error creating a new Tensor. Inferred shape ("+v+") does not match the provided shape ("+y+"). "})}}return V(je)||Array.isArray(je)||(je=[je]),y=y||v,je=$e!=="string"?Q(je,$e,i().getBool("DEBUG")):I(je,[],!0),Lt.makeTensor(je,y,$e)}function On(je,y){if((V(je)&&y!=="string"||Array.isArray(je))&&y!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(y==="string"&&V(je)&&!(je instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return _n(je,[],[],y)}function Mn(je,y){R(je);var v=pn(je,y);if(v.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return _n(je,null,v,y)}function Bn(je,y,v){if(R(je),y!=null&&y.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var $e=pn(je,v);if($e.length!==2&&$e.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if($e.length===1&&y==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return _n(je,y,$e,v)}function Pn(je,y,v){if(R(je),y!=null&&y.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var $e=pn(je,v);if($e.length!==3&&$e.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if($e.length===1&&y==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return _n(je,y,$e,v)}function Ln(je,y,v){if(R(je),y!=null&&y.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var $e=pn(je,v);if($e.length!==4&&$e.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if($e.length===1&&y==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return _n(je,y,$e,v)}function Wn(je,y,v){if(R(je),y!=null&&y.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var $e=pn(je,v);if($e.length!==5&&$e.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if($e.length===1&&y==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return _n(je,y,$e,v)}function Un(je,y,v){if(R(je),y!=null&&y.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var $e=pn(je,v);if($e.length!==6&&$e.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if($e.length===1&&y==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return _n(je,y=y||$e,$e,v)}function Vn(je,y,v,$e){return y===void 0&&(y=!0),Lt.makeVariable(je,y,v,$e)}function zn(je,y){if(y===void 0&&(y="float32"),y==="complex64"){var v=zn(je,"float32"),$e=Gn(je,"float32");return Dn(v,$e)}var Ge=Z(k(je),y);return Lt.makeTensor(Ge,je,y)}function Gn(je,y){if(y===void 0&&(y="float32"),y==="complex64"){var v=Gn(je,"float32"),$e=Gn(je,"float32");return Dn(v,$e)}var Ge=tt(k(je),y);return Lt.makeTensor(Ge,je,y)}function Hn(je,y,v){return Lt.runKernelFunc(function($e){return $e.fill(je,y,v)},{})}function qn(je,y,v){if(v<=0)throw new Error("The number of values should be positive.");return Lt.runKernelFunc(function($e){return $e.linspace(je,y,v)},{})}function Kn(je,y,v,$e){if(v===void 0&&(v=1),$e===void 0&&($e="float32"),v===0)throw new Error("Cannot have a step of zero");if(je===y||je<y&&v<0||y<je&&v>1)return Gn([0],$e);var Ge=tt(Math.abs(Math.ceil((y-je)/v)),$e);y<je&&v===1&&(v=-1),Ge[0]=je;for(var Ke=1;Ke<Ge.length;Ke++)Ge[Ke]=Ge[Ke-1]+v;return Mn(Ge,$e)}var jn=An({onesLike_:function(je){var y=mn(je,"x","onesLike");if(y.dtype==="complex64"){var v=jn(Tn(y)),$e=Xn(Nn(y));return Dn(v,$e)}return Lt.runKernelFunc(function(Ge){return Ge.onesLike(y)},{$x:y},function(Ge,Ke){return{$x:function(){return Xn(Ge)}}})}}),Xn=An({zerosLike_:function(je){var y=mn(je,"x","zerosLike");return Lt.runKernelFunc(function(v){return v.zerosLike(y)},{$x:y},function(v,$e){return{$x:function(){return Xn(v)}}})}}),Yn=An({concat_:function(je,y){y===void 0&&(y=0),C(je.length>=1,function(){return"Pass at least one tensor to concat"});var v=gn(je,"tensors","concat");v[0].dtype==="complex64"&&v.forEach(function(Ye){if(Ye.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+Ye.dtype+". ")}),y=O(y,v[0].shape)[0];var $e=Sn(v.map(function(Ye){return Ye.shape}),y);if(k($e)===0)return Fn([],$e);if((v=v.filter(function(Ye){return Ye.size>0})).length===1)return v[0];var Ge=v.map(function(Ye){return Ye.shape});kn(Ge,y);var Ke=v,qe={axis:y};return Lt.runKernelFunc(function(Ye){return Ye.concat(v,y)},Ke,function(Ye){var Je=Ge.map(function(Qe){return Qe[y]});return tr(Ye,Je,y).map(function(Qe){return function(){return Qe}})},"Concat",qe)}}),$n=An({concat1d_:function(je){return Yn(je,0)}}),Qn=An({concat2d_:function(je,y){return Yn(je,y)}}),Jn=An({concat3d_:function(je,y){return Yn(je,y)}}),Zn=An({concat4d_:function(je,y){return Yn(je,y)}}),tr=An({split_:function(je,y,v){v===void 0&&(v=0);var $e,Ge=mn(je,"x","split");return v=O(v,Ge.shape)[0],typeof y=="number"?(C(Ge.shape[v]%y==0,function(){return"Number of splits must evenly divide the axis."}),$e=new Array(y).fill(Ge.shape[v]/y)):(C(Ge.shape[v]===y.reduce(function(Ke,qe){return Ke+qe}),function(){return"The sum of sizes must match the size of the axis dimension."}),$e=y),Lt.runKernelFunc(function(Ke){return Ke.split(Ge,$e,v)},{$x:Ge},function(Ke){return{$x:function(){return Yn(Ke,v)}}})}});function er(je,y){return je(y={exports:{}},y.exports),y.exports}var nr=er(function(je){(function(y,v,$e){function Ge(Ye){var Je,Qe=this,st=(Je=4022871197,function(Mt){Mt=Mt.toString();for(var on=0;on<Mt.length;on++){var sn=.02519603282416938*(Je+=Mt.charCodeAt(on));sn-=Je=sn>>>0,Je=(sn*=Je)>>>0,Je+=4294967296*(sn-=Je)}return 23283064365386963e-26*(Je>>>0)});Qe.next=function(){var Mt=2091639*Qe.s0+23283064365386963e-26*Qe.c;return Qe.s0=Qe.s1,Qe.s1=Qe.s2,Qe.s2=Mt-(Qe.c=0|Mt)},Qe.c=1,Qe.s0=st(" "),Qe.s1=st(" "),Qe.s2=st(" "),Qe.s0-=st(Ye),Qe.s0<0&&(Qe.s0+=1),Qe.s1-=st(Ye),Qe.s1<0&&(Qe.s1+=1),Qe.s2-=st(Ye),Qe.s2<0&&(Qe.s2+=1),st=null}function Ke(Ye,Je){return Je.c=Ye.c,Je.s0=Ye.s0,Je.s1=Ye.s1,Je.s2=Ye.s2,Je}function qe(Ye,Je){var Qe=new Ge(Ye),st=Je&&Je.state,Mt=Qe.next;return Mt.int32=function(){return 4294967296*Qe.next()|0},Mt.double=function(){return Mt()+11102230246251565e-32*(2097152*Mt()|0)},Mt.quick=Mt,st&&(typeof st=="object"&&Ke(st,Qe),Mt.state=function(){return Ke(Qe,{})}),Mt}v&&v.exports?v.exports=qe:this.alea=qe})(0,je)}),rr=er(function(je){(function(y,v,$e){function Ge(Ye){var Je=this,Qe="";Je.x=0,Je.y=0,Je.z=0,Je.w=0,Je.next=function(){var Mt=Je.x^Je.x<<11;return Je.x=Je.y,Je.y=Je.z,Je.z=Je.w,Je.w^=Je.w>>>19^Mt^Mt>>>8},Ye===(0|Ye)?Je.x=Ye:Qe+=Ye;for(var st=0;st<Qe.length+64;st++)Je.x^=0|Qe.charCodeAt(st),Je.next()}function Ke(Ye,Je){return Je.x=Ye.x,Je.y=Ye.y,Je.z=Ye.z,Je.w=Ye.w,Je}function qe(Ye,Je){var Qe=new Ge(Ye),st=Je&&Je.state,Mt=function(){return(Qe.next()>>>0)/4294967296};return Mt.double=function(){do var on=((Qe.next()>>>11)+(Qe.next()>>>0)/4294967296)/2097152;while(on===0);return on},Mt.int32=Qe.next,Mt.quick=Mt,st&&(typeof st=="object"&&Ke(st,Qe),Mt.state=function(){return Ke(Qe,{})}),Mt}v&&v.exports?v.exports=qe:this.xor128=qe})(0,je)}),or=er(function(je){(function(y,v,$e){function Ge(Ye){var Je=this,Qe="";Je.next=function(){var Mt=Je.x^Je.x>>>2;return Je.x=Je.y,Je.y=Je.z,Je.z=Je.w,Je.w=Je.v,(Je.d=Je.d+362437|0)+(Je.v=Je.v^Je.v<<4^Mt^Mt<<1)|0},Je.x=0,Je.y=0,Je.z=0,Je.w=0,Je.v=0,Ye===(0|Ye)?Je.x=Ye:Qe+=Ye;for(var st=0;st<Qe.length+64;st++)Je.x^=0|Qe.charCodeAt(st),st==Qe.length&&(Je.d=Je.x<<10^Je.x>>>4),Je.next()}function Ke(Ye,Je){return Je.x=Ye.x,Je.y=Ye.y,Je.z=Ye.z,Je.w=Ye.w,Je.v=Ye.v,Je.d=Ye.d,Je}function qe(Ye,Je){var Qe=new Ge(Ye),st=Je&&Je.state,Mt=function(){return(Qe.next()>>>0)/4294967296};return Mt.double=function(){do var on=((Qe.next()>>>11)+(Qe.next()>>>0)/4294967296)/2097152;while(on===0);return on},Mt.int32=Qe.next,Mt.quick=Mt,st&&(typeof st=="object"&&Ke(st,Qe),Mt.state=function(){return Ke(Qe,{})}),Mt}v&&v.exports?v.exports=qe:this.xorwow=qe})(0,je)}),ar=er(function(je){(function(y,v,$e){function Ge(Ye){var Je=this;Je.next=function(){var Qe,st,Mt=Je.x,on=Je.i;return Qe=Mt[on],st=(Qe^=Qe>>>7)^Qe<<24,st^=(Qe=Mt[on+1&7])^Qe>>>10,st^=(Qe=Mt[on+3&7])^Qe>>>3,st^=(Qe=Mt[on+4&7])^Qe<<7,Qe=Mt[on+7&7],st^=(Qe^=Qe<<13)^Qe<<9,Mt[on]=st,Je.i=on+1&7,st},function(Qe,st){var Mt,on=[];if(st===(0|st))on[0]=st;else for(st=""+st,Mt=0;Mt<st.length;++Mt)on[7&Mt]=on[7&Mt]<<15^st.charCodeAt(Mt)+on[Mt+1&7]<<13;for(;on.length<8;)on.push(0);for(Mt=0;Mt<8&&on[Mt]===0;++Mt);for(Mt==8?on[7]=-1:on[Mt],Qe.x=on,Qe.i=0,Mt=256;Mt>0;--Mt)Qe.next()}(Je,Ye)}function Ke(Ye,Je){return Je.x=Ye.x.slice(),Je.i=Ye.i,Je}function qe(Ye,Je){Ye==null&&(Ye=+new Date);var Qe=new Ge(Ye),st=Je&&Je.state,Mt=function(){return(Qe.next()>>>0)/4294967296};return Mt.double=function(){do var on=((Qe.next()>>>11)+(Qe.next()>>>0)/4294967296)/2097152;while(on===0);return on},Mt.int32=Qe.next,Mt.quick=Mt,st&&(st.x&&Ke(st,Qe),Mt.state=function(){return Ke(Qe,{})}),Mt}v&&v.exports?v.exports=qe:this.xorshift7=qe})(0,je)}),ir=er(function(je){(function(y,v,$e){function Ge(Ye){var Je=this;Je.next=function(){var Qe,st,Mt=Je.w,on=Je.X,sn=Je.i;return Je.w=Mt=Mt+1640531527|0,st=on[sn+34&127],Qe=on[sn=sn+1&127],st^=st<<13,Qe^=Qe<<17,st^=st>>>15,Qe^=Qe>>>12,st=on[sn]=st^Qe,Je.i=sn,st+(Mt^Mt>>>16)|0},function(Qe,st){var Mt,on,sn,fn,hn,to=[],Xr=128;for(st===(0|st)?(on=st,st=null):(st+="\0",on=0,Xr=Math.max(Xr,st.length)),sn=0,fn=-32;fn<Xr;++fn)st&&(on^=st.charCodeAt((fn+32)%st.length)),fn===0&&(hn=on),on^=on<<10,on^=on>>>15,on^=on<<4,on^=on>>>13,fn>=0&&(hn=hn+1640531527|0,sn=(Mt=to[127&fn]^=on+hn)==0?sn+1:0);for(sn>=128&&(to[127&(st&&st.length||0)]=-1),sn=127,fn=512;fn>0;--fn)on=to[sn+34&127],Mt=to[sn=sn+1&127],on^=on<<13,Mt^=Mt<<17,on^=on>>>15,Mt^=Mt>>>12,to[sn]=on^Mt;Qe.w=hn,Qe.X=to,Qe.i=sn}(Je,Ye)}function Ke(Ye,Je){return Je.i=Ye.i,Je.w=Ye.w,Je.X=Ye.X.slice(),Je}function qe(Ye,Je){Ye==null&&(Ye=+new Date);var Qe=new Ge(Ye),st=Je&&Je.state,Mt=function(){return(Qe.next()>>>0)/4294967296};return Mt.double=function(){do var on=((Qe.next()>>>11)+(Qe.next()>>>0)/4294967296)/2097152;while(on===0);return on},Mt.int32=Qe.next,Mt.quick=Mt,st&&(st.X&&Ke(st,Qe),Mt.state=function(){return Ke(Qe,{})}),Mt}v&&v.exports?v.exports=qe:this.xor4096=qe})(0,je)}),sr=er(function(je){(function(y,v,$e){function Ge(Ye){var Je=this,Qe="";Je.next=function(){var Mt=Je.b,on=Je.c,sn=Je.d,fn=Je.a;return Mt=Mt<<25^Mt>>>7^on,on=on-sn|0,sn=sn<<24^sn>>>8^fn,fn=fn-Mt|0,Je.b=Mt=Mt<<20^Mt>>>12^on,Je.c=on=on-sn|0,Je.d=sn<<16^on>>>16^fn,Je.a=fn-Mt|0},Je.a=0,Je.b=0,Je.c=-1640531527,Je.d=1367130551,Ye===Math.floor(Ye)?(Je.a=Ye/4294967296|0,Je.b=0|Ye):Qe+=Ye;for(var st=0;st<Qe.length+20;st++)Je.b^=0|Qe.charCodeAt(st),Je.next()}function Ke(Ye,Je){return Je.a=Ye.a,Je.b=Ye.b,Je.c=Ye.c,Je.d=Ye.d,Je}function qe(Ye,Je){var Qe=new Ge(Ye),st=Je&&Je.state,Mt=function(){return(Qe.next()>>>0)/4294967296};return Mt.double=function(){do var on=((Qe.next()>>>11)+(Qe.next()>>>0)/4294967296)/2097152;while(on===0);return on},Mt.int32=Qe.next,Mt.quick=Mt,st&&(typeof st=="object"&&Ke(st,Qe),Mt.state=function(){return Ke(Qe,{})}),Mt}v&&v.exports?v.exports=qe:this.tychei=qe})(0,je)}),ur=er(function(je){(function(y,v){var $e,Ge=this,Ke=256,qe=6,Ye="random",Je=v.pow(Ke,qe),Qe=v.pow(2,52),st=2*Qe,Mt=Ke-1;function on(Xr,co,lo){var fo=[],Uo=hn(function od(fd,hd){var vd,Td=[],Od=typeof fd;if(hd&&Od=="object")for(vd in fd)try{Td.push(od(fd[vd],hd-1))}catch{}return Td.length?Td:Od=="string"?fd:fd+"\0"}((co=co==1?{entropy:!0}:co||{}).entropy?[Xr,to(y)]:Xr??function(){try{var od;return $e&&(od=$e.randomBytes)?od=od(Ke):(od=new Uint8Array(Ke),(Ge.crypto||Ge.msCrypto).getRandomValues(od)),to(od)}catch{var fd=Ge.navigator,hd=fd&&fd.plugins;return[+new Date,Ge,hd,Ge.screen,to(y)]}}(),3),fo),mo=new sn(fo),rd=function(){for(var od=mo.g(qe),fd=Je,hd=0;od<Qe;)od=(od+hd)*Ke,fd*=Ke,hd=mo.g(1);for(;od>=st;)od/=2,fd/=2,hd>>>=1;return(od+hd)/fd};return rd.int32=function(){return 0|mo.g(4)},rd.quick=function(){return mo.g(4)/4294967296},rd.double=rd,hn(to(mo.S),y),(co.pass||lo||function(od,fd,hd,vd){return vd&&(vd.S&&fn(vd,mo),od.state=function(){return fn(mo,{})}),hd?(v[Ye]=od,fd):od})(rd,Uo,"global"in co?co.global:this==v,co.state)}function sn(Xr){var co,lo=Xr.length,fo=this,Uo=0,mo=fo.i=fo.j=0,rd=fo.S=[];for(lo||(Xr=[lo++]);Uo<Ke;)rd[Uo]=Uo++;for(Uo=0;Uo<Ke;Uo++)rd[Uo]=rd[mo=Mt&mo+Xr[Uo%lo]+(co=rd[Uo])],rd[mo]=co;(fo.g=function(od){for(var fd,hd=0,vd=fo.i,Td=fo.j,Od=fo.S;od--;)fd=Od[vd=Mt&vd+1],hd=hd*Ke+Od[Mt&(Od[vd]=Od[Td=Mt&Td+fd])+(Od[Td]=fd)];return fo.i=vd,fo.j=Td,hd})(Ke)}function fn(Xr,co){return co.i=Xr.i,co.j=Xr.j,co.S=Xr.S.slice(),co}function hn(Xr,co){for(var lo,fo=Xr+"",Uo=0;Uo<fo.length;)co[Mt&Uo]=Mt&(lo^=19*co[Mt&Uo])+fo.charCodeAt(Uo++);return to(co)}function to(Xr){return String.fromCharCode.apply(0,Xr)}if(v["seed"+Ye]=on,hn(v.random(),y),je.exports){je.exports=on;try{$e=require("crypto")}catch{}}})([],Math)});ur.alea=nr,ur.xor128=rr,ur.xorwow=or,ur.xorshift7=ar,ur.xor4096=ir,ur.tychei=sr;var cr=ur.alea,lr=function(){function je(y,v,$e,Ge,Ke){this.mean=y,this.stdDev=v,this.dtype=$e,this.nextVal=NaN,this.truncated=Ge,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var qe=Ke||Math.random();this.random=cr(qe.toString())}return je.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var y=this.nextVal;return this.nextVal=NaN,y}for(var v,$e,Ge=!1;!Ge;){var Ke=void 0,qe=void 0,Ye=void 0;do Ye=(Ke=2*this.random()-1)*Ke+(qe=2*this.random()-1)*qe;while(Ye>=1||Ye===0);var Je=Math.sqrt(-2*Math.log(Ye)/Ye);v=this.mean+this.stdDev*Ke*Je,$e=this.mean+this.stdDev*qe*Je,this.truncated&&!this.isValidTruncated(v)||(Ge=!0)}return this.truncated&&!this.isValidTruncated($e)||(this.nextVal=this.convertValue($e)),this.convertValue(v)},je.prototype.convertValue=function(y){return this.dtype==null||this.dtype==="float32"?y:Math.round(y)},je.prototype.isValidTruncated=function(y){return y<=this.upper&&y>=this.lower},je}(),hr=function(){function je(y,v,$e,Ge){this.alpha=y,this.beta=1/v,this.dtype=$e;var Ke=Ge||Math.random();this.randu=cr(Ke.toString()),this.randn=new lr(0,1,$e,!1,this.randu()),this.d=y<1?y+2/3:y-1/3,this.c=1/Math.sqrt(9*this.d)}return je.prototype.nextValue=function(){for(var y,v,$e,Ge,Ke,qe;;){do Ge=this.randn.nextValue(),qe=1+this.c*Ge;while(qe<=0);if(qe*=qe*qe,v=1-.331*(y=Ge*Ge)*y,$e=.5*y+this.d*(1-qe+Math.log(qe)),(Ke=this.randu())<v||Math.log(Ke)<$e)break}return qe=1/this.beta*this.d*qe,this.alpha<1&&(qe*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(qe)},je.prototype.convertValue=function(y){return this.dtype==="float32"?y:Math.round(y)},je}(),fr=function(){function je(y,v,$e,Ge){var Ke=this;if(y===void 0&&(y=0),v===void 0&&(v=1),this.canReturnFloat=function(){return Ke.dtype==null||Ke.dtype==="float32"},this.min=y,this.range=v-y,this.dtype=$e,Ge==null&&(Ge=Math.random()),typeof Ge=="number"&&(Ge=Ge.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+y+" - "+v+" <= 1 and dtype is not float");this.random=cr(Ge)}return je.prototype.convertValue=function(y){return this.canReturnFloat()?y:Math.round(y)},je.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},je}();function dr(je,y,v){return y===void 0&&(y="float32"),y=y||"float32",nt(je),new gt(je,y,v)}function pr(je,y){y===void 0&&(y=!1),console.log(je.toString(y))}var vr=An({batchToSpaceND_:function(je,y,v){var $e=mn(je,"x","batchToSpaceND"),Ge=y.reduce(function(Ke,qe){return Ke*qe});return C($e.rank>=1+y.length,function(){return"input rank is "+$e.rank+" but should be > than blockShape.length "+y.length}),C(v.length===y.length,function(){return"crops.length is "+v.length+" but should be equal to blockShape.length  "+y.length}),C($e.shape[0]%Ge==0,function(){return"input tensor batch is "+$e.shape[0]+" but is not divisible by the product of the elements of blockShape "+y.join(" * ")+" === "+Ge}),Lt.runKernelFunc(function(Ke){return Ke.batchToSpaceND($e,y,v)},{$x:$e},function(Ke){return{$x:function(){return Ke.spaceToBatchND(y,v)}}})}}),mr=An({broadcastTo_:function(je,y){var v=mn(je,"broadcastTo","x"),$e=v.shape;if(y.some(function(Je){return!(Je>0)||Je%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+y+"].");if(y.length<v.rank)throw new Error("broadcastTo(): shape.length="+y.length+" < input.rank="+v.rank+".");if(y.length>v.rank){for(var Ge=v.shape.slice();Ge.length<y.length;)Ge.unshift(1);v=v.reshape(Ge)}for(var Ke=Array.from(y),qe=y.length-1;qe>=0;qe--)if(v.shape[qe]===y[qe])Ke[qe]=1;else if(v.shape[qe]!==1)throw new Error("broadcastTo(): ["+$e+"] cannot be broadcast to ["+y+"].");var Ye=Ke.map(function(Je,Qe){return Je>1?Qe:-1}).filter(function(Je){return Je>=0});return Ye.length===0?v.clone():Lt.runKernelFunc(function(Je){return Je.tile(v,Ke)},{input:v},function(Je){return{input:function(){return Je.sum(Ye,!0)}}})}}),gr=An({cast_:function(je,y){var v=mn(je,"x","cast");if(!W(y))throw new Error("Failed to cast to unknown dtype "+y);if(y==="string"&&v.dtype!=="string"||y!=="string"&&v.dtype==="string")throw new Error("Only strings can be casted to strings");var $e={dtype:y};return Lt.runKernelFunc(function(Ge){return Ge.cast(v,y)},{x:v},function(Ge){return{x:function(){return Ge.clone()}}},"Cast",$e)}}),yr=An({clone_:function(je){var y=mn(je,"x","clone",null);return Lt.runKernelFunc(function(){return Lt.makeTensorFromDataId(y.dataId,y.shape,y.dtype)},{$x:y},function(v){return{$x:function(){return v.toFloat()}}})}}),xr=An({cumsum_:function(je,y,v,$e){y===void 0&&(y=0),v===void 0&&(v=!1),$e===void 0&&($e=!1);var Ge=mn(je,"x","cumsum"),Ke=En([y|=0],Ge.rank),qe=Ge;Ke!=null&&(qe=Ge.transpose(Ke));var Ye=In(1,Ge.rank)[0],Je=Lt.runKernelFunc(function(Qe){return Qe.cumsum(qe,Ye,v,$e)},{permutedX:qe},function(Qe){return{permutedX:function(){return Qe.cumsum(y,v,!$e)}}});return Ke!=null&&(Je=Je.transpose(Ke)),Je}}),br=An({depthToSpace_:function(je,y,v){v===void 0&&(v="NHWC");var $e=mn(je,"x","depthToSpace"),Ge=v==="NHWC"?$e.shape[1]:$e.shape[2],Ke=v==="NHWC"?$e.shape[2]:$e.shape[3],qe=v==="NHWC"?$e.shape[3]:$e.shape[1];return C(Ge*y>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+Ge+" and "+y+`  for depthToSpace with input shape
      `+$e.shape}),C(Ke*y>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+Ke+" and "+y+` for depthToSpace with input shape
          `+$e.shape}),C(qe%(y*y)==0,function(){return"Dimension size must be evenly divisible by "+y*y+" but is "+qe+" for depthToSpace with input shape "+$e.shape}),Lt.runKernelFunc(function(Ye){return Ye.depthToSpace($e,y,v)},{$x:$e})}}),wr=An({expandDims_:function(je,y){y===void 0&&(y=0);var v=mn(je,"x","expandDims",null);C(y<=v.rank,function(){return"Axis must be <= rank of the tensor"});var $e=v.shape.slice();return y<0&&(C(-(v.rank+1)<=y,function(){return"Axis must be in the interval ["+-(v.rank+1)+", "+v.rank+"]"}),y=v.rank+y+1),$e.splice(y,0,1),Or(v,$e)}}),Cr=An({eye_:function(je,y,v,$e){$e===void 0&&($e="float32"),y==null&&(y=je);for(var Ge=dr([je,y],$e),Ke=je<=y?je:y,qe=0;qe<Ke;++qe)Ge.set(1,qe,qe);var Ye=Ge.toTensor().as2D(je,y);if(v==null)return Ye;if(v.length===1)return Lr(wr(Ye,0),[v[0],1,1]);if(v.length===2)return Lr(wr(wr(Ye,0),0),[v[0],v[1],1,1]);if(v.length===3)return Lr(wr(wr(wr(Ye,0),0),0),[v[0],v[1],v[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+v.length+"D.")}}),Er=An({multinomial_:function(je,y,v,$e){$e===void 0&&($e=!1);var Ge=mn(je,"logits","multinomial"),Ke=Ge.size,qe=Ge.rank;if(Ke<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+Ke+".");if(qe>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+qe);v=v||Math.random();var Ye=qe===1?Ge.as2D(1,-1):Ge,Je=Lt.runKernelFunc(function(Qe){return Qe.multinomial(Ye,$e,y,v)},{logits2D:Ye});return qe===1?Je.as1D():Je}}),Rr=An({oneHot_:function(je,y,v,$e){if(v===void 0&&(v=1),$e===void 0&&($e=0),y<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+y);var Ge=mn(je,"indices","oneHot","int32"),Ke=Ge.shape.concat([y]);return Ge=Ge.flatten(),Lt.runKernelFunc(function(qe){return qe.oneHot(Ge,y,v,$e)},{$indices:Ge},function(qe){return{$indices:function(){return Gn(Ge.shape,"float32")}}}).reshape(Ke)}}),Ir=An({pad_:function(je,y,v){v===void 0&&(v=0);var $e=mn(je,"x","pad");if($e.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var Ge={paddings:y,constantValue:v};return Lt.runKernelFunc(function(Ke){return Ke.pad($e,y,v)},{x:$e},function(Ke){var qe=y.map(function(Ye){return Ye[0]});return{x:function(){return Ke.slice(qe,$e.shape)}}},"PadV2",Ge)}}),kr=An({pad1d_:function(je,y,v){return v===void 0&&(v=0),C(y.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Ir(je,[y],v)}}),Sr=An({pad2d_:function(je,y,v){return v===void 0&&(v=0),C(y.length===2&&y[0].length===2&&y[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(je,y,v)}}),Ar=An({pad3d_:function(je,y,v){return v===void 0&&(v=0),C(y.length===3&&y[0].length===2&&y[1].length===2&&y[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(je,y,v)}}),Dr=An({pad4d_:function(je,y,v){return v===void 0&&(v=0),C(y.length===4&&y[0].length===2&&y[1].length===2&&y[2].length===2&&y[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Ir(je,y,v)}}),Tr=An({rand_:function(je,y,v){var $e=k(je),Ge=null;if(v==null||v==="float32")Ge=new Float32Array($e);else if(v==="int32")Ge=new Int32Array($e);else{if(v!=="bool")throw new Error("Unknown data type "+v);Ge=new Uint8Array($e)}for(var Ke=0;Ke<$e;Ke++)Ge[Ke]=y();return Lt.makeTensor(Ge,je,v)}}),Nr=An({randomNormal_:function(je,y,v,$e,Ge){if(y===void 0&&(y=0),v===void 0&&(v=1),$e!=null&&$e==="bool")throw new Error("Unsupported data type "+$e);for(var Ke=new lr(y,v,$e,!1,Ge),qe=dr(je,$e),Ye=0;Ye<qe.values.length;Ye++)qe.values[Ye]=Ke.nextValue();return qe.toTensor()}}),Fr=An({randomGamma_:function(je,y,v,$e,Ge){if(v===void 0&&(v=1),$e===void 0&&($e="float32"),v==null&&(v=1),$e==null&&($e="float32"),$e!=="float32"&&$e!=="int32")throw new Error("Unsupported data type "+$e);for(var Ke=new hr(y,v,$e,Ge),qe=dr(je,$e),Ye=0;Ye<qe.values.length;Ye++)qe.values[Ye]=Ke.nextValue();return qe.toTensor()}}),_r=An({randomUniform_:function(je,y,v,$e,Ge){y===void 0&&(y=0),v===void 0&&(v=1),$e===void 0&&($e="float32");for(var Ke=dr(je,$e),qe=new fr(y,v,null,Ge),Ye=0;Ye<Ke.values.length;Ye++)Ke.values[Ye]=qe.nextValue();return Ke.toTensor()}}),Or=An({reshape_:function(je,y){var v=mn(je,"x","reshape",null);y=_(y,v.size),C(v.size===k(y),function(){return"new shape and old shape must have the same number of elements."});var $e={shape:y};return Lt.runKernelFunc(function(Ge){return Ge.reshape(v,y)},{x:v},function(Ge){return{x:function(){return Ge.reshape(v.shape)}}},"Reshape",$e)}}),Mr=An({spaceToBatchND_:function(je,y,v){var $e=mn(je,"x","spaceToBatchND");return C($e.rank>=1+y.length,function(){return"input rank "+$e.rank+" should be > than [blockShape] "+y.length}),C(v.length===y.length,function(){return"paddings.shape[0] "+v.length+" must be equal to [blockShape] "+y.length}),C($e.shape.reduce(function(Ge,Ke,qe){return qe>0&&qe<=y.length?Ge&&(Ke+v[qe-1][0]+v[qe-1][1])%y[qe-1]==0:Ge},!0),function(){return"input spatial dimensions "+$e.shape.slice(1)+" with paddings "+v.toString()+" must be divisible by blockShapes "+y.toString()}),Lt.runKernelFunc(function(Ge){return Ge.spaceToBatchND($e,y,v)},{$x:$e},function(Ge){return{$x:function(){return Ge.batchToSpaceND(y,v)}}})}}),Br=An({squeeze_:function(je,y){var v=mn(je,"x","squeeze");return Or(v,M(v.shape,y).newShape)}}),Pr=An({stack_:function(je,y){y===void 0&&(y=0);var v=gn(je,"tensors","stack");if(C(v.length>=1,function(){return"Pass at least one tensor to tf.stack"}),v.length===1)return v[0].expandDims(y);var $e=v[0].rank,Ge=v[0].shape,Ke=v[0].dtype;C(y<=$e,function(){return"Axis must be <= rank of the tensor"}),v.forEach(function(Ye){E(Ge,Ye.shape,"All tensors passed to stack must have matching shapes")}),v.forEach(function(Ye){C(Ke===Ye.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var qe=v.map(function(Ye){return Ye.expandDims(y)});return Yn(qe,y)}}),Lr=An({tile_:function(je,y){var v=mn(je,"x","tile",null);C(v.rank===y.length,function(){return"Error in transpose: rank of input "+v.rank+" must match length of reps "+y+"."});var $e=[v],Ge={reps:y};return Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.tile(v,y);return qe([v]),Ye},{x:v},function(Ke,qe){var Ye=qe[0];return{x:function(){var Je=Xn(Ye);if(Ye.rank===1)for(var Qe=0;Qe<y[0];++Qe)Je=Je.add(Ke.slice([Qe*Ye.shape[0]],[Ye.shape[0]]));else if(Ye.rank===2)for(Qe=0;Qe<y[0];++Qe)for(var st=0;st<y[1];++st)Je=Je.add(Ke.slice([Qe*Ye.shape[0],st*Ye.shape[1]],[Ye.shape[0],Ye.shape[1]]));else if(Ye.rank===3)for(Qe=0;Qe<y[0];++Qe)for(st=0;st<y[1];++st)for(var Mt=0;Mt<y[2];++Mt)Je=Je.add(Ke.slice([Qe*Ye.shape[0],st*Ye.shape[1],Mt*Ye.shape[2]],[Ye.shape[0],Ye.shape[1],Ye.shape[2]]));else{if(Ye.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+Ye.rank+" tensors yet.");for(Qe=0;Qe<y[0];++Qe)for(st=0;st<y[1];++st)for(Mt=0;Mt<y[2];++Mt)for(var on=0;on<y[3];++on)Je=Je.add(Ke.slice([Qe*Ye.shape[0],st*Ye.shape[1],Mt*Ye.shape[2],on*Ye.shape[3]],[Ye.shape[0],Ye.shape[1],Ye.shape[2],Ye.shape[3]]))}return Je}}},"Tile",Ge,$e)}}),Wr=An({truncatedNormal_:function(je,y,v,$e,Ge){if(y===void 0&&(y=0),v===void 0&&(v=1),$e!=null&&$e==="bool")throw new Error("Unsupported data type "+$e);for(var Ke=new lr(y,v,$e,!0,Ge),qe=dr(je,$e),Ye=0;Ye<qe.values.length;Ye++)qe.values[Ye]=Ke.nextValue();return qe.toTensor()}}),Ur=An({unstack_:function(je,y){y===void 0&&(y=0),y=y||0;var v=mn(je,"x","unstack");C(y>=-v.shape.length&&y<v.shape.length,function(){return"Axis = "+y+" is not in [-"+v.shape.length+", "+v.shape.length+")"}),y<0&&(y+=v.shape.length);var $e={axis:y};return Lt.runKernelFunc(function(Ge){return Ge.unstack(v,y)},{x:v},function(Ge){return{x:function(){return Pr(Ge,y)}}},"Unpack",$e)}}),Vr=function(je,y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt;return r(this,function(on){switch(on.label){case 0:return v=mn(je,"x","setdiff1d"),$e=mn(y,"y","setdiff1d"),C(v.dtype===$e.dtype,function(){return"x and y should have the same dtype, but got x ("+v.dtype+") and y ("+$e.dtype+")."}),C(v.rank===1,function(){return"x should be 1D tensor, but got x ("+v.shape+")."}),C($e.rank===1,function(){return"y should be 1D tensor, but got y ("+$e.shape+")."}),[4,v.data()];case 1:return Ge=on.sent(),[4,$e.data()];case 2:for(Ke=on.sent(),qe=new Set(Ke),Ye=0,st=0;st<Ge.length;st++)qe.has(Ge[st])||Ye++;for(Je=new gt([Ye],v.dtype),Qe=new gt([Ye],"int32"),st=0,Mt=0;st<Ge.length;st++)qe.has(Ge[st])||(Je.values[Mt]=Ge[st],Qe.values[Mt]=st,Mt++);return[2,[Je.toTensor(),Qe.toTensor()]]}})})};function zr(je,y,v,$e){$e===void 0&&($e=!0);var Ge=[];if($e)(Ge=Ge.concat(y.slice(0))).push(je[0]/v),Ge=Ge.concat(je.slice(1));else{Ge=Ge.concat(je[0]);for(var Ke=y.length,qe=0;qe<Ke;++qe)Ge=Ge.concat([je[qe+1]/y[qe],y[qe]]);Ge=Ge.concat(je.slice(Ke+1))}return Ge}function Gr(je,y,v){v===void 0&&(v=!0);var $e=[];if(v){$e.push(y);for(var Ge=y+1;Ge<je;++Ge)Ge<=2*y?($e.push(Ge),$e.push(Ge-(y+1))):$e.push(Ge)}else{var Ke=[],qe=[];for(Ge=1;Ge<je;++Ge)Ge>=2*y+1||Ge%2==1?qe.push(Ge):Ke.push(Ge);$e.push.apply($e,Ke),$e.push(0),$e.push.apply($e,qe)}return $e}function Hr(je,y,v,$e){$e===void 0&&($e=!0);var Ge=[];$e?Ge.push(je[0]/v):Ge.push(je[0]*v);for(var Ke=1;Ke<je.length;++Ke)Ke<=y.length?$e?Ge.push(y[Ke-1]*je[Ke]):Ge.push(je[Ke]/y[Ke-1]):Ge.push(je[Ke]);return Ge}function qr(je,y){for(var v=[0],$e=0;$e<y;++$e)v.push(je[$e][0]);return v}function Kr(je,y,v){for(var $e=je.slice(0,1),Ge=0;Ge<v;++Ge)$e.push(je[Ge+1]-y[Ge][0]-y[Ge][1]);return $e}function jr(je,y){if(je.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+je.rank+".");if(y.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+y.rank+".");if(y.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+y.dtype+".");if(y.shape[y.rank-1]>je.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+y.shape[y.rank-1]+" vs. "+je.rank);if(je.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+je.shape+".");for(var v=y.shape,$e=v[v.length-1],Ge=1,Ke=0;Ke<v.length-1;++Ke)Ge*=v[Ke];var qe=je.shape,Ye=v.slice();Ye.pop();var Je=1;for(Ke=$e;Ke<je.rank;++Ke)Je*=qe[Ke],Ye.push(qe[Ke]);var Qe=$(je.shape).map(function(st){return st/Je}).concat([1]).slice(0,$e);return[Ye,Ge,Je,Qe]}var Yr=30;function $r(je){return je<=Yr?je:Y(je,Math.floor(Math.sqrt(je)))}function Qr(je,y,v){var $e=y.rank>1?y.shape[y.rank-1]:1,Ge=y.rank>1?y.rank-1:1,Ke="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+v.shape+", indices.shape: "+y.shape+", shape: "+je+", sliceDim: "+$e+", and batchDim: "+Ge+".";if(v.rank<Ge)throw new Error(Ke+" update.rank < "+Ge+". ");if(je.length<$e+(v.rank-Ge))throw new Error(Ke+" Output shape length < "+($e+(v.rank-Ge)));if(v.rank!==Ge+je.length-$e)throw new Error(Ke+" update.rank != "+(Ge+je.length-$e));for(var qe=0;qe<Ge;++qe)if(v.shape[qe]!==y.shape[qe])throw new Error(Ke+" updates.shape["+qe+"] ("+v.shape[qe]+") != indices.shape["+qe+"] ("+y.shape[qe]+").");for(qe=0;qe<v.rank-Ge;++qe)if(v.shape[qe+Ge]!==je[qe+$e])throw new Error(Ke+" updates.shape["+(qe+Ge)+"] ("+v.shape[qe+Ge]+") != shape["+(qe+Ge)+"] ("+je[qe+Ge]+")")}function Jr(je,y,v){if(y.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+y.rank+".");if(je.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+je.rank+".");if(y.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+y.dtype);if(v.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+v);if(v.length===0){if(y.size===0)throw new Error("Indices specified for empty output. indices shape: "+y.shape);if(je.size===0)throw new Error("Updates specified for empty output. updates shape: "+je.shape)}Qr(v,y,je)}function Zr(je,y,v){for(var $e=y.shape.length,Ge=$e>1?y.shape[$e-1]:1,Ke=v.length,qe=1,Ye=Ge;Ye<Ke;++Ye)qe*=v[Ye];var Je=Ge<1?1:Ge;return{sliceRank:Ge,numUpdates:k(y.shape)/Je,sliceSize:qe,strides:$(v.slice(0,Ge)).concat([1]),outputSize:k(v)}}function eo(je,y,v){C(je.rank===y.length,function(){return"Error in slice"+je.rank+"D: Length of begin "+y+" must match the rank of the array ("+je.rank+")."}),C(je.rank===v.length,function(){return"Error in slice"+je.rank+"D: Length of size "+v+" must match the rank of the array ("+je.rank+")."});for(var $e=function(Ke){C(y[Ke]+v[Ke]<=je.shape[Ke],function(){return"Error in slice"+je.rank+"D: begin["+Ke+"] + size["+Ke+"] ("+(y[Ke]+v[Ke])+") would overflow input.shape["+Ke+"] ("+je.shape[Ke]+")"})},Ge=0;Ge<je.rank;++Ge)$e(Ge)}function no(je){for(var y=[],v=0;je>0;)1&je&&y.push(v),je/=2,v++;return y}function ro(je,y,v){for(var $e=[],Ge=0;Ge<je.length;Ge++)$e[Ge]=Math.ceil((y[Ge]-je[Ge])/v[Ge]);return $e}function oo(je,y,v,$e,Ge){var Ke=y[Ge],qe=v[Ge]||1;(je&1<<Ge||Ke==null)&&(Ke=qe>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var Ye=$e[Ge];return Ke<0&&(Ke+=Ye),Ke=x(0,Ke,Ye-1)}function ao(je,y,v,$e,Ge){var Ke=y[Ge],qe=v[Ge]||1;(je&1<<Ge||Ke==null)&&(Ke=qe>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var Ye=$e[Ge];return Ke<0&&(Ke+=Ye),Ke=qe>0?x(0,Ke,Ye):x(-1,Ke,Ye-1)}function io(je,y,v){for(var $e=v.length,Ge=0;Ge<v.length;Ge++)if(v[Ge]>1){$e=Ge;break}for(Ge=$e+1;Ge<v.length;Ge++)if(y[Ge]>0||v[Ge]!==je[Ge])return!1;return!0}function so(je,y){for(var v=je.length>0?je[je.length-1]:1,$e=0;$e<je.length-1;$e++)v+=je[$e]*y[$e];return v}function po(je,y){C(X(je),function(){return"The f passed in variableGrads(f) must be a function"}),C(y==null||Array.isArray(y)&&y.every(function(st){return st instanceof St}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var v=y!=null;if(!v)for(var $e in y=[],Lt.registeredVariables)y.push(Lt.registeredVariables[$e]);var Ge=v?y.filter(function(st){return!st.trainable}):null,Ke=y.length;C((y=y.filter(function(st){return st.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+Ke+" variables is trainable."});var qe=Lt.gradients(je,y,null,!0),Ye=qe.value,Je=qe.grads;C(Je.some(function(st){return st!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),C(Ye.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+Ye.rank+" tensor"});var Qe={};return y.forEach(function(st,Mt){Je[Mt]!=null&&(Qe[st.name]=Je[Mt])}),Ge!=null&&Ge.forEach(function(st){return Qe[st.name]=null}),{value:Ye,grads:Qe}}function vo(je){return Lt.customGrad(je)}var go=An({softmax_:function(je,y){y===void 0&&(y=-1);var v=mn(je,"logits","softmax","float32");if(y===-1&&(y=v.rank-1),y!==v.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+v.rank+" and dim was "+y);return Lt.runKernelFunc(function($e,Ge){var Ke=$e.softmax(v,y);return Ge([Ke]),Ke},{logits:v},function($e,Ge){var Ke=Ge[0],qe=$e.mul(Ke);return{logits:function(){return qe.sub(qe.sum([y],!0).mul(Ke))}}},"Softmax",{dim:y},[],[!0])}}),yo=An({logSoftmax_:function(je,y){y===void 0&&(y=-1);var v=mn(je,"logits","logSoftmax");if(y===-1&&(y=v.rank-1),y!==v.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+v.rank+" and axis was "+y);return vo(function($e,Ge){var Ke=$e.max(y,!0),qe=$e.sub(Ke),Ye=qe.toFloat().sub(qe.exp().sum(y,!0).log());return Ge([Ye]),{value:Ye,gradFunc:function(Je,Qe){var st=Qe[0].exp();return Je.sub(Je.sum(y,!0).mul(st))}}})(v)}}),xo=function(){function je(y,v){this.backend=y,this.dataMover=v,this.data=new WeakMap,this.dataIdsCount=0}return je.prototype.get=function(y){return this.data.has(y)||this.dataMover.moveData(this.backend,y),this.data.get(y)},je.prototype.set=function(y,v){this.dataIdsCount++,this.data.set(y,v)},je.prototype.has=function(y){return this.data.has(y)},je.prototype.delete=function(y){return this.dataIdsCount--,this.data.delete(y)},je.prototype.numDataIds=function(){return this.dataIdsCount},je}(),bo=function(){function je(){}return je.prototype.time=function(y){return wo("time")},je.prototype.read=function(y){return wo("read")},je.prototype.readSync=function(y){return wo("readSync")},je.prototype.numDataIds=function(){return wo("numDataIds")},je.prototype.disposeData=function(y){return wo("disposeData")},je.prototype.write=function(y,v,$e){return wo("write")},je.prototype.move=function(y,v,$e,Ge){return wo("move")},je.prototype.memory=function(){return wo("memory")},je.prototype.floatPrecision=function(){return wo("floatPrecision")},je.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},je.prototype.batchMatMul=function(y,v,$e,Ge){return wo("batchMatMul")},je.prototype.fusedBatchMatMul=function(y){return y.a,y.b,y.transposeA,y.transposeB,y.bias,y.activation,y.preluActivationWeights,wo("fusedBatchMatMul")},je.prototype.slice=function(y,v,$e){return wo("slice")},je.prototype.stridedSlice=function(y,v,$e,Ge){return wo("stridedSlice")},je.prototype.unstack=function(y,v){return wo("unstack")},je.prototype.reverse=function(y,v){return wo("reverse")},je.prototype.concat=function(y,v){return wo("concat")},je.prototype.neg=function(y){return wo("neg")},je.prototype.add=function(y,v){return wo("add")},je.prototype.addN=function(y){return wo("addN")},je.prototype.subtract=function(y,v){return wo("subtract")},je.prototype.multiply=function(y,v){return wo("multiply")},je.prototype.realDivide=function(y,v){return wo("realDivide")},je.prototype.floorDiv=function(y,v){return wo("floorDiv")},je.prototype.sum=function(y,v){return wo("sum")},je.prototype.prod=function(y,v){return wo("prod")},je.prototype.unsortedSegmentSum=function(y,v,$e){return wo("unsortedSegmentSum")},je.prototype.argMin=function(y,v){return wo("argMin")},je.prototype.argMax=function(y,v){return wo("argMax")},je.prototype.equal=function(y,v){return wo("equal")},je.prototype.notEqual=function(y,v){return wo("notEqual")},je.prototype.less=function(y,v){return wo("less")},je.prototype.lessEqual=function(y,v){return wo("lessEqual")},je.prototype.greater=function(y,v){return wo("greater")},je.prototype.greaterEqual=function(y,v){return wo("greaterEqual")},je.prototype.logicalNot=function(y){return wo("logicalNot")},je.prototype.logicalAnd=function(y,v){return wo("logicalAnd")},je.prototype.logicalOr=function(y,v){return wo("logicalOr")},je.prototype.where=function(y){return wo("where")},je.prototype.select=function(y,v,$e){return wo("select")},je.prototype.topk=function(y,v,$e){return wo("topk")},je.prototype.min=function(y,v){return wo("min")},je.prototype.minimum=function(y,v){return wo("minimum")},je.prototype.mod=function(y,v){return wo("mod")},je.prototype.max=function(y,v){return wo("max")},je.prototype.maximum=function(y,v){return wo("maximum")},je.prototype.all=function(y,v){return wo("all")},je.prototype.any=function(y,v){return wo("any")},je.prototype.squaredDifference=function(y,v){return wo("squaredDifference")},je.prototype.ceil=function(y){return wo("ceil")},je.prototype.floor=function(y){return wo("floor")},je.prototype.round=function(y){return wo("round")},je.prototype.sign=function(y){return wo("sign")},je.prototype.isNaN=function(y){return wo("isNaN")},je.prototype.isInf=function(y){return wo("isInf")},je.prototype.isFinite=function(y){return wo("isFinite")},je.prototype.pow=function(y,v){return wo("pow")},je.prototype.exp=function(y){return wo("exp")},je.prototype.expm1=function(y){return wo("expm1")},je.prototype.softmax=function(y,v){return wo("softmax")},je.prototype.log=function(y){return wo("log")},je.prototype.log1p=function(y){return wo("log1p")},je.prototype.sqrt=function(y){return wo("sqrt")},je.prototype.rsqrt=function(y){return wo("rsqrt")},je.prototype.square=function(y){return wo("square")},je.prototype.reciprocal=function(y){return wo("reciprocal")},je.prototype.relu=function(y){return wo("relu")},je.prototype.relu6=function(y){return wo("relu6")},je.prototype.prelu=function(y,v){return wo("prelu")},je.prototype.elu=function(y){return wo("elu")},je.prototype.eluDer=function(y,v){return wo("eluDer")},je.prototype.selu=function(y){return wo("selu")},je.prototype.int=function(y){return wo("int")},je.prototype.clip=function(y,v,$e){return wo("clip")},je.prototype.abs=function(y){return wo("abs")},je.prototype.complexAbs=function(y){return wo("complexAbs")},je.prototype.sigmoid=function(y){return wo("sigmoid")},je.prototype.softplus=function(y){return wo("softplus")},je.prototype.sin=function(y){return wo("sin")},je.prototype.cos=function(y){return wo("cos")},je.prototype.tan=function(y){return wo("tan")},je.prototype.asin=function(y){return wo("asin")},je.prototype.acos=function(y){return wo("acos")},je.prototype.atan=function(y){return wo("atan")},je.prototype.atan2=function(y,v){return wo("atan2")},je.prototype.sinh=function(y){return wo("sinh")},je.prototype.cosh=function(y){return wo("cosh")},je.prototype.tanh=function(y){return wo("tanh")},je.prototype.asinh=function(y){return wo("asinh")},je.prototype.acosh=function(y){return wo("acosh")},je.prototype.atanh=function(y){return wo("atanh")},je.prototype.erf=function(y){return wo("erf")},je.prototype.step=function(y,v){return wo("step")},je.prototype.fusedConv2d=function(y){return y.input,y.filter,y.convInfo,y.bias,y.activation,y.preluActivationWeights,wo("fusedConv2d")},je.prototype.conv2d=function(y,v,$e){return wo("conv2d")},je.prototype.conv2dDerInput=function(y,v,$e){return wo("conv2dDerInput")},je.prototype.conv2dDerFilter=function(y,v,$e){return wo("conv2dDerFilter")},je.prototype.fusedDepthwiseConv2D=function(y){return y.input,y.filter,y.convInfo,y.bias,y.activation,y.preluActivationWeights,wo("fusedDepthwiseConv2D")},je.prototype.depthwiseConv2D=function(y,v,$e){return wo("depthwiseConv2D")},je.prototype.depthwiseConv2DDerInput=function(y,v,$e){return wo("depthwiseConv2DDerInput")},je.prototype.depthwiseConv2DDerFilter=function(y,v,$e){return wo("depthwiseConv2DDerFilter")},je.prototype.conv3d=function(y,v,$e){return wo("conv3d")},je.prototype.conv3dDerInput=function(y,v,$e){return wo("conv3dDerInput")},je.prototype.conv3dDerFilter=function(y,v,$e){return wo("conv3dDerFilter")},je.prototype.maxPool=function(y,v){return wo("maxPool")},je.prototype.maxPoolBackprop=function(y,v,$e,Ge){return wo("maxPoolBackprop")},je.prototype.avgPool=function(y,v){return wo("avgPool")},je.prototype.avgPoolBackprop=function(y,v,$e){return wo("avgPoolBackprop")},je.prototype.avgPool3d=function(y,v){return wo("avgPool3d")},je.prototype.avgPool3dBackprop=function(y,v,$e){return wo("avgPool3dBackprop")},je.prototype.maxPool3d=function(y,v){return wo("maxPool3d")},je.prototype.maxPool3dBackprop=function(y,v,$e,Ge){return wo("maxPool3dBackprop")},je.prototype.reshape=function(y,v){return wo("reshape")},je.prototype.cast=function(y,v){return wo("cast")},je.prototype.tile=function(y,v){return wo("tile")},je.prototype.pad=function(y,v,$e){return wo("pad")},je.prototype.transpose=function(y,v){return wo("transpose")},je.prototype.gather=function(y,v,$e){return wo("gather")},je.prototype.gatherND=function(y,v){return wo("gatherND")},je.prototype.scatterND=function(y,v,$e){return wo("scatterND")},je.prototype.batchToSpaceND=function(y,v,$e){return wo("batchToSpaceND")},je.prototype.spaceToBatchND=function(y,v,$e){return wo("spaceToBatchND")},je.prototype.resizeBilinear=function(y,v,$e,Ge){return wo("resizeBilinear")},je.prototype.resizeBilinearBackprop=function(y,v,$e){return wo("resizeBilinearBackprop")},je.prototype.resizeNearestNeighbor=function(y,v,$e,Ge){return wo("resizeNearestNeighbor")},je.prototype.resizeNearestNeighborBackprop=function(y,v,$e){return wo("resizeNearestNeighborBackprop")},je.prototype.batchNormalization=function(y,v,$e,Ge,Ke,qe){return wo("batchNormalization")},je.prototype.localResponseNormalization4D=function(y,v,$e,Ge,Ke){return wo("localResponseNormalization4D")},je.prototype.LRNGrad=function(y,v,$e,Ge,Ke,qe,Ye){return wo("LRNGrad")},je.prototype.multinomial=function(y,v,$e,Ge){return wo("multinomial")},je.prototype.oneHot=function(y,v,$e,Ge){return wo("oneHot")},je.prototype.cumsum=function(y,v,$e,Ge){return wo("cumsum")},je.prototype.nonMaxSuppression=function(y,v,$e,Ge,Ke){return wo("nonMaxSuppression")},je.prototype.fft=function(y){return wo("fft")},je.prototype.ifft=function(y){return wo("ifft")},je.prototype.complex=function(y,v){return wo("complex")},je.prototype.real=function(y){return wo("real")},je.prototype.imag=function(y){return wo("imag")},je.prototype.cropAndResize=function(y,v,$e,Ge,Ke,qe){return wo("cropAndResize")},je.prototype.depthToSpace=function(y,v,$e){return wo("depthToSpace")},je.prototype.split=function(y,v,$e){return wo("split")},je.prototype.sparseToDense=function(y,v,$e,Ge){return wo("sparseToDense")},je.prototype.diag=function(y){return wo("diag")},je.prototype.fill=function(y,v,$e){return wo("fill")},je.prototype.onesLike=function(y){return wo("onesLike")},je.prototype.zerosLike=function(y){return wo("zerosLike")},je.prototype.linspace=function(y,v,$e){return wo("linspace")},je.prototype.dispose=function(){return wo("dispose")},je}();function wo(je){throw new Error("'"+je+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Co(je,y){for(var v=je.length,$e=[],Ge=0;Ge<v;Ge++){var Ke=v-1-Ge,qe=je[Ke]||1;(y[y.length-1-Ge]||1)>1&&qe===1&&$e.unshift(Ke)}return $e}function Eo(je,y){for(var v=[],$e=0;$e<y.length;$e++){var Ge=je[je.length-$e-1],Ke=y.length-$e-1,qe=y[Ke];(Ge==null||Ge===1&&qe>1)&&v.unshift(Ke)}return v}function Ro(je,y){for(var v=[],$e=Math.max(je.length,y.length),Ge=0;Ge<$e;Ge++){var Ke=je[je.length-Ge-1];Ke==null&&(Ke=1);var qe=y[y.length-Ge-1];if(qe==null&&(qe=1),Ke===1)v.unshift(qe);else if(qe===1)v.unshift(Ke);else{if(Ke!==qe)throw Error("Operands could not be broadcast together with shapes "+je+" and "+y+".");v.unshift(Ke)}}return v}function Io(je,y,v,$e,Ge,Ke,qe){qe===void 0&&(qe="channelsLast");var Ye,Je=To(y),Qe=Je[0],st=Je[1];if(qe==="channelsLast")Ye=[Qe,st,je[3],je[3]];else{if(qe!=="channelsFirst")throw new Error("Unknown dataFormat "+qe);Ye=[Qe,st,je[1],je[1]]}return So(je,Ye,v,$e,Ge,Ke,!1,qe)}function ko(je,y,v,$e,Ge,Ke,qe){qe===void 0&&(qe="NDHWC");var Ye,Je,Qe=No(y),st=Qe[0],Mt=Qe[1],on=Qe[2];if(qe==="NDHWC")Je="channelsLast",Ye=[st,Mt,on,je[4],je[4]];else{if(qe!=="NCDHW")throw new Error("Unknown dataFormat "+qe);Je="channelsFirst",Ye=[st,Mt,on,je[1],je[1]]}return Ao(je,Ye,v,$e,Ge,!1,Je,Ke)}function So(je,y,v,$e,Ge,Ke,qe,Ye){qe===void 0&&(qe=!1),Ye===void 0&&(Ye="channelsLast");var Je=[-1,-1,-1,-1],Qe=Je[0],st=Je[1],Mt=Je[2],on=Je[3];if(Ye==="channelsLast")Qe=je[0],st=je[1],Mt=je[2],on=je[3];else{if(Ye!=="channelsFirst")throw new Error("Unknown dataFormat "+Ye);Qe=je[0],on=je[1],st=je[2],Mt=je[3]}var sn,fn=y[0],hn=y[1],to=y[3],Xr=To(v),co=Xr[0],lo=Xr[1],fo=To($e),Uo=fo[0],mo=fo[1],rd=Fo(fn,Uo),od=Fo(hn,mo),fd=function(Md,Fd,Ud,pd,_d,Bd,$d,jd){var Pd,yd,Ld;if(typeof Md=="number"){Pd={top:Md,bottom:Md,left:Md,right:Md,type:Md===0?"VALID":"NUMBER"};var zd=function(vp,wp,md,Ad,Nd){Ad==null&&(Ad=Do(vp,wp,md));var Hd=vp[0],Kd=vp[1],Qd=_o((Hd-wp+2*Ad)/md+1,Nd);C(A(Qd),function(){return"The output # of rows ("+Qd+") must be an integer. Change the stride and/or zero pad parameters"});var rp=_o((Kd-wp+2*Ad)/md+1,Nd);return C(A(rp),function(){return"The output # of columns ("+rp+") must be an integer. Change the stride and/or zero pad parameters"}),[Qd,rp]}([Fd,Ud],Bd,pd,Md,jd);yd=zd[0],Ld=zd[1]}else if(Md==="same"){yd=Math.ceil(Fd/pd),Ld=Math.ceil(Ud/_d);var Jd=Math.max(0,(yd-1)*pd+Bd-Fd),cp=Math.max(0,(Ld-1)*_d+$d-Ud),mp=Math.floor(Jd/2),gp=Jd-mp,_p=Math.floor(cp/2);Pd={top:mp,bottom:gp,left:_p,right:cp-_p,type:"SAME"}}else{if(Md!=="valid")throw Error("Unknown padding parameter: "+Md);Pd={top:0,bottom:0,left:0,right:0,type:"VALID"},yd=Math.ceil((Fd-Bd+1)/pd),Ld=Math.ceil((Ud-$d+1)/_d)}return{padInfo:Pd,outHeight:yd,outWidth:Ld}}(Ge,st,Mt,co,lo,rd,od,Ke),hd=fd.padInfo,vd=fd.outHeight,Td=fd.outWidth,Od=qe?to*on:to;return Ye==="channelsFirst"?sn=[Qe,Od,vd,Td]:Ye==="channelsLast"&&(sn=[Qe,vd,Td,Od]),{batchSize:Qe,dataFormat:Ye,inHeight:st,inWidth:Mt,inChannels:on,outHeight:vd,outWidth:Td,outChannels:Od,padInfo:hd,strideHeight:co,strideWidth:lo,filterHeight:fn,filterWidth:hn,effectiveFilterHeight:rd,effectiveFilterWidth:od,dilationHeight:Uo,dilationWidth:mo,inShape:je,outShape:sn,filterShape:y}}function Ao(je,y,v,$e,Ge,Ke,qe,Ye){Ke===void 0&&(Ke=!1),qe===void 0&&(qe="channelsLast");var Je=[-1,-1,-1,-1,-1],Qe=Je[0],st=Je[1],Mt=Je[2],on=Je[3],sn=Je[4];if(qe==="channelsLast")Qe=je[0],st=je[1],Mt=je[2],on=je[3],sn=je[4];else{if(qe!=="channelsFirst")throw new Error("Unknown dataFormat "+qe);Qe=je[0],sn=je[1],st=je[2],Mt=je[3],on=je[4]}var fn,hn=y[0],to=y[1],Xr=y[2],co=y[4],lo=No(v),fo=lo[0],Uo=lo[1],mo=lo[2],rd=No($e),od=rd[0],fd=rd[1],hd=rd[2],vd=Fo(hn,od),Td=Fo(to,fd),Od=Fo(Xr,hd),Md=function($d,jd,Pd,yd,Ld,zd,Jd,cp,mp,gp,_p){var vp,wp,md,Ad;if(typeof $d=="number"){vp={top:$d,bottom:$d,left:$d,right:$d,front:$d,back:$d,type:$d===0?"VALID":"NUMBER"};var Nd=function(yp,bp,Cp,Dp,Lp,Mp){Lp==null&&(Lp=Do(yp,bp,Dp));var jp=yp[0],ev=yp[1],ap=yp[2],dp=_o((jp-bp+2*Lp)/Dp+1,Mp);C(A(dp),function(){return"The output # of depths ("+dp+") must be an integer. Change the stride and/or zero pad parameters"});var Ep=_o((ev-bp+2*Lp)/Dp+1,Mp);C(A(Ep),function(){return"The output # of rows ("+Ep+") must be an integer. Change the stride and/or zero pad parameters"});var Ap=_o((ap-bp+2*Lp)/Dp+1,Mp);return C(A(Ap),function(){return"The output # of columns ("+Ap+") must be an integer. Change the stride and/or zero pad parameters"}),[dp,Ep,Ap,Cp]}([jd,Pd,yd,1],cp,1,Ld,$d,_p);wp=Nd[0],md=Nd[1],Ad=Nd[2]}else if($d==="same"){wp=Math.ceil(jd/Ld),md=Math.ceil(Pd/zd),Ad=Math.ceil(yd/Jd);var Hd=(wp-1)*Ld+cp-jd,Kd=(md-1)*zd+mp-Pd,Qd=(Ad-1)*Jd+gp-yd,rp=Math.floor(Hd/2),np=Hd-rp,ip=Math.floor(Kd/2),Zd=Kd-ip,sp=Math.floor(Qd/2);vp={top:ip,bottom:Zd,left:sp,right:Qd-sp,front:rp,back:np,type:"SAME"}}else{if($d!=="valid")throw Error("Unknown padding parameter: "+$d);vp={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},wp=Math.ceil((jd-cp+1)/Ld),md=Math.ceil((Pd-mp+1)/zd),Ad=Math.ceil((yd-gp+1)/Jd)}return{padInfo:vp,outDepth:wp,outHeight:md,outWidth:Ad}}(Ge,st,Mt,on,fo,Uo,mo,vd,Td,Od,Ye),Fd=Md.padInfo,Ud=Md.outDepth,pd=Md.outHeight,_d=Md.outWidth,Bd=Ke?co*sn:co;return qe==="channelsFirst"?fn=[Qe,Bd,Ud,pd,_d]:qe==="channelsLast"&&(fn=[Qe,Ud,pd,_d,Bd]),{batchSize:Qe,dataFormat:qe,inDepth:st,inHeight:Mt,inWidth:on,inChannels:sn,outDepth:Ud,outHeight:pd,outWidth:_d,outChannels:Bd,padInfo:Fd,strideDepth:fo,strideHeight:Uo,strideWidth:mo,filterDepth:hn,filterHeight:to,filterWidth:Xr,effectiveFilterDepth:vd,effectiveFilterHeight:Td,effectiveFilterWidth:Od,dilationDepth:od,dilationHeight:fd,dilationWidth:hd,inShape:je,outShape:fn,filterShape:y}}function Do(je,y,v,$e){$e===void 0&&($e=1);var Ge=Fo(y,$e);return Math.floor((je[0]*(v-1)-v+Ge)/2)}function To(je){return typeof je=="number"?[je,je,je]:je.length===2?[je[0],je[1],1]:je}function No(je){return typeof je=="number"?[je,je,je]:je}function Fo(je,y){return y<=1?je:je+(je-1)*(y-1)}function _o(je,y){if(!y)return je;switch(y){case"round":return Math.round(je);case"ceil":return Math.ceil(je);case"floor":return Math.floor(je);default:throw new Error("Unknown roundingMode "+y)}}function Oo(je){var y=To(je),v=y[0],$e=y[1],Ge=y[2];return v===1&&$e===1&&Ge===1}function Mo(je,y){return Oo(je)||Oo(y)}function Bo(je){if(je==="NHWC")return"channelsLast";if(je==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+je)}function Po(je,y,v){if(y==="complex64"){if(je.dtype==="complex64")return je.clone();var $e=Gn(je.shape),Ge=je.toFloat(),Ke=v.complex(Ge,$e);return $e.dispose(),Ge.dispose(),Ke}if(!U(je.dtype,y))return Lt.makeTensorFromDataId(je.dataId,je.shape,y);if(je.dtype==="complex64"){var qe=v.real(je);return Ke=qe.cast(y),qe.dispose(),Ke}if(y==="int32")return v.int(je);if(y==="bool"){var Ye=On(0,je.dtype);return Ke=v.notEqual(je,Ye),Ye.dispose(),Ke}throw new Error("Error in Cast: failed to cast "+je.dtype+" to "+y)}function Lo(je,y){return Lt.makeTensorFromDataId(je.dataId,y,je.dtype)}function Wo(je,y,v){var $e=(y-je)/(v-1),Ge=tt(v,"float32");Ge[0]=je;for(var Ke=1;Ke<Ge.length;Ke++)Ge[Ke]=Ge[Ke-1]+$e;return Mn(Ge,"float32")}function Vo(je,y){if(je.length!==y.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+je.length+", imag: "+y.length+".");for(var v=new Float32Array(2*je.length),$e=0;$e<v.length;$e+=2)v[$e]=je[$e/2],v[$e+1]=y[$e/2];return v}function zo(je,y){return{real:je[2*y],imag:je[2*y+1]}}function Go(je,y,v,$e){je[2*$e]=y,je[2*$e+1]=v}function Ho(je,y,v){var $e=(v?2:-2)*Math.PI*(je/y);return{real:Math.cos($e),imag:Math.sin($e)}}function qo(je,y,v){var $e=function(Ke,qe,Ye){return function(Je,Qe,st){for(var Mt=0,on=Je.length,sn=0,fn=!1;Mt<on;){var hn=st(Qe,Je[sn=Mt+(on-Mt>>>1)]);hn>0?Mt=sn+1:(on=sn,fn=!hn)}return fn?Mt:-Mt-1}(Ke,qe,Ye||Ko)}(je,y,v),Ge=$e<0?-($e+1):$e;je.splice(Ge,0,y)}function Ko(je,y){return je>y?1:je<y?-1:0}function jo(je,y,v,$e,Ge){return Yo(je,y,v,$e,Ge,0).selectedIndices}function Xo(je,y,v,$e,Ge,Ke){var qe=Yo(je,y,v,$e,Ge,Ke);return qe.numValidOutputs.dispose(),{selectedIndices:qe.selectedIndices,selectedScores:qe.selectedScores}}function Yo(je,y,v,$e,Ge,Ke,qe,Ye){Ye===void 0&&(Ye=!1);for(var Je=Array.from(y).map(function(fo,Uo){return{score:fo,boxIndex:Uo,suppressBeginIndex:0}}).filter(function(fo){return fo.score>Ge}).sort(Jo),Qe=Ke>0?-.5/Ke:0,st=[],Mt=[];st.length<v&&Je.length>0;){var on=Je.pop(),sn=on.score,fn=on.boxIndex,hn=on.suppressBeginIndex;if(sn<Ge)break;for(var to=!1,Xr=st.length-1;Xr>=hn;--Xr){var co=$o(je,fn,st[Xr]);if(co>=$e){to=!0;break}if(on.score=on.score*Qo($e,Qe,co),on.score<=Ge)break}on.suppressBeginIndex=st.length,to||(on.score===sn?(st.push(fn),Mt.push(on.score)):on.score>Ge&&qo(Je,on,Jo))}var lo=st.length;return Ye&&(st.fill(0,lo),Mt.fill(0,lo)),{selectedIndices:Mn(st,"int32"),selectedScores:Mn(Mt,"float32"),numValidOutputs:On(lo,"int32")}}function $o(je,y,v){var $e=je.subarray(4*y,4*y+4),Ge=je.subarray(4*v,4*v+4),Ke=Math.min($e[0],$e[2]),qe=Math.min($e[1],$e[3]),Ye=Math.max($e[0],$e[2]),Je=Math.max($e[1],$e[3]),Qe=Math.min(Ge[0],Ge[2]),st=Math.min(Ge[1],Ge[3]),Mt=Math.max(Ge[0],Ge[2]),on=Math.max(Ge[1],Ge[3]),sn=(Ye-Ke)*(Je-qe),fn=(Mt-Qe)*(on-st);if(sn<=0||fn<=0)return 0;var hn=Math.max(Ke,Qe),to=Math.max(qe,st),Xr=Math.min(Ye,Mt),co=Math.min(Je,on),lo=Math.max(Xr-hn,0)*Math.max(co-to,0);return lo/(sn+fn-lo)}function Qo(je,y,v){var $e=Math.exp(y*v*v);return v<=je?$e:0}function Jo(je,y){return je.score-y.score||je.score===y.score&&y.boxIndex-je.boxIndex}function Zo(je,y,v){var $e=new Array(je.rank).fill(0),Ge=je.shape.slice();return y.map(function(Ke){Ge[v]=Ke;var qe=je.slice($e,Ge);return $e[v]+=Ke,qe})}function ta(je,y){for(var v=new Array(je.rank),$e=0;$e<v.length;$e++)v[$e]=je.shape[$e]*y[$e];var Ge=dr(v,je.dtype);for($e=0;$e<Ge.values.length;++$e){for(var Ke=Ge.indexToLoc($e),qe=new Array(je.rank),Ye=0;Ye<qe.length;Ye++)qe[Ye]=Ke[Ye]%je.shape[Ye];var Je=je.locToIndex(qe);Ge.values[$e]=je.values[Je]}return Ge.toTensor()}function ea(je,y,v,$e,Ge){for(var Ke=y[y.length-1],qe=[je.length/Ke,Ke],Ye=qe[0],Je=qe[1],Qe=B(v,Ye*$e),st=B("int32",Ye*$e),Mt=0;Mt<Ye;Mt++){for(var on=Mt*Je,sn=je.subarray(on,on+Je),fn=[],hn=0;hn<sn.length;hn++)fn.push({value:sn[hn],index:hn});fn.sort(function(fo,Uo){return Uo.value-fo.value});var to=Mt*$e,Xr=Qe.subarray(to,to+$e),co=st.subarray(to,to+$e);for(hn=0;hn<$e;hn++)Xr[hn]=fn[hn].value,co[hn]=fn[hn].index}var lo=y.slice();return lo[lo.length-1]=$e,[Fn(Qe,lo,v),Fn(st,lo,"int32")]}function na(je,y){for(var v=[],$e=0;$e<y.length;$e++)y[$e]&&v.push($e);var Ge=dr(je,"int32"),Ke=dr([v.length,je.length],"int32");for($e=0;$e<v.length;$e++){var qe=Ge.indexToLoc(v[$e]),Ye=$e*je.length;Ke.values.set(qe,Ye)}return Ke.toTensor()}var ra=function(je,y){this.outputShape=[],this.outputShape=je,this.variableNames=y.map(function(Ge,Ke){return"T"+Ke});var v=[];this.variableNames.forEach(function(Ge){v.push("float v"+Ge+" = get"+Ge+"AtOutCoords();")});var $e=this.variableNames.map(function(Ge){return"v"+Ge}).join(" + ");this.userCode=`
      void main() {
        `+v.join(`
        `)+`

        float result = `+$e+`;
        setOutput(result);
      }
    `},oa=function(je,y){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=je,this.variableNames=y.map(function(Ge,Ke){return"T"+Ke});var v=[];this.variableNames.forEach(function(Ge){v.push("vec4 v"+Ge+" = get"+Ge+"AtOutCoords();")});var $e=this.variableNames.map(function(Ge){return"v"+Ge}).join(" + ");this.userCode=`
      void main() {
        `+v.join(`
        `)+`

        vec4 result = `+$e+`;
        setOutput(result);
      }
    `},aa=function(je,y,v){this.variableNames=["A"];var $e=je.windowSize,Ge=je.batchSize,Ke=je.inSize,qe=Math.ceil(Ke/$e);v||this.variableNames.push("bestIndicesA"),this.outputShape=[Ge,qe];var Ye=y==="max"?">":"<",Je=v?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+$e+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+$e+`; i++) {
          int inIdx = `+Je+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+Ye+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function ia(je,y){return["x","y","z","w","u","v"].slice(0,y).map(function(v){return je+"."+v})}function sa(je,y){return y===1?[je]:ia(je,y)}function ua(){var je,y,v,$e,Ge,Ke,qe,Ye,Je,Qe;return i().getNumber("WEBGL_VERSION")===2?(je="#version 300 es",y="in",v="out",$e="in",Ge="texture",Ke="outputColor",qe="out vec4 outputColor;",Ye=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,Je="",Qe=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(je="",y="attribute",v="varying",$e="varying",Ge="texture2D",Ke="gl_FragColor",qe="",Ye=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,Je=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,Qe=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:je,attribute:y,varyingVs:v,varyingFs:$e,texture2D:Ge,output:Ke,defineOutput:qe,defineSpecialNaN:Ye,defineSpecialInf:Je,defineRound:Qe}}function ca(je,y,v){v===void 0&&(v="index");var $e=$(y);return $e.map(function(Ge,Ke){return"int "+je[Ke]+" = "+v+" / "+Ge+"; "+(Ke===$e.length-1?"int "+je[Ke+1]+" = "+v+" - "+je[Ke]+" * "+Ge:"index -= "+je[Ke]+" * "+Ge)+";"}).join("")}function la(je){var y=$(je).map(function(v){return v.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+y[0]+" + coords.y * "+y[1]+` + coords.z;
  }
`}var ha=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function fa(je,y,v,$e){var Ge=[];je.forEach(function(sn){var fn=k(sn.shapeInfo.logicalShape);sn.shapeInfo.isUniform?Ge.push("uniform float "+sn.name+(fn>1?"["+fn+"]":"")+";"):(Ge.push("uniform sampler2D "+sn.name+";"),Ge.push("uniform int offset"+sn.name+";"))});var Ke,qe,Ye=Ge.join(`
`),Je=je.map(function(sn){return function(fn,hn,to){to===void 0&&(to=!1);var Xr="";Xr+=to?pa(fn):da(fn);var co=fn.shapeInfo.logicalShape,lo=hn.logicalShape;return co.length<=lo.length&&(Xr+=to?function(fo,Uo){var mo,rd=fo.name,od=rd.charAt(0).toUpperCase()+rd.slice(1),fd="get"+od+"AtOutCoords",hd=fo.shapeInfo.logicalShape.length,vd=Uo.logicalShape.length,Td=Co(fo.shapeInfo.logicalShape,Uo.logicalShape),Od=wa(vd),Md=vd-hd,Fd=["x","y","z","w","u","v"];mo=hd===0?"":vd<2&&Td.length>=1?"coords = 0;":Td.map(function(Pd){return"coords."+Fd[Pd+Md]+" = 0;"}).join(`
`);var Ud="";Ud=vd<2&&hd>0?"coords":fo.shapeInfo.logicalShape.map(function(Pd,yd){return"coords."+Fd[yd+Md]}).join(", ");var pd="return outputValue;",_d=k(fo.shapeInfo.logicalShape)===1,Bd=k(Uo.logicalShape)===1;if(hd!==1||_d||Bd){if(_d&&!Bd)pd=vd===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(Td.length){var $d=hd-2,jd=hd-1;Td.indexOf($d)>-1&&Td.indexOf(jd)>-1?pd="return vec4(outputValue.x);":Td.indexOf($d)>-1?pd="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Td.indexOf(jd)>-1&&(pd="return vec4(outputValue.xx, outputValue.zz);")}}else pd=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+fd+`() {
      `+Od+` coords = getOutputCoords();
      `+mo+`
      vec4 outputValue = get`+od+"("+Ud+`);
      `+pd+`
    }
  `}(fn,hn):function(fo,Uo){var mo=fo.name,rd=mo.charAt(0).toUpperCase()+mo.slice(1),od="get"+rd+"AtOutCoords",fd=Uo.texShape,hd=fo.shapeInfo.texShape,vd=fo.shapeInfo.logicalShape.length,Td=Uo.logicalShape.length;if(!fo.shapeInfo.isUniform&&vd===Td&&fo.shapeInfo.flatOffset==null&&S(hd,fd))return`
      float `+od+`() {
        return sampleTexture(`+mo+`, resultUV);
      }
    `;var Od,Md=wa(Td),Fd=Co(fo.shapeInfo.logicalShape,Uo.logicalShape),Ud=Td-vd,pd=["x","y","z","w","u","v"];Od=vd===0?"":Td<2&&Fd.length>=1?"coords = 0;":Fd.map(function(Bd){return"coords."+pd[Bd+Ud]+" = 0;"}).join(`
`);var _d="";return _d=Td<2&&vd>0?"coords":fo.shapeInfo.logicalShape.map(function(Bd,$d){return"coords."+pd[$d+Ud]}).join(", "),`
    float `+od+`() {
      `+Md+` coords = getOutputCoords();
      `+Od+`
      return get`+rd+"("+_d+`);
    }
  `}(fn,hn)),Xr}(sn,y,$e)}).join(`
`),Qe=y.texShape,st=ua(),Mt=function(sn){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+sn.texture2D+`(textureSampler, uv).r;
    }
  `}(st),on=function(sn){return sn.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+sn.varyingFs+` vec2 resultUV;
    `+sn.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+sn.defineSpecialNaN+`
    `+sn.defineSpecialInf+`
    `+sn.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+va+`
    `+ma+`
    `+ga+`
  `}(st);return y.isPacked?(Ke=function(sn,fn){switch(sn.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(fo,Uo){var mo=[Math.ceil(Uo[0]/2),Math.ceil(Uo[1]/2)];return mo[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+mo[1]+`.0);
      }
    `:mo[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+mo[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+mo[0]+", "+mo[1]+`));
      return 2 * (resTexRC.x * `+mo[1]+` + resTexRC.y);
    }
  `}(0,fn);case 2:return function(fo,Uo){var mo=[Math.ceil(Uo[0]/2),Math.ceil(Uo[1]/2)];if(S(fo,Uo))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+mo[0]+", "+mo[1]+`));
      }
    `;var rd=Math.ceil(fo[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+mo[0]+", "+mo[1]+`));

      int index = resTexRC.x * `+mo[1]+` + resTexRC.y;
      int r = 2 * (index / `+rd+`);
      int c = imod(index, `+rd+`) * 2;

      return ivec2(r, c);
    }
  `}(sn,fn);case 3:return hn=sn,to=fn,Xr=[Math.ceil(to[0]/2),Math.ceil(to[1]/2)],co=Math.ceil(hn[2]/2),lo=co*Math.ceil(hn[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+Xr[0]+", "+Xr[1]+`));
      int index = resTexRC.x * `+Xr[1]+` + resTexRC.y;

      int b = index / `+lo+`;
      index -= b * `+lo+`;

      int r = 2 * (index / `+co+`);
      int c = imod(index, `+co+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(fo,Uo){for(var mo=[Math.ceil(Uo[0]/2),Math.ceil(Uo[1]/2)],rd=Math.ceil(fo[fo.length-1]/2),od=rd*Math.ceil(fo[fo.length-2]/2),fd=od,hd="",vd="b, r, c",Td=2;Td<fo.length-1;Td++)fd*=fo[fo.length-Td-1],hd=`
      int b`+Td+" = index / "+fd+`;
      index -= b`+Td+" * "+fd+`;
    `+hd,vd="b"+Td+", "+vd;return`
    ivec`+fo.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+mo[0]+", "+mo[1]+`));
      int index = resTexRC.x * `+mo[1]+` + resTexRC.y;

      `+hd+`

      int b = index / `+od+`;
      index -= b * `+od+`;

      int r = 2 * (index / `+rd+`);
      int c = imod(index, `+rd+`) * 2;

      return ivec`+fo.length+"("+vd+`);
    }
  `}(sn,fn)}var hn,to,Xr,co,lo}(y.logicalShape,Qe),qe=function(sn){return`
    void setOutput(vec4 val) {
      `+sn.output+` = val;
    }
  `}(st)):(Ke=function(sn,fn){switch(sn.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(Xr,co){return co[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+co[1]+`.0);
      }
    `:co[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+co[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+co[0]+", "+co[1]+`));
      return resTexRC.x * `+co[1]+` + resTexRC.y;
    }
  `}(0,fn);case 2:return function(Xr,co){return S(Xr,co)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+co[0]+", "+co[1]+`));
      }
    `:Xr[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+co[0]+", "+co[1]+`));
        int index = resTexRC.x * `+co[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:Xr[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+co[0]+", "+co[1]+`));
        int index = resTexRC.x * `+co[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+co[0]+", "+co[1]+`));
      int index = resTexRC.x * `+co[1]+` + resTexRC.y;
      int r = index / `+Xr[1]+`;
      int c = index - r * `+Xr[1]+`;
      return ivec2(r, c);
    }
  `}(sn,fn);case 3:return hn=fn,to=ca(["r","c","d"],sn),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+hn[0]+", "+hn[1]+`));
      int index = resTexRC.x * `+hn[1]+` + resTexRC.y;
      `+to+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(Xr,co){var lo=ca(["r","c","d","d2"],Xr);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+co[0]+", "+co[1]+`));
      int index = resTexRC.x * `+co[1]+` + resTexRC.y;
      `+lo+`
      return ivec4(r, c, d, d2);
    }
  `}(sn,fn);case 5:return function(Xr,co){var lo=ca(["r","c","d","d2","d3"],Xr);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+co[0]+`,
                             `+co[1]+`));

      int index = resTexRC.x * `+co[1]+` + resTexRC.y;

      `+lo+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(sn,fn);case 6:return function(Xr,co){var lo=ca(["r","c","d","d2","d3","d4"],Xr);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+co[0]+", "+co[1]+`));
      int index = resTexRC.x * `+co[1]+` + resTexRC.y;

      `+lo+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(sn,fn);default:throw new Error(sn.length+"-D output sampling is not yet supported")}var hn,to}(y.logicalShape,Qe),qe=function(sn){return`
    void setOutput(float val) {
      `+sn.output+` = vec4(val, 0, 0, 0);
    }
  `}(st)),$e&&(on+=ya),[on,Mt,qe,Ye,Ke,Je,v].join(`
`)}function da(je){var y=je.shapeInfo.logicalShape;switch(y.length){case 0:return function(v){var $e=v.name,Ge="get"+$e.charAt(0).toUpperCase()+$e.slice(1);if(v.shapeInfo.isUniform)return"float "+Ge+"() {return "+$e+";}";var Ke=v.shapeInfo.texShape,qe=Ke[0],Ye=Ke[1];if(qe===1&&Ye===1)return`
      float `+Ge+`() {
        return sampleTexture(`+$e+`, halfCR);
      }
    `;var Je=v.shapeInfo.texShape,Qe=Je[0],st=Je[1],Mt=xa($e);return`
    float `+Ge+`() {
      vec2 uv = uvFromFlat(`+Qe+", "+st+", "+Mt+`);
      return sampleTexture(`+$e+`, uv);
    }
  `}(je);case 1:return function(v){var $e=v.name,Ge="get"+$e.charAt(0).toUpperCase()+$e.slice(1);if(v.shapeInfo.isUniform)return`
      float `+Ge+`(int index) {
        `+ba(v)+`
      }
    `;var Ke=v.shapeInfo.texShape,qe=Ke[0],Ye=Ke[1];if(Ye===1&&qe===1)return`
      float `+Ge+`(int index) {
        return sampleTexture(`+$e+`, halfCR);
      }
    `;var Je=xa($e);return Ye===1?`
      float `+Ge+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+Je+") + 0.5) / "+qe+`.0);
        return sampleTexture(`+$e+`, uv);
      }
    `:qe===1?`
      float `+Ge+`(int index) {
        vec2 uv = vec2((float(index + `+Je+") + 0.5) / "+Ye+`.0, 0.5);
        return sampleTexture(`+$e+`, uv);
      }
    `:`
    float `+Ge+`(int index) {
      vec2 uv = uvFromFlat(`+qe+", "+Ye+", index + "+Je+`);
      return sampleTexture(`+$e+`, uv);
    }
  `}(je);case 2:return function(v){var $e=v.shapeInfo.logicalShape,Ge=v.name,Ke="get"+Ge.charAt(0).toUpperCase()+Ge.slice(1),qe=v.shapeInfo.texShape;if(qe!=null&&S($e,qe)){var Ye=qe[0],Je=qe[1];return`
    float `+Ke+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+Je+".0, "+Ye+`.0);
      return sampleTexture(`+Ge+`, uv);
    }
  `}var Qe=M($e),st=Qe.newShape,Mt=Qe.keptDims,on=st;if(on.length<$e.length){var sn=Ca(v,on);return`
      `+da(sn)+`
      float `+Ke+`(int row, int col) {
        return `+Ke+"("+Ea(["row","col"],Mt)+`);
      }
    `}if(v.shapeInfo.isUniform)return`
      float `+Ke+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+$e[1]+`, 1)));
        `+ba(v)+`
      }
    `;var fn=qe[0],hn=qe[1],to=xa(Ge);return hn===1?`
    float `+Ke+`(int row, int col) {
      float index = dot(vec3(row, col, `+to+"), vec3("+$e[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+fn+`.0);
      return sampleTexture(`+Ge+`, uv);
    }
  `:fn===1?`
    float `+Ke+`(int row, int col) {
      float index = dot(vec3(row, col, `+to+"), vec3("+$e[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+hn+`.0, 0.5);
      return sampleTexture(`+Ge+`, uv);
    }
  `:`
  float `+Ke+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+$e[1]+" + col + "+to+`;
    vec2 uv = uvFromFlat(`+fn+", "+hn+`, index);
    return sampleTexture(`+Ge+`, uv);
  }
`}(je);case 3:return function(v){var $e=v.shapeInfo.logicalShape,Ge=v.name,Ke="get"+Ge.charAt(0).toUpperCase()+Ge.slice(1),qe=$e[1]*$e[2],Ye=$e[2],Je=M($e),Qe=Je.newShape,st=Je.keptDims,Mt=Qe;if(Mt.length<$e.length){var on=Ca(v,Mt);return`
        `+da(on)+`
        float `+Ke+`(int row, int col, int depth) {
          return `+Ke+"("+Ea(["row","col","depth"],st)+`);
        }
      `}if(v.shapeInfo.isUniform)return`
      float `+Ke+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+qe+", "+Ye+`, 1)));
        `+ba(v)+`
      }
    `;var sn=v.shapeInfo.texShape,fn=sn[0],hn=sn[1],to=v.shapeInfo.flatOffset;if(hn===qe&&to==null)return`
        float `+Ke+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+Ye+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+hn+".0, "+fn+`.0);
          return sampleTexture(`+Ge+`, uv);
        }
      `;if(hn===Ye&&to==null)return`
    float `+Ke+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+$e[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+hn+".0, "+fn+`.0);
      return sampleTexture(`+Ge+`, uv);
    }
  `;var Xr=xa(Ge);return`
      float `+Ke+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+qe+" + col * "+Ye+" + depth + "+Xr+`;
        vec2 uv = uvFromFlat(`+fn+", "+hn+`, index);
        return sampleTexture(`+Ge+`, uv);
      }
  `}(je);case 4:return function(v){var $e=v.shapeInfo.logicalShape,Ge=v.name,Ke="get"+Ge.charAt(0).toUpperCase()+Ge.slice(1),qe=$e[3],Ye=$e[2]*qe,Je=$e[1]*Ye,Qe=M($e),st=Qe.newShape,Mt=Qe.keptDims;if(st.length<$e.length){var on=Ca(v,st);return`
      `+da(on)+`
      float `+Ke+`(int row, int col, int depth, int depth2) {
        return `+Ke+"("+Ea(["row","col","depth","depth2"],Mt)+`);
      }
    `}if(v.shapeInfo.isUniform)return`
      float `+Ke+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+Je+", "+Ye+", "+qe+`, 1)));
        `+ba(v)+`
      }
    `;var sn=v.shapeInfo.flatOffset,fn=v.shapeInfo.texShape,hn=fn[0],to=fn[1];if(to===Je&&sn==null)return`
      float `+Ke+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+Ye+", "+qe+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+to+".0, "+hn+`.0);
        return sampleTexture(`+Ge+`, uv);
      }
    `;if(to===qe&&sn==null)return`
      float `+Ke+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+$e[1]*$e[2]+", "+$e[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+to+".0, "+hn+`.0);
        return sampleTexture(`+Ge+`, uv);
      }
    `;var Xr=xa(Ge);return`
    float `+Ke+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+Je+" + col * "+Ye+` +
          depth * `+qe+` + depth2;
      vec2 uv = uvFromFlat(`+hn+", "+to+", index + "+Xr+`);
      return sampleTexture(`+Ge+`, uv);
    }
  `}(je);case 5:return function(v){var $e=v.shapeInfo.logicalShape,Ge=v.name,Ke="get"+Ge.charAt(0).toUpperCase()+Ge.slice(1),qe=$e[4],Ye=$e[3]*qe,Je=$e[2]*Ye,Qe=$e[1]*Je,st=M($e),Mt=st.newShape,on=st.keptDims;if(Mt.length<$e.length){var sn=Ca(v,Mt);return`
      `+da(sn)+`
      float `+Ke+`(int row, int col, int depth, int depth2, int depth3) {
        return `+Ke+"("+Ea(["row","col","depth","depth2","depth3"],on)+`);
      }
    `}if(v.shapeInfo.isUniform)return`
      float `+Ke+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+Qe+", "+Je+", "+Ye+", "+qe+`)) +
          depth3;
        `+ba(v)+`
      }
    `;var fn=v.shapeInfo.flatOffset,hn=v.shapeInfo.texShape,to=hn[0],Xr=hn[1];if(Xr===Qe&&fn==null)return`
      float `+Ke+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+Je+", "+Ye+", "+qe+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+Xr+".0, "+to+`.0);
        return sampleTexture(`+Ge+`, uv);
      }
    `;if(Xr===qe&&fn==null)return`
      float `+Ke+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+$e[1]*$e[2]*$e[3]+`,
               `+$e[2]*$e[3]+", "+$e[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+Xr+".0, "+to+`.0);
        return sampleTexture(`+Ge+`, uv);
      }
    `;var co=xa(Ge);return`
    float `+Ke+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+Qe+" + col * "+Je+" + depth * "+Ye+` +
          depth2 * `+qe+" + depth3 + "+co+`;
      vec2 uv = uvFromFlat(`+to+", "+Xr+`, index);
      return sampleTexture(`+Ge+`, uv);
    }
  `}(je);case 6:return function(v){var $e=v.shapeInfo.logicalShape,Ge=v.name,Ke="get"+Ge.charAt(0).toUpperCase()+Ge.slice(1),qe=M($e),Ye=qe.newShape,Je=qe.keptDims;if(Ye.length<$e.length){var Qe=Ca(v,Ye);return`
      `+da(Qe)+`
      float `+Ke+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+Ke+"("+Ea(["row","col","depth","depth2","depth3","depth4"],Je)+`);
      }
    `}var st=$e[5],Mt=$e[4]*st,on=$e[3]*Mt,sn=$e[2]*on,fn=$e[1]*sn;if(v.shapeInfo.isUniform)return`
      float `+Ke+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+fn+", "+sn+", "+on+", "+Mt+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+st+`, 1)));
        `+ba(v)+`
      }
    `;var hn=v.shapeInfo.flatOffset,to=v.shapeInfo.texShape,Xr=to[0],co=to[1];if(co===fn&&hn==null)return`
      float `+Ke+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+sn+", "+on+", "+Mt+", "+st+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+co+".0, "+Xr+`.0);
        return sampleTexture(`+Ge+`, uv);
      }
    `;if(co===st&&hn==null)return`
      float `+Ke+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+$e[1]*$e[2]*$e[3]*$e[4]+`,
               `+$e[2]*$e[3]*$e[4]+`,
               `+$e[3]*$e[4]+`,
               `+$e[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+co+".0, "+Xr+`.0);
        return sampleTexture(`+Ge+`, uv);
      }
    `;var lo=xa(Ge);return`
    float `+Ke+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+fn+" + col * "+sn+" + depth * "+on+` +
          depth2 * `+Mt+" + depth3 * "+st+" + depth4 + "+lo+`;
      vec2 uv = uvFromFlat(`+Xr+", "+co+`, index);
      return sampleTexture(`+Ge+`, uv);
    }
  `}(je);default:throw new Error(y.length+"-D input sampling is not yet supported")}}function pa(je){var y,v,$e;switch(je.shapeInfo.logicalShape.length){case 0:return y=je.name,v="get"+y.charAt(0).toUpperCase()+y.slice(1),$e=ua(),`
    vec4 `+v+`() {
      return `+$e.texture2D+"("+y+`, halfCR);
    }
  `;case 1:return function(Ge){var Ke=Ge.name,qe="get"+Ke.charAt(0).toUpperCase()+Ke.slice(1),Ye=Ge.shapeInfo.texShape,Je=[Math.ceil(Ye[0]/2),Math.ceil(Ye[1]/2)],Qe=ua();return`
    vec4 `+qe+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+Je[0]+", "+Je[1]+`, index);
      return `+Qe.texture2D+"("+Ke+`, uv);
    }
  `}(je);case 2:return function(Ge){var Ke=Ge.shapeInfo.logicalShape,qe=Ge.name,Ye="get"+qe.charAt(0).toUpperCase()+qe.slice(1),Je=Ge.shapeInfo.texShape,Qe=Je[0],st=Je[1],Mt=ua();if(Je!=null&&S(Ke,Je))return`
      vec4 `+Ye+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+st+".0, "+Qe+`.0);

        return `+Mt.texture2D+"("+qe+`, uv);
      }
    `;var on=[Math.ceil(Je[0]/2),Math.ceil(Je[1]/2)],sn=Math.ceil(Ke[1]/2);return`
    vec4 `+Ye+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+sn+", "+on[0]+", "+on[1]+`, row, col);
      return `+Mt.texture2D+"("+qe+`, uv);
    }
  `}(je);case 3:return function(Ge){var Ke=Ge.shapeInfo.logicalShape,qe=Ge.name,Ye="get"+qe.charAt(0).toUpperCase()+qe.slice(1),Je=Ge.shapeInfo.texShape,Qe=[Math.ceil(Je[0]/2),Math.ceil(Je[1]/2)];if(Ke[0]===1){var st=Ke.slice(1),Mt=Ca(Ge,st);return`
        `+pa(Mt)+`
        vec4 `+Ye+`(int b, int row, int col) {
          return `+Ye+"("+Ea(["b","row","col"],[1,2])+`);
        }
      `}var on=Qe[0],sn=Qe[1],fn=Math.ceil(Ke[2]/2),hn=fn*Math.ceil(Ke[1]/2),to=ua();return`
    vec4 `+Ye+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+on+", "+sn+", "+hn+", "+fn+`, b, row, col);
      return `+to.texture2D+"("+qe+`, uv);
    }
  `}(je);default:return function(Ge){for(var Ke=Ge.shapeInfo.logicalShape,qe=Ke.length,Ye=Ge.name,Je="get"+Ye.charAt(0).toUpperCase()+Ye.slice(1),Qe=Ge.shapeInfo.texShape,st=[Math.ceil(Qe[0]/2),Math.ceil(Qe[1]/2)],Mt=st[0],on=st[1],sn=Math.ceil(Ke[qe-1]/2),fn=sn*Math.ceil(Ke[qe-2]/2),hn="int b, int row, int col",to="b * "+fn+" + (row / 2) * "+sn+" + (col / 2)",Xr=2;Xr<qe-1;Xr++)hn="int b"+Xr+", "+hn,fn*=Ke[qe-Xr-1],to="b"+Xr+" * "+fn+" + "+to;var co=ua();return`
    vec4 `+Je+"("+hn+`) {
      int index = `+to+`;
      int texR = index / `+on+`;
      int texC = index - texR * `+on+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+on+", "+Mt+`);
      return `+co.texture2D+"("+Ye+`, uv);
    }
  `}(je)}}var va=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ma=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ga=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ya=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function xa(je){return"offset"+je}function ba(je){var y=je.name,v=k(je.shapeInfo.logicalShape);return v<2?"return "+y+";":`
    for (int i = 0; i < `+v+`; i++) {
      if (i == index) {
        return `+y+`[i];
      }
    }
  `}function wa(je){if(je<=1)return"int";if(je===2)return"ivec2";if(je===3)return"ivec3";if(je===4)return"ivec4";if(je===5)return"ivec5";if(je===6)return"ivec6";throw Error("GPU for rank "+je+" is not yet supported")}function Ca(je,y){var v=JSON.parse(JSON.stringify(je));return v.shapeInfo.logicalShape=y,v}function Ea(je,y){return y.map(function(v){return je[v]}).join(", ")}var Ra=function(je,y,v,$e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,C(je.length>2,function(){return"Packed arg"+(v.charAt(0).toUpperCase()+v.slice(1))+" supports only inputs with rank above 2."});var Ge=je[je.length-1],Ke=Math.ceil(Ge/y);this.outputShape=je.slice(0,-1),Ke>1&&this.outputShape.push(Ke),$e||this.variableNames.push("bestIndicesA");var qe,Ye,Je=this.outputShape,Qe=Je.length,st=wa(Qe),Mt=sa("coords",Qe);if(Ke===1){var on=wa(Ye=Qe+1);qe=`
        `+on+" sourceLocR = "+on+"("+Mt.join()+`, 0);
        ++`+Mt[Qe-1]+`;
        `+on+" sourceLocG = "+on+"("+Mt.join()+`, 0);
        ++`+Mt[Qe-2]+`;
        `+on+" sourceLocA = "+on+"("+Mt.join()+`, 0);
        --`+Mt[Qe-1]+`;
        `+on+" sourceLocB = "+on+"("+Mt.join()+`, 0);
        --`+Mt[Qe-2]+";"}else Ye=Qe,qe=`
        `+st+` sourceLocR = coords;
        ++`+Mt[Qe-1]+`;
        `+st+` sourceLocG = coords;
        ++`+Mt[Qe-2]+`;
        `+st+` sourceLocA = coords;
        --`+Mt[Qe-1]+`;
        `+st+` sourceLocB = coords;
        --`+Mt[Qe-2]+";";var sn=["x","y","z","w","u","v"].slice(0,Ye),fn="."+sn[Ye-1],hn=sn.map(function(od){return"int "+od}),to=sa("sourceLocR",Ye-1).concat("inIdx.r"),Xr=sa("sourceLocG",Ye-1).concat("inIdx.g"),co=sa("sourceLocB",Ye-1).concat("inIdx.b"),lo=sa("sourceLocA",Ye-1).concat("inIdx.a"),fo=v==="max"?"greaterThan":"lessThan",Uo=$e?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+to.join()+`),
                             getBestIndicesAChannel(`+Xr.join()+`),
                             getBestIndicesAChannel(`+co.join()+`),
                             getBestIndicesAChannel(`+lo.join()+")));",mo=`vec4(
            getAChannel(`+to.join()+`),
            hasNextCol ? getAChannel(`+Xr.join()+`) : 0.,
            hasNextRow ? getAChannel(`+co.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+lo.join()+") : 0.)",rd=$e?"":`
      float getBestIndicesAChannel(`+hn.join()+`) {
        return getChannel(getBestIndicesA(`+sn.join()+`),
                                          vec2(`+sn.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+hn.join()+`) {
        return getChannel(getA(`+sn.join()+`),
                               vec2(`+sn.slice(-2).join()+`));
      }
      `+rd+`
      void main() {
        `+st+` coords = getOutputCoords();
        bool hasNextCol = `+Mt[Qe-1]+" < "+(Je[Qe-1]-1)+`;
        bool hasNextRow = `+Mt[Qe-2]+" < "+(Je[Qe-2]-1)+`;
        `+qe+`
        ivec4 srcIdx = ivec4(sourceLocR`+fn+", sourceLocG"+fn+`,
          sourceLocB`+fn+", sourceLocA"+fn+") * "+y+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+mo+`;

        for (int i = 0; i < `+y+`; i++) {
          inIdx = srcIdx;
          `+Uo+`
          vec4 candidate = `+mo+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+fo+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},Ia=function(je){this.variableNames=["dy"],this.outputShape=je.inShape;var y=je.filterHeight,v=je.filterWidth,$e=je.strideHeight,Ge=je.strideWidth,Ke=je.dilationHeight,qe=je.dilationWidth,Ye=je.effectiveFilterHeight,Je=je.effectiveFilterWidth,Qe=Ye-1-je.padInfo.top,st=Je-1-je.padInfo.left,Mt=1/(y*v);this.userCode=`
      const ivec2 pads = ivec2(`+Qe+", "+st+`);
      const float avgMultiplier = float(`+Mt+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+Ye+`;
            wR += `+Ke+`) {
          float dyR = float(dyRCorner + wR) / `+$e+`.0;

          if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+Je+`;
            wC+= `+qe+`) {
            float dyC = float(dyCCorner + wC) / `+Ge+`.0;

            if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},ka=function(je){this.variableNames=["dy"],this.outputShape=je.inShape;var y=je.filterDepth,v=je.filterHeight,$e=je.filterWidth,Ge=je.strideDepth,Ke=je.strideHeight,qe=je.strideWidth,Ye=je.dilationDepth,Je=je.dilationHeight,Qe=je.dilationWidth,st=je.effectiveFilterDepth,Mt=je.effectiveFilterHeight,on=je.effectiveFilterWidth,sn=st-1-je.padInfo.front,fn=Mt-1-je.padInfo.top,hn=on-1-je.padInfo.left,to=1/(y*v*$e);this.userCode=`
      const ivec3 pads = ivec3(`+sn+", "+fn+", "+hn+`);
      const float avgMultiplier = float(`+to+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+st+`;
            wD += `+Ye+`) {
          float dyD = float(dyDCorner + wD) / `+Ge+`.0;

          if (dyD < 0.0 || dyD >= `+je.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+Mt+`;
              wR += `+Je+`) {
            float dyR = float(dyRCorner + wR) / `+Ke+`.0;

            if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+on+`;
                wC += `+Qe+`) {
              float dyC = float(dyCCorner + wC) / `+qe+`.0;

              if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Sa=function(je,y,v,$e,Ge,Ke){this.outputShape=[],this.variableNames=["x","mean","variance"],Ro(je,y),Ro(je,v);var qe="0.0";$e!=null&&(Ro(je,$e),this.variableNames.push("offset"),qe="getOffsetAtOutCoords()");var Ye="1.0";Ge!=null&&(Ro(je,Ge),this.variableNames.push("scale"),Ye="getScaleAtOutCoords()"),this.outputShape=je,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+qe+`;
        float scale = `+Ye+`;
        float inv = scale * inversesqrt(variance + float(`+Ke+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},Aa=function(je,y,v,$e,Ge,Ke){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ro(je,y),Ro(je,v);var qe="vec4(0.0)";$e!=null&&(Ro(je,$e),this.variableNames.push("offset"),qe="getOffsetAtOutCoords()");var Ye="vec4(1.0)";Ge!=null&&(Ro(je,Ge),this.variableNames.push("scale"),Ye="getScaleAtOutCoords()"),this.outputShape=je,this.userCode=`
      void main() {
        vec4 offset = `+qe+`;
        vec4 scale = `+Ye+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+Ke+`));

        setOutput((x - mean) * inv + offset);
      }
    `},Da="return areal * breal - aimag * bimag;",Ta="return areal * bimag + aimag * breal;",Na=function(je,y,v){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ro(y,v),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+je+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Fa="return a + b;",_a="return a - b;",Oa="return a * b;",Ma="return (a < 0.) ? b * a : a;",Ba=function(je,y,v){this.variableNames=["A","B"],this.outputShape=Ro(y,v),this.userCode=`
      float binaryOperation(float a, float b) {
        `+je+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Pa=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,La=function(je,y,v,$e){$e===void 0&&($e=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ro(y,v);var Ge=this.outputShape.length,Ke="";if($e)if(Ge===0||k(this.outputShape)===1)Ke=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(Ke=`
          `+wa(Ge)+` coords = getOutputCoords();
        `,Ge===1)Ke+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var qe=sa("coords",Ge);Ke+=`
            bool nextRowOutOfBounds =
              (`+qe[Ge-2]+" + 1) >= "+this.outputShape[Ge-2]+`;
            bool nextColOutOfBounds =
              (`+qe[Ge-1]+" + 1) >= "+this.outputShape[Ge-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+je+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+Ke+`

        setOutput(result);
      }
    `},Wa=function(){function je(y){this.variableNames=["A"],this.outputShape=y,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return je.prototype.getCustomSetupFunc=function(y,v){var $e=this;return function(Ge,Ke){$e.minLoc==null&&($e.minLoc=Ge.getUniformLocationNoThrow(Ke,"minVal"),$e.maxLoc=Ge.getUniformLocationNoThrow(Ke,"maxVal")),Ge.gl.uniform1f($e.minLoc,y),Ge.gl.uniform1f($e.maxLoc,v)}},je}(),Ua=function(){function je(y){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=y,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return je.prototype.getCustomSetupFunc=function(y,v){var $e=this;return function(Ge,Ke){$e.minLoc==null&&($e.minLoc=Ge.getUniformLocationNoThrow(Ke,"minVal"),$e.maxLoc=Ge.getUniformLocationNoThrow(Ke,"maxVal")),Ge.gl.uniform1f($e.minLoc,y),Ge.gl.uniform1f($e.maxLoc,v)}},je}(),Va=function(je){this.variableNames=["real","imag"],this.outputShape=je,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},za=function(je){this.outputShape=[],this.outputShape=Sn(je,1),this.variableNames=je.map(function(Ye,Je){return"T"+Je});var y=new Array(je.length-1);y[0]=je[0][1];for(var v=1;v<y.length;v++)y[v]=y[v-1]+je[v][1];var $e=["if (yC < "+y[0]+") setOutput(getT0(yR, yC));"];for(v=1;v<y.length;v++){var Ge=y[v-1];$e.push("else if (yC < "+y[v]+") setOutput(getT"+v+"(yR, yC-"+Ge+"));")}var Ke=y.length,qe=y[y.length-1];$e.push("else setOutput(getT"+Ke+"(yR, yC-"+qe+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+$e.join(`
        `)+`
      }
    `},Ga=function(je,y){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Sn(je,y);var v=this.outputShape,$e=v.length,Ge=wa($e),Ke=sa("coords",$e),qe=["x","y","z","w","u","v"].slice(0,$e);this.variableNames=je.map(function(to,Xr){return"T"+Xr});var Ye=new Array(je.length-1);Ye[0]=je[0][y];for(var Je=1;Je<Ye.length;Je++)Ye[Je]=Ye[Je-1]+je[Je][y];var Qe=qe[y],st=qe.slice(-2),Mt=qe.join(),on="if ("+Qe+" < "+Ye[0]+`) {
        return getChannel(
            getT0(`+Mt+"), vec2("+st.join()+`));
        }`;for(Je=1;Je<Ye.length;Je++){var sn=Ye[Je-1];on+=`
        if (`+Qe+" < "+Ye[Je]+"  && "+Qe+" >= "+Ye[Je-1]+`) {
          return getChannel(
            getT`+Je+"("+Ha(qe,Qe,sn)+`),
            vec2(`+Ha(st,Qe,sn)+`));
        }`}var fn=Ye.length,hn=Ye[Ye.length-1];on+=`
        return getChannel(
          getT`+fn+"("+Ha(qe,Qe,hn)+`),
          vec2(`+Ha(st,Qe,hn)+"));",this.userCode=`
      float getValue(`+qe.map(function(to){return"int "+to})+`) {
        `+on+`
      }

      void main() {
        `+Ge+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+Ke+`), 0., 0., 0.);

        `+Ke[$e-1]+" = "+Ke[$e-1]+` + 1;
        if (`+Ke[$e-1]+" < "+v[$e-1]+`) {
          result.g = getValue(`+Ke+`);
        }

        `+Ke[$e-2]+" = "+Ke[$e-2]+` + 1;
        if (`+Ke[$e-2]+" < "+v[$e-2]+`) {
          result.a = getValue(`+Ke+`);
        }

        `+Ke[$e-1]+" = "+Ke[$e-1]+` - 1;
        if (`+Ke[$e-2]+" < "+v[$e-2]+` &&
            `+Ke[$e-1]+" < "+v[$e-1]+`) {
          result.b = getValue(`+Ke+`);
        }
        setOutput(result);
      }
    `};function Ha(je,y,v){var $e=je.indexOf(y);return je.map(function(Ge,Ke){return Ke===$e?Ge+" - "+v:Ge}).join()}var qa=function(je){this.variableNames=["x","dy"],this.outputShape=je.filterShape;var y=je.strideHeight,v=je.strideWidth,$e=je.padInfo.top,Ge=je.padInfo.left,Ke=je.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+je.batchSize+`; b++) {
          for (int yR = 0; yR < `+je.outHeight+`; yR++) {
            int xR = wR + yR * `+y+" - "+$e+`;

            if (xR < 0 || xR >= `+je.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+je.outWidth+`; yC++) {
              int xC = wC + yC * `+v+" - "+Ge+`;

              if (xC < 0 || xC >= `+je.inWidth+`) {
                continue;
              }

              if (`+Ke+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},Ka=function(je){this.variableNames=["dy","W"],this.outputShape=je.inShape;var y=je.filterHeight,v=je.filterWidth,$e=je.strideHeight,Ge=je.strideWidth,Ke=je.dataFormat==="channelsLast",qe=y-1-je.padInfo.top,Ye=v-1-je.padInfo.left,Je=Ke?1:2,Qe=Ke?2:3,st=Ke?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+qe+", "+Ye+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+st+`];

        ivec2 dyCorner = ivec2(coords[`+Je+"], coords["+Qe+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+y+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+$e+`.0;

          if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+y+` - 1 - wR;

          for (int wC = 0; wC < `+v+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+Ge+`.0;

            if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+v+` - 1 - wC;

            for (int d2 = 0; d2 < `+je.outChannels+`; d2++) {

              if (`+Ke+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},ja=function(je){this.variableNames=["x","dy"],this.outputShape=je.filterShape;var y=je.strideDepth,v=je.strideHeight,$e=je.strideWidth,Ge=je.padInfo.front,Ke=je.padInfo.top,qe=je.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+je.batchSize+`; b++) {
          for (int yF = 0; yF < `+je.outDepth+`; yF++) {
            int xF = wF + yF * `+y+" - "+Ge+`;

            if (xF < 0 || xF >= `+je.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+je.outHeight+`; yR++) {
              int xR = wR + yR * `+v+" - "+Ke+`;

              if (xR < 0 || xR >= `+je.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+je.outWidth+`; yC++) {
                int xC = wC + yC * `+$e+" - "+qe+`;

                if (xC < 0 || xC >= `+je.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Xa=function(je){this.variableNames=["dy","W"],this.outputShape=je.inShape;var y=je.filterDepth,v=je.filterHeight,$e=je.filterWidth,Ge=je.strideDepth,Ke=je.strideHeight,qe=je.strideWidth,Ye=y-1-je.padInfo.front,Je=v-1-je.padInfo.top,Qe=$e-1-je.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+Ye+", "+Je+", "+Qe+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+y+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+Ge+`.0;

          if (dyF < 0.0 || dyF >= `+je.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+y+` - 1 - wF;

          for (int wR = 0; wR < `+v+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+Ke+`.0;

            if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+v+` - 1 - wR;

            for (int wC = 0; wC < `+$e+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+qe+`.0;

              if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+$e+` - 1 - wC;

              for (int d2 = 0; d2 < `+je.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Ya=function(je){this.variableNames=["x","dy"],this.outputShape=je.filterShape;var y=je.strideHeight,v=je.strideWidth,$e=je.padInfo.top,Ge=je.padInfo.left,Ke=je.outChannels/je.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+Ke+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+je.batchSize+`; b++) {
          for (int yR = 0; yR < `+je.outHeight+`; yR++) {
            int xR = wR + yR * `+y+" - "+$e+`;

            if (xR < 0 || xR >= `+je.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+je.outWidth+`; yC++) {
              int xC = wC + yC * `+v+" - "+Ge+`;

              if (xC < 0 || xC >= `+je.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},$a=function(je){this.variableNames=["dy","W"],this.outputShape=je.inShape;var y=je.filterHeight,v=je.filterWidth,$e=je.strideHeight,Ge=je.strideWidth,Ke=y-1-je.padInfo.top,qe=v-1-je.padInfo.left,Ye=je.outChannels/je.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+Ke+", "+qe+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+y+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+$e+`.0;

          if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+y+` - 1 - wR;

          for (int wC = 0; wC < `+v+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+Ge+`.0;

            if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+v+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+Ye+`; dm++) {
              int d2 = d1 * `+Ye+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Qa=function(je,y,v,$e){y===void 0&&(y=!1),v===void 0&&(v=null),$e===void 0&&($e=!1),this.variableNames=["x","W"],this.outputShape=je.outShape;var Ge=je.padInfo.top,Ke=je.padInfo.left,qe=je.strideHeight,Ye=je.strideWidth,Je=je.dilationHeight,Qe=je.dilationWidth,st=je.filterHeight,Mt=je.filterWidth,on=4*Math.floor(je.inChannels/4),sn=je.inChannels%4,fn=je.dataFormat==="channelsLast",hn=fn?1:2,to=fn?2:3,Xr=fn?3:1,co="",lo="";v&&(co=$e?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+v+`
        }`:`
          float activation(float x) {
            `+v+`
          }
        `,lo="result = activation(result);");var fo=y?"result += getBiasAtOutCoords();":"";y&&this.variableNames.push("bias"),$e&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+co+`

      const ivec2 strides = ivec2(`+qe+", "+Ye+`);
      const ivec2 pads = ivec2(`+Ge+", "+Ke+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+Xr+`];

        ivec2 xRCCorner =
            ivec2(coords[`+hn+"], coords["+to+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+st+`; wR++) {
          int xR = xRCorner + wR * `+Je+`;

          if (xR < 0 || xR >= `+je.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+Mt+`; wC++) {
            int xC = xCCorner + wC * `+Qe+`;

            if (xC < 0 || xC >= `+je.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+on+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+fn+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(sn===1)+`) {

              if (`+fn+`) {
                dotProd +=
                    getX(batch, xR, xC, `+on+`) *
                    getW(wR, wC, `+on+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+on+`, xR, xC) *
                    getW(wR, wC, `+on+`, d2);
              }

            } else if (`+(sn===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+on+`, d2),
                getW(wR, wC, `+on+` + 1, d2)
              );

              if (`+fn+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+on+`),
                  getX(batch, xR, xC, `+on+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+on+`, xR, xC),
                  getX(batch, `+on+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(sn===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+on+`, d2),
                getW(wR, wC, `+on+` + 1, d2),
                getW(wR, wC, `+on+` + 2, d2)
              );

              if (`+fn+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+on+`),
                  getX(batch, xR, xC, `+on+` + 1),
                  getX(batch, xR, xC, `+on+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+on+`, xR, xC),
                  getX(batch, `+on+` + 1, xR, xC),
                  getX(batch, `+on+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+fo+`
        `+lo+`
        setOutput(result);
      }
    `},Ja=function(je){this.variableNames=["x","W"],this.outputShape=je.outShape;var y=je.padInfo.front,v=je.padInfo.top,$e=je.padInfo.left,Ge=je.strideDepth,Ke=je.strideHeight,qe=je.strideWidth,Ye=je.dilationDepth,Je=je.dilationHeight,Qe=je.dilationWidth,st=je.filterDepth,Mt=je.filterHeight,on=je.filterWidth,sn=4*Math.floor(je.inChannels/4),fn=je.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+Ge+", "+Ke+", "+qe+`);
      const ivec3 pads = ivec3(`+y+", "+v+", "+$e+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+st+`; wF++) {
          int xF = xFCorner + wF * `+Ye+`;

          if (xF < 0 || xF >= `+je.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+Mt+`; wR++) {
            int xR = xRCorner + wR * `+Je+`;

            if (xR < 0 || xR >= `+je.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+on+`; wC++) {
              int xC = xCCorner + wC * `+Qe+`;

              if (xC < 0 || xC >= `+je.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+sn+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(fn===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+sn+`) *
                  getW(wF, wR, wC, `+sn+`, d2);
              } else if (`+(fn===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+sn+`),
                  getX(batch, xF, xR, xC, `+sn+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+sn+`, d2),
                  getW(wF, wR, wC, `+sn+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(fn===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+sn+`),
                  getX(batch, xF, xR, xC, `+sn+` + 1),
                  getX(batch, xF, xR, xC, `+sn+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+sn+`, d2),
                  getW(wF, wR, wC, `+sn+` + 1, d2),
                  getW(wF, wR, wC, `+sn+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},Za=function(je,y,v,$e){y===void 0&&(y=!1),v===void 0&&(v=null),$e===void 0&&($e=!1),this.variableNames=["x","W"],this.outputShape=je.outShape;var Ge=je.inHeight,Ke=je.inWidth,qe=je.padInfo.top,Ye=je.padInfo.left,Je=je.strideHeight,Qe=je.strideWidth,st=je.dilationHeight,Mt=je.dilationWidth,on=je.filterHeight,sn=je.filterWidth,fn=je.outChannels/je.inChannels,hn="",to="";v&&(hn=$e?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+v+`
        }`:`
          float activation(float x) {
            `+v+`
          }
        `,to="result = activation(result);");var Xr=y?"result += getBiasAtOutCoords();":"";y&&this.variableNames.push("bias"),$e&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+hn+`

      const ivec2 strides = ivec2(`+Je+", "+Qe+`);
      const ivec2 pads = ivec2(`+qe+", "+Ye+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+fn+`;
        int q = d2 - d1 * `+fn+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+on+`; wR++) {
          int xR = xRCorner + wR * `+st+`;

          if (xR < 0 || xR >= `+Ge+`) {
            continue;
          }

          for (int wC = 0; wC < `+sn+`; wC++) {
            int xC = xCCorner + wC * `+Mt+`;

            if (xC < 0 || xC >= `+Ke+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+Xr+`
        `+to+`
        setOutput(result);
      }
    `},ti=function(je,y,v,$e){y===void 0&&(y=!1),v===void 0&&(v=null),$e===void 0&&($e=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=je.outShape;for(var Ge=je.inHeight,Ke=je.inWidth,qe=je.padInfo.top,Ye=je.padInfo.left,Je=je.strideHeight,Qe=je.strideWidth,st=je.dilationHeight,Mt=je.dilationWidth,on=je.filterHeight,sn=je.filterWidth,fn=sn,hn="int xR; int xC; int xCOffset;",to=0;to<on;to++)for(var Xr=0;Xr<sn;Xr++)hn+=`
          vec4 xTexelR`+to+"C"+2*Xr+` = vec4(0.);
          vec4 wR`+to+"C"+Xr+` = vec4(0.);
          vec4 xR`+to+"C"+Xr+" = vec4(0.);";for(to=0;to<on;to++)for(var co=0;co<fn;co++){if(hn+=`
          xR = xRCorner + `+to*st+`;
          xC = xCCorner + `+(Xr=2*co)*Mt+`;
        `,Qe===1){if(Xr<sn&&(hn+=Ye%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+Ge+" && xCOffset >= 0 && xCOffset < "+Ke+`) {
                  xTexelR`+to+"C"+Xr+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+Ke+`) {
                    xTexelR`+to+"C"+Xr+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+to+"C"+Xr+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+Ge+" && xCOffset >= 0 && xCOffset < "+Ke+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+Ke+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+to+"C"+Xr+" = vec4(previous.zw, xTexelR"+to+"C"+Xr+`.xy);
                } else {
                  xR`+to+"C"+Xr+" = vec4(0, 0, xTexelR"+to+"C"+Xr+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+Ge+" && xC >= 0 && xC < "+Ke+`) {
                  xTexelR`+to+"C"+Xr+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+to+"C"+Xr+` = vec4(0.);
                }

                xR`+to+"C"+Xr+" = xTexelR"+to+"C"+Xr+`;
              `,Xr+1<sn)){var lo=Ye%2==0?b(Mt):Mt;Mt%2==0&&Ye%2==1||Mt%2!=0&&Ye%2!=1?(hn+=`
                  xCOffset = xC + `+Ye%2+" + "+lo+`;

                  if(xR >= 0 && xR < `+Ge+` &&
                    xCOffset >= 0 && xCOffset < `+Ke+`) {
                    xTexelR`+to+"C"+(Xr+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,Mt>1&&(hn+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+Ge+` &&
                      xCOffset >= 0 && xCOffset < `+Ke+`) {
                      xTexelR`+to+"C"+Xr+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+to+"C"+Xr+` = vec4(0.);
                    }
                  `),hn+=`
                  xR`+to+"C"+(Xr+1)+` = vec4(
                    xTexelR`+to+"C"+Xr+".zw, xTexelR"+to+"C"+(Xr+2)+`.xy);
                `):hn+=`
                  xCOffset = xC + `+lo+`;

                  if(xR >= 0 && xR < `+Ge+` &&
                    xCOffset >= 0 && xCOffset < `+Ke+`) {
                    xTexelR`+to+"C"+(Xr+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+to+"C"+(Xr+1)+" = xTexelR"+to+"C"+(Xr+2)+`;
                `}}else Xr<sn&&(hn+=`
              if(xR >= 0 && xR < `+Ge+`) {
            `,Ye%2==1?(hn+=`
                xCOffset = xC + 1 - `+Qe+`;
                if(xCOffset >= 0 && xCOffset < `+Ke+`) {
                  xTexelR`+to+"C"+Xr+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+to+"C"+Xr+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+Ke+`) {
                  xTexelR`+to+"C"+(Xr+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+to+"C"+(Xr+2)+` = vec4(0.);
                }

                xR`+to+"C"+Xr+` = vec4(
                  xTexelR`+to+"C"+Xr+".zw, xTexelR"+to+"C"+(Xr+2)+`.zw);
              `,Xr+1<sn&&(hn+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+Qe+`;
                  if(xCOffset >= 0 && xCOffset < `+Ke+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+to+"C"+(Xr+1)+" = vec4(xTexelR"+to+"C"+(Xr+2)+`.xy, final.xy);
                `)):(hn+=`
                if(xC >= 0 && xC < `+Ke+`) {
                  xTexelR`+to+"C"+Xr+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+to+"C"+Xr+` = vec4(0.);
                }

                xCOffset = xC + `+Qe+`;
                if(xCOffset >= 0 && xCOffset < `+Ke+`) {
                  xTexelR`+to+"C"+(Xr+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+to+"C"+(Xr+2)+` = vec4(0.);
                }

                xR`+to+"C"+Xr+` = vec4(
                  xTexelR`+to+"C"+Xr+".xy, xTexelR"+to+"C"+(Xr+2)+`.xy);
              `,Xr+1<sn&&(hn+=`
                  xR`+to+"C"+(Xr+1)+` = vec4(
                    xTexelR`+to+"C"+Xr+".zw, xTexelR"+to+"C"+(Xr+2)+`.zw);
                `)),hn+="}");Xr<sn&&(hn+=`
            vec4 wTexelR`+to+"C"+Xr+" = getW("+to+", "+Xr+`, d1, q);
            wR`+to+"C"+Xr+" = vec4(wTexelR"+to+"C"+Xr+".xz, wTexelR"+to+"C"+Xr+`.xz);
          `,Xr+1<sn&&(hn+=`
              vec4 wTexelR`+to+"C"+(Xr+1)+" = getW("+to+", "+(Xr+1)+`, d1, q);
              wR`+to+"C"+(Xr+1)+` =
                vec4(wTexelR`+to+"C"+(Xr+1)+".xz, wTexelR"+to+"C"+(Xr+1)+".xz);"))}for(to=0;to<on;to++)for(Xr=0;Xr<sn;Xr++)hn+="dotProd += xR"+to+"C"+Xr+" * wR"+to+"C"+Xr+";";var fo="",Uo="";v&&(fo=$e?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+v+`
        }`:`vec4 activation(vec4 x) {
          `+v+`
        }`,Uo="result = activation(result);");var mo=y?"result += getBiasAtOutCoords();":"";y&&this.variableNames.push("bias"),$e&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+fo+`

      const ivec2 strides = ivec2(`+Je+", "+Qe+`);
      const ivec2 pads = ivec2(`+qe+", "+Ye+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+hn+`

        vec4 result = dotProd;
        `+mo+`
        `+Uo+`
        setOutput(result);
      }
    `},ei=function(je,y,v,$e,Ge){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var Ke=je[0],qe=je[1],Ye=je[2],Je=je[3],Qe=y[0],st=v[0],Mt=v[1];this.outputShape=[Qe,st,Mt,Je];var on=$e==="bilinear"?1:0,sn=[qe-1+".0",Ye-1+".0"],fn=sn[0],hn=sn[1],to=st>1?[""+(qe-1)/(st-1),"(y2-y1) * height_ratio","y1*"+fn+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+fn],Xr=to[0],co=to[1],lo=to[2],fo=Mt>1?[""+(Ye-1)/(Mt-1),"(x2-x1) * width_ratio","x1*"+hn+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+hn],Uo=fo[0],mo=fo[1],rd=fo[2];this.userCode=`
      const float height_ratio = float(`+Xr+`);
      const float width_ratio = float(`+Uo+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+Ke+`) {
          return;
        }

        float height_scale = `+co+`;
        float width_scale = `+mo+`;

        float in_y = `+lo+`;
        if( in_y < 0.0 || in_y > `+fn+` ) {
          setOutput(float(`+Ge+`));
          return;
        }
        float in_x = `+rd+`;
        if( in_x < 0.0 || in_x > `+hn+` ) {
          setOutput(float(`+Ge+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+on+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},ni=function(je,y,v){this.variableNames=["x"],this.outputShape=je;var $e=je.length,Ge=je[je.length-1],Ke=v?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(v?"return "+Ge+" -i - 1;":"return i;")+`
      }

      void main() {
        `+wa($e)+` coords = getOutputCoords();
        int end = `+ri($e,"coords")+`;
        float val = 0.0;
        for (int i = `+Ge+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+Ke+` end) {
            continue;
          }
          if (idx == end && `+y+`) {
            continue;
          }
          `+ri($e,"coords")+` = idx;
          val += getX(`+function(qe,Ye){if(qe===1)return""+Ye;if(qe===2)return Ye+".x, "+Ye+".y";if(qe===3)return Ye+".x, "+Ye+".y, "+Ye+".z";if(qe===4)return Ye+".x, "+Ye+".y, "+Ye+".z, "+Ye+".w";throw Error("Cumulative sum for rank "+qe+" is not yet supported")}($e,"coords")+`);
        }
        setOutput(val);
      }
    `};function ri(je,y){if(je===1)return""+y;if(je===2)return y+".y";if(je===3)return y+".z";if(je===4)return y+".w";throw Error("Cumulative sum for rank "+je+" is not yet supported")}var oi=function(je){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Vt.DENSE;var y=Yt(je),v=ua();this.outputShape=je,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ca(["r","c","d"],je)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+y[0]+", "+y[1]+`));
        int index = 4 * (resTexRC.x * `+y[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+v.output+` = result;
      }
    `},ai=function(je){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Vt.DENSE;var y=Yt(je),v=ua();this.outputShape=je,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+ca(["r","c","d"],je)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+y[0]+", "+y[1]+`));
        int index = 4 * (resTexRC.x * `+y[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+v.output+` = result;
      }
    `},ii=function(){function je(y,v,$e){this.variableNames=["x"],this.outputShape=[],this.outputShape=y,this.blockSize=v,this.dataFormat=$e,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+v+`;
      int offset_h = imod(h, `+v+`);
      int in_w = w / `+v+`;
      int offset_w = imod(w, `+v+`);
      int offset_d = (offset_h * `+v+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return je.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},je.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},je.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},je.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},je.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},je}(),si=function(je){this.variableNames=["X"],this.outputShape=[je,je],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},ui=function(je){this.variableNames=["A"],this.outTexUsage=zt.DOWNLOAD;var y=ua();this.outputShape=je,this.userCode=`
      `+ha+`

      void main() {
        float x = getAAtOutCoords();
        `+y.output+` = encode_float(x);
      }
    `},ci=function(je){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=zt.DOWNLOAD;var y=ua();this.outputShape=je,this.userCode=`
      `+ha+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+y.output+` = encode_float(x);
      }
    `},li=function(je,y,v){v===void 0&&(v=!1),this.variableNames=["A"];var $e=ua(),Ge=y[0],Ke=y[1];this.outputShape=je;var qe="result";v&&(qe="floor(result * 255. + 0.5)"),this.userCode=`
      `+la(je)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+Ke+`;
        int c = imod(flatIndex, `+Ke+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+Ke+".0, "+Ge+`.0);
        vec4 values = `+$e.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+$e.output+" = vec4("+qe+`, 0., 0., 0.);
      }
    `},hi=function(je,y,v){v===void 0&&(v=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var $e=ua(),Ge=y[0],Ke=y[1];this.outputShape=je;var qe="",Ye="result";v&&(Ye="floor(result * 255. + 0.5)");for(var Je=0;Je<=1;Je++)for(var Qe=0;Qe<=1;Qe++){var st=2*Je+Qe;qe+=`
          localCoords = coords;
          if(localCoords[2] + `+Qe+" < "+je[2]+`) {
            localCoords[2] += `+Qe+`;
            if(localCoords[1] + `+Je+" < "+je[1]+`) {
              localCoords[1] += `+Je+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+Ke+`;
              c = imod(flatIndex, `+Ke+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+Ke+".0, "+Ge+`.0);
              values = `+$e.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+st+`] = values[0];
              } else if(offset == 1) {
                result[`+st+`] = values[1];
              } else if(offset == 2) {
                result[`+st+`] = values[2];
              } else {
                result[`+st+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+la(je)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+qe+`

        `+$e.output+" = "+Ye+`;
      }
    `},fi="return real * expR - imag * expI;",di="return real * expI + imag * expR;",pi=function(je,y,v){this.variableNames=["real","imag"];var $e=y[1];this.outputShape=y;var Ge=v?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,Ke=v?$e+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+Ge+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+je+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+$e+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+$e+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+Ke+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},vi=function(){function je(y,v){this.outputShape=[],this.variableNames=["x"],this.outputShape=y,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return je.prototype.getCustomSetupFunc=function(y){var v=this;return function($e,Ge){v.valueLoc==null&&(v.valueLoc=$e.getUniformLocationNoThrow(Ge,"value")),$e.gl.uniform1f(v.valueLoc,y)}},je}(),mi=function(je,y,v){this.variableNames=["A","indices"];var $e=je.slice();$e[v]=y,this.outputShape=$e,this.rank=$e.length;var Ge=wa(this.rank),Ke=function(qe,Ye){var Je=qe.length;if(Je>4)throw Error("Gather for rank "+Je+" is not yet supported");if(Je===1)return"int(getIndices(resRC))";for(var Qe=["resRC.x","resRC.y","resRC.z","resRC.w"],st=[],Mt=0;Mt<qe.length;Mt++)Mt===Ye?st.push("int(getIndices("+Qe[Mt]+"))"):st.push(""+Qe[Mt]);return st.join()}(je,v);this.userCode=`
      void main() {
        `+Ge+` resRC = getOutputCoords();
        setOutput(getA(`+Ke+`));
      }
    `},gi=function(je,y,v){this.sliceDim=je,this.strides=y,this.variableNames=["x","indices"],this.outputShape=v;var $e=wa(y.length),Ge=wa(v.length),Ke=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+$e+" strides = "+$e+"("+this.strides+`);
         void main() {
          `+Ge+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+Ke+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function yi(je,y){var v=ua();return oe(je,y,v.version+`
    precision highp float;
    `+v.attribute+` vec3 clipSpacePos;
    `+v.attribute+` vec2 uv;
    `+v.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function xi(je,y){return fe(je,y,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function bi(je,y){return de(je,y,new Uint16Array([0,1,2,2,1,3]))}function wi(je,y,v,$e,Ge,Ke,qe){ve(v,$e);var Ye=pe(je,y),Je=je.TEXTURE_2D;return Jt(je,y,function(){return je.bindTexture(Je,Ye)}),Jt(je,y,function(){return je.texParameteri(Je,je.TEXTURE_WRAP_S,je.CLAMP_TO_EDGE)}),Jt(je,y,function(){return je.texParameteri(Je,je.TEXTURE_WRAP_T,je.CLAMP_TO_EDGE)}),Jt(je,y,function(){return je.texParameteri(Je,je.TEXTURE_MIN_FILTER,je.NEAREST)}),Jt(je,y,function(){return je.texParameteri(Je,je.TEXTURE_MAG_FILTER,je.NEAREST)}),Jt(je,y,function(){return je.texImage2D(Je,0,Ge,v,$e,0,Ke,qe,null)}),Jt(je,y,function(){return je.bindTexture(je.TEXTURE_2D,null)}),Ye}function Ci(je,y,v,$e,Ge){var Ke=Xt(v,$e);return wi(je,y,Ke[0],Ke[1],Ge.internalFormatFloat,Ge.textureFormatFloat,je.FLOAT)}function Ei(je,y,v,$e,Ge){var Ke=Xt(v,$e);return wi(je,y,Ke[0],Ke[1],Ge.internalFormatHalfFloat,Ge.textureFormatFloat,Ge.textureTypeHalfFloat)}function Ri(je,y,v,$e,Ge){var Ke=Xt(v,$e);return wi(je,y,Ke[0],Ke[1],je.RGBA,je.RGBA,je.UNSIGNED_BYTE)}function Ii(je,y,v,$e,Ge){var Ke=$t(v,$e);return wi(je,y,Ke[0],Ke[1],Ge.internalFormatPackedFloat,je.RGBA,je.FLOAT)}function ki(je,y,v,$e,Ge){var Ke=$t(v,$e);return wi(je,y,Ke[0],Ke[1],Ge.internalFormatPackedHalfFloat,je.RGBA,Ge.textureTypeHalfFloat)}function Si(je,y,v,$e){return Jt(je,y,function(){return je.bindBuffer(je.ARRAY_BUFFER,$e)}),ge(je,y,v,"clipSpacePos",$e,3,20,0)&&ge(je,y,v,"uv",$e,2,20,12)}function Ai(je,y,v,$e,Ge,Ke,qe){var Ye,Je,Qe;Jt(je,y,function(){return je.bindTexture(je.TEXTURE_2D,v)}),Ke instanceof Uint8Array?(Ye=new Uint8Array($e*Ge*4),Je=je.UNSIGNED_BYTE,Qe=je.RGBA):(Ye=new Float32Array($e*Ge*4),Je=je.FLOAT,Qe=qe.internalFormatPackedFloat),Ye.set(Ke),Jt(je,y,function(){return je.texImage2D(je.TEXTURE_2D,0,Qe,$e,Ge,0,je.RGBA,Je,Ye)}),Jt(je,y,function(){return je.bindTexture(je.TEXTURE_2D,null)})}function Di(je,y,v,$e){Jt(je,y,function(){return je.bindTexture(je.TEXTURE_2D,v)}),$e.data instanceof Uint8Array?Jt(je,y,function(){return je.texImage2D(je.TEXTURE_2D,0,je.RGBA,$e.width,$e.height,0,je.RGBA,je.UNSIGNED_BYTE,$e.data)}):Jt(je,y,function(){return je.texImage2D(je.TEXTURE_2D,0,je.RGBA,je.RGBA,je.UNSIGNED_BYTE,$e)}),Jt(je,y,function(){return je.bindTexture(je.TEXTURE_2D,null)})}function Ti(je,y,v,$e,Ge){var Ke=je.createBuffer();Jt(je,y,function(){return je.bindBuffer(je.PIXEL_PACK_BUFFER,Ke)});var qe=16*v*$e;return Jt(je,y,function(){return je.bufferData(je.PIXEL_PACK_BUFFER,qe,je.STREAM_READ)}),Jt(je,y,function(){return je.readPixels(0,0,$e,v,je.RGBA,je.FLOAT,0)}),Jt(je,y,function(){return je.bindBuffer(je.PIXEL_PACK_BUFFER,null)}),Ke}function Ni(je,y,v){var $e=je,Ge=new Float32Array(v);return $e.bindBuffer($e.PIXEL_PACK_BUFFER,y),$e.getBufferSubData($e.PIXEL_PACK_BUFFER,0,Ge),$e.bindBuffer($e.PIXEL_PACK_BUFFER,null),Ge}function Fi(je,y,v,$e,Ge){var Ke=Xt(v,$e),qe=Ke[0],Ye=Ke[1],Je=new Uint8Array(v*$e*4);return Jt(je,y,function(){return je.readPixels(0,0,qe,Ye,Ge.downloadTextureFormat,je.UNSIGNED_BYTE,Je)}),new Float32Array(Je.buffer)}function _i(je,y,v,$e,Ge,Ke,qe,Ye){var Je=je,Qe=new Float32Array(function(st,Mt){var on=$t(st,Mt);return on[0]*on[1]*4}(Ke,qe));return Je.bindBuffer(Je.PIXEL_PACK_BUFFER,y),Je.getBufferSubData(Je.PIXEL_PACK_BUFFER,0,Qe),Je.bindBuffer(Je.PIXEL_PACK_BUFFER,null),Qe}function Oi(je,y,v,$e){var Ge=new Float32Array(v*$e*4);return Jt(je,y,function(){return je.readPixels(0,0,$e,v,je.RGBA,je.FLOAT,Ge)}),Ge}var Bi=function(){function je(y){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var v=i().getNumber("WEBGL_VERSION");y!=null?(this.gl=y,Kt(v,y)):this.gl=jt(v);var $e="WEBGL_color_buffer_float";if(i().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=re(this.gl,this.debug,"OES_texture_float"),Pe(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=re(this.gl,this.debug,"OES_texture_half_float");else if(i().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension($e),Pe(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=re(this.gl,this.debug,"EXT_color_buffer_half_float");else if(i().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if($e="EXT_color_buffer_float",Pe(this.gl,$e))this.colorBufferFloatExtension=this.gl.getExtension($e);else{if(!Pe(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=xi(this.gl,this.debug),this.indexBuffer=bi(this.gl,this.debug),this.framebuffer=me(this.gl,this.debug),this.textureConfig=Qt(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(je.prototype,"debug",{get:function(){return i().getBool("DEBUG")},enumerable:!0,configurable:!0}),je.prototype.dispose=function(){var y=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var v=this.gl;Jt(v,this.debug,function(){return v.finish()}),Jt(v,this.debug,function(){return v.bindFramebuffer(v.FRAMEBUFFER,null)}),Jt(v,this.debug,function(){return v.deleteFramebuffer(y.framebuffer)}),Jt(v,this.debug,function(){return v.bindBuffer(v.ARRAY_BUFFER,null)}),Jt(v,this.debug,function(){return v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,null)}),Jt(v,this.debug,function(){return v.deleteBuffer(y.indexBuffer)}),this.disposed=!0}},je.prototype.createFloat32MatrixTexture=function(y,v){return this.throwIfDisposed(),Ci(this.gl,this.debug,y,v,this.textureConfig)},je.prototype.createFloat16MatrixTexture=function(y,v){return this.throwIfDisposed(),Ei(this.gl,this.debug,y,v,this.textureConfig)},je.prototype.createUnsignedBytesMatrixTexture=function(y,v){return this.throwIfDisposed(),Ri(this.gl,this.debug,y,v,this.textureConfig)},je.prototype.uploadPixelDataToTexture=function(y,v){this.throwIfDisposed(),Di(this.gl,this.debug,y,v)},je.prototype.uploadDenseMatrixToTexture=function(y,v,$e,Ge){this.throwIfDisposed(),Ai(this.gl,this.debug,y,v,$e,Ge,this.textureConfig)},je.prototype.createFloat16PackedMatrixTexture=function(y,v){return this.throwIfDisposed(),ki(this.gl,this.debug,y,v,this.textureConfig)},je.prototype.createPackedMatrixTexture=function(y,v){return this.throwIfDisposed(),Ii(this.gl,this.debug,y,v,this.textureConfig)},je.prototype.deleteMatrixTexture=function(y){var v=this;this.throwIfDisposed(),this.outputTexture===y&&(Ee(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Jt(this.gl,this.debug,function(){return v.gl.deleteTexture(y)})},je.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(y,v,$e){var Ge=this;return this.downloadMatrixDriver(y,function(){return Fi(Ge.gl,Ge.debug,v,$e,Ge.textureConfig)})},je.prototype.downloadPackedMatrixFromBuffer=function(y,v,$e,Ge,Ke,qe){return _i(this.gl,y,0,0,0,Ke,qe,this.textureConfig)},je.prototype.downloadFloat32MatrixFromBuffer=function(y,v){return Ni(this.gl,y,v)},je.prototype.createBufferFromTexture=function(y,v,$e){this.bindTextureToFrameBuffer(y);var Ge=Ti(this.gl,this.debug,v,$e,this.textureConfig);return this.unbindTextureToFrameBuffer(),Ge},je.prototype.createAndWaitForFence=function(){var y=this.createFence(this.gl);return this.pollFence(y)},je.prototype.createFence=function(y){var v,$e,Ge=this;if(i().getBool("WEBGL_FENCE_API_ENABLED")){var Ke=y,qe=Ke.fenceSync(Ke.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),$e=function(){var Ye=Ke.clientWaitSync(qe,0,0);return Ye===Ke.ALREADY_SIGNALED||Ye===Ke.CONDITION_SATISFIED},v=qe}else i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(v=this.beginQuery(),this.endQuery(),$e=function(){return Ge.isQueryAvailable(v,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):$e=function(){return!0};return{query:v,isFencePassed:$e}},je.prototype.downloadMatrixFromPackedTexture=function(y,v,$e){var Ge=this;return this.downloadMatrixDriver(y,function(){return Oi(Ge.gl,Ge.debug,v,$e)})},je.prototype.createProgram=function(y){this.throwIfDisposed();var v=this.gl,$e=ae(v,this.debug,y),Ge=yi(v,this.debug),Ke=ce(v,this.debug);return Jt(v,this.debug,function(){return v.attachShader(Ke,Ge)}),Jt(v,this.debug,function(){return v.attachShader(Ke,$e)}),le(v,this.debug,Ke),this.debug&&he(v,this.debug,Ke),this.vertexAttrsAreBound||(this.setProgram(Ke),this.vertexAttrsAreBound=Si(v,this.debug,this.program,this.vertexBuffer)),Ke},je.prototype.deleteProgram=function(y){var v=this;this.throwIfDisposed(),y===this.program&&(this.program=null),y!=null&&Jt(this.gl,this.debug,function(){return v.gl.deleteProgram(y)})},je.prototype.setProgram=function(y){var v=this;this.throwIfDisposed(),this.program=y,this.program!=null&&this.debug&&he(this.gl,this.debug,this.program),Jt(this.gl,this.debug,function(){return v.gl.useProgram(y)})},je.prototype.getUniformLocation=function(y,v,$e){return $e===void 0&&($e=!0),this.throwIfDisposed(),$e?xe(this.gl,this.debug,y,v):be(this.gl,y,v)},je.prototype.getAttributeLocation=function(y,v){var $e=this;return this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return $e.gl.getAttribLocation(y,v)})},je.prototype.getUniformLocationNoThrow=function(y,v){return this.throwIfDisposed(),this.gl.getUniformLocation(y,v)},je.prototype.setInputMatrixTexture=function(y,v,$e){this.throwIfDisposed(),this.throwIfNoProgram(),we(this.gl,this.debug,this.program,y,v,$e)},je.prototype.setOutputMatrixTexture=function(y,v,$e){this.setOutputMatrixTextureDriver(y,$e,v)},je.prototype.setOutputPackedMatrixTexture=function(y,v,$e){this.throwIfDisposed();var Ge=$t(v,$e),Ke=Ge[0],qe=Ge[1];this.setOutputMatrixTextureDriver(y,Ke,qe)},je.prototype.setOutputMatrixWriteRegion=function(y,v,$e,Ge){this.setOutputMatrixWriteRegionDriver($e,y,Ge,v)},je.prototype.setOutputPackedMatrixWriteRegion=function(y,v,$e,Ge){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},je.prototype.debugValidate=function(){this.program!=null&&he(this.gl,this.debug,this.program),Re(this.gl)},je.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var y=this.gl;this.debug&&this.debugValidate(),Jt(y,this.debug,function(){return y.drawElements(y.TRIANGLES,6,y.UNSIGNED_SHORT,0)})},je.prototype.blockUntilAllProgramsCompleted=function(){var y=this;this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return y.gl.finish()})},je.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=re(this.gl,this.debug,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},je.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},je.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},je.prototype.beginQuery=function(){if(i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var y=this.gl,v=this.getQueryTimerExtensionWebGL2(),$e=y.createQuery();return y.beginQuery(v.TIME_ELAPSED_EXT,$e),$e}var Ge=this.getQueryTimerExtensionWebGL1(),Ke=Ge.createQueryEXT();return Ge.beginQueryEXT(Ge.TIME_ELAPSED_EXT,Ke),Ke},je.prototype.endQuery=function(){if(i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var y=this.getQueryTimerExtensionWebGL1();y.endQueryEXT(y.TIME_ELAPSED_EXT)}else{var v=this.gl,$e=this.getQueryTimerExtensionWebGL2();v.endQuery($e.TIME_ELAPSED_EXT)}},je.prototype.waitForQueryAndGetTime=function(y){return n(this,void 0,void 0,function(){var v=this;return r(this,function($e){switch($e.label){case 0:return[4,F(function(){return v.disposed||v.isQueryAvailable(y,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return $e.sent(),[2,this.getQueryTime(y,i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},je.prototype.getQueryTime=function(y,v){if(v===0)return null;if(v===2){var $e=this.gl;return $e.getQueryParameter(y,$e.QUERY_RESULT)/1e6}var Ge=this.getQueryTimerExtensionWebGL1();return Ge.getQueryObjectEXT(y,Ge.QUERY_RESULT_EXT)/1e6},je.prototype.isQueryAvailable=function(y,v){if(v===0)return!0;if(v===2){var $e=this.gl,Ge=this.getQueryTimerExtensionWebGL2(),Ke=$e.getQueryParameter(y,$e.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(Ge.GPU_DISJOINT_EXT)),Ke&&!this.disjoint}return Ke=(Ge=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(y,Ge.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(Ge.GPU_DISJOINT_EXT)),Ke&&!this.disjoint},je.prototype.pollFence=function(y){var v=this;return new Promise(function($e){v.addItemToPoll(function(){return y.isFencePassed()},function(){return $e()})})},je.prototype.pollItems=function(){for(var y=function($e){for(var Ge=0;Ge<$e.length&&$e[Ge]();++Ge);return Ge-1}(this.itemsToPoll.map(function($e){return $e.isDoneFn})),v=0;v<=y;++v)(0,this.itemsToPoll[v].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(y+1)},je.prototype.addItemToPoll=function(y,v){var $e=this;this.itemsToPoll.push({isDoneFn:y,resolveFn:v}),this.itemsToPoll.length>1||F(function(){return $e.pollItems(),$e.itemsToPoll.length===0})},je.prototype.bindTextureToFrameBuffer=function(y){this.throwIfDisposed(),Ce(this.gl,this.debug,y,this.framebuffer),this.debug&&Re(this.gl)},je.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Ce(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Re(this.gl)):Ee(this.gl,this.debug,this.framebuffer)},je.prototype.downloadMatrixDriver=function(y,v){this.bindTextureToFrameBuffer(y);var $e=v();return this.unbindTextureToFrameBuffer(),$e},je.prototype.setOutputMatrixTextureDriver=function(y,v,$e){this.throwIfDisposed();var Ge=this.gl;Ce(Ge,this.debug,y,this.framebuffer),this.debug&&Re(Ge),this.outputTexture=y,Jt(Ge,this.debug,function(){return Ge.viewport(0,0,v,$e)}),Jt(Ge,this.debug,function(){return Ge.scissor(0,0,v,$e)})},je.prototype.setOutputMatrixWriteRegionDriver=function(y,v,$e,Ge){var Ke=this;this.throwIfDisposed(),Jt(this.gl,this.debug,function(){return Ke.gl.scissor(y,v,$e,Ge)})},je.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},je.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},je}();function Pi(je,y){if(je.length!==y.length)throw Error("Binary was compiled with "+je.length+" inputs, but was executed with "+y.length+" inputs");je.forEach(function(v,$e){var Ge=v.logicalShape,Ke=y[$e],qe=Ke.shape;if(!S(Ge,qe))throw Error("Binary was compiled with different shapes than the current args. Shapes "+Ge+" and "+qe+" must match");if(!v.isUniform||!Ke.isUniform){var Ye=v.texShape,Je=Ke.isUniform?null:Ke.texData.texShape;if(!S(Ye,Je))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+Ye+" and "+Je+" must match")}})}var Li=function(je,y,v){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=je;for(var $e=v.filterWidth,Ge=v.inChannels,Ke=v.strideWidth,qe=v.strideHeight,Ye=v.padInfo,Je=v.outWidth,Qe=v.dilationWidth,st=v.dilationHeight,Mt=v.dataFormat,on=Ye.left,sn=Ye.top,fn=Ge*$e,hn=ua(),to=Mt==="channelsLast",Xr=to?0:1,co=to?1:2,lo="",fo=0;fo<=1;fo++)for(var Uo=0;Uo<=1;Uo++)lo+=`
          blockIndex = rc.y + `+Uo+`;
          pos = rc.x + `+fo+`;

          if(blockIndex < `+je[1]+" && pos < "+je[0]+`) {
            offsetY = int(blockIndex / (`+Je+")) * "+qe+" - "+sn+`;
            d0 = offsetY + `+st+" * (pos / "+fn+`);

            if(d0 < `+y[Xr]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+Je+".) * "+Ke+". - "+on+`.);
              d1 = offsetX + `+Qe+" * (int(mod(float(pos), "+fn+".) / "+Ge+`.));

              if(d1 < `+y[co]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+Ge+`.));

                if (`+to+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*fo+Uo)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*fo+Uo)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+lo+`

        `+hn.output+` = result;
      }
    `},Wi=function(je,y,v,$e,Ge){this.variableNames=["x"],this.outputShape=[];var Ke,qe=y,Ye=je[3]-1;this.outputShape=je;var Je="float("+v+") + float("+$e+") * sum";Ke=Ge===.5?"inversesqrt("+Je+")":Ge===1?"1.0/("+Je+")":"exp(log("+Je+") * float(-"+Ge+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+qe+"; j <= "+qe+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+Ye+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+Ke+`;
        setOutput(val);
      }
    `},Ui=function(je,y,v,$e,Ge){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=je,this.depth=je[3],this.depthRadius=y,this.bias=v,this.alpha=$e,this.beta=Ge,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+y+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+y+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+$e+") * norm + float("+v+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+$e+`)
                * float(`+Ge+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+Ge+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},Vi=function(je,y,v,$e,Ge){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var Ke,qe=y,Ye=je[3]-1;this.outputShape=je;var Je="float("+v+") + float("+$e+") * sum";Ke=Ge===.5?"inversesqrt("+Je+")":Ge===1?"1.0/("+Je+")":"exp(log("+Je+") * float(-"+Ge+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+qe+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+qe+"; j <= "+qe+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+Ye+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+Ke+`;
        setOutput(result);
      }
    `},zi=function(je){this.variableNames=["dy","maxPos"],this.outputShape=je.inShape;var y=je.strideHeight,v=je.strideWidth,$e=je.dilationHeight,Ge=je.effectiveFilterHeight,Ke=je.effectiveFilterWidth,qe=Ge-1-je.padInfo.top,Ye=Ke-1-je.padInfo.left,Je=Ge*Ke-1;this.userCode=`
      const ivec2 pads = ivec2(`+qe+", "+Ye+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+Ge+`;
          wR += `+$e+`) {
          float dyR = float(dyRCorner + wR) / `+y+`.0;

          if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+Ke+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+v+`.0;

            if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+Je+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+Ke+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},Gi=function(je){this.variableNames=["dy","maxPos"],this.outputShape=je.inShape;var y=je.strideDepth,v=je.strideHeight,$e=je.strideWidth,Ge=je.dilationDepth,Ke=je.dilationHeight,qe=je.dilationWidth,Ye=je.effectiveFilterDepth,Je=je.effectiveFilterHeight,Qe=je.effectiveFilterWidth,st=Ye-1-je.padInfo.front,Mt=Je-1-je.padInfo.top,on=Qe-1-je.padInfo.left,sn=Ye*Je*Qe-1;this.userCode=`
      const ivec3 pads = ivec3(`+st+", "+Mt+", "+on+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+Ye+`;
           wD += `+Ge+`) {
          float dyD = float(dyDCorner + wD) / `+y+`.0;

          if (dyD < 0.0 || dyD >= `+je.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+Je+`;
              wR += `+Ke+`) {
            float dyR = float(dyRCorner + wR) / `+v+`.0;

            if (dyR < 0.0 || dyR >= `+je.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+Qe+`;
                wC += `+qe+`) {
              float dyC = float(dyCCorner + wC) / `+$e+`.0;

              if (dyC < 0.0 || dyC >= `+je.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+sn+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+Je+" * "+Qe+` +
                  wR * `+Qe+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Hi=function(je,y,v,$e,Ge,Ke,qe){v===void 0&&(v=!1),$e===void 0&&($e=!1),Ge===void 0&&(Ge=!1),Ke===void 0&&(Ke=null),qe===void 0&&(qe=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=y;var Ye=v?je[1]:je[2],Je=Math.ceil(Ye/2),Qe=v?"i * 2, rc.y":"rc.y, i * 2",st=$e?"rc.z, i * 2":"i * 2, rc.z",Mt=v?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],on=$e?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],sn="",fn="";Ke&&(sn=qe?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+Ke+`
        }`:`vec4 activation(vec4 x) {
          `+Ke+`
        }`,fn="result = activation(result);");var hn=Ge?"result += getBiasAtOutCoords();":"";Ge&&this.variableNames.push("bias"),qe&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+sn+`

      const float sharedDimension = `+Je+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+Je+`; i++) {
          vec4 a = getMatrixA(rc.x, `+Qe+`);
          vec4 b = getMatrixB(rc.x, `+st+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+Mt[0]+" * "+on[0]+`);
          result += (`+Mt[1]+" * "+on[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+hn+`

        `+fn+`

        setOutput(result);
      }
    `},qi=function(){function je(y,v,$e){this.variableNames=["probs"],this.outputShape=[y,$e],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(v-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(v-1)+`));
      }
    `}return je.prototype.getCustomSetupFunc=function(y){var v=this;return function($e,Ge){v.seedLoc==null&&(v.seedLoc=$e.getUniformLocation(Ge,"seed")),$e.gl.uniform1f(v.seedLoc,y)}},je}(),Ki=function(je,y,v,$e){this.variableNames=["indices"],this.outputShape=[je,y],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+$e+"), float("+v+`),
                      float(index == coords.y)));
      }
    `},ji=function(je){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=je;var y=je.length;if(y===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var v=sa("rc",y),$e=wa(y),Ge=function(Ye,Je,Qe){if(Ye===1)return"rc > "+Je[0];for(var st="",Mt=Ye-2;Mt<Ye;Mt++)st+=Qe[Mt]+" >= "+Je[Mt],Mt<Ye-1&&(st+="||");return st}(y,je,v),Ke=function(Ye,Je,Qe,st){if(Ye===1)return"";var Mt=st.slice(-2);return`
    int r = `+Mt[0]+`;
    int c = `+Mt[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+Je+`;
    bool rEdge = rp1 >= `+Qe+`;
  `}(y,je[je.length-1],je[je.length-2],v),qe=function(Ye,Je){var Qe=Ye.length,st=function(Mt,on){for(var sn=[],fn=0;fn<=1;fn++)for(var hn=0;hn<=1;hn++){for(var to=(fn===0?"r":"rp1")+", "+(hn===0?"c":"cp1"),Xr=2;Xr<Mt;Xr++)to=on[on.length-1-Xr]+","+to;sn.push(to)}return sn}(Qe,Je);return Qe===1?`getA(rc),
            rc + 1 >= `+Ye[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+st[0]+`),
          cEdge ? 0. : getA(`+st[1]+`),
          rEdge ? 0. : getA(`+st[2]+`),
          rEdge || cEdge ? 0. : getA(`+st[3]+")"}(je,v);this.userCode=`
        void main() {
          `+$e+` rc = getOutputCoords();

          if(`+Ge+`) {
            setOutput(vec4(0));
          } else {
            `+Ke+`

            setOutput(vec4(`+qe+`));
          }
        }
      `}},Xi=function(je,y,v){this.variableNames=["x"],this.outputShape=y.map(function(Je,Qe){return Je[0]+je[Qe]+Je[1]});var $e=je.length,Ge=wa($e),Ke=y.map(function(Je){return Je[0]}).join(","),qe=y.map(function(Je,Qe){return Je[0]+je[Qe]}).join(","),Ye=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,$e);this.userCode=$e!==1?`
      `+Ge+" start = "+Ge+"("+Ke+`);
      `+Ge+" end = "+Ge+"("+qe+`);

      void main() {
        `+Ge+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+v+`));
        } else {
          `+Ge+` coords = outC - start;
          setOutput(getX(`+Ye+`));
        }
      }
    `:`
        int start = `+Ke+`;
        int end = `+qe+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+v+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},Yi=function(je,y,v){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=y.map(function(to,Xr){return to[0]+je[Xr]+to[1]});for(var $e=je.length,Ge=wa($e),Ke=y.map(function(to){return to[0]}).join(","),qe=y.map(function(to,Xr){return to[0]+je[Xr]}).join(","),Ye=sa("rc",$e),Je=sa("source",$e),Qe=Ye[$e-1]+" < "+this.outputShape[$e-1],st=$e===1?"source":"vec2("+Je.slice(-2).join()+")",Mt=[Ge+" rc = outputLoc;",Ye[$e-1]+` += 1;
       if(`+Qe+`) {
      `,$e===1?"":`}
       rc = outputLoc;
       `+Ye[$e-2]+` += 1;
       if(`+Ye[$e-2]+" < "+this.outputShape[$e-2]+") {",$e===1?"":"  "+Ye[$e-1]+` += 1;
         if(`+Qe+") {"],on=$e===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",sn="",fn=0,hn=$e===1?2:4;fn<hn;fn++)sn+=`
        `+Mt[fn]+`
        if (`+on+`) {
          result[`+fn+"] = float("+v+`);
        } else {
          `+Ge+` source = rc - start;
          result[`+fn+"] = getChannel(getX("+Je.join()+"), "+st+`);
        }
      `;sn+=$e===1?"} ":"}}",this.userCode=`
      const `+Ge+" start = "+Ge+"("+Ke+`);
      const `+Ge+" end = "+Ge+"("+qe+`);

      void main() {
        `+Ge+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+sn+`
        setOutput(result);
      }
    `},$i=function(je,y,v){if(this.variableNames=["x"],y==="avg"&&v)throw new Error("Cannot compute positions for average pool.");var $e=je.filterWidth,Ge=je.strideHeight,Ke=je.strideWidth,qe=je.dilationHeight,Ye=je.dilationWidth,Je=je.effectiveFilterHeight,Qe=je.effectiveFilterWidth,st=je.padInfo.top,Mt=je.padInfo.left;this.outputShape=je.outShape;var on=y==="avg",sn="0.0";if(on||(sn="-1.0 / 1e-20"),v)this.userCode=`
        const ivec2 strides = ivec2(`+Ge+", "+Ke+`);
        const ivec2 pads = ivec2(`+st+", "+Mt+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+Je+`;
              wR += `+qe+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+je.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+Qe+`;
                wC += `+Ye+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+je.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+Qe+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var fn=y+"("+y+"("+y+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";y==="avg"&&(fn="avgValue / count");var hn=4*Math.floor($e/4),to=$e%4,Xr=`
      if (`+on+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+Ge+", "+Ke+`);
      const ivec2 pads = ivec2(`+st+", "+Mt+`);
      const float initializationValue = `+sn+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+je.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+sn+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+Je+`;
            wR += `+qe+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+je.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+hn+`; wC += 4) {
            int xC = xCCorner + wC * `+Ye+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+Ye+`, d),
              getValue(batch, xR, xC + 2 * `+Ye+`, d),
              getValue(batch, xR, xC + 3 * `+Ye+`, d)
            );

            `+Xr+`
          }

          int xC = xCCorner + `+hn+`;
          if (`+(to===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+Xr+`
          } else if (`+(to===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+Ye+`, d),
              initializationValue,
              initializationValue
            );

            `+Xr+`
          } else if (`+(to===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+Ye+`, d),
              getValue(batch, xR, xC + 2 * `+Ye+`, d),
              initializationValue
            );

            `+Xr+`
          }
        }
        setOutput(`+fn+`);
      }
    `}},Qi=function(je,y,v){if(this.variableNames=["x"],y==="avg"&&v)throw new Error("Cannot compute positions for average pool.");var $e=je.filterWidth,Ge=je.strideDepth,Ke=je.strideHeight,qe=je.strideWidth,Ye=je.dilationDepth,Je=je.dilationHeight,Qe=je.dilationWidth,st=je.effectiveFilterDepth,Mt=je.effectiveFilterHeight,on=je.effectiveFilterWidth,sn=je.padInfo.front,fn=je.padInfo.top,hn=je.padInfo.left;this.outputShape=je.outShape;var to=y==="avg",Xr="0.0";if(to||(Xr="-1.0 / 1e-20"),v)this.userCode=`
        const ivec3 strides =
            ivec3(`+Ge+", "+Ke+", "+qe+`);
        const ivec3 pads = ivec3(`+sn+", "+fn+", "+hn+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+st+`;
              wD += `+Ye+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+je.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+Mt+`;
                wR += `+Je+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+je.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+on+`;
                  wC += `+Qe+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+je.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+Mt+" * "+on+` +
                      wR * `+on+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var co=y+"("+y+"("+y+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";y==="avg"&&(co="avgValue / count");var lo=4*Math.floor($e/4),fo=$e%4,Uo=`
      if (`+to+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+Ge+", "+Ke+", "+qe+`);
      const ivec3 pads = ivec3(`+sn+", "+fn+", "+hn+`);
      const float initializationValue = `+Xr+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+je.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+Xr+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+st+`;
            wD += `+Ye+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+je.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+Mt+`;
            wR += `+Je+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+je.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+lo+`; wC += 4) {
              int xC = xCCorner + wC * `+Qe+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+Qe+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+Qe+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+Qe+`, ch)
              );

              `+Uo+`
            }

            int xC = xCCorner + `+lo+`;
            if (`+(fo===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+Uo+`
            } else if (`+(fo===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+Qe+`, ch),
                initializationValue,
                initializationValue
              );

              `+Uo+`
            } else if (`+(fo===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+Qe+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+Qe+`, ch),
                initializationValue
              );

              `+Uo+`
            }
          }
          setOutput(`+co+`);
        }
      }
    `}},Ji=function(je,y){this.variableNames=["x"];var v=je.windowSize,$e=je.batchSize,Ge=je.inSize,Ke=Math.ceil(Ge/v);this.outputShape=[$e,Ke];var qe="0.0",Ye="";y==="prod"?qe="1.0":y==="min"?(qe="1.0 / 1e-20",Ye="min"):y==="max"&&(qe="-1.0 / 1e-20",Ye="max");var Je=y+"("+y+"("+y+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";y==="sum"?Je="sumValue":y==="prod"?Je="prodValue":y==="all"?Je="allValue":y==="any"&&(Je="anyValue");var Qe=4*Math.floor(v/4),st=v%4,Mt=`
      if (`+(y==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(y==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+Ye+`(values, minMaxValue);
      }
    `,on="vec4";y==="all"?(qe="1.0",Mt=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,on="bvec4"):y==="any"&&(qe="0.0",Mt=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,on="bvec4");var sn="";Ge%v>0&&(sn=`
        if (inIdx < 0 || inIdx >= `+Ge+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+qe+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+sn+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+v+`;

        vec4 minMaxValue = vec4(`+qe+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+Qe+`; i += 4) {
          int inIdx = inOffset + i;
          `+on+" values = "+on+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+Mt+`
        }

        int inIdx = inOffset + `+Qe+`;
        if (`+(st===1)+`) {
          `+on+" values = "+on+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+Mt+`
        } else if (`+(st===2)+`) {
          `+on+" values = "+on+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+Mt+`
        } else if (`+(st===3)+`) {
          `+on+" values = "+on+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+Mt+`
        }
        setOutput(`+Je+`);
      }
    `},Zi=function(je,y){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=je;for(var v="",$e=0;$e<4;$e++){var Ge="thisRC = rc;";$e%2==1&&(Ge+="thisRC.z += 1;"),$e>1&&(Ge+="thisRC.y += 1;"),v+=`
        `+Ge+`
        `+($e>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+$e+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+($e>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+ca(["r","c","d"],y)+`
      return ivec3(r, c, d);
    }
  
      `+la(je)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+je[1]+`;
        int cols = `+je[2]+`;

        `+v+`

        setOutput(result);
      }
    `},ts=function(je,y,v){this.variableNames=["dy"],this.outputShape=[],this.outputShape=y.shape;var $e=y.shape,Ge=$e[1],Ke=$e[2],qe=je.shape,Ye=qe[1],Je=qe[2],Qe=[v&&Ye>1?Ge-1:Ge,v&&Je>1?Ke-1:Ke],st=[v&&Ye>1?Ye-1:Ye,v&&Je>1?Je-1:Je],Mt=Qe[0]/st[0],on=Qe[1]/st[1],sn=1/Mt,fn=1/on,hn=2*Math.ceil(sn)+2,to=2*Math.ceil(fn)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+Mt+`);
        const float widthScale = float(`+on+`);

        const float invHeightScale = float(`+sn+`);
        const float invWidthScale = float(`+fn+`);

        const int winHeight = int(`+hn+`);
        const int winWidth = int(`+to+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+Ye+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+Je+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(Ge-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(Ke-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},es=function(je,y,v,$e){this.variableNames=["A"],this.outputShape=[];var Ge=je[0],Ke=je[1],qe=je[2],Ye=je[3];this.outputShape=[Ge,y,v,Ye];var Je=[$e&&y>1?Ke-1:Ke,$e&&v>1?qe-1:qe],Qe=[$e&&y>1?y-1:y,$e&&v>1?v-1:v];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+Je[0]/Qe[0]+`,
          `+Je[1]/Qe[1]+`);
      const vec2 inputShapeRC = vec2(`+Ke+".0, "+qe+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ns=function(je,y,v,$e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var Ge=je[0],Ke=je[1],qe=je[2],Ye=je[3];this.outputShape=[Ge,y,v,Ye];var Je=[$e&&y>1?Ke-1:Ke,$e&&v>1?qe-1:qe],Qe=[$e&&y>1?y-1:y,$e&&v>1?v-1:v];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+Je[0]/Qe[0]+`,
          `+Je[1]/Qe[1]+`,
          `+Je[1]/Qe[1]+`);
      const vec3 inputShapeRC = vec3(`+Ke+".0, "+qe+`.0,
                                     `+qe+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(Ye-1)+`;
        bool hasNextRow = coords.z < `+(v-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},rs=function(je,y,v){this.variableNames=["dy"],this.outputShape=[],this.outputShape=y.shape;var $e=y.shape,Ge=$e[1],Ke=$e[2],qe=je.shape,Ye=qe[1],Je=qe[2],Qe=[v&&Ye>1?Ge-1:Ge,v&&Je>1?Ke-1:Ke],st=[v&&Ye>1?Ye-1:Ye,v&&Je>1?Je-1:Je],Mt=Qe[0]/st[0],on=Qe[1]/st[1],sn=1/Mt,fn=1/on,hn=2*Math.ceil(sn)+2,to=2*Math.ceil(fn)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+Mt+`);
        const float widthScale = float(`+on+`);

        const float invHeightScale = float(`+sn+`);
        const float invWidthScale = float(`+fn+`);

        const int winHeight = int(`+hn+`);
        const int winWidth = int(`+to+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+Ye+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+Je+`) {
              continue;
            }

            float sourceFracRow =
              float(`+Qe[0]+`) *
                (float(dyR) / float(`+st[0]+`));

            float sourceFracCol =
                float(`+Qe[1]+`) *
                  (float(dyC) / float(`+st[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+Ge+`) - 1),
                `+v+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+Ke+`) - 1),
                `+v+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},os=function(je,y,v,$e){this.variableNames=["A"],this.outputShape=[];var Ge=je[0],Ke=je[1],qe=je[2],Ye=je[3];this.outputShape=[Ge,y,v,Ye];var Je=[$e&&y>1?Ke-1:Ke,$e&&v>1?qe-1:qe],Qe=[$e&&y>1?y-1:y,$e&&v>1?v-1:v],st=$e?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+Je[0]/Qe[0]+`,
          `+Je[1]/Qe[1]+`);
      const vec2 inputShapeRC = vec2(`+Ke+".0, "+qe+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+st+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},as=function(je,y){this.variableNames=["x"];var v=je.length;if(v>4)throw new Error("WebGL backend: Reverse of rank-"+v+" tensor is not yet supported");if(this.outputShape=je,v!==1){var $e=je.map(function(Ke,qe){return function(Ye){return y.indexOf(Ye)!==-1&&je[Ye]!==1?je[Ye]+" - coords["+Ye+"] - 1":"coords["+Ye+"]"}(qe)}).join(","),Ge=wa(v);this.userCode=`
      void main() {
        `+Ge+` coords = getOutputCoords();
        setOutput(getX(`+$e+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+je[0]+` - coord - 1));
        }
      `},is=function(je,y){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var v=je.length;if(v>4)throw new Error("WebGL backend: Reverse of rank-"+v+" tensor is not yet supported");this.outputShape=je;var $e=sa("rc",v),Ge=$e[v-1]+" + 1 < "+this.outputShape[v-1],Ke=$e[v-2]+" + 1 < "+this.outputShape[v-2],qe=wa(v);function Ye(Je){var Qe=je.map(function(st,Mt){return function(on,sn){return y.indexOf(on)!==-1&&je[on]!==1?je[on]+" - "+sn[on]+" - 1":""+sn[on]}(Mt,Je)});return"getChannel(getX("+Qe.join(",")+"), vec2("+Qe.slice(-2).join(",")+"))"}this.userCode=v===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+je[0]+` - rc - 1),
            `+je[0]+` - rc - 1);
          if(`+Ge+`){
              result.g = getChannel(getX(`+je[0]+` - (rc  + 1) - 1),
                `+je[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+qe+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(Je){return Ye(Je)}($e.slice())+`;
          if(`+Ge+`){
            result.g = `+function(Je){return Je[v-1]="("+Je[v-1]+" + 1)",Ye(Je)}($e.slice())+`;
          }
          if(`+Ke+`) {
            result.b = `+function(Je){return Je[v-2]="("+Je[v-2]+" + 1)",Ye(Je)}($e.slice())+`;
            if(`+Ge+`) {
              result.a = `+function(Je){return Je[v-1]="("+Je[v-1]+" + 1)",Je[v-2]="("+Je[v-2]+" + 1)",Ye(Je)}($e.slice())+`;
            }
          }
          setOutput(result);
        }
    `},ss=function(je,y,v,$e,Ge,Ke,qe){this.variableNames=["updates","indices","defaultValue"],this.outputShape=Ke;var Ye=wa(Ge.length),Je=wa(Ke.length),Qe="";v===1?Qe="i":v===2&&(Qe="i, j");var st="getIndices("+Qe+")",Mt="";$e===1?Mt="i":$e===2&&(Mt="i, coords[1]");var on="getUpdates("+Mt+")",sn=y>1?"strides[j]":"strides";this.userCode=`
        `+Ye+" strides = "+Ye+"("+Ge+`);

        void main() {
          `+Je+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+je+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+y+`; j++) {
              int index = round(`+st+`);
              flattenedIndex += index * `+sn+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+on+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},us=function(je,y){this.variableNames=["x","segmentIds"];var v=je.windowSize,$e=je.batchSize,Ge=je.inSize,Ke=je.numSegments,qe=Ke*Math.ceil(Ge/v);this.outputShape=[$e,qe];var Ye=4*Math.floor(v/4),Je=v%4,Qe=`
        sumValue += dot(values, segFilter);
    `,st="";Ge%v>0&&(st=`
        if (inIdx < 0 || inIdx >= `+Ge+`) {
          return initializationValue;
        }
      `);var Mt="";Ge%v>0&&(Mt=`
        if (inIdx < 0 || inIdx >= `+Ge+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+st+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+Mt+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+Ke+")) * float("+v+`));
        int currentSeg = int(mod(float(outIdx), float(`+Ke+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+Ye+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+Qe+`
        }

        int inIdx = inOffset + `+Ye+`;
        if (`+(Je===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+Qe+`
        } else if (`+(Je===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+Qe+`
        } else if (`+(Je===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+Qe+`
        }
        setOutput(sumValue);
      }
    `},cs=function(je,y,v){var $e,Ge;if(this.variableNames=["c","a","b"],this.outputShape=y,v>4)throw Error("Where for rank "+v+" is not yet supported");if(v===1)Ge="resRC",$e="resRC";else{for(var Ke=["resRC.x","resRC.y","resRC.z","resRC.w"],qe=[],Ye=[],Je=0;Je<y.length;Je++)Ye.push(""+Ke[Je]),Je<je&&qe.push(""+Ke[Je]);$e=qe.join(),Ge=Ye.join()}var Qe=wa(v);this.userCode=`
      void main() {
        `+Qe+` resRC = getOutputCoords();
        float cVal = getC(`+$e+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+Ge+`));
        } else {
          setOutput(getB(`+Ge+`));
        }
      }
    `},ls=function(){function je(y){this.variableNames=["source"],this.outputShape=y,this.rank=y.length;var v,$e=wa(this.rank),Ge="uniform int start["+this.rank+"];",Ke=function(qe){if(qe===1)return"sourceLoc";if(qe<=6)return hs.slice(0,qe).map(function(Ye){return"sourceLoc."+Ye}).join(",");throw Error("Slicing for rank "+qe+" is not yet supported")}(this.rank);v=`
        `+$e+` sourceLoc;
        `+$e+` coords = getOutputCoords();
        `+y.map(function(qe,Ye){return"sourceLoc."+hs[Ye]+" = start["+Ye+"] + coords."+hs[Ye]+";"}).join(`
`)+`
      `,this.userCode=`
      `+Ge+`
      void main() {
        `+v+`
        setOutput(getSource(`+Ke+`));
      }
    `}return je.prototype.getCustomSetupFunc=function(y){var v=this;if(y.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+y.length+")");return function($e,Ge){v.startLoc==null&&(v.startLoc=$e.getUniformLocationNoThrow(Ge,"start"),v.startLoc==null)||$e.gl.uniform1iv(v.startLoc,y)}},je}(),hs=["x","y","z","w","u","v"],fs=function(){function je(y){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=y,this.rank=y.length;var v=wa(this.rank),$e=sa("coords",this.rank),Ge=sa("sourceLoc",this.rank),Ke=this.rank===1?"sourceLoc":"vec2("+Ge.slice(-2).join()+")",qe="getChannel(getSource("+Ge.join()+"), "+Ke+")",Ye=`
      result.x = `+qe+`;
      if (++`+$e[this.rank-1]+" < "+y[this.rank-1]+`) {
        ++`+Ge[this.rank-1]+`;
        result.y = `+qe+`;
        --`+Ge[this.rank-1]+`;
      }
    `,Je=this.rank===1?"":`
      --`+$e[this.rank-1]+`;
      if (++`+$e[this.rank-2]+" < "+y[this.rank-2]+`) {
        ++`+Ge[this.rank-2]+`;
        result.z = `+qe+`;
        if (++`+$e[this.rank-1]+" < "+y[this.rank-1]+`) {
          ++`+Ge[this.rank-1]+`;
          result.w = `+qe+`;
        }
      }
    `,Qe=this.rank<=4?`sourceLoc = coords +
            `+v+"("+y.map(function(st,Mt){return"start["+Mt+"]"}).join()+");":y.map(function(st,Mt){return Ge[Mt]+" = "+$e[Mt]+" + start["+Mt+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+v+` coords = getOutputCoords();
        `+v+` sourceLoc;
        `+Qe+`
        vec4 result = vec4(0.);
        `+Ye+`
        `+Je+`
        setOutput(result);
      }
    `}return je.prototype.getCustomSetupFunc=function(y){var v=this;if(y.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+y.length+")");return function($e,Ge){v.startLoc==null&&(v.startLoc=$e.getUniformLocationNoThrow(Ge,"start"),v.startLoc==null)||$e.gl.uniform1iv(v.startLoc,y)}},je}(),ds=function(je,y,v){this.variableNames=["x"],this.outputShape=v;var $e=v.length,Ge=wa(v.length),Ke=wa(v.length),qe="";if($e===1)qe="coords * strides + begin";else{var Ye=0;qe=v.map(function(Je,Qe){return Ye++,v.length===1?"coords * strides["+Qe+"] + begin["+Qe+"]":"coords["+(Ye-1)+"] * strides["+Qe+"] + begin["+Qe+"]"}).join(",")}this.userCode=`
      `+Ge+" begin = "+Ge+"("+je+`);
      `+Ge+" strides = "+Ge+"("+y+`);

      void main() {
        `+Ke+` coords = getOutputCoords();
        setOutput(getX(`+qe+`));
      }
    `},ps=function(){function je(y){this.gpgpu=y,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return je.prototype.acquireTexture=function(y,v,$e){var Ge,Ke=vs(v,$e),qe=ms(y,Ke,$e);if(qe in this.freeTextures||(this.freeTextures[qe]=[]),qe in this.usedTextures||(this.usedTextures[qe]=[]),this.freeTextures[qe].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var Ye=this.freeTextures[qe].shift();return this.usedTextures[qe].push(Ye),Ye}return this.numUsedTextures++,this.log(),Ke===Gt.PACKED_2X2_FLOAT32?Ge=this.gpgpu.createPackedMatrixTexture(y[0],y[1]):Ke===Gt.PACKED_2X2_FLOAT16?Ge=this.gpgpu.createFloat16PackedMatrixTexture(y[0],y[1]):Ke===Gt.UNPACKED_FLOAT32?Ge=this.gpgpu.createFloat32MatrixTexture(y[0],y[1]):Ke===Gt.UNPACKED_FLOAT16?Ge=this.gpgpu.createFloat16MatrixTexture(y[0],y[1]):Ke===Gt.PACKED_4X1_UNSIGNED_BYTE&&(Ge=this.gpgpu.createUnsignedBytesMatrixTexture(y[0],y[1])),this.usedTextures[qe].push(Ge),Ge},je.prototype.releaseTexture=function(y,v,$e,Ge){if(this.freeTextures!=null){var Ke=ms(v,vs($e,Ge),Ge);Ke in this.freeTextures||(this.freeTextures[Ke]=[]),this.freeTextures[Ke].push(y),this.numFreeTextures++,this.numUsedTextures--;var qe=this.usedTextures[Ke],Ye=qe.indexOf(y);if(Ye<0)throw new Error("Cannot release a texture that was never provided by this texture manager");qe.splice(Ye,1),this.log()}},je.prototype.log=function(){if(this.logEnabled){var y=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+y+")")}},je.prototype.getNumUsedTextures=function(){return this.numUsedTextures},je.prototype.getNumFreeTextures=function(){return this.numFreeTextures},je.prototype.dispose=function(){var y=this;if(this.freeTextures!=null){for(var v in this.freeTextures)this.freeTextures[v].forEach(function($e){y.gpgpu.deleteMatrixTexture($e)});for(var v in this.usedTextures)this.usedTextures[v].forEach(function(Ge){y.gpgpu.deleteMatrixTexture(Ge)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},je}();function vs(je,y){if(je===zt.UPLOAD)return Gt.PACKED_2X2_FLOAT32;if(je===zt.RENDER||je==null)return function(v){return i().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?v?Gt.PACKED_2X2_FLOAT32:Gt.UNPACKED_FLOAT32:v?Gt.PACKED_2X2_FLOAT16:Gt.UNPACKED_FLOAT16}(y);if(je===zt.DOWNLOAD||je===zt.PIXELS)return Gt.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+je)}function ms(je,y,v){return je[0]+"_"+je[1]+"_"+y+"_"+v}var gs=function(je,y){this.variableNames=["A"];for(var v=new Array(je.length),$e=0;$e<v.length;$e++)v[$e]=je[$e]*y[$e];this.outputShape=v,this.rank=v.length;var Ge=wa(this.rank),Ke=function(qe){var Ye=qe.length;if(Ye>5)throw Error("Tile for rank "+Ye+" is not yet supported");if(Ye===1)return"imod(resRC, "+qe[0]+")";for(var Je=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],Qe=[],st=0;st<qe.length;st++)Qe.push("imod("+Je[st]+", "+qe[st]+")");return Qe.join()}(je);this.userCode=`
      void main() {
        `+Ge+` resRC = getOutputCoords();
        setOutput(getA(`+Ke+`));
      }
    `},ys=function(je,y){this.variableNames=["A"];for(var v=new Array(je.length),$e=0;$e<v.length;$e++)v[$e]=je[y[$e]];this.outputShape=v,this.rank=v.length;var Ge=wa(this.rank),Ke=function(qe){var Ye=qe.length;if(Ye>6)throw Error("Transpose for rank "+Ye+" is not yet supported");for(var Je=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],Qe=new Array(Ye),st=0;st<qe.length;st++)Qe[qe[st]]=Je[st];return Qe.join()}(y);this.userCode=`
    void main() {
      `+Ge+` resRC = getOutputCoords();
      setOutput(getA(`+Ke+`));
    }
    `},xs=function(je,y){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var v=new Array(je.length),$e=0;$e<v.length;$e++)v[$e]=je[y[$e]];if(this.outputShape=v,this.rank=v.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var Ge=wa(this.rank),Ke=ia("rc",this.rank),qe=new Array(this.rank);for($e=0;$e<y.length;$e++)qe[y[$e]]=Ke[$e];var Ye="vec2("+qe.slice(-2).join()+")",Je="++"+Ke[this.rank-1]+" < "+v[this.rank-1],Qe="getChannel(getA("+qe.join()+"), "+Ye+")";this.userCode=`
    void main() {
      `+Ge+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+Qe+`;
      if(`+Je+`) {
        result[1] = `+Qe+`;
      }
      --`+Ke[this.rank-1]+`;
      if(++`+Ke[this.rank-2]+" < "+v[this.rank-2]+`) {
        result[2] = `+Qe+`;
        if(`+Je+`) {
          result[3] = `+Qe+`;
        }
      }
      setOutput(result);
    }
    `},bs=1.7580993408473768,ws=1.0507009873554805,Cs=function(je,y){this.variableNames=["A"],this.outputShape=je,this.userCode=`
      float unaryOperation(float x) {
        `+y+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Es="if (isnan(x)) return x;",Rs="return x;",Is="return abs(x);",ks=Es+`
  return (x < 0.0) ? 0.0 : x;
`,Ss=Es+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,As="return (x >= 0.0) ? x : (exp(x) - 1.0);",Ds=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+bs+`;
  float scale = `+ws+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Ts="return -x;",Ns="return ceil(x);",Fs="return floor(x);",_s="return exp(x);",Os="return exp(x) - 1.0;",Ms=Es+`
  return sin(x);
`,Bs=Es+`
  return cos(x);
`,Ps=Es+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,Ls=Es+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,Ws=Es+`
  return atan(x);
`,Us=Es+"return log(x + sqrt(x * x + 1.0));",Vs=Es+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,zs=Es+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Gs="return x;",Hs="return x;",qs=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,Ks=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,js=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Xs=function(je,y){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=je,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+y+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},Ys=function(je){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=je;var y=je.length,v=sa("rc",y),$e=wa(y),Ge=function(Ye,Je){if(Ye===1)return"rc";for(var Qe="",st=0;st<Ye;st++)Qe+=Je[st],st<Ye-1&&(Qe+=",");return Qe}(y,v),Ke=v.slice(-2),qe=y<=1?"rc":"vec2("+Ke.join(",")+")";this.userCode=`
      void main() {
        `+$e+` rc = getOutputCoords();
        vec4 packedInput = getA(`+Ge+`);

        setOutput(getChannel(packedInput, `+qe+`));
      }
    `},$s={};function Qs(je,y){if(y===void 0&&(y=!1),je==="linear")return y?Hs:Rs;if(je==="relu")return y?qs:ks;if(je==="elu")return y?js:As;if(je==="relu6")return y?Ks:Ss;if(je==="prelu")return y?Pa:Ma;throw new Error("Activation "+je+" has not been implemented for the WebGL backend.")}var Js=600,Zs=function(je){function y(v){var $e,Ge=je.call(this)||this;if(Ge.pendingRead=new WeakMap,Ge.pendingDisposal=new WeakSet,Ge.dataRefCount=new WeakMap,Ge.numBytesInGPU=0,Ge.uploadWaitMs=0,Ge.downloadWaitMs=0,Ge.warnedAboutMemory=!1,Ge.pendingDeletes=0,Ge.disposed=!1,!i().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(v==null){var Ke=jt(i().getNumber("WEBGL_VERSION"));Ge.binaryCache=(($e=i().getNumber("WEBGL_VERSION"))in $s||($s[$e]={}),$s[$e]),Ge.gpgpu=new Bi(Ke),Ge.canvas=Ke.canvas,Ge.gpgpuCreatedLocally=!0}else Ge.gpgpu=v,Ge.binaryCache={},Ge.gpgpuCreatedLocally=!1,Ge.canvas=v.gl.canvas;return Ge.textureManager=new ps(Ge.gpgpu),Ge.numMBBeforeWarning=i().global.screen==null?1024:i().global.screen.height*i().global.screen.width*window.devicePixelRatio*Js/1024/1024,Ge.texData=new xo(Ge,Lt),Ge}return e(y,je),y.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},y.prototype.write=function(v,$e,Ge){if(i().getBool("DEBUG")&&this.checkNumericalProblems(v),Ge==="complex64"&&v!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var Ke={};return this.texData.set(Ke,{shape:$e,dtype:Ge,values:v,usage:zt.UPLOAD}),Ke},y.prototype.move=function(v,$e,Ge,Ke){if(i().getBool("DEBUG")&&this.checkNumericalProblems($e),Ke==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(v,{shape:Ge,dtype:Ke,values:$e,usage:zt.UPLOAD})},y.prototype.readSync=function(v){var $e=this.texData.get(v),Ge=$e.values,Ke=$e.dtype,qe=$e.complexTensors,Ye=$e.slice,Je=$e.shape,Qe=$e.isPacked;if(Ye!=null){var st=void 0;st=Qe?new Xs(Je,Gs):new Cs(Je,Gs);var Mt=this.runWebGLProgram(st,[{dataId:v,shape:Je,dtype:Ke}],Ke),on=this.readSync(Mt.dataId);return this.disposeData(Mt.dataId),on}if(Ge!=null)return this.convertAndCacheOnCPU(v);if(Ke==="string")return Ge;var sn,fn,hn=this.activeTimers!=null;return hn&&(sn=et()),Ke==="complex64"?fn=Vo(qe.real.dataSync(),qe.imag.dataSync()):fn=this.getValuesFromTexture(v),hn&&(this.downloadWaitMs+=et()-sn),this.convertAndCacheOnCPU(v,fn)},y.prototype.read=function(v){return n(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo,fo,Uo,mo,rd,od;return r(this,function(fd){switch(fd.label){case 0:if(this.pendingRead.has(v))return $e=this.pendingRead.get(v),[2,new Promise(function(hd){return $e.push(hd)})];if(Ge=this.texData.get(v),Ke=Ge.values,qe=Ge.shape,Ye=Ge.slice,Je=Ge.dtype,Qe=Ge.complexTensors,st=Ge.isPacked,Ye!=null)return Mt=void 0,Mt=st?new Xs(qe,Gs):new Cs(qe,Gs),on=this.runWebGLProgram(Mt,[{dataId:v,shape:qe,dtype:Je}],Je),sn=this.read(on.dataId),this.disposeData(on.dataId),[2,sn];if(Ke!=null)return[2,this.convertAndCacheOnCPU(v)];if(!i().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&i().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return fn=null,Je!=="complex64"&&i().get("WEBGL_BUFFER_SUPPORTED")&&(hn=this.decode(v),to=this.texData.get(hn.dataId),fn=(od=this.gpgpu).createBufferFromTexture.apply(od,[to.texture].concat(Yt(qe)))),this.pendingRead.set(v,[]),Je==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:fd.sent(),fd.label=2;case 2:return Je!=="complex64"?[3,4]:[4,Promise.all([Qe.real.data(),Qe.imag.data()])];case 3:return co=fd.sent(),lo=co[0],fo=co[1],Xr=Vo(lo,fo),[3,5];case 4:fn==null?Xr=this.getValuesFromTexture(v):(Uo=k(qe),Xr=this.gpgpu.downloadFloat32MatrixFromBuffer(fn,Uo)),fd.label=5;case 5:return hn!=null&&this.disposeData(hn.dataId),mo=this.convertAndCacheOnCPU(v,Xr),rd=this.pendingRead.get(v),this.pendingRead.delete(v),rd.forEach(function(hd){return hd(mo)}),this.pendingDisposal.has(v)&&(this.pendingDisposal.delete(v),this.disposeData(v),this.pendingDeletes--),[2,mo]}})})},y.prototype.checkNumericalProblems=function(v){if(v!=null)for(var $e=0;$e<v.length;$e++){var Ge=v[$e];if(!ee(Ge))throw i().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+Ge+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+Ge+" cannot be represented on this device.")}},y.prototype.getValuesFromTexture=function(v){var $e,Ge=this.texData.get(v),Ke=Ge.shape,qe=Ge.dtype,Ye=Ge.isPacked,Je=k(Ke);if(i().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var Qe=this.decode(v),st=this.texData.get(Qe.dataId),Mt=($e=this.gpgpu).downloadMatrixFromPackedTexture.apply($e,[st.texture].concat(Yt(Ke))).subarray(0,Je);return this.disposeData(Qe.dataId),Mt}var on=i().getBool("WEBGL_PACK")&&Ye===!0,sn=on?Te(Ke):Ke,fn=on?new ci(sn):new ui(sn),hn=this.runWebGLProgram(fn,[{shape:sn,dtype:qe,dataId:v}],"float32"),to=this.texData.get(hn.dataId),Xr=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(to.texture,to.texShape[0],to.texShape[1]).subarray(0,Je);return this.disposeData(hn.dataId),Xr},y.prototype.time=function(v){return n(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye,Je,Qe;return r(this,function(st){switch(st.label){case 0:return $e=this.activeTimers,Ge=[],Ke=!1,this.programTimersStack==null?(this.programTimersStack=Ge,Ke=!0):this.activeTimers.push(Ge),this.activeTimers=Ge,v(),qe=I(this.activeTimers.map(function(Mt){return Mt.query})).filter(function(Mt){return Mt!=null}),Ye=I(this.activeTimers.map(function(Mt){return Mt.name})).filter(function(Mt){return Mt!=null}),this.activeTimers=$e,Ke&&(this.programTimersStack=null),Je={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(qe)]:[3,2];case 1:return Qe=st.sent(),Je.kernelMs=w(Qe),Je.getExtraProfileInfo=function(){return Qe.map(function(Mt,on){return{name:Ye[on],ms:Mt}}).map(function(Mt){return Mt.name+": "+Mt.ms}).join(", ")},[3,3];case 2:Je.kernelMs={error:"WebGL query timers are not supported in this environment."},st.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,Je]}})})},y.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},y.prototype.startTimer=function(){return i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:et(),endMs:null}},y.prototype.endTimer=function(v){return i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),v):(v.endMs=et(),v)},y.prototype.getQueryTime=function(v){return n(this,void 0,void 0,function(){var $e;return r(this,function(Ge){return i().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(v)]:[2,($e=v).endMs-$e.startMs]})})},y.prototype.disposeData=function(v){if(!this.pendingDisposal.has(v)){if(this.pendingRead.has(v))return this.pendingDisposal.add(v),void this.pendingDeletes++;if(this.texData.has(v)){this.releaseGPUData(v);var $e=this.texData.get(v).complexTensors;$e!=null&&($e.real.dispose(),$e.imag.dispose()),this.texData.delete(v)}}},y.prototype.releaseGPUData=function(v){var $e=this.texData.get(v),Ge=$e.texture,Ke=$e.dtype,qe=$e.texShape,Ye=$e.usage,Je=$e.isPacked,Qe=$e.slice,st=Qe&&Qe.origDataId||v,Mt=this.dataRefCount.get(st);Mt>1?this.dataRefCount.set(st,Mt-1):(this.dataRefCount.delete(st),Ge!=null&&(this.numBytesInGPU-=this.computeBytes(qe,Ke),this.textureManager.releaseTexture(Ge,qe,Ye,Je)));var on=this.texData.get(v);on.texture=null,on.texShape=null,on.isPacked=!1,on.slice=null},y.prototype.getTexture=function(v){return this.uploadToGPU(v),this.texData.get(v).texture},y.prototype.getDataInfo=function(v){return this.texData.get(v)},y.prototype.getCPUBackend=function(){return i().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=Lt.findBackend("cpu")),this.cpuBackend):null},y.prototype.shouldExecuteOnCPU=function(v,$e){var Ge=this;return $e===void 0&&($e=128),this.getCPUBackend()!=null&&v.every(function(Ke){return Ge.texData.get(Ke.dataId).texture==null&&Ke.size<$e})},y.prototype.getGPGPUContext=function(){return this.gpgpu},y.prototype.complex=function(v,$e){var Ge=this.makeOutput(v.shape,"complex64");return this.texData.get(Ge.dataId).complexTensors={real:Lt.keep(v.clone()),imag:Lt.keep($e.clone())},Ge},y.prototype.real=function(v){return this.texData.get(v.dataId).complexTensors.real.clone()},y.prototype.imag=function(v){return this.texData.get(v.dataId).complexTensors.imag.clone()},y.prototype.slice=function(v,$e,Ge){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.slice(v,$e,Ge);if(k(Ge)===0)return Fn([],Ge,v.dtype);var Ke=this.texData.get(v.dataId).isPacked,qe=io(v.shape,$e,Ge);if(Ke||!qe){var Ye=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fs(Ge):new ls(Ge),Je=Ye.getCustomSetupFunc($e);return this.compileAndRun(Ye,[v],null,Je)}return this.uploadToGPU(v.dataId),this.shallowSlice(v,$e,Ge)},y.prototype.shallowSlice=function(v,$e,Ge){var Ke=this.texData.get(v.dataId),qe=this.makeOutput(Ge,v.dtype),Ye=this.texData.get(qe.dataId);Object.assign(Ye,Ke),Ye.shape=Ge,Ye.dtype=v.dtype;var Je=so($e,v.strides);Ke.slice&&(Je+=Ke.slice.flatOffset),Ye.slice={flatOffset:Je,origDataId:Ke.slice&&Ke.slice.origDataId||v.dataId};var Qe=this.dataRefCount.get(Ye.slice.origDataId)||1;return this.dataRefCount.set(Ye.slice.origDataId,Qe+1),qe},y.prototype.stridedSlice=function(v,$e,Ge,Ke){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.stridedSlice(v,$e,Ge,Ke);var qe=ro($e,Ge,Ke);if(qe.some(function(Je){return Je===0}))return Fn([],qe);var Ye=new ds($e,Ke,qe);return this.compileAndRun(Ye,[v])},y.prototype.reverse=function(v,$e){var Ge=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new is(v.shape,$e):new as(v.shape,$e);return this.compileAndRun(Ge,[v])},y.prototype.concat=function(v,$e){if(v[0].dtype==="complex64"){var Ge=v.map(function(sn){return Tn(sn)}),Ke=v.map(function(sn){return Nn(sn)});return Dn(this.concat(Ge,$e),this.concat(Ke,$e))}if(this.shouldExecuteOnCPU(v))return this.cpuBackend.concat(v,$e);if(v.length===1)return v[0];if(v.length>i().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var qe=Math.floor(v.length/2),Ye=this.concat(v.slice(0,qe),$e),Je=this.concat(v.slice(qe),$e);return this.concat([Ye,Je],$e)}if(i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&v[0].rank>1){var Qe=new Ga(v.map(function(sn){return sn.shape}),$e);return this.compileAndRun(Qe,v)}var st=Sn(v.map(function(sn){return sn.shape}),$e),Mt=v.map(function(sn){return sn.as2D(-1,k(sn.shape.slice($e)))}),on=new za(Mt.map(function(sn){return sn.shape}));return this.compileAndRun(on,Mt).reshape(st)},y.prototype.neg=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.neg(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,Ts,v.dtype);var $e=new Cs(v.shape,Ts);return this.compileAndRun($e,[v])},y.prototype.batchMatMul=function(v,$e,Ge,Ke){var qe=Ge?v.shape[2]:v.shape[1],Ye=Ke?$e.shape[1]:$e.shape[2],Je=Ge?v.shape[1]:v.shape[2],Qe=v.shape[0];if((qe===1||Ye===1)&&Je>1e3){Ge&&(v=v.transpose([0,2,1])),Ke&&($e=$e.transpose([0,2,1]));var st=Ye===1?v:v.as3D(Qe,Je,1),Mt=Ye===1?2:1,on=Ye===1?$e.as3D(Qe,1,Je):$e;return this.multiply(st,on).sum(Mt,!0)}var sn=Dt(v.dtype,$e.dtype),fn=new Hi(v.shape,[Qe,qe,Ye],Ge,Ke);return this.compileAndRun(fn,[v,$e],sn)},y.prototype.fusedBatchMatMul=function(v){var $e=v.a,Ge=v.b,Ke=v.transposeA,qe=v.transposeB,Ye=v.bias,Je=v.activation,Qe=v.preluActivationWeights,st=Ke?$e.shape[2]:$e.shape[1],Mt=qe?Ge.shape[1]:Ge.shape[2],on=$e.shape[0],sn=Dt($e.dtype,Ge.dtype),fn=Ye!=null,hn=Qe!=null,to=Je?Qs(Je,!0):null,Xr=new Hi($e.shape,[on,st,Mt],Ke,qe,fn,to,hn),co=[$e,Ge];return Ye&&co.push(Ye),Qe&&co.push(Qe),this.compileAndRun(Xr,co,sn)},y.prototype.multiply=function(v,$e){if(v.dtype==="complex64"){var Ge=this.texData.get(v.dataId),Ke=this.texData.get($e.dataId),qe=new Na(Da,v.shape,$e.shape),Ye=new Na(Ta,v.shape,$e.shape),Je=[this.makeComplexComponentTensorInfo(v,Ge.complexTensors.real),this.makeComplexComponentTensorInfo(v,Ge.complexTensors.imag),this.makeComplexComponentTensorInfo($e,Ke.complexTensors.real),this.makeComplexComponentTensorInfo($e,Ke.complexTensors.imag)],Qe=this.compileAndRun(qe,Je),st=this.compileAndRun(Ye,Je),Mt=this.complex(Qe,st);return Qe.dispose(),st.dispose(),Mt}if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.multiply(v,$e);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,Oa,v.dtype);var on=new Ba(Oa,v.shape,$e.shape);return this.compileAndRun(on,[v,$e],v.dtype)},y.prototype.batchNormalization=function(v,$e,Ge,Ke,qe,Ye){var Je=[v,$e,Ge],Qe=null;Ye!=null&&(Qe=Ye.shape,Je.push(Ye));var st=null;if(qe!=null&&(st=qe.shape,Je.push(qe)),i().getBool("WEBGL_PACK_NORMALIZATION")){var Mt=new Aa(v.shape,$e.shape,Ge.shape,Qe,st,Ke);return this.compileAndRun(Mt,Je)}var on=new Sa(v.shape,$e.shape,Ge.shape,Qe,st,Ke);return this.compileAndRun(on,Je)},y.prototype.localResponseNormalization4D=function(v,$e,Ge,Ke,qe){var Ye=i().getBool("WEBGL_PACK_NORMALIZATION")?new Vi(v.shape,$e,Ge,Ke,qe):new Wi(v.shape,$e,Ge,Ke,qe);return this.compileAndRun(Ye,[v])},y.prototype.LRNGrad=function(v,$e,Ge,Ke,qe,Ye,Je){var Qe=new Ui($e.shape,Ke,qe,Ye,Je);return this.compileAndRun(Qe,[$e,Ge,v])},y.prototype.tile=function(v,$e){if(v.dtype==="string"){var Ge=this.readSync(v.dataId).map(function(qe){return ot(qe)});return ta(dr(v.shape,v.dtype,Ge),$e)}var Ke=new gs(v.shape,$e);return this.compileAndRun(Ke,[v])},y.prototype.pad=function(v,$e,Ge){var Ke=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Yi(v.shape,$e,Ge):new Xi(v.shape,$e,Ge);return this.compileAndRun(Ke,[v])},y.prototype.transpose=function(v,$e){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.transpose(v,$e);var Ge=i().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xs(v.shape,$e):new ys(v.shape,$e);return this.compileAndRun(Ge,[v])},y.prototype.gather=function(v,$e,Ge){if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.gather(v,$e,Ge);var Ke=new mi(v.shape,$e.size,Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.batchToSpaceND=function(v,$e,Ge){C(v.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var Ke=$e.reduce(function(Mt,on){return Mt*on}),qe=zr(v.shape,$e,Ke),Ye=Gr(qe.length,$e.length),Je=Hr(v.shape,$e,Ke),Qe=qr(Ge,$e.length),st=Kr(Je,Ge,$e.length);return v.reshape(qe).transpose(Ye).reshape(Je).slice(Qe,st)},y.prototype.spaceToBatchND=function(v,$e,Ge){C(v.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var Ke=$e.reduce(function(on,sn){return on*sn}),qe=[[0,0]];qe.push.apply(qe,Ge);for(var Ye=1+$e.length;Ye<v.shape.length;++Ye)qe.push([0,0]);var Je=v.pad(qe),Qe=zr(Je.shape,$e,Ke,!1),st=Gr(Qe.length,$e.length,!1),Mt=Hr(Je.shape,$e,Ke,!1);return Je.reshape(Qe).transpose(st).reshape(Mt)},y.prototype.reduce=function(v,$e,Ge){var Ke=v.shape[0],qe=v.shape[1],Ye=$r(qe),Je=new Ji({windowSize:Ye,inSize:qe,batchSize:Ke},$e),Qe=this.compileAndRun(Je,[v],Ge);return Qe.shape[1]===1?Qe:this.reduce(Qe,$e,Ge)},y.prototype.argReduce=function(v,$e,Ge){Ge===void 0&&(Ge=null);var Ke=v.shape[0],qe=v.shape[1];Ge!=null&&(Ke=Ge.shape[0],qe=Ge.shape[1]);var Ye=$r(qe),Je=new aa({windowSize:Ye,inSize:qe,batchSize:Ke},$e,Ge==null),Qe=[v];Ge!=null&&Qe.push(Ge);var st=this.compileAndRun(Je,Qe,"int32");return st.shape[1]===1?st:this.argReduce(v,$e,st)},y.prototype.argReducePacked=function(v,$e,Ge){Ge===void 0&&(Ge=null);var Ke=Ge!=null?Ge.shape:v.shape,qe=$r(Ke[Ke.length-1]),Ye=new Ra(Ke,qe,$e,Ge==null),Je=Ge==null?[v]:[v,Ge],Qe=this.compileAndRun(Ye,Je,"int32");return Qe.rank===v.rank?this.argReducePacked(v,$e,Qe):Qe},y.prototype.sum=function(v,$e){Cn("sum",$e,v.rank);var Ge=bn(v.shape,$e),Ke=Ge[0],qe=k(Ge[1]),Ye=v.as2D(-1,qe),Je=Tt(v.dtype);return this.reduce(Ye,"sum",Je).reshape(Ke)},y.prototype.prod=function(v,$e){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.prod(v,$e);var Ge=bn(v.shape,$e),Ke=Ge[0],qe=k(Ge[1]),Ye=v.as2D(-1,qe),Je=Tt(v.dtype);return this.reduce(Ye,"prod",Je).reshape(Ke)},y.prototype.unsortedSegmentSum=function(v,$e,Ge){var Ke=0,qe=En([Ke],v.rank),Ye=v;qe!=null&&(Ye=v.transpose(qe),Ke=In(1,v.rank)[0]);var Je=function(sn,fn,hn){for(var to=[],Xr=sn.length,co=0;co<Xr;co++)co!==fn?to.push(sn[co]):to.push(hn);return to}(Ye.shape,Ke,Ge),Qe=k([Ye.shape[Ke]]),st=Ye.as2D(-1,Qe),Mt=Tt(v.dtype),on=this.segOpCompute(st,"unsortedSegmentSum",$e,Mt,Ge).reshape(Je);return qe!=null&&(on=on.transpose(Rn(qe))),on},y.prototype.segOpCompute=function(v,$e,Ge,Ke,qe){var Ye=v.shape[0],Je=v.shape[1],Qe=function(on,sn){var fn,hn=!1;for(on<=Yr?(fn=on,hn=!0):fn=Y(on,Math.floor(Math.sqrt(on)));!hn;)fn>sn||fn===on?hn=!0:fn=Y(on,fn+1);return fn}(Je,qe),st=new us({windowSize:Qe,inSize:Je,batchSize:Ye,numSegments:qe}),Mt=this.compileAndRun(st,[v,Ge],Ke);return Mt.shape[1]===qe?Mt:(Ge=Kn(0,qe).tile([Je/Qe]),this.segOpCompute(Mt,$e,Ge,Ke,qe))},y.prototype.argMinMaxReduce=function(v,$e,Ge){var Ke=[$e];if(Cn("arg"+Ge.charAt(0).toUpperCase()+Ge.slice(1),Ke,v.rank),!i().getBool("WEBGL_PACK_REDUCE")||v.rank<=2){var qe=bn(v.shape,Ke),Ye=qe[0],Je=k(qe[1]),Qe=v.as2D(-1,Je);return this.argReduce(Qe,Ge).reshape(Ye)}return this.argReducePacked(v,Ge)},y.prototype.argMin=function(v,$e){return this.argMinMaxReduce(v,$e,"min")},y.prototype.argMax=function(v,$e){return this.argMinMaxReduce(v,$e,"max")},y.prototype.cumsum=function(v,$e,Ge,Ke){if($e!==v.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(v.rank-1)+" but got axis="+$e);var qe=new ni(v.shape,Ge,Ke);return this.compileAndRun(qe,[v])},y.prototype.equal=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(equal(a, b));
`,"bool");var Ge=new Ba("return float(a == b);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.notEqual=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(notEqual(a, b));
`,"bool");var Ge=new Ba("return float(a != b);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.less=function(v,$e){if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.less(v,$e);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(lessThan(a, b));
`,"bool");var Ge=new Ba("return float(a < b);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.lessEqual=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(lessThanEqual(a, b));
`,"bool");var Ge=new Ba("return float(a <= b);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.greater=function(v,$e){if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.greater(v,$e);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(greaterThan(a, b));
`,"bool");var Ge=new Ba("return float(a > b);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.greaterEqual=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var Ge=new Ba("return float(a >= b);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.logicalNot=function(v){var $e=new Cs(v.shape,"return float(!(x >= 1.0));");return this.compileAndRun($e,[v])},y.prototype.logicalAnd=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var Ge=new Ba("return float(a >= 1.0 && b >= 1.0);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.logicalOr=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var Ge=new Ba("return float(a >= 1.0 || b >= 1.0);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"bool")},y.prototype.select=function(v,$e,Ge){var Ke=new cs(v.rank,$e.shape,$e.rank);return this.compileAndRun(Ke,[v,$e,Ge],Dt($e.dtype,Ge.dtype))},y.prototype.where=function(v){dn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var $e=v.dataSync();return na(v.shape,$e)},y.prototype.topk=function(v,$e,Ge){return ea(v.dataSync(),v.shape,v.dtype,$e)},y.prototype.min=function(v,$e){Cn("min",$e,v.rank);var Ge=bn(v.shape,$e),Ke=Ge[0],qe=k(Ge[1]),Ye=v.as2D(-1,qe);return this.reduce(Ye,"min",Ye.dtype).reshape(Ke)},y.prototype.minimum=function(v,$e){if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.minimum(v,$e);var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,v.shape,$e.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e])},y.prototype.mod=function(v,$e){var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,v.shape,$e.shape):new Ba(`if (b == 0.0) return NAN;
  return mod(a, b);`,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e])},y.prototype.max=function(v,$e){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.max(v,$e);Cn("max",$e,v.rank);var Ge=bn(v.shape,$e),Ke=Ge[0],qe=k(Ge[1]),Ye=v.as2D(-1,qe);return this.reduce(Ye,"max",Ye.dtype).reshape(Ke)},y.prototype.maximum=function(v,$e){if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.maximum(v,$e);var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,v.shape,$e.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e])},y.prototype.all=function(v,$e){Cn("all",$e,v.rank);var Ge=bn(v.shape,$e),Ke=Ge[0],qe=k(Ge[1]),Ye=v.as2D(-1,qe);return this.reduce(Ye,"all",Ye.dtype).reshape(Ke)},y.prototype.any=function(v,$e){Cn("any",$e,v.rank);var Ge=bn(v.shape,$e),Ke=Ge[0],qe=k(Ge[1]),Ye=v.as2D(-1,qe);return this.reduce(Ye,"any",Ye.dtype).reshape(Ke)},y.prototype.realDivide=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var Ge=new Ba(`
if (a == b) {
  return 1.0;
};
return a / b;`,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"float32")},y.prototype.floorDiv=function(v,$e){if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var Ge=new Ba(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e],"int32")},y.prototype.add=function(v,$e){if(v.dtype==="complex64"&&$e.dtype==="complex64")return this.complexSeparableBinaryOp(v,$e,Fa);if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.add(v,$e);var Ge=Dt(v.dtype,$e.dtype);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,Fa,Ge);var Ke=new Ba(Fa,v.shape,$e.shape);return this.compileAndRun(Ke,[v,$e],Ge)},y.prototype.packedUnaryOp=function(v,$e,Ge){var Ke=new Xs(v.shape,$e);return this.compileAndRun(Ke,[v],Ge)},y.prototype.packedBinaryOp=function(v,$e,Ge,Ke,qe){qe===void 0&&(qe=!1);var Ye=new La(Ge,v.shape,$e.shape,qe);return this.compileAndRun(Ye,[v,$e],Ke)},y.prototype.complexSeparableBinaryOp=function(v,$e,Ge){var Ke=this,qe=this.texData.get(v.dataId),Ye=this.texData.get($e.dataId),Je=[[qe.complexTensors.real,Ye.complexTensors.real],[qe.complexTensors.imag,Ye.complexTensors.imag]].map(function(on){var sn=on[0],fn=on[1],hn=Ke.makeComplexComponentTensorInfo(v,sn),to=Ke.makeComplexComponentTensorInfo($e,fn),Xr=new Ba(Ge,v.shape,$e.shape);return Ke.compileAndRun(Xr,[hn,to],Dt(sn.dtype,fn.dtype))}),Qe=Je[0],st=Je[1],Mt=this.complex(Qe,st);return Qe.dispose(),st.dispose(),Mt},y.prototype.makeComplexComponentTensorInfo=function(v,$e){return{dataId:$e.dataId,dtype:$e.dtype,shape:v.shape}},y.prototype.addN=function(v){if(v.length===1)return v[0];if(v.length>i().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var $e=Math.floor(v.length/2),Ge=this.addN(v.slice(0,$e)),Ke=this.addN(v.slice($e));return this.addN([Ge,Ke])}var qe=v.map(function(Qe){return Qe.dtype}).reduce(function(Qe,st){return Dt(Qe,st)}),Ye=v.map(function(Qe){return Qe.shape}),Je=i().getBool("WEBGL_PACK")?new oa(v[0].shape,Ye):new ra(v[0].shape,Ye);return this.compileAndRun(Je,v,qe)},y.prototype.subtract=function(v,$e){if(v.dtype==="complex64"&&$e.dtype==="complex64")return this.complexSeparableBinaryOp(v,$e,_a);if(this.shouldExecuteOnCPU([v,$e]))return this.cpuBackend.subtract(v,$e);var Ge=Dt(v.dtype,$e.dtype);if(i().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(v,$e,_a,v.dtype);var Ke=new Ba(_a,v.shape,$e.shape);return this.compileAndRun(Ke,[v,$e],Ge)},y.prototype.pow=function(v,$e){var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,v.shape,$e.shape):new Ba(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,v.shape,$e.shape),Ke=Dt(v.dtype,$e.dtype);return this.compileAndRun(Ge,[v,$e],Ke)},y.prototype.ceil=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.ceil(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,Ns,v.dtype);var $e=new Cs(v.shape,Ns);return this.compileAndRun($e,[v])},y.prototype.floor=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.floor(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,Fs,v.dtype);var $e=new Cs(v.shape,Fs);return this.compileAndRun($e,[v])},y.prototype.sign=function(v){var $e=new Cs(v.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun($e,[v])},y.prototype.isNaN=function(v){var $e=new Cs(v.shape,"return float(isnan(x));");return this.compileAndRun($e,[v],"bool")},y.prototype.isInf=function(v){var $e=new Cs(v.shape,"return float(isinf(x));");return this.compileAndRun($e,[v],"bool")},y.prototype.isFinite=function(v){var $e=new Cs(v.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun($e,[v],"bool")},y.prototype.round=function(v){var $e=new Cs(v.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun($e,[v])},y.prototype.exp=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.exp(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,_s,v.dtype);var $e=new Cs(v.shape,_s);return this.compileAndRun($e,[v])},y.prototype.expm1=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.expm1(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,Os,v.dtype);var $e=new Cs(v.shape,Os);return this.compileAndRun($e,[v])},y.prototype.softmax=function(v,$e){var Ge=O([$e],v.shape),Ke=this.max(v,Ge),qe=wn(Ke.shape,Ge),Ye=this.subtract(v,Ke.reshape(qe)),Je=this.exp(Ye),Qe=this.sum(Je,Ge).reshape(qe);return this.realDivide(Je,Qe)},y.prototype.log=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.log(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,v.dtype);var $e=new Cs(v.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun($e,[v])},y.prototype.log1p=function(v){var $e=new Cs(v.shape,"return log(1.0 + x);");return this.compileAndRun($e,[v])},y.prototype.sqrt=function(v){var $e=new Cs(v.shape,"return sqrt(x);");return this.compileAndRun($e,[v])},y.prototype.rsqrt=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.rsqrt(v);var $e=new Cs(v.shape,"return inversesqrt(x);");return this.compileAndRun($e,[v])},y.prototype.reciprocal=function(v){var $e=new Cs(v.shape,"return 1.0 / x;");return this.compileAndRun($e,[v])},y.prototype.relu=function(v){var $e;return $e=i().getBool("WEBGL_PACK")?new Xs(v.shape,qs):new Cs(v.shape,ks),this.compileAndRun($e,[v])},y.prototype.relu6=function(v){var $e;return $e=i().getBool("WEBGL_PACK")?new Xs(v.shape,Ks):new Cs(v.shape,Ss),this.compileAndRun($e,[v])},y.prototype.prelu=function(v,$e){var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(Pa,v.shape,$e.shape):new Ba(Ma,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e])},y.prototype.elu=function(v){if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,js,v.dtype);var $e=new Cs(v.shape,As);return this.compileAndRun($e,[v])},y.prototype.eluDer=function(v,$e){var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,v.shape,$e.shape):new Ba("return (b >= 1.0) ? a : a * (b + 1.0);",v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e])},y.prototype.selu=function(v){var $e=new Cs(v.shape,Ds);return this.compileAndRun($e,[v])},y.prototype.int=function(v){var $e=new Cs(v.shape,"return float(int(x));");return this.compileAndRun($e,[v],"int32")},y.prototype.clip=function(v,$e,Ge){var Ke,qe=(Ke=i().getBool("WEBGL_PACK_CLIP")?new Ua(v.shape):new Wa(v.shape)).getCustomSetupFunc($e,Ge);return this.compileAndRun(Ke,[v],null,qe)},y.prototype.abs=function(v){if(this.shouldExecuteOnCPU([v]))return this.cpuBackend.abs(v);if(i().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(v,Is,v.dtype);var $e=new Cs(v.shape,Is);return this.compileAndRun($e,[v])},y.prototype.complexAbs=function(v){var $e=this.texData.get(v.dataId),Ge=new Va(v.shape),Ke=[this.makeComplexComponentTensorInfo(v,$e.complexTensors.real),this.makeComplexComponentTensorInfo(v,$e.complexTensors.imag)];return this.compileAndRun(Ge,Ke)},y.prototype.sigmoid=function(v){var $e=new Cs(v.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun($e,[v])},y.prototype.softplus=function(v){var $e=new Cs(v.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun($e,[v])},y.prototype.sin=function(v){var $e=new Cs(v.shape,Ms);return this.compileAndRun($e,[v])},y.prototype.cos=function(v){var $e=new Cs(v.shape,Bs);return this.compileAndRun($e,[v])},y.prototype.tan=function(v){var $e=new Cs(v.shape,"return tan(x);");return this.compileAndRun($e,[v])},y.prototype.asin=function(v){var $e=new Cs(v.shape,Ps);return this.compileAndRun($e,[v])},y.prototype.acos=function(v){var $e=new Cs(v.shape,Ls);return this.compileAndRun($e,[v])},y.prototype.atan=function(v){var $e=new Cs(v.shape,Ws);return this.compileAndRun($e,[v])},y.prototype.atan2=function(v,$e){var Ge=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,v.shape,$e.shape):new Ba(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,v.shape,$e.shape);return this.compileAndRun(Ge,[v,$e])},y.prototype.sinh=function(v){var $e=new Cs(v.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun($e,[v])},y.prototype.cosh=function(v){var $e=new Cs(v.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun($e,[v])},y.prototype.tanh=function(v){var $e=new Cs(v.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun($e,[v])},y.prototype.asinh=function(v){var $e=new Cs(v.shape,Us);return this.compileAndRun($e,[v])},y.prototype.acosh=function(v){var $e=new Cs(v.shape,Vs);return this.compileAndRun($e,[v])},y.prototype.atanh=function(v){var $e=new Cs(v.shape,zs);return this.compileAndRun($e,[v])},y.prototype.erf=function(v){var $e=new Cs(v.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun($e,[v])},y.prototype.step=function(v,$e){var Ge=new Cs(v.shape,function(Ke){return Ke===void 0&&(Ke=0),Es+`
    return x > 0.0 ? 1.0 : float(`+Ke+`);
  `}($e));return this.compileAndRun(Ge,[v])},y.prototype.conv2dByMatMul=function(v,$e,Ge,Ke,qe,Ye){var Je=v.shape,Qe=this.texData.get(v.dataId),st=Ge.inChannels,Mt=Je[0]*Je[1]*Je[2],on=Ge.outChannels,sn=Ge.dataFormat==="channelsLast",fn=(Mt===1||on===1)&&st>1e3,hn=Je[2]%2!=0&&!!Qe.isPacked;if(fn||!i().getBool("WEBGL_LAZILY_UNPACK")||!i().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!hn){var to=sn?Je[0]*Je[1]*Je[2]:Je[0]*Je[2]*Je[3],Xr=this.reshape(v,[1,to,Ge.inChannels]),co=this.reshape($e,[1,Ge.inChannels,Ge.outChannels]);return this.reshape(this.fusedBatchMatMul({a:Xr,b:co,transposeA:!1,transposeB:!1,bias:Ke,activation:qe,preluActivationWeights:Ye}),Ge.outShape)}var lo=sn?Je[0]*Je[1]*(Je[2]+1):Je[0]*Je[2]*(Je[3]+1),fo={dataId:v.dataId,shape:[1,lo,Ge.inChannels],dtype:v.dtype},Uo=Qe.shape;Qe.shape=Qe.shape.slice(),Qe.shape[Qe.shape.length-2]++,C(_e(Qe.shape,fo.shape),function(){return"packed reshape "+Qe.shape+" to "+fo.shape+" isn't free"});var mo=this.reshape($e,[1,Ge.inChannels,Ge.outChannels]),rd=this.fusedBatchMatMul({a:fo,b:mo,transposeA:!1,transposeB:!1,bias:Ke,activation:qe,preluActivationWeights:Ye}),od=this.texData.get(rd.dataId);return C(od.isPacked,function(){return"batchMatMul result is expected to be packed"}),Qe.shape=Uo,od.shape=Ge.outShape,Lt.makeTensorFromDataId(rd.dataId,Ge.outShape,rd.dtype)},y.prototype.conv2dWithIm2Row=function(v,$e,Ge,Ke,qe,Ye){var Je=Ge.filterWidth,Qe=Ge.filterHeight,st=Ge.inChannels,Mt=Ge.outWidth,on=Ge.outHeight,sn=Ge.dataFormat==="channelsLast",fn=Je*Qe*st,hn=on*Mt,to=[fn,hn],Xr=v.squeeze([0]),co=$e.reshape([1,fn,-1]),lo=new Li(to,Xr.shape,Ge),fo=this.compileAndRun(lo,[Xr]).reshape([1,to[0],to[1]]),Uo=Ke!=null,mo=Ye!=null,rd=qe?Qs(qe,!0):null,od=new Hi(fo.shape,[1,hn,Ge.outChannels],!0,!1,Uo,rd,mo),fd=[fo,co];Ke&&fd.push(Ke),mo&&fd.push(Ye);var hd=this.compileAndRun(od,fd);return sn?hd.reshape([1,on,Mt,Ge.outChannels]):hd.reshape([1,Ge.outChannels,on,Mt])},y.prototype.fusedConv2d=function(v){var $e=v.input,Ge=v.filter,Ke=v.convInfo,qe=v.bias,Ye=v.activation,Je=v.preluActivationWeights;if(Ke.filterHeight===1&&Ke.filterWidth===1&&Ke.dilationHeight===1&&Ke.dilationWidth===1&&Ke.strideHeight===1&&Ke.strideWidth===1&&(Ke.padInfo.type==="SAME"||Ke.padInfo.type==="VALID"))return this.conv2dByMatMul($e,Ge,Ke,qe,Ye,Je);if(i().getBool("WEBGL_CONV_IM2COL")&&$e.shape[0]===1)return this.conv2dWithIm2Row($e,Ge,Ke,qe,Ye,Je);var Qe=qe!=null,st=Je!=null,Mt=Ye?Qs(Ye,!1):null,on=new Qa(Ke,Qe,Mt,st),sn=[$e,Ge];return qe&&sn.push(qe),Je&&sn.push(Je),this.compileAndRun(on,sn)},y.prototype.conv2d=function(v,$e,Ge){if(Ge.filterHeight===1&&Ge.filterWidth===1&&Ge.dilationHeight===1&&Ge.dilationWidth===1&&Ge.strideHeight===1&&Ge.strideWidth===1&&(Ge.padInfo.type==="SAME"||Ge.padInfo.type==="VALID"))return this.conv2dByMatMul(v,$e,Ge);if(i().getBool("WEBGL_CONV_IM2COL")&&v.shape[0]===1)return this.conv2dWithIm2Row(v,$e,Ge);var Ke=new Qa(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.conv2dDerInput=function(v,$e,Ge){var Ke=new Ka(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.conv2dDerFilter=function(v,$e,Ge){var Ke=new qa(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.fusedDepthwiseConv2D=function(v){var $e,Ge=v.input,Ke=v.filter,qe=v.convInfo,Ye=v.bias,Je=v.activation,Qe=v.preluActivationWeights,st=i().getBool("WEBGL_PACK_DEPTHWISECONV")&&qe.strideWidth<=2&&qe.outChannels/qe.inChannels==1,Mt=Je?Qs(Je,st):null,on=[Ge,Ke],sn=Ye!=null,fn=Qe!=null;return sn&&on.push(Ye),fn&&on.push(Qe),st?($e=new ti(qe,sn,Mt,fn),this.compileAndRun($e,on)):($e=new Za(qe,sn,Mt,fn),this.compileAndRun($e,on))},y.prototype.depthwiseConv2D=function(v,$e,Ge){var Ke;return i().getBool("WEBGL_PACK_DEPTHWISECONV")&&Ge.strideWidth<=2&&Ge.outChannels/Ge.inChannels==1?(Ke=new ti(Ge),this.compileAndRun(Ke,[v,$e])):(Ke=new Za(Ge),this.compileAndRun(Ke,[v,$e]))},y.prototype.depthwiseConv2DDerInput=function(v,$e,Ge){var Ke=new $a(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.depthwiseConv2DDerFilter=function(v,$e,Ge){var Ke=new Ya(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.conv3d=function(v,$e,Ge){var Ke=new Ja(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.conv3dDerInput=function(v,$e,Ge){var Ke=new Xa(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.conv3dDerFilter=function(v,$e,Ge){var Ke=new ja(Ge);return this.compileAndRun(Ke,[v,$e])},y.prototype.maxPool=function(v,$e){var Ge=new $i($e,"max",!1);return this.compileAndRun(Ge,[v])},y.prototype.avgPool=function(v,$e){var Ge=new $i($e,"avg",!1);return this.compileAndRun(Ge,[v],"float32")},y.prototype.maxPoolBackprop=function(v,$e,Ge,Ke){var qe=new $i(Ke,"max",!0),Ye=this.compileAndRun(qe,[$e]),Je=new zi(Ke),Qe=this.compileAndRun(Je,[v,Ye],$e.dtype);return Ye.dispose(),Qe},y.prototype.avgPoolBackprop=function(v,$e,Ge){var Ke=new Ia(Ge);return this.compileAndRun(Ke,[v],$e.dtype)},y.prototype.cast=function(v,$e){return Po(v,$e,this)},y.prototype.unstack=function(v,$e){for(var Ge=v.shape[$e],Ke=new Array(v.rank-1),qe=0,Ye=0;Ye<v.rank;Ye++)Ye!==$e&&(Ke[qe++]=v.shape[Ye]);var Je=new Array(v.rank).fill(0),Qe=v.shape.slice();Qe[$e]=1;var st=new Array(Ge);for(Ye=0;Ye<st.length;Ye++)Je[$e]=Ye,st[Ye]=this.slice(v,Je,Qe).reshape(Ke);return st},y.prototype.avgPool3d=function(v,$e){var Ge=new Qi($e,"avg",!1);return this.compileAndRun(Ge,[v],"float32")},y.prototype.avgPool3dBackprop=function(v,$e,Ge){var Ke=new ka(Ge);return this.compileAndRun(Ke,[v],$e.dtype)},y.prototype.maxPool3d=function(v,$e){var Ge=new Qi($e,"max",!1);return this.compileAndRun(Ge,[v],"float32")},y.prototype.maxPool3dBackprop=function(v,$e,Ge,Ke){var qe=new Qi(Ke,"max",!0),Ye=this.compileAndRun(qe,[$e]),Je=new Gi(Ke),Qe=this.compileAndRun(Je,[v,Ye],$e.dtype);return Ye.dispose(),Qe},y.prototype.reshape=function(v,$e){var Ge=this.texData.get(v.dataId);if(Ge.isPacked&&!_e(v.shape,$e)&&(Ge.texture===null||!_e(Ge.shape,$e))){var Ke=this.packedReshape(v,$e);return Lt.makeTensorFromDataId(Ke.dataId,Ke.shape,Ke.dtype)}return Lo(v,$e)},y.prototype.resizeBilinear=function(v,$e,Ge,Ke){var qe=i().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ns(v.shape,$e,Ge,Ke):new es(v.shape,$e,Ge,Ke);return this.compileAndRun(qe,[v],"float32")},y.prototype.resizeBilinearBackprop=function(v,$e,Ge){var Ke=new ts(v,$e,Ge);return this.compileAndRun(Ke,[v])},y.prototype.resizeNearestNeighbor=function(v,$e,Ge,Ke){var qe=new os(v.shape,$e,Ge,Ke);return this.compileAndRun(qe,[v])},y.prototype.resizeNearestNeighborBackprop=function(v,$e,Ge){var Ke=new rs(v,$e,Ge);return this.compileAndRun(Ke,[v])},y.prototype.multinomial=function(v,$e,Ge,Ke){var qe=$e?v:go(v),Ye=qe.shape[0],Je=qe.shape[1],Qe=new qi(Ye,Je,Ge),st=Qe.getCustomSetupFunc(Ke);return this.compileAndRun(Qe,[qe],"int32",st)},y.prototype.oneHot=function(v,$e,Ge,Ke){var qe=new Ki(v.size,$e,Ge,Ke);return this.compileAndRun(qe,[v])},y.prototype.diag=function(v){var $e=new si(v.size);return this.compileAndRun($e,[v])},y.prototype.nonMaxSuppression=function(v,$e,Ge,Ke,qe){return dn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),jo(v.dataSync(),$e.dataSync(),Ge,Ke,qe)},y.prototype.cropAndResize=function(v,$e,Ge,Ke,qe,Ye){var Je=new ei(v.shape,$e.shape,Ke,qe,Ye);return this.compileAndRun(Je,[v,$e,Ge],"float32")},y.prototype.depthToSpace=function(v,$e,Ge){C($e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+$e});var Ke=v.shape[0],qe=Ge==="NHWC"?v.shape[1]:v.shape[2],Ye=Ge==="NHWC"?v.shape[2]:v.shape[3],Je=Ge==="NHWC"?v.shape[3]:v.shape[1],Qe=qe*$e,st=Ye*$e,Mt=Je/($e*$e),on=new ii(Ge==="NHWC"?[Ke,Qe,st,Mt]:[Ke,Mt,Qe,st],$e,Ge);return this.compileAndRun(on,[v])},y.prototype.split=function(v,$e,Ge){return Zo(v,$e,Ge)},y.prototype.scatterND=function(v,$e,Ge){var Ke=Zr(0,v,Ge),qe=Ke.sliceRank,Ye=Ke.numUpdates,Je=Ke.sliceSize,Qe=Ke.strides,st=Ke.outputSize,Mt=[st/Je,Je],on=v.reshape([Ye,qe]),sn=$e.reshape([Ye,Je]);if(st===0)return Lo(Fn([]),Ge);var fn=On(0),hn=new ss(Ye,qe,on.rank,sn.rank,Qe,Mt);return this.compileAndRun(hn,[sn,on,fn]).reshape(Ge)},y.prototype.sparseToDense=function(v,$e,Ge,Ke){var qe=Zr(0,v,Ge),Ye=qe.sliceRank,Je=qe.numUpdates,Qe=qe.strides,st=qe.outputSize,Mt=new ss(Je,Ye,v.rank,$e.rank,Qe,[st,1]);return this.compileAndRun(Mt,[$e,v,Ke]).reshape(Ge)},y.prototype.fft=function(v){return this.fftImpl(v,!1)},y.prototype.ifft=function(v){return this.fftImpl(v,!0)},y.prototype.fftImpl=function(v,$e){var Ge=this.texData.get(v.dataId),Ke=new pi(fi,v.shape,$e),qe=new pi(di,v.shape,$e),Ye=[this.makeComplexComponentTensorInfo(v,Ge.complexTensors.real),this.makeComplexComponentTensorInfo(v,Ge.complexTensors.imag)],Je=this.compileAndRun(Ke,Ye),Qe=this.compileAndRun(qe,Ye),st=this.complex(Je,Qe).as2D(v.shape[0],v.shape[1]);return Je.dispose(),Qe.dispose(),st},y.prototype.gatherND=function(v,$e){var Ge=$e.shape,Ke=Ge[Ge.length-1],qe=jr(v,$e),Ye=qe[0],Je=qe[1],Qe=qe[2],st=qe[3],Mt=$e.reshape([Je,Ke]),on=v.reshape([v.size/Qe,Qe]),sn=new gi(Ke,st,[Je,Qe]);return this.compileAndRun(sn,[on,Mt]).reshape(Ye)},y.prototype.fill=function(v,$e,Ge){if((Ge=Ge||j($e))==="string"){var Ke=P(Ge,k(v));return Ke.fill($e),Lt.makeTensor(Ke,v,Ge,this)}var qe=new vi(v,$e),Ye=qe.getCustomSetupFunc($e);return this.compileAndRun(qe,[],Ge,Ye)},y.prototype.onesLike=function(v){if(v.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(v.shape,1,v.dtype)},y.prototype.zerosLike=function(v){return this.fill(v.shape,v.dtype==="string"?"":0,v.dtype)},y.prototype.linspace=function(v,$e,Ge){return Wo(v,$e,Ge)},y.prototype.makeTensorInfo=function(v,$e){var Ge=this.write(null,v,$e);return this.texData.get(Ge).usage=null,{dataId:Ge,shape:v,dtype:$e}},y.prototype.makeOutput=function(v,$e){var Ge=this.makeTensorInfo(v,$e).dataId;return Lt.makeTensorFromDataId(Ge,v,$e,this)},y.prototype.unpackTensor=function(v){var $e=new Ys(v.shape);return this.runWebGLProgram($e,[v],v.dtype)},y.prototype.packTensor=function(v){var $e=new ji(v.shape);return this.runWebGLProgram($e,[v],v.dtype,null,!0)},y.prototype.packedReshape=function(v,$e){var Ge=[Ae(v.shape)].concat(De(v.shape)),Ke={dtype:v.dtype,shape:Ge,dataId:v.dataId},qe=[Ae($e)].concat(De($e)),Ye=new Zi(qe,Ge),Je=this.runWebGLProgram(Ye,[Ke],v.dtype,null,!0);return{dataId:Je.dataId,shape:$e,dtype:Je.dtype}},y.prototype.decode=function(v){var $e,Ge=this.texData.get(v),Ke=Ge.isPacked,qe=Ge.shape,Ye=Ge.dtype,Je=Te(qe);return $e=Ke?new ai(Je):new oi(Je),{dtype:Ye,shape:qe,dataId:this.runWebGLProgram($e,[{shape:Je,dtype:Ye,dataId:v}],Ye,null,!0).dataId}},y.prototype.runWebGLProgram=function(v,$e,Ge,Ke,qe){var Ye=this;qe===void 0&&(qe=!1);var Je=this.makeTensorInfo(v.outputShape,Ge),Qe=this.texData.get(Je.dataId);if(v.packedOutput&&(Qe.isPacked=!0),v.outPackingScheme===Vt.DENSE){var st=Yt(v.outputShape);Qe.texShape=st.map(function(lo){return 2*lo})}if(v.outTexUsage!=null&&(Qe.usage=v.outTexUsage),k(Je.shape)===0)return Qe.values=B(Je.dtype,0),Je;var Mt=[],on=$e.map(function(lo){if(lo.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var fo=Ye.texData.get(lo.dataId);if(fo.texture==null){if(!v.packedInputs&&k(lo.shape)<=i().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:lo.shape,texData:null,isUniform:!0,uniformValues:fo.values};v.packedInputs&&(fo.isPacked=!0,fo.shape=lo.shape)}else if(!!fo.isPacked!=!!v.packedInputs)lo=fo.isPacked?Ye.unpackTensor(lo):Ye.packTensor(lo),Mt.push(lo),fo=Ye.texData.get(lo.dataId);else if(fo.isPacked&&!_e(fo.shape,lo.shape)){var Uo=lo,mo=lo.shape;lo.shape=fo.shape,lo=Ye.packedReshape(lo,mo),Mt.push(lo),fo=Ye.texData.get(lo.dataId),Uo.shape=mo}return Ye.uploadToGPU(lo.dataId),{shape:lo.shape,texData:fo,isUniform:!1}});this.uploadToGPU(Je.dataId);var sn,fn={shape:Je.shape,texData:Qe,isUniform:!1},hn=function(lo,fo,Uo){var mo="";fo.concat(Uo).forEach(function(fd){var hd=fd.texData!=null&&fd.texData.slice!=null&&fd.texData.slice.flatOffset>0,vd=fd.isUniform?"uniform":fd.texData.texShape;mo+=fd.shape+"_"+vd+"_"+hd});var rd=lo.userCode,od=lo.constructor.name;return od+="_"+mo+"_"+rd}(v,on,fn),to=this.getAndSaveBinary(hn,function(){return function(lo,fo,Uo,mo){var rd=fo.userCode,od=Uo.map(function(_d,Bd){var $d={logicalShape:_d.shape,texShape:_d.isUniform?null:_d.texData.texShape,isUniform:_d.isUniform,isPacked:!_d.isUniform&&_d.texData.isPacked,flatOffset:null};return _d.texData!=null&&_d.texData.slice!=null&&_d.texData.slice.flatOffset>0&&($d.flatOffset=_d.texData.slice.flatOffset),{name:fo.variableNames[Bd],shapeInfo:$d}}),fd=od.map(function(_d){return _d.shapeInfo}),hd={logicalShape:mo.shape,texShape:mo.texData.texShape,isUniform:!1,isPacked:mo.texData.isPacked,flatOffset:null},vd=fa(od,hd,rd,fo.packedInputs),Td=lo.createProgram(vd),Od=null,Md=lo.getUniformLocation(Td,"NAN",!1);i().getNumber("WEBGL_VERSION")===1&&(Od=lo.getUniformLocation(Td,"INFINITY",!1));for(var Fd={},Ud=0;Ud<fo.variableNames.length;Ud++){var pd=fo.variableNames[Ud];Fd[pd]=lo.getUniformLocation(Td,pd,!1),Fd["offset"+pd]=lo.getUniformLocation(Td,"offset"+pd,!1)}return{program:fo,source:vd,webGLProgram:Td,uniformLocations:Fd,inShapeInfos:fd,outShapeInfo:hd,infLoc:Od,nanLoc:Md}}(Ye.gpgpu,v,on,fn)}),Xr=this.activeTimers!=null;if(Xr&&(sn=this.startTimer()),function(lo,fo,Uo,mo,rd){Pi(fo.inShapeInfos,Uo),Pi([fo.outShapeInfo],[mo]);var od=mo.texData.texture,fd=mo.texData.texShape;mo.texData.isPacked?lo.setOutputPackedMatrixTexture(od,fd[0],fd[1]):lo.setOutputMatrixTexture(od,fd[0],fd[1]),lo.setProgram(fo.webGLProgram),i().getNumber("WEBGL_VERSION")===1&&fo.infLoc!==null&&lo.gl.uniform1f(fo.infLoc,1/0),fo.nanLoc!==null&&lo.gl.uniform1f(fo.nanLoc,NaN),Uo.forEach(function(hd,vd){var Td=fo.program.variableNames[vd],Od=fo.uniformLocations[Td],Md=fo.uniformLocations["offset"+Td];if(Od!=null)if(hd.isUniform)if(k(hd.shape)<2)lo.gl.uniform1f(Od,hd.uniformValues[0]);else{var Fd=hd.uniformValues;Fd instanceof Float32Array||(Fd=new Float32Array(Fd)),lo.gl.uniform1fv(Od,Fd)}else hd.texData.slice!=null&&Md!=null&&lo.gl.uniform1i(Md,hd.texData.slice.flatOffset),lo.setInputMatrixTexture(hd.texData.texture,Od,vd)}),rd!=null&&rd(lo,fo.webGLProgram),lo.executeProgram()}(this.gpgpu,to,on,fn,Ke),Mt.forEach(function(lo){return Ye.disposeData(lo.dataId)}),Xr&&(sn=this.endTimer(sn),this.activeTimers.push({name:v.constructor.name,query:this.getQueryTime(sn)})),!i().getBool("WEBGL_LAZILY_UNPACK")&&Qe.isPacked&&qe===!1){var co=this.unpackTensor(Je);return this.disposeData(Je.dataId),co}return Je},y.prototype.compileAndRun=function(v,$e,Ge,Ke,qe){qe===void 0&&(qe=!1),Ge=Ge||$e[0].dtype;var Ye=this.runWebGLProgram(v,$e,Ge,Ke,qe);return Lt.makeTensorFromDataId(Ye.dataId,Ye.shape,Ye.dtype)},y.prototype.getAndSaveBinary=function(v,$e){return v in this.binaryCache||(this.binaryCache[v]=$e()),this.binaryCache[v]},y.prototype.getTextureManager=function(){return this.textureManager},y.prototype.dispose=function(){var v=this;this.disposed||(i().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function($e){v.gpgpu.deleteProgram(v.binaryCache[$e].webGLProgram),delete v.binaryCache[$e]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},y.prototype.floatPrecision=function(){var v=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Ze(function(){if(!i().get("WEBGL_RENDER_FLOAT32_ENABLED")){var $e=i().getBool("DEBUG");i().set("DEBUG",!1);var Ge=v.abs(On(1e-8)).dataSync()[0];if(i().set("DEBUG",$e),Ge>0)return 32}return 16})),this.floatPrecisionValue},y.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},y.prototype.uploadToGPU=function(v){var $e,Ge=this.texData.get(v),Ke=Ge.shape,qe=Ge.dtype,Ye=Ge.values,Je=Ge.texture,Qe=Ge.usage,st=Ge.isPacked;if(Je==null){var Mt,on=this.activeTimers!=null;on&&(Mt=et());var sn=Ge.texShape;if(sn==null&&(sn=Ne(Ke,st),Ge.texShape=sn),Ye!=null){var fn=Te(Ke),hn=void 0,to=sn[1],Xr=sn[0],co=Ye instanceof Uint8Array;st?(to=($e=$t(sn[0],sn[1]))[0],Xr=$e[1],hn=new hi(fn,[Xr,to],co)):hn=new li(fn,[Xr,to],co);var lo=this.makeTensorInfo([Xr,to],qe);this.texData.get(lo.dataId).usage=co?zt.PIXELS:zt.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(lo.dataId),to,Xr,Ye);var fo=this.runWebGLProgram(hn,[lo],qe,null,!0),Uo=this.texData.get(fo.dataId);Ge.texture=Uo.texture,Ge.texShape=Uo.texShape,Ge.isPacked=Uo.isPacked,Ge.usage=Uo.usage,this.disposeData(lo.dataId),this.texData.delete(fo.dataId),Ge.values=null,on&&(this.uploadWaitMs+=et()-Mt)}else{var mo=this.acquireTexture(sn,Qe,qe,st);Ge.texture=mo}}},y.prototype.convertAndCacheOnCPU=function(v,$e){var Ge=this.texData.get(v),Ke=Ge.dtype;return this.releaseGPUData(v),$e!=null&&(Ge.values=function(qe,Ye){if(Ye==="float32"||Ye==="complex64")return qe;if(Ye==="int32"||Ye==="bool"){for(var Je=Ye==="int32"?new Int32Array(qe.length):new Uint8Array(qe.length),Qe=0;Qe<Je.length;++Qe)Je[Qe]=Math.round(qe[Qe]);return Je}throw new Error("Unknown dtype "+Ye)}($e,Ke)),Ge.values},y.prototype.acquireTexture=function(v,$e,Ge,Ke){if(this.numBytesInGPU+=this.computeBytes(v,Ge),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var qe=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+qe+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(v,$e,Ke)},y.prototype.computeBytes=function(v,$e){return v[0]*v[1]*z($e)},y}(bo);Wt()&&Lt.registerBackend("webgl",function(){return new Zs},2);var tu=An({square_:function(je){var y=mn(je,"x","square"),v=[y];return Lt.runKernelFunc(function($e,Ge){return Ge([y]),$e.square(y)},{x:y},null,"Square",{},v,[])}}),eu="SquaredDifference",nu=An({squaredDifference_:function(je,y){var v,$e=mn(je,"a","squaredDifference"),Ge=mn(y,"b","squaredDifference");v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape);var Ke={a:$e,b:Ge},qe=[$e,Ge];return Lt.runKernelFunc(function(Ye,Je){var Qe=Ye.squaredDifference($e,Ge);return Je([$e,Ge]),Qe},Ke,function(Ye,Je){var Qe=Je[0],st=Je[1],Mt=On(2);return{a:function(){return Ye.mul(Qe.sub(st).mul(Mt))},b:function(){return Ye.mul(st.sub(Qe).mul(Mt))}}},eu,{},qe,[])}}),ru=An({abs_:function(je){var y=mn(je,"x","abs");return y.dtype==="complex64"?Lt.runKernelFunc(function(v){return v.complexAbs(y)},{$x:y}):Lt.runKernelFunc(function(v,$e){var Ge=v.abs(y);return $e([y]),Ge},{x:y},function(v,$e){var Ge=$e[0];return{x:function(){return v.mul(Ge.toFloat().step(-1))}}},"Abs")}}),ou=An({acos_:function(je){var y=mn(je,"x","acos");return Lt.runKernelFunc(function(v,$e){var Ge=v.acos(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.divStrict(On(1).sub(Ge.toFloat().square()).sqrt()).neg()}}})}}),au=An({acosh_:function(je){var y=mn(je,"x","acosh");return Lt.runKernelFunc(function(v,$e){var Ge=v.acosh(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.divStrict(Ge.toFloat().square().sub(1).sqrt())}}})}}),iu=An({asin_:function(je){var y=mn(je,"x","asin");return Lt.runKernelFunc(function(v,$e){var Ge=v.asin(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.divStrict(On(1).sub(Ge.toFloat().square()).sqrt())}}})}}),su=An({asinh_:function(je){var y=mn(je,"x","asinh");return Lt.runKernelFunc(function(v,$e){var Ge=v.asinh(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.divStrict(On(1).add(Ge.toFloat().square()).sqrt())}}})}}),uu=An({atan_:function(je){var y=mn(je,"x","atan");return Lt.runKernelFunc(function(v,$e){var Ge=v.atan(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.div(Ge.toFloat().square().add(1))}}})}}),cu=An({atanh_:function(je){var y=mn(je,"x","atanh");return Lt.runKernelFunc(function(v,$e){var Ge=v.atanh(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.div(On(1).sub(Ge.toFloat().square()))}}})}}),lu=An({ceil_:function(je){var y=mn(je,"x","ceil");return Lt.runKernelFunc(function(v){return v.ceil(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),hu=An({clipByValue_:function(je,y,v){var $e=mn(je,"x","clipByValue");C(y<=v,function(){return"Error in clip: min ("+y+") must be less than or equal to max ("+v+")."});var Ge=[$e],Ke={min:y,max:v};return Lt.runKernelFunc(function(qe,Ye){var Je=qe.clip($e,y,v);return Ye([$e]),Je},{x:$e},function(qe,Ye){var Je=Ye[0];return{x:function(){return qe.where(Je.greaterEqual(y).logicalAnd(Je.lessEqual(v)),Xn(qe))}}},"ClipByValue",Ke,Ge)}}),fu=An({cos_:function(je){var y=mn(je,"x","cos"),v=[y];return Lt.runKernelFunc(function($e,Ge){var Ke=$e.cos(y);return Ge([y]),Ke},{x:y},function($e,Ge){var Ke=Ge[0];return{x:function(){return Ke.toFloat().sin().neg().mul($e)}}},"Cos",{},v)}}),du=An({cosh_:function(je){var y=mn(je,"x","cosh");return Lt.runKernelFunc(function(v,$e){var Ge=v.cosh(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return Ge.toFloat().sinh().mulStrict(v)}}})}}),pu=An({erf_:function(je){var y=mn(je,"x","erf");return C(y.dtype==="int32"||y.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),y.dtype==="int32"&&(y=y.toFloat()),Lt.runKernelFunc(function(v,$e){var Ge=v.erf(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.mul(Ge.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),vu=An({exp_:function(je){var y=mn(je,"x","exp");return Lt.runKernelFunc(function(v,$e){var Ge=v.exp(y);return $e([Ge]),Ge},{x:y},function(v,$e){return{x:function(){return v.mulStrict($e[0])}}},"Exp",{},[],[!0])}}),mu=An({expm1_:function(je){var y=mn(je,"x","expm1");return Lt.runKernelFunc(function(v,$e){var Ge=v.expm1(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.mul(Ge.exp())}}})}}),gu=An({floor_:function(je){var y=mn(je,"x","floor");return Lt.runKernelFunc(function(v){return v.floor(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),yu=An({log_:function(je){var y=mn(je,"x","log"),v=[y];return Lt.runKernelFunc(function($e,Ge){var Ke=$e.log(y);return Ge([y]),Ke},{x:y},function($e,Ge){var Ke=Ge[0];return{x:function(){return $e.div(Ke.toFloat())}}},"Log",{},v)}}),xu=An({log1p_:function(je){var y=mn(je,"x","log1p");return Lt.runKernelFunc(function(v,$e){var Ge=v.log1p(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.div(Ge.add(1))}}})}}),bu=An({logSigmoid_:function(je){var y=mn(je,"x","logSigmoid");return Lt.runKernelFunc(function(v,$e){var Ge=v.softplus(y.neg()).neg();return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.mul(Ge.neg().sigmoid())}}})}}),wu=An({neg_:function(je){var y=mn(je,"x","neg"),v=[y];return Lt.runKernelFunc(function($e){return $e.neg(y)},{x:y},function($e){return{x:function(){return $e.neg()}}},"Neg",{},v)}}),Cu=An({reciprocal_:function(je){var y=mn(je,"x","reciprocal");return Lt.runKernelFunc(function(v,$e){var Ge=v.reciprocal(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.div(Ge.square().neg())}}})}}),Eu=An({round_:function(je){var y=mn(je,"x","round");return Lt.runKernelFunc(function(v){return v.round(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),Ru=An({rsqrt_:function(je){var y=mn(je,"x","rsqrt"),v=[y];return Lt.runKernelFunc(function($e,Ge){var Ke=$e.rsqrt(y);return Ge([y]),Ke},{x:y},function($e,Ge){var Ke=Ge[0];return{x:function(){return $e.div(Ke.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},v)}}),Iu=An({sigmoid_:function(je){var y=mn(je,"x","sigmoid");return Lt.runKernelFunc(function(v,$e){var Ge=v.sigmoid(y);return $e([Ge]),Ge},{x:y},function(v,$e){var Ge=$e[0];return{x:function(){return v.mul(Ge.mul(On(1).sub(Ge)))}}},"Sigmoid")}}),ku=An({sign_:function(je){var y=mn(je,"x","sign");return Lt.runKernelFunc(function(v){return v.sign(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),Su=An({isNaN_:function(je){var y=mn(je,"x","isNaN");return Lt.runKernelFunc(function(v){return v.isNaN(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),Au=An({isInf_:function(je){var y=mn(je,"x","isInf");return Lt.runKernelFunc(function(v){return v.isInf(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),Du=An({isFinite_:function(je){var y=mn(je,"x","isFinite");return Lt.runKernelFunc(function(v){return v.isFinite(y)},{$x:y},function(v){return{$x:function(){return Xn(v)}}})}}),Tu=An({sin_:function(je){var y=mn(je,"x","sin"),v=[y];return Lt.runKernelFunc(function($e,Ge){var Ke=$e.sin(y);return Ge([y]),Ke},{x:y},function($e,Ge){var Ke=Ge[0];return{x:function(){return Ke.toFloat().cos().mul($e)}}},"Sin",{},v)}}),Nu=An({sinh_:function(je){var y=mn(je,"x","sinh");return Lt.runKernelFunc(function(v,$e){var Ge=v.sinh(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return Ge.toFloat().cosh().mulStrict(v)}}})}}),Fu=An({softplus_:function(je){var y=mn(je,"x","softplus");return Lt.runKernelFunc(function(v,$e){var Ge=v.softplus(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.mul(Ge.sigmoid())}}})}}),_u=An({sqrt_:function(je){var y=mn(je,"x","sqrt");return Lt.runKernelFunc(function(v,$e){var Ge=v.sqrt(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.div(Ge.toFloat().sqrt().mul(2))}}})}}),Ou=An({step_:function(je,y){y===void 0&&(y=0);var v=mn(je,"x","step");return Lt.runKernelFunc(function($e){return $e.step(v,y)},{$x:v},function($e){return{$x:function(){return Xn($e)}}})}}),Mu=An({tan_:function(je){var y=mn(je,"x","tan");return Lt.runKernelFunc(function(v,$e){var Ge=v.tan(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return v.div(Ge.cos().square())}}})}}),Bu=An({tanh_:function(je){var y=mn(je,"x","tanh");return Lt.runKernelFunc(function(v,$e){var Ge=v.tanh(y);return $e([Ge]),Ge},{x:y},function(v,$e){var Ge=$e[0];return{x:function(){return On(1).sub(Ge.square()).mulStrict(v)}}},"Tanh",{},null,[!0])}});function Pu(je,y,v,$e,Ge,Ke){var qe,Ye,Je=mn(je,"x","batchNorm"),Qe=mn(y,"mean","batchNorm"),st=mn(v,"variance","batchNorm");return Ge!=null&&(qe=mn(Ge,"scale","batchNorm")),$e!=null&&(Ye=mn($e,"offset","batchNorm")),C(Je.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+Je.rank+"."}),C(Qe.rank===2||Qe.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+Qe.rank+"."}),C(st.rank===2||st.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+st.rank+"."}),qe!=null&&C(qe.rank===2||qe.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+qe.rank+"."}),Ye!=null&&C(Ye.rank===2||Ye.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+Ye.rank+"."}),Uu(Je,Qe,st,Ye,qe,Ke)}function Lu(je,y,v,$e,Ge,Ke){var qe,Ye,Je=mn(je,"x","batchNorm"),Qe=mn(y,"mean","batchNorm"),st=mn(v,"variance","batchNorm");return Ge!=null&&(qe=mn(Ge,"scale","batchNorm")),$e!=null&&(Ye=mn($e,"offset","batchNorm")),C(Je.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+Je.rank+"."}),C(Qe.rank===3||Qe.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+Qe.rank+"."}),C(st.rank===3||st.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+st.rank+"."}),qe!=null&&C(qe.rank===3||qe.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+qe.rank+"."}),Ye!=null&&C(Ye.rank===3||Ye.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+Ye.rank+"."}),Uu(Je,Qe,st,Ye,qe,Ke)}function Wu(je,y,v,$e,Ge,Ke){var qe,Ye,Je=mn(je,"x","batchNorm"),Qe=mn(y,"mean","batchNorm"),st=mn(v,"variance","batchNorm");return Ge!=null&&(qe=mn(Ge,"scale","batchNorm")),$e!=null&&(Ye=mn($e,"offset","batchNorm")),C(Je.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+Je.rank+"."}),C(Qe.rank===4||Qe.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+Qe.rank+"."}),C(st.rank===4||st.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+st.rank+"."}),qe!=null&&C(qe.rank===4||qe.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+qe.rank+"."}),Ye!=null&&C(Ye.rank===4||Ye.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+Ye.rank+"."}),Uu(Je,Qe,st,Ye,qe,Ke)}function Uu(je,y,v,$e,Ge,Ke){Ke==null&&(Ke=.001);var qe,Ye,Je,Qe=mn(je,"x","batchNorm"),st=mn(y,"mean","batchNorm"),Mt=mn(v,"variance","batchNorm");Ge!=null&&(qe=mn(Ge,"scale","batchNorm")),$e!=null&&(Ye=mn($e,"offset","batchNorm")),C(st.rank===Mt.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),C(Ye==null||st.rank===Ye.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),C(qe==null||st.rank===qe.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),Je=Qe.rank===0||Qe.rank===1?Qe.as4D(1,1,1,Qe.size):Qe.rank===2?Qe.as4D(1,1,Qe.shape[0],Qe.shape[1]):Qe.rank===3?Qe.as4D(1,Qe.shape[0],Qe.shape[1],Qe.shape[2]):Qe;var on=[Qe,st,Mt,qe];return Lt.runKernelFunc(function(sn,fn){var hn=sn.batchNormalization(Je,Vu(st),Vu(Mt),Ke,Vu(qe),Vu(Ye));return fn([Qe,st,Mt,qe]),hn},{x:Qe,mean:st,variance:Mt,scale:qe,offset:Ye},function(sn,fn){var hn=fn,to=hn[0],Xr=hn[1],co=hn[2],lo=hn[3],fo=lo??On(1),Uo=Eo(Xr.shape,Je.shape),mo=[];if(Xr.rank===1){for(var rd=0;rd<Je.shape.length-1;++rd)mo.push(Je.shape[rd]);mo.push(1)}var od=to.sub(Xr),fd=sn.mul(fo),hd=Ru(co.add(On(Ke))),vd=hd.mul(hd).mul(hd).mul(On(-.5));return{x:function(){return Xr.rank===1?sn.mul(Lr(hd.as4D(1,1,1,Xr.shape[0]),mo)).mul(fo).reshape(to.shape):sn.mul(hd).mul(fo).reshape(to.shape)},mean:function(){var Td=hd.mul(On(-1)).mul(fd);return Xr.rank===1&&(Td=Td.sum(Uo)),Td.reshape(Xr.shape)},variance:function(){var Td=vd.mul(od).mul(fd);return Xr.rank===1&&(Td=Td.sum(Uo)),Td.reshape(Xr.shape)},scale:function(){var Td=od.mul(hd),Od=sn.mul(Td);return Xr.rank===1&&(Od=Od.sum(Uo)),Od.reshape(Xr.shape)},offset:function(){var Td=sn;return Xr.rank===1&&(Td=Td.sum(Uo)),Td.reshape(Xr.shape)}}},"BatchNormalization",{varianceEpsilon:Ke},on).reshape(Qe.shape)}function Vu(je){return je==null?null:je.rank===0?je.as1D():je.rank===1?je:je.rank===2?je.as4D(1,1,je.shape[0],je.shape[1]):je.rank===3?je.as4D(1,je.shape[0],je.shape[1],je.shape[2]):je}function zu(){Xe("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var Gu=An({batchNormalization2d_:function(je,y,v,$e,Ge,Ke){return $e===void 0&&($e=.001),zu(),Pu(je,y,v,Ke,Ge,$e)}}),Hu=An({batchNormalization3d_:function(je,y,v,$e,Ge,Ke){return $e===void 0&&($e=.001),zu(),Lu(je,y,v,Ke,Ge,$e)}}),qu=An({batchNormalization4d_:function(je,y,v,$e,Ge,Ke){return $e===void 0&&($e=.001),zu(),Wu(je,y,v,Ke,Ge,$e)}}),Ku=An({batchNormalization_:function(je,y,v,$e,Ge,Ke){return $e===void 0&&($e=.001),zu(),Uu(je,y,v,Ke,Ge,$e)}}),ju=An({batchNorm_:Uu}),Xu=An({batchNorm2d_:Pu}),Yu=An({batchNorm3d_:Lu}),$u=An({batchNorm4d_:Wu}),Qu=An({logicalAnd_:function(je,y){var v=mn(je,"a","logicalAnd","bool"),$e=mn(y,"b","logicalAnd","bool");return Ro(v.shape,$e.shape),Lt.runKernelFunc(function(Ge){return Ge.logicalAnd(v,$e)},{a:v,b:$e},null,"LogicalAnd")}}),Ju=An({logicalNot_:function(je){var y=mn(je,"x","logicalNot","bool");return Lt.runKernelFunc(function(v){return v.logicalNot(y)},{$x:y})}}),Zu=An({logicalOr_:function(je,y){var v=mn(je,"a","logicalOr","bool"),$e=mn(y,"b","logicalOr","bool");return Ro(v.shape,$e.shape),Lt.runKernelFunc(function(Ge){return Ge.logicalOr(v,$e)},{$a:v,$b:$e})}}),tc=An({logicalXor_:function(je,y){var v=mn(je,"a","logicalXor","bool"),$e=mn(y,"b","logicalXor","bool");return Ro(v.shape,$e.shape),Zu(je,y).logicalAnd(Qu(je,y).logicalNot())}}),ec=An({where_:function(je,y,v){var $e=mn(y,"a","where"),Ge=mn(v,"b","where"),Ke=mn(je,"condition","where","bool");return E($e.shape,Ge.shape,"Error in where: "),Ke.rank===1?C(Ke.shape[0]===$e.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):E(Ke.shape,Ge.shape,"Error in where: "),Lt.runKernelFunc(function(qe,Ye){var Je=qe.select(Ke,$e,Ge);return Ye([Ke]),Je},{$condition:Ke,$a:$e,$b:Ge},function(qe,Ye){var Je=Ye[0];return{$condition:function(){return Xn(Je).toFloat()},$a:function(){return qe.mul(Je.cast(qe.dtype))},$b:function(){return qe.mul(Je.logicalNot().cast(qe.dtype))}}})}}),nc=function(je){return n(this,void 0,void 0,function(){var y,v,$e;return r(this,function(Ge){switch(Ge.label){case 0:return[4,(y=mn(je,"condition","whereAsync","bool")).data()];case 1:return v=Ge.sent(),$e=na(y.shape,v),je!==y&&y.dispose(),[2,$e]}})})},rc=An({add_:function(je,y){var v,$e=mn(je,"a","add"),Ge=mn(y,"b","add");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe){return qe.add($e,Ge)},{a:$e,b:Ge},function(qe){return{a:function(){var Ye=qe,Je=Eo($e.shape,Ke);return Je.length>0&&(Ye=Ye.sum(Je)),Ye.reshape($e.shape)},b:function(){var Ye=qe,Je=Eo(Ge.shape,Ke);return Je.length>0&&(Ye=Ye.sum(Je)),Ye.reshape(Ge.shape)}}},"Add")}}),oc=An({addN_:function(je){C(Array.isArray(je),function(){return"The argument passed to tf.addN() must be a list of tensors"}),C(je.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+je.length});var y=je.map(function(Ge,Ke){return mn(Ge,"tensors"+Ke,"addN")}),v=y[0];y.forEach(function(Ge){if(Ge.dtype!==v.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),y.forEach(function(Ge){if(!S(Ge.shape,v.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var $e=y;return Lt.runKernelFunc(function(Ge){return Ge.addN(y)},$e,function(Ge){var Ke={};return y.forEach(function(qe,Ye){Ke[Ye]=function(){return Ge.clone()}}),Ke},"AddN")}}),ac=An({addStrict_:function(je,y){var v=mn(je,"a","addStrict"),$e=mn(y,"b","addStrict");return E(v.shape,$e.shape,"Error in addStrict: "),v.add($e)}}),ic=An({atan2_:function(je,y){var v,$e=mn(je,"a","atan2"),Ge=mn(y,"b","atan2");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe,Ye){var Je=qe.atan2($e,Ge);return Ye([$e,Ge]),Je},{$a:$e,$b:Ge},function(qe,Ye){var Je=Ye[0],Qe=Ye[1];return{$a:function(){var st=rc(Je.square(),Qe.square()),Mt=qe.mul(Qe.div(st)),on=Eo(Je.shape,Ke);return on.length>0&&(Mt=Mt.sum(on)),Mt.reshape(Je.shape)},$b:function(){var st=rc(Je.square(),Qe.square()),Mt=wu(qe.mul(Je.div(st))),on=Eo(Qe.shape,Ke);return on.length>0&&(Mt=Mt.sum(on)),Mt.reshape(Qe.shape)}}})}}),sc=An({div_:function(je,y){var v,$e=mn(je,"a","div"),Ge=mn(y,"b","div");if(v=Nt($e,Ge),$e=v[0],Ge=v[1],$e.dtype==="int32"&&Ge.dtype==="int32")return lc($e,Ge);var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe,Ye){var Je=qe.realDivide($e,Ge);return Ye([$e,Ge]),Je},{a:$e,b:Ge},function(qe,Ye){var Je=Ye[0],Qe=Ye[1];return{a:function(){var st=qe.div(Qe.toFloat()),Mt=Eo(Je.shape,Ke);return Mt.length>0?st.sum(Mt).reshape(Je.shape):st},b:function(){var st=qe.mul(Je.toFloat()),Mt=Eo(Qe.shape,Ke);Mt.length>0&&(st=st.sum(Mt).reshape(Qe.shape));var on=Qe.square();return st.div(on.toFloat()).neg()}}},"Div")}}),uc=An({divNoNan_:function(je,y){var v,$e=mn(je,"a","div"),Ge=mn(y,"b","div");$e=(v=Nt($e,Ge))[0],Ge=v[1];var Ke=sc($e,Ge),qe=Xn(Ke),Ye=Ge.equal(qe);return ec(Ye,qe,Ke)}}),cc=An({divStrict_:function(je,y){var v=mn(je,"a","div"),$e=mn(y,"b","div");return E(v.shape,$e.shape,"Error in divideStrict: "),v.div($e)}}),lc=An({floorDiv_:function(je,y){var v,$e=mn(je,"a","floorDiv"),Ge=mn(y,"b","floorDiv");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe,Ye){var Je=qe.floorDiv($e,Ge);return Ye([$e,Ge]),Je},{a:$e,b:Ge},function(qe,Ye){var Je=Ye[0],Qe=Ye[1];return{a:function(){var st=qe.div(Qe.toFloat()),Mt=Eo(Je.shape,Ke);return Mt.length>0?st.sum(Mt).reshape(Je.shape):st},b:function(){var st=qe.mul(Je.toFloat()),Mt=Eo(Qe.shape,Ke);Mt.length>0&&(st=st.sum(Mt).reshape(Qe.shape));var on=Qe.square();return st.div(on.toFloat()).neg()}}},"FloorDiv")}}),hc=An({maximum_:function(je,y){var v,$e=mn(je,"a","maximum"),Ge=mn(y,"b","maximum");return v=Nt($e,Ge),$e=v[0],Ge=v[1],$e.dtype==="bool"&&($e=$e.toInt(),Ge=Ge.toInt()),Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.maximum($e,Ge);return qe([$e,Ge]),Ye},{a:$e,b:Ge},function(Ke,qe){var Ye=qe[0],Je=qe[1];return{a:function(){return Ke.mul(Ye.greaterEqual(Je).toFloat())},b:function(){return Ke.mul(Ye.less(Je).toFloat())}}},"Maximum")}}),fc=An({maximumStrict_:function(je,y){var v=mn(je,"a","maximumStrict"),$e=mn(y,"b","maximumStrict");return E(v.shape,$e.shape,"Error in maximumStrict: "),v.maximum($e)}}),dc=An({minimum_:function(je,y){var v,$e=mn(je,"a","minimum"),Ge=mn(y,"b","minimum");return v=Nt($e,Ge),$e=v[0],Ge=v[1],$e.dtype==="bool"&&($e=$e.toInt(),Ge=Ge.toInt()),Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.minimum($e,Ge);return qe([$e,Ge]),Ye},{a:$e,b:Ge},function(Ke,qe){var Ye=qe[0],Je=qe[1];return{a:function(){return Ke.mul(Ye.lessEqual(Je).toFloat())},b:function(){return Ke.mul(Ye.greater(Je).toFloat())}}},"Minimum")}}),pc=An({minimumStrict_:function(je,y){var v=mn(je,"a","minimumStrict"),$e=mn(y,"b","minimumStrict");return E(v.shape,$e.shape,"Error in minimumStrict: "),v.minimum($e)}}),vc=An({mod_:function(je,y){var v,$e=mn(je,"a","mod"),Ge=mn(y,"b","mod");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe,Ye){var Je=qe.mod($e,Ge);return Ye([$e,Ge]),Je},{$a:$e,$b:Ge},function(qe,Ye){var Je=Ye[0],Qe=Ye[1];return{$a:function(){var st=Eo(Je.shape,Ke);return st.length>0?qe.sum(st).reshape(Je.shape):qe},$b:function(){var st=qe.mul(Je.div(Qe).floor().neg()),Mt=Eo(Qe.shape,Ke);return Mt.length>0?st.sum(Mt).reshape(Qe.shape):st}}})}}),mc=An({modStrict_:function(je,y){var v=mn(je,"a","modStrict"),$e=mn(y,"b","modStrict");return E(v.shape,$e.shape,"Error in modStrict: "),v.mod($e)}}),gc=An({mul_:function(je,y){var v,$e=mn(je,"a","mul"),Ge=mn(y,"b","mul");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe,Ye){var Je=qe.multiply($e,Ge);return Ye([$e,Ge]),Je},{a:$e,b:Ge},function(qe,Ye){var Je=Ye[0],Qe=Ye[1];return{a:function(){var st=qe.mul(Qe.toFloat()),Mt=Eo(Je.shape,Ke);return Mt.length>0?st.sum(Mt).reshape(Je.shape):st},b:function(){var st=qe.mul(Je.toFloat()),Mt=Eo(Qe.shape,Ke);return Mt.length>0?st.sum(Mt).reshape(Qe.shape):st}}},"Mul")}}),yc=An({mulStrict_:function(je,y){var v=mn(je,"a","mul"),$e=mn(y,"b","mul");return E(v.shape,$e.shape,"Error in multiplyStrict: "),v.mul($e)}}),xc=An({pow_:function(je,y){var v,$e=mn(je,"base","pow"),Ge=mn(y,"exp","pow");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape),qe=[$e,Ge];return Lt.runKernelFunc(function(Ye,Je){var Qe=Ye.pow($e,Ge);return Je([$e,Ge,Qe]),Qe},{a:$e,b:Ge},function(Ye,Je){var Qe=Je[0],st=Je[1],Mt=Je[2];return{a:function(){var on=st.toFloat(),sn=Ye.mul(on.mul(Qe.pow(on.sub(On(1))))),fn=Eo(Qe.shape,Ke);return fn.length>0&&(sn=sn.sum(fn)),sn.reshape(Qe.shape)},b:function(){var on=Qe.greater(0),sn=Qe.log().where(on,Xn(Qe)),fn=Ye.mul(Mt.mul(sn)),hn=Eo(st.shape,Ke);return hn.length>0&&(fn=fn.sum(hn)),fn.reshape(st.shape)}}},"Pow",{},qe,[!0])}}),bc=An({powStrict_:function(je,y){return E(je.shape,y.shape,"Error in powStrict: "),je.pow(y)}}),wc=An({squaredDifferenceStrict_:function(je,y){var v=mn(je,"a","squaredDifferenceStrict"),$e=mn(y,"b","squaredDifferenceStrict");return E(v.shape,$e.shape,"Error in squaredDifferenceStrict: "),v.squaredDifference($e)}}),Cc=An({sub_:function(je,y){var v,$e=mn(je,"a","sub"),Ge=mn(y,"b","sub");v=Nt($e,Ge),$e=v[0],Ge=v[1];var Ke=Ro($e.shape,Ge.shape);return Lt.runKernelFunc(function(qe){return qe.subtract($e,Ge)},{a:$e,b:Ge},function(qe){return{a:function(){var Ye=qe,Je=Eo($e.shape,Ke);return Je.length>0&&(Ye=Ye.sum(Je)),Ye.reshape($e.shape)},b:function(){var Ye=qe,Je=Eo(Ge.shape,Ke);return Je.length>0&&(Ye=Ye.sum(Je)),Ye.neg().reshape(Ge.shape)}}},"Sub")}}),Ec=An({subStrict_:function(je,y){var v=mn(je,"a","subStrict"),$e=mn(y,"b","subStrict");return E(v.shape,$e.shape,"Error in subStrict: "),v.sub($e)}}),Rc=An({equal_:function(je,y){var v,$e=mn(je,"a","equal"),Ge=mn(y,"b","equal");return v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke){return Ke.equal($e,Ge)},{$a:$e,$b:Ge})}}),Ic=An({equalStrict_:function(je,y){var v=mn(je,"a","equalStrict"),$e=mn(y,"b","equalStrict");return E(v.shape,$e.shape,"Error in equalStrict: "),v.equal($e)}}),kc=An({greater_:function(je,y){var v,$e=mn(je,"a","greater"),Ge=mn(y,"b","greater");return v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke){return Ke.greater($e,Ge)},{a:$e,b:Ge},null,"Greater")}}),Sc=An({greaterEqual_:function(je,y){var v,$e=mn(je,"a","greaterEqual"),Ge=mn(y,"b","greaterEqual");return v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.greaterEqual($e,Ge);return qe([$e,Ge]),Ye},{a:$e,b:Ge},function(Ke,qe){var Ye=qe[0],Je=qe[1];return{a:function(){return Xn(Ye)},b:function(){return Xn(Je)}}},"GreaterEqual")}}),Ac=An({greaterEqualStrict_:function(je,y){var v=mn(je,"a","greaterEqualStrict"),$e=mn(y,"b","greaterEqualStrict");return E(v.shape,$e.shape,"Error in greaterEqualStrict: "),v.greaterEqual($e)}}),Dc=An({greaterStrict_:function(je,y){var v=mn(je,"a","greaterStrict"),$e=mn(y,"b","greaterStrict");return E(v.shape,$e.shape,"Error in greaterStrict: "),v.greater($e)}}),Tc=An({less_:function(je,y){var v,$e=mn(je,"a","less"),Ge=mn(y,"b","less");return v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke){return Ke.less($e,Ge)},{a:$e,b:Ge},null,"Less")}}),Nc=An({lessEqual_:function(je,y){var v,$e=mn(je,"a","lessEqual"),Ge=mn(y,"b","lessEqual");return v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.lessEqual($e,Ge);return qe([$e,Ge]),Ye},{a:$e,b:Ge},null,"LessEqual")}}),Fc=An({lessEqualStrict_:function(je,y){var v=mn(je,"a","lessEqualStrict"),$e=mn(y,"b","lessEqualStrict");return E(v.shape,$e.shape,"Error in lessEqualStrict: "),v.lessEqual($e)}}),_c=An({lessStrict_:function(je,y){var v=mn(je,"a","lessStrict"),$e=mn(y,"b","lessStrict");return E(v.shape,$e.shape,"Error in lessStrict: "),v.less($e)}}),Oc=An({notEqual_:function(je,y){var v,$e=mn(je,"a","notEqual"),Ge=mn(y,"b","notEqual");return v=Nt($e,Ge),$e=v[0],Ge=v[1],Ro($e.shape,Ge.shape),Lt.runKernelFunc(function(Ke){return Ke.notEqual($e,Ge)},{a:$e,b:Ge},null,"NotEqual")}}),Mc=An({notEqualStrict_:function(je,y){var v=mn(je,"a","notEqualStrict"),$e=mn(y,"b","notEqualStrict");return E(v.shape,$e.shape,"Error in notEqualStrict: "),v.notEqual($e)}});function Bc(je,y){for(var v=[],$e=je;$e<y;++$e)v.push($e);return v}function Pc(je){for(var y=[],v=0;v<je.length;++v)for(var $e=0;$e<je[v].length;++$e)y.push(je[v][$e]);return y}var Lc=An({gather_:function(je,y,v){v===void 0&&(v=0);var $e=mn(je,"x","gather"),Ge=mn(y,"indices","gather","int32");v=O(v,$e.shape)[0];var Ke=function(qe,Ye,Je){for(var Qe=qe.shape[Je],st=[],Mt=1,on=1,sn=0;sn<Je;sn++)st.push(qe.shape[sn]),Mt*=qe.shape[sn];for(sn=0;sn<Ye.rank;sn++)st.push(Ye.shape[sn]);for(sn=Je+1;sn<qe.rank;sn++)st.push(qe.shape[sn]),on*=qe.shape[sn];return{batchSize:Mt,sliceSize:on,dimSize:Qe,outputShape:st}}($e,Ge,v);return Lt.runKernelFunc(function(qe,Ye){var Je=qe.gather($e,Ge.flatten(),v);return Ye([Ge]),Je},{x:$e,indices:Ge},function(qe,Ye){var Je=Ye[0];return{x:function(){var Qe=$e.shape,st=Je.size,Mt=Qe.slice(0,v),on=Mt.length,sn=Qe.slice(v,Qe.length).slice(1),fn=sn.length,hn=Bc(0,on),to=Bc(on+1,on+1+fn),Xr=Pc([Mt,[st],sn]),co=qe.reshape(Xr),lo=Je.reshape([st]),fo=Pc([[on],hn,to]),Uo=co.transpose(fo),mo=Wc(Uo,lo,$e.shape[v]),rd=Rn(fo);return mo=mo.transpose(rd)},indices:function(){return Je}}},"Gather",{axis:v}).reshape(Ke.outputShape)}}),Wc=An({unsortedSegmentSum_:function(je,y,v){var $e=mn(je,"x","unsortedSegmentSum"),Ge=mn(y,"segmentIds","unsortedSegmentSum","int32");return C(A(v),function(){return"numSegments must be of dtype int"}),Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.unsortedSegmentSum($e,Ge,v);return qe([Ge]),Ye},{$x:$e},function(Ke,qe){var Ye=qe[0];return{$x:function(){return function(Je,Qe){for(var st=hc(Qe,Xn(Qe)),Mt=Lc(Je,st),on=Sc(Qe,On(0,"int32")),sn=Mt.rank-on.rank,fn=0;fn<sn;++fn)on=wr(on,fn+1);on=Qu(on,zn(Mt.shape,"bool"));var hn=Xn(Mt);return ec(on,Mt,hn)}(Ke,Ye)}}})}}),Uc=function(je,y,v){return n(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn;return r(this,function(to){switch(to.label){case 0:for($e=mn(je,"tensor","boolMask"),Ge=mn(y,"mask","boolMask","bool"),Ke=v??0,qe=Ge.rank,Ye=$e.shape,C(qe>0,function(){return"mask cannot be scalar"}),E(Ye.slice(Ke,Ke+qe),Ge.shape,"mask's shape must match the first K dimensions of tensor's shape,"),Je=1,Qe=Ke;Qe<Ke+qe;Qe++)Je*=Ye[Qe];return st=Ye.slice(0,Ke).concat([Je],Ye.slice(Ke+qe)),Mt=$e.reshape(st),on=Ge.reshape([-1]),[4,nc(on)];case 1:return sn=to.sent(),fn=sn.squeeze([1]),hn=Lc(Mt,fn,Ke),je!==$e&&$e.dispose(),y!==Ge&&Ge.dispose(),fn.dispose(),Mt.dispose(),on.dispose(),sn.dispose(),[2,hn]}})})};function Vc(je,y,v,$e,Ge,Ke,qe){Ke===void 0&&(Ke="NHWC"),C(je.length===y.rank,function(){return"Length of inShape ("+je.length+") and rank of dy ("+y.rank+") must match"});var Ye=je,Je=y,Qe=!1;y.rank===3&&(Qe=!0,Je=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),Ye=[1,je[0],je[1],je[2]]),C(Ye.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+Ye.length+"."}),C(Je.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+Je.rank}),C(v.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+v.rank});var st=Ke==="NHWC"?Ye[3]:Ye[1],Mt=Ke==="NHWC"?Je.shape[3]:Je.shape[1];C(st===v.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+st+") must match input depth for filter "+v.shape[2]+"."}),C(Mt===v.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+Mt+") must match output depth for filter "+v.shape[3]+"."}),qe!=null&&C(A(Ge),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+qe+" but got pad "+Ge+"."});var on=Bo(Ke),sn=So(Ye,v.shape,$e,1,Ge,qe,!1,on),fn=Lt.runKernelFunc(function(hn,to){var Xr=hn.conv2dDerInput(Je,v,sn);return to([v,Je]),Xr},{dy4D:Je,filter:v},function(hn,to){var Xr=to[0],co=to[1];return{dy4D:function(){return qc(hn,Xr,$e,Ge,Ke,1,qe)},filter:function(){return jc(hn,co,Xr.shape,$e,Ge,Ke,qe)}}});return Qe?fn.as3D(fn.shape[1],fn.shape[2],fn.shape[3]):fn}function zc(je){var y=function(Ke){return typeof Ke=="number"?[Ke,Ke,Ke]:Ke.length===2?[Ke[0],Ke[1],1]:Ke}(je),v=y[0],$e=y[1],Ge=y[2];return v===1&&$e===1&&Ge===1}function Gc(je,y,v,$e,Ge){C(je.length===y.rank,function(){return"Length of inShape ("+je.length+") and rank of dy ("+y.rank+") must match"});var Ke=je,qe=y,Ye=!1;y.rank===4&&(Ye=!0,qe=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]),Ke=[1,je[0],je[1],je[2],je[3]]);var Je=Ke[4],Qe=qe.shape[4];C(Ke.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+Ke.length+"."}),C(qe.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+qe.rank}),C(v.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+v.rank}),C(Je===v.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+Je+") must match input depth for filter "+v.shape[3]+"."}),C(Qe===v.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+Qe+") must match output depth for filter "+v.shape[4]+"."});var st=Ao(Ke,v.shape,$e,1,Ge),Mt=Lt.runKernelFunc(function(on){return on.conv3dDerInput(qe,v,st)},{dy5D:qe});return Ye?Mt.as4D(Mt.shape[1],Mt.shape[2],Mt.shape[3],Mt.shape[4]):Mt}var Hc=An({conv1d_:function(je,y,v,$e,Ge,Ke,qe){Ge===void 0&&(Ge="NWC"),Ke===void 0&&(Ke=1);var Ye=mn(je,"x","conv1d"),Je=mn(y,"filter","conv1d"),Qe=Ye,st=!1;Ye.rank===2&&(st=!0,Qe=Ye.as3D(1,Ye.shape[0],Ye.shape[1])),C(Qe.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+Qe.rank+"."}),C(Je.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+Je.rank+"."}),qe!=null&&C(A($e),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+qe+" but got pad "+$e+"."}),C(Qe.shape[2]===Je.shape[1],function(){return"Error in conv1d: depth of input ("+Qe.shape[2]+") must match input depth for filter "+Je.shape[1]+"."}),C(Mo(v,Ke),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+v+" and dilation '"+Ke+"'"}),C(Ge==="NWC",function(){return"Error in conv1d: got dataFormat of "+Ge+" but only NWC is currently supported."});var Mt=Je.as4D(1,Je.shape[0],Je.shape[1],Je.shape[2]),on=Qe.as4D(Qe.shape[0],1,Qe.shape[1],Qe.shape[2]),sn=qc(on,Mt,[1,v],$e,"NHWC",[1,Ke],qe);return st?sn.as2D(sn.shape[2],sn.shape[3]):sn.as3D(sn.shape[0],sn.shape[2],sn.shape[3])}}),qc=An({conv2d_:function(je,y,v,$e,Ge,Ke,qe){Ge===void 0&&(Ge="NHWC"),Ke===void 0&&(Ke=[1,1]);var Ye=mn(je,"x","conv2d"),Je=mn(y,"filter","conv2d"),Qe=Ye,st=!1;Ye.rank===3&&(st=!0,Qe=Ye.as4D(1,Ye.shape[0],Ye.shape[1],Ye.shape[2])),C(Qe.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+Qe.rank+"."}),C(Je.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+Je.rank+"."}),qe!=null&&C(A($e),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+qe+" but got pad "+$e+"."});var Mt=Ge==="NHWC"?Qe.shape[3]:Qe.shape[1];C(Mt===Je.shape[2],function(){return"Error in conv2d: depth of input ("+Mt+") must match input depth for filter "+Je.shape[2]+"."}),C(Mo(v,Ke),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+Ke+"'"});var on=Bo(Ge),sn=So(Qe.shape,Je.shape,v,Ke,$e,qe,!1,on),fn=[Je,Qe],hn=Lt.runKernelFunc(function(to,Xr){var co=to.conv2d(Qe,Je,sn);return Xr([Je,Qe]),co},{x:Qe,filter:Je},function(to,Xr){var co=Xr,lo=co[0],fo=co[1];return C(Oo(Ke),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+Ke+"'"}),{x:function(){return Xc(fo.shape,to,lo,v,$e,Ge)},filter:function(){return jc(fo,to,lo.shape,v,$e,Ge)}}},"Conv2D",sn,fn);return st?hn.as3D(hn.shape[1],hn.shape[2],hn.shape[3]):hn}}),Kc=An({conv3d_:function(je,y,v,$e,Ge,Ke){Ge===void 0&&(Ge="NDHWC"),Ke===void 0&&(Ke=[1,1,1]);var qe=mn(je,"x","conv3d"),Ye=mn(y,"filter","conv3d"),Je=qe,Qe=!1;qe.rank===4&&(Qe=!0,Je=qe.as5D(1,qe.shape[0],qe.shape[1],qe.shape[2],qe.shape[3])),C(Je.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+Je.rank+"."}),C(Ye.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+Ye.rank+"."}),C(Je.shape[4]===Ye.shape[3],function(){return"Error in conv3d: depth of input ("+Je.shape[4]+") must match input depth for filter "+Ye.shape[3]+"."}),C(function(on,sn){return zc(on)||zc(sn)}(v,Ke),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+Ke+"'"}),C(Ge==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+Ge+" but only NDHWC is currently supported."});var st=Ao(Je.shape,Ye.shape,v,Ke,$e),Mt=Lt.runKernelFunc(function(on,sn){var fn=on.conv3d(Je,Ye,st);return sn([Je,Ye]),fn},{x:Je,$filter:Ye},function(on,sn){C(zc(Ke),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+Ke+"'"});var fn=sn[0],hn=sn[1];return{x:function(){return Gc(fn.shape,on,hn,v,$e)},$filter:function(){return function(to,Xr,co,lo,fo){var Uo=to;to.rank===4&&(Uo=to.as5D(1,to.shape[0],to.shape[1],to.shape[2],to.shape[3]));var mo=Xr;mo.rank===4&&(mo=Xr.as5D(1,Xr.shape[0],Xr.shape[1],Xr.shape[2],Xr.shape[3])),C(Uo.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+Uo.shape+"."}),C(mo.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+mo.shape+"."}),C(co.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+co+"."}),C(Uo.shape[4]===co[3],function(){return"Error in conv3dDerFilter: depth of input "+Uo.shape[4]+") must match input depth in filter ("+co[3]+"."}),C(mo.shape[4]===co[4],function(){return"Error in conv3dDerFilter: depth of dy ("+mo.shape[4]+") must match output depth for filter ("+co[4]+")."});var rd=Ao(Uo.shape,co,lo,1,fo);return Lt.runKernelFunc(function(od){return od.conv3dDerFilter(Uo,mo,rd)},{x5D:Uo,dy5D:mo})}(fn,on,hn.shape,v,$e)}}});return Qe?Mt.as4D(Mt.shape[1],Mt.shape[2],Mt.shape[3],Mt.shape[4]):Mt}}),jc=An({conv2dDerFilter_:function(je,y,v,$e,Ge,Ke,qe){Ke===void 0&&(Ke="NHWC");var Ye=je;je.rank===3&&(Ye=je.as4D(1,je.shape[0],je.shape[1],je.shape[2]));var Je=y;Je.rank===3&&(Je=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),C(Ye.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+Ye.shape+"."}),C(Je.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+Je.shape+"."}),C(v.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+v+"."});var Qe=Ke==="NHWC"?Ye.shape[3]:Ye.shape[1],st=Ke==="NHWC"?Je.shape[3]:Je.shape[1];C(Qe===v[2],function(){return"Error in conv2dDerFilter: depth of input "+Qe+") must match input depth in filter ("+v[2]+"."}),C(st===v[3],function(){return"Error in conv2dDerFilter: depth of dy ("+st+") must match output depth for filter ("+v[3]+")."}),qe!=null&&C(A(Ge),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+qe+" but got pad "+Ge+"."});var Mt=Bo(Ke),on=So(Ye.shape,v,$e,1,Ge,qe,!1,Mt);return Lt.runKernelFunc(function(sn){return sn.conv2dDerFilter(Ye,Je,on)},{x4D:Ye,dy4D:Je})}}),Xc=An({conv2dDerInput_:Vc}),Yc=An({depthwiseConv2d_:function(je,y,v,$e,Ge,Ke,qe){Ke===void 0&&(Ke=[1,1]);var Ye=mn(je,"x","depthwiseConv2d"),Je=mn(y,"filter","depthwiseConv2d"),Qe=Ye,st=!1;Ye.rank===3&&(st=!0,Qe=Ye.as4D(1,Ye.shape[0],Ye.shape[1],Ye.shape[2])),C(Qe.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+Qe.rank+"."}),C(Je.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+Je.rank+"."}),C(Qe.shape[3]===Je.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+Qe.shape[3]+") must match the inChannels dimension in filter "+Je.shape[2]+"."}),Ke==null&&(Ke=[1,1]),C(Mo(v,Ke),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+Ke+"'"}),qe!=null&&C(A($e),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+qe+" but got pad "+$e+"."});var Mt=So(Qe.shape,Je.shape,v,Ke,$e,qe,!0),on=[Qe,Je],sn=Lt.runKernelFunc(function(fn,hn){var to=fn.depthwiseConv2D(Qe,Je,Mt);return hn([Qe,Je]),to},{x:Qe,filter:Je},function(fn,hn){C(Oo(Ke),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+Ke+"'"});var to=hn[0],Xr=hn[1];return{x:function(){return $c(to.shape,fn,Xr,Mt)},filter:function(){return Qc(to,fn,Xr.shape,Mt)}}},"DepthwiseConv2dNative",Mt,on);return st?sn.as3D(sn.shape[1],sn.shape[2],sn.shape[3]):sn}}),$c=An({depthwiseConv2dDerInput_:function(je,y,v,$e){var Ge=y,Ke=!1;y.rank===3&&(Ke=!0,Ge=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]));var qe=Lt.runKernelFunc(function(Ye){return Ye.depthwiseConv2DDerInput(Ge,v,$e)},{dy4D:Ge});return Ke?qe.as3D(qe.shape[1],qe.shape[2],qe.shape[3]):qe}}),Qc=An({depthwiseConv2dDerFilter_:function(je,y,v,$e){var Ge=je;je.rank===3&&(Ge=je.as4D(1,je.shape[0],je.shape[1],je.shape[2]));var Ke=y;return Ke.rank===3&&(Ke=y.as4D(1,y.shape[0],y.shape[1],y.shape[2])),Lt.runKernelFunc(function(qe){return qe.depthwiseConv2DDerFilter(Ge,Ke,$e)},{x4D:Ge,dy4D:Ke})}}),Jc=An({separableConv2d_:function(je,y,v,$e,Ge,Ke,qe){Ke===void 0&&(Ke=[1,1]),qe===void 0&&(qe="NHWC");var Ye=mn(je,"x","separableConv2d"),Je=mn(y,"depthwiseFilter","separableConv2d"),Qe=mn(v,"pointwiseFilter","separableConv2d"),st=Ye,Mt=!1;if(Ye.rank===3&&(Mt=!0,st=Ye.as4D(1,Ye.shape[0],Ye.shape[1],Ye.shape[2])),qe==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");C(st.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+st.rank+"."}),C(Je.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+Je.rank+"."}),C(Qe.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+Je.rank+"."}),C(Qe.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+Qe.shape[0]+"."}),C(Qe.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+Qe.shape[1]+"."});var on=Je.shape[2],sn=Je.shape[3];C(Qe.shape[2]===on*sn,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+on*sn+", but got "+Qe.shape[2]+"."});var fn=Yc(st,Je,$e,Ge,qe,Ke),hn=qc(fn,Qe,1,"valid",qe);return Mt?hn.as3D(hn.shape[1],hn.shape[2],hn.shape[3]):hn}}),Zc=An({conv2dTranspose_:function(je,y,v,$e,Ge,Ke){return Vc(v,mn(je,"x","conv2dTranspose"),mn(y,"filter","conv2dTranspose"),$e,Ge,"NHWC",Ke)}}),tl=An({conv3dTranspose_:function(je,y,v,$e,Ge){return Gc(v,mn(je,"x","conv3dTranspose"),mn(y,"filter","conv3dTranspose"),$e,Ge)}}),el=An({matMul_:function(je,y,v,$e){var Ge;v===void 0&&(v=!1),$e===void 0&&($e=!1);var Ke=mn(je,"a","matMul"),qe=mn(y,"b","matMul");Ge=Nt(Ke,qe),Ke=Ge[0],qe=Ge[1];var Ye=v?Ke.shape[Ke.rank-2]:Ke.shape[Ke.rank-1],Je=$e?qe.shape[qe.rank-1]:qe.shape[qe.rank-2],Qe=v?Ke.shape[Ke.rank-1]:Ke.shape[Ke.rank-2],st=$e?qe.shape[qe.rank-2]:qe.shape[qe.rank-1],Mt=Ke.shape.slice(0,-2),on=qe.shape.slice(0,-2),sn=k(Mt),fn=k(on);C(Ke.rank>=2&&qe.rank>=2&&Ke.rank===qe.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+Ke.rank+" and "+qe.rank+"."}),C(S(Mt,on),function(){return"Error in matMul: outer dimensions ("+Mt+") and ("+on+") of Tensors with shapes "+Ke.shape+" and "+qe.shape+" must match."}),C(Ye===Je,function(){return"Error in matMul: inner shapes ("+Ye+") and ("+Je+") of Tensors with shapes "+Ke.shape+" and "+qe.shape+" and transposeA="+v+" and transposeB="+$e+" must match."});var hn=Ke.shape.slice(0,-2).concat([Qe,st]),to=v?Ke.as3D(sn,Ye,Qe):Ke.as3D(sn,Qe,Ye),Xr=$e?qe.as3D(fn,st,Je):qe.as3D(fn,Je,st),co={transposeA:v,transposeB:$e};return Lt.runKernelFunc(function(lo,fo){var Uo=lo.batchMatMul(to,Xr,v,$e);return fo([to,Xr]),Uo},{a:to,b:Xr},function(lo,fo){var Uo=fo,mo=Uo[0],rd=Uo[1];return v||$e?!v&&$e?{a:function(){return lo.matMul(rd,!1,!1)},b:function(){return lo.matMul(mo,!0,!1)}}:v&&!$e?{a:function(){return rd.matMul(lo,!1,!0)},b:function(){return mo.matMul(lo,!1,!1)}}:{a:function(){return rd.matMul(lo,!0,!0)},b:function(){return lo.matMul(mo,!0,!0)}}:{a:function(){return lo.matMul(rd,!1,!0)},b:function(){return mo.matMul(lo,!0,!1)}}},"BatchMatMul",co).reshape(hn)}}),nl=An({dot_:function(je,y){var v=mn(je,"t1","dot"),$e=mn(y,"t2","dot");C(!(v.rank!==1&&v.rank!==2||$e.rank!==1&&$e.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+v.rank+" and "+$e.rank+"."});var Ge=v.rank===1?v.size:v.shape[1],Ke=$e.rank===1?$e.size:$e.shape[0];return C(Ge===Ke,function(){return"Error in dot: inner dimensions of inputs must match, but got "+Ge+" and "+Ke+"."}),v.rank===1&&$e.rank===1?v.as2D(1,-1).matMul($e.as2D(-1,1)).asScalar():v.rank===1&&$e.rank===2?v.as2D(1,-1).matMul($e.as2D($e.shape[0],$e.shape[1])).as1D():v.rank===2&&$e.rank===1?v.matMul($e.as2D(-1,1)).as1D():v.matMul($e.as2D($e.shape[0],$e.shape[1]))}}),rl=An({outerProduct_:function(je,y){var v=mn(je,"v1","outerProduct"),$e=mn(y,"v2","outerProduct");return C(v.rank===1&&$e.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+v.rank+" and "+$e.rank+"."}),v.as2D(-1,1).matMul($e.as2D(1,-1))}}),ol=An({reverse_:function(je,y){var v=mn(je,"x","reverse");if(v.rank===0)return v.clone();var $e=O(y,v.shape);return Lt.runKernelFunc(function(Ge){return Ge.reverse(v,$e)},{$x:v},function(Ge){return{$x:function(){return Ge.reverse($e)}}}).reshapeAs(v)}}),al=An({reverse1d_:function(je){var y=mn(je,"x","reverse");return C(y.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+y.rank+"."}),ol(y,0)}}),il=An({reverse2d_:function(je,y){var v=mn(je,"x","reverse");return C(v.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+v.rank+"."}),ol(v,y)}}),sl=An({reverse3d_:function(je,y){var v=mn(je,"x","reverse");return C(v.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+v.rank+"."}),ol(v,y)}}),ul=An({reverse4d_:function(je,y){var v=mn(je,"x","reverse");return C(v.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+v.rank+"."}),ol(v,y)}});function cl(je,y,v,$e,Ge,Ke){var qe=mn(je,"x","maxPool"),Ye=qe,Je=!1;qe.rank===3&&(Je=!0,Ye=qe.as4D(1,qe.shape[0],qe.shape[1],qe.shape[2])),C(Ye.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+Ye.rank+"."}),C(Mo(v,$e),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+$e+"'"}),Ke!=null&&C(A(Ge),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+Ke+" but got pad "+Ge+"."});var Qe=Io(Ye.shape,y,v,$e,Ge,Ke);if(Qe.filterWidth===1&&Qe.filterHeight===1&&S(Qe.inShape,Qe.outShape))return qe.clone();var st=[Ye],Mt=Lt.runKernelFunc(function(on,sn){var fn=on.maxPool(Ye,Qe);return sn([Ye,fn]),fn},{x:Ye},function(on,sn){var fn=sn[0],hn=sn[1];return{x:function(){return function(to,Xr,co,lo,fo,Uo,mo,rd){var od=mn(to,"dy","maxPoolBackprop"),fd=mn(Xr,"input","maxPoolBackprop"),hd=mn(co,"output","maxPoolBackprop");C(fd.rank===od.rank,function(){return"Rank of input ("+fd.rank+") does not match rank of dy ("+od.rank+")"}),C(Mo(fo,Uo),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+fo+" and dilations '"+Uo+"'"}),C(od.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+od.rank+"."}),C(fd.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+fd.rank+"."});var vd=Io(fd.shape,lo,fo,Uo,mo,rd);return Lt.runKernelFunc(function(Td){return Td.maxPoolBackprop(od,fd,hd,vd)},{$dy:od,$input:fd})}(on,fn,hn,y,v,$e,Ge)}}},"MaxPool",Qe,st);return Je?Mt.as3D(Mt.shape[1],Mt.shape[2],Mt.shape[3]):Mt}function ll(je,y,v,$e,Ge,Ke){var qe=mn(je,"x","avgPool","float32");C(Mo(v,$e),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+$e+"'"});var Ye=qe,Je=!1;qe.rank===3&&(Je=!0,Ye=qe.as4D(1,qe.shape[0],qe.shape[1],qe.shape[2])),C(Ye.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+Ye.rank+"."}),Ke!=null&&C(A(Ge),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+Ke+" but got pad "+Ge+"."});var Qe=Io(Ye.shape,y,v,$e,Ge,Ke);if(Qe.filterWidth===1&&Qe.filterHeight===1&&S(Qe.inShape,Qe.outShape))return qe.clone();var st=Lt.runKernelFunc(function(Mt){return Mt.avgPool(Ye,Qe)},{x:Ye},function(Mt){return{x:function(){return function(on,sn,fn,hn,to,Xr){var co=mn(on,"dy","avgPoolBackprop"),lo=mn(sn,"input","avgPoolBackprop");C(lo.rank===co.rank,function(){return"Rank of input ("+lo.rank+") does not match rank of dy ("+co.rank+")"}),C(Mo(hn,to),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+hn+" and dilations '"+to+"'"});var fo=lo,Uo=co,mo=!1;lo.rank===3&&(mo=!0,fo=lo.as4D(1,lo.shape[0],lo.shape[1],lo.shape[2]),Uo=co.as4D(1,co.shape[0],co.shape[1],co.shape[2])),C(Uo.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+Uo.rank+"."}),C(fo.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+fo.rank+"."});var rd=Io(fo.shape,fn,hn,to,Xr),od=Lt.runKernelFunc(function(fd){return fd.avgPoolBackprop(Uo,fo,rd)},{dy4D:Uo,input4D:fo});return mo?od.as3D(od.shape[1],od.shape[2],od.shape[3]):od}(Mt,Ye,y,v,$e,Ge)}}},"AvgPool",Qe);return st=st.cast(qe.dtype),Je?st.as3D(st.shape[1],st.shape[2],st.shape[3]):st}var hl=An({maxPool_:function(je,y,v,$e,Ge){return cl(je,y,v,1,$e,Ge)}}),fl=An({avgPool_:function(je,y,v,$e,Ge){return ll(je,y,v,1,$e,Ge)}}),dl=An({pool_:function(je,y,v,$e,Ge,Ke){Ge==null&&(Ge=[1,1]),Ke==null&&(Ke=1),$e===0&&($e="valid");var qe=mn(je,"x","maxPool"),Ye=qe,Je=!1;qe.rank===3&&(Je=!0,Ye=qe.as4D(1,qe.shape[0],qe.shape[1],qe.shape[2])),C(Mo(Ke,Ge),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+Ke+" and dilations '"+Ge+"'"});var Qe,st=Io(Ye.shape,y,Ke,Ge,$e),Mt=[st.dilationHeight,st.dilationWidth];Qe=$e==="same"?function(fo,Uo){var mo=fo.map(function(fd,hd){return fd+(fd-1)*(Uo[hd]-1)}).map(function(fd){return fd-1}),rd=mo.map(function(fd){return Math.floor(fd/2)}),od=mo.map(function(fd,hd){return fd-rd[hd]});return mo.map(function(fd,hd){return[rd[hd],od[hd]]})}([st.filterHeight,st.filterWidth],Mt):[[0,0],[0,0]];var on=Mt[0]===1&&Mt[1]===1,sn=function(fo,Uo,mo){var rd=mo.map(function(Md){return Md[0]}),od=mo.map(function(Md){return Md[1]}),fd=fo.concat(rd,od),hd=Uo.map(function(Md,Fd){return(Md-fd[Fd]%Md)%Md}),vd=od.map(function(Md,Fd){return Md+hd[Fd]}),Td=Uo.map(function(Md,Fd){return[rd[Fd],vd[Fd]]}),Od=Uo.map(function(Md,Fd){return[0,hd[Fd]]});return[Td,Od]}([st.inHeight,st.inWidth],Mt,Qe),fn=sn[0],hn=sn[1],to=on?$e:"valid",Xr=on?Ye:Mr(Ye,Mt,fn),co=(v==="avg"?function(){return ll(Xr,y,Ke,1,to)}:function(){return cl(Xr,y,Ke,1,to)})(),lo=on?co:vr(co,Mt,hn);return Je?lo.as3D(lo.shape[1],lo.shape[2],lo.shape[3]):lo}}),pl=An({maxPool3d_:function(je,y,v,$e,Ge,Ke,qe){Ke===void 0&&(Ke="NDHWC");var Ye=mn(je,"x","maxPool3d"),Je=Ye,Qe=!1;Ye.rank===4&&(Qe=!0,Je=Ye.as5D(1,Ye.shape[0],Ye.shape[1],Ye.shape[2],Ye.shape[3])),qe==null&&(qe=[1,1,1]),C(Je.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+Je.rank+"."}),C(Ke==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+Ke}),C(Mo(v,qe),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+qe+"'"}),Ge!=null&&C(A($e),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+Ge+" but got pad "+$e+"."});var st=ko(Je.shape,y,v,qe,$e,Ge,Ke),Mt=Lt.runKernelFunc(function(on,sn){var fn=on.maxPool3d(Je,st);return sn([Je,fn]),fn},{x:Je},function(on,sn){var fn=sn[0],hn=sn[1];return{x:function(){return function(to,Xr,co,lo,fo,Uo,mo,rd){var od=mn(to,"dy","maxPool3dBackprop"),fd=mn(Xr,"input","maxPool3dBackprop"),hd=mn(co,"output","maxPool3dBackprop"),vd=od,Td=fd,Od=hd,Md=!1;fd.rank===4&&(Md=!0,vd=od.as5D(1,od.shape[0],od.shape[1],od.shape[2],od.shape[3]),Td=fd.as5D(1,fd.shape[0],fd.shape[1],fd.shape[2],fd.shape[3]),Od=hd.as5D(1,hd.shape[0],hd.shape[1],hd.shape[2],hd.shape[3])),C(vd.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+vd.rank+"."}),C(Td.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+Td.rank+"."}),C(Od.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Od.rank+"."}),Uo==null&&(Uo=[1,1,1]),C(Mo(fo,Uo),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+fo+" and dilations '"+Uo+"'"}),rd!=null&&C(A(mo),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+rd+" but got pad "+mo+"."});var Fd=ko(Td.shape,lo,fo,Uo,mo,rd),Ud=Lt.runKernelFunc(function(pd){return pd.maxPool3dBackprop(vd,Td,Od,Fd)},{dy5D:vd,input5D:Td});return Md?Ud.as4D(Ud.shape[1],Ud.shape[2],Ud.shape[3],Ud.shape[4]):Ud}(on,fn,hn,y,v,qe,$e,Ge)}}});return Qe?Mt.as4D(Mt.shape[1],Mt.shape[2],Mt.shape[3],Mt.shape[4]):Mt}}),vl=An({avgPool3d_:function(je,y,v,$e,Ge,Ke,qe){Ke===void 0&&(Ke="NDHWC");var Ye=mn(je,"x","avgPool3d","float32"),Je=Ye,Qe=!1;Ye.rank===4&&(Qe=!0,Je=Ye.as5D(1,Ye.shape[0],Ye.shape[1],Ye.shape[2],Ye.shape[3])),qe==null&&(qe=[1,1,1]),C(Je.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+Je.rank+"."}),C(Ke==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+Ke}),C(Mo(v,qe),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+qe+"'"}),Ge!=null&&C(A($e),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+Ge+" but got pad "+$e+"."});var st=ko(Je.shape,y,v,qe,$e,Ge,Ke),Mt=Lt.runKernelFunc(function(on){return on.avgPool3d(Je,st)},{x:Je},function(on){return{x:function(){return function(sn,fn,hn,to,Xr,co,lo){var fo=mn(sn,"dy","avgPool3dBackprop"),Uo=mn(fn,"input","avgPool3dBackprop"),mo=fo,rd=Uo,od=!1;Uo.rank===4&&(od=!0,mo=fo.as5D(1,fo.shape[0],fo.shape[1],fo.shape[2],fo.shape[3]),rd=Uo.as5D(1,Uo.shape[0],Uo.shape[1],Uo.shape[2],Uo.shape[3])),C(mo.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+mo.rank+"."}),C(rd.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+rd.rank+"."}),Xr==null&&(Xr=[1,1,1]),C(Mo(to,Xr),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+to+" and dilations '"+Xr+"'"}),lo!=null&&C(A(co),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+lo+" but got pad "+co+"."});var fd=ko(rd.shape,hn,to,Xr,co,lo),hd=Lt.runKernelFunc(function(vd){return vd.avgPool3dBackprop(mo,rd,fd)},{dy5D:mo,input5D:rd});return od?hd.as4D(hd.shape[1],hd.shape[2],hd.shape[3],hd.shape[4]):hd}(on,Je,y,v,qe,$e,Ge)}}});return Mt=Mt.cast(Je.dtype),Qe?Mt.as4D(Mt.shape[1],Mt.shape[2],Mt.shape[3],Mt.shape[4]):Mt}}),ml=An({slice_:function(je,y,v){var $e,Ge,Ke=mn(je,"x","slice");if(Ke.rank===0)throw new Error("Slicing scalar is not possible");($e=typeof y=="number"?[y].concat(new Array(Ke.rank-1).fill(0)):y.length<Ke.rank?y.concat(new Array(Ke.rank-y.length).fill(0)):y.slice()).forEach(function(Je){C(Je!==-1,function(){return"slice() does not support negative begin indexing."})}),Ge=(Ge=v==null?new Array(Ke.rank).fill(-1):typeof v=="number"?[v].concat(new Array(Ke.rank-1).fill(-1)):v.length<Ke.rank?v.concat(new Array(Ke.rank-v.length).fill(-1)):v).map(function(Je,Qe){return Je>=0?Je:(C(Je===-1,function(){return"Negative size values should be exactly -1 but got "+Je+" for the slice() size at index "+Qe+"."}),Ke.shape[Qe]-$e[Qe])}),eo(Ke,$e,Ge);var qe=Ke.shape,Ye={begin:$e,size:Ge};return Lt.runKernelFunc(function(Je){return Je.slice(Ke,$e,Ge)},{x:Ke},function(Je){for(var Qe=[],st=0;st<Je.rank;st++)Qe.push([$e[st],qe[st]-$e[st]-Ge[st]]);return{x:function(){return Je.pad(Qe)}}},"Slice",Ye)}}),gl=An({slice1d_:function(je,y,v){var $e=mn(je,"x","slice1d");return C($e.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+$e.rank+" tensor"}),ml($e,[y],[v])}}),yl=An({slice2d_:function(je,y,v){var $e=mn(je,"x","slice2d");return C($e.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+$e.rank+" tensor"}),ml($e,y,v)}}),xl=An({slice3d_:function(je,y,v){var $e=mn(je,"x","slice3d");return C($e.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+$e.rank+" tensor"}),ml($e,y,v)}}),bl=An({slice4d_:function(je,y,v){var $e=mn(je,"x","slice4d");return C($e.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+$e.rank+" tensor"}),ml($e,y,v)}});function wl(je,y,v,$e,Ge){return y.rank<v.rank&&(y=y.reshape(wn(y.shape,$e))),je.rank<v.rank&&(je=je.reshape(wn(je.shape,$e))),{x:function(){var Ke=je.mul(v.equal(y).cast(je.dtype));return Ge==null?Ke:Ke.transpose(Ge)}}}var Cl=An({all_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","all","bool"),Ge=O(y,$e.shape),Ke=Ge,qe=En(Ke,$e.rank);qe!=null&&($e=$e.transpose(qe),Ke=In(Ke.length,$e.rank));var Ye=Lt.runKernelFunc(function(Qe){return Qe.all($e,Ke)},{$x:$e});if(v){var Je=wn(Ye.shape,Ge);return Ye.reshape(Je)}return Ye}}),El=An({any_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","any","bool"),Ge=O(y,$e.shape),Ke=Ge,qe=En(Ke,$e.rank);qe!=null&&($e=$e.transpose(qe),Ke=In(Ke.length,$e.rank));var Ye=Lt.runKernelFunc(function(Qe){return Qe.any($e,Ke)},{$x:$e});if(v){var Je=wn(Ye.shape,Ge);return Ye.reshape(Je)}return Ye}}),Rl=An({argMax_:function(je,y){y===void 0&&(y=0);var v=mn(je,"x","argMax");y==null&&(y=0);var $e=O(y,v.shape),Ge=En($e,v.rank);Ge!=null&&(v=v.transpose(Ge),$e=In($e.length,v.rank));var Ke={axis:$e[0]},qe=[v];return Lt.runKernelFunc(function(Ye,Je){var Qe=Ye.argMax(v,$e[0]);return Je([v]),Qe},{x:v},function(Ye,Je){var Qe=Je[0];return{x:function(){return Xn(Qe)}}},"ArgMax",Ke,qe)}}),Il=An({argMin_:function(je,y){y===void 0&&(y=0);var v=mn(je,"x","argMin");y==null&&(y=0);var $e=O(y,v.shape),Ge=En($e,v.rank);return Ge!=null&&(v=v.transpose(Ge),$e=In($e.length,v.rank)),Lt.runKernelFunc(function(Ke,qe){var Ye=Ke.argMin(v,$e[0]);return qe([v]),Ye},{$x:v},function(Ke,qe){var Ye=qe[0];return{$x:function(){return Xn(Ye)}}})}}),kl=An({logSumExp_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","logSumExp"),Ge=O(y,$e.shape),Ke=$e.max(Ge,!0),qe=$e.sub(Ke).exp().sum(Ge).log(),Ye=Ke.reshape(qe.shape).add(qe);if(v){var Je=wn(Ye.shape,Ge);return Ye.reshape(Je)}return Ye}}),Sl=An({max_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","max"),Ge=$e,Ke=O(y,$e.shape),qe=Ke,Ye=En(qe,$e.rank);Ye!=null&&($e=$e.transpose(Ye),qe=In(qe.length,$e.rank));var Je=[$e],Qe=Lt.runKernelFunc(function(Mt,on){var sn=Mt.max($e,qe);return on([Ge,sn]),sn},{x:$e},function(Mt,on){return wl(Mt,on[1],on[0],Ke,Ye)},"Max",{axes:qe},Je,[!0]);if(v){var st=wn(Qe.shape,Ke);Qe=Qe.reshape(st)}return Qe}}),Al=An({mean_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","mean"),Ge=O(y,$e.shape),Ke=k(bn($e.shape,Ge)[1]);return vo(function(qe){var Ye=On(Ke);return{value:(Ye.dtype===qe.dtype?qe:qe.cast(Ye.dtype)).div(Ye).sum(y,v),gradFunc:function(Je){var Qe=qe.shape.slice();return Ge.forEach(function(st){Qe[st]=1}),Je.reshape(Qe).mul(zn(qe.shape,"float32")).div(Ke)}}})($e)}}),Dl=An({min_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","min"),Ge=$e,Ke=O(y,$e.shape),qe=Ke,Ye=En(qe,$e.rank);Ye!=null&&($e=$e.transpose(Ye),qe=In(qe.length,$e.rank));var Je=[$e],Qe=Lt.runKernelFunc(function(Mt,on){var sn=Mt.min($e,qe);return on([Ge,sn]),sn},{x:$e},function(Mt,on){return wl(Mt,on[1],on[0],Ke,Ye)},"Min",{axes:qe},Je,[!0]);if(v){var st=wn(Qe.shape,Ke);Qe=Qe.reshape(st)}return Qe}}),Tl=An({moments_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=O(y,(je=mn(je,"x","moments")).shape),Ge=je.mean($e,v),Ke=Ge.shape;v||(Ke=wn(Ge.shape,$e));var qe=je.toFloat().sub(Ge.reshape(Ke)).square();return{mean:Ge,variance:qe.mean($e,v)}}}),Nl=An({sum_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","sum");$e.dtype==="bool"&&($e=$e.toInt());var Ge=O(y,$e.shape);return vo(function(Ke){var qe=En(Ge,Ke.rank),Ye=Ge,Je=Ke;qe!=null&&(Je=Ke.transpose(qe),Ye=In(Ye.length,Ke.rank));var Qe=function(sn){var fn=Ke.shape.slice();return Ge.forEach(function(hn){fn[hn]=1}),sn.reshape(fn).mul(zn(Ke.shape,"float32"))},st={axes:Ye},Mt=Lt.runKernelFunc(function(sn){return sn.sum(Je,Ye)},{x:Je},function(sn){return{x:function(){return Qe(sn)}}},"Sum",st);if(v){var on=wn(Mt.shape,Ge);Mt=Mt.reshape(on)}return{value:Mt,gradFunc:Qe}})($e)}}),Fl=An({prod_:function(je,y,v){y===void 0&&(y=null),v===void 0&&(v=!1);var $e=mn(je,"x","prod");$e.dtype==="bool"&&($e=$e.toInt());var Ge=O(y,$e.shape),Ke=En(Ge,$e.rank),qe=Ge,Ye=$e;Ke!=null&&(Ye=$e.transpose(Ke),qe=In(qe.length,$e.rank));var Je=Lt.runKernelFunc(function(st){return st.prod(Ye,qe)},{permutedX:Ye});if(v){var Qe=wn(Je.shape,Ge);Je=Je.reshape(Qe)}return Je}}),_l=An({elu_:function(je){var y=mn(je,"x","elu");return Lt.runKernelFunc(function(v,$e){var Ge=v.elu(y);return $e([Ge]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){return Lt.runKernelFunc(function(Ke){return Ke.eluDer(v,Ge)},{dy:v,y:Ge})}}})}}),Ol=An({leakyRelu_:function(je,y){y===void 0&&(y=.2);var v=mn(je,"x","leakyRelu");return hc(On(y).mul(v),v)}}),Ml=An({prelu_:function(je,y){var v=mn(je,"x","prelu"),$e=mn(y,"alpha","prelu");return Lt.runKernelFunc(function(Ge,Ke){var qe=Ge.prelu(v,$e);return Ke([v,$e]),qe},{x:v,alpha:$e},function(Ge,Ke){var qe=Ke[0],Ye=Ke[1],Je=qe.greater(0);return{x:function(){return ec(Je,Ge,Ge.mul(Ye))},alpha:function(){var Qe=ec(Je,Xn(Ge),Ge.mul(qe)),st=Eo(Ye.shape,Ge.shape);return st.length>0&&(Qe=Qe.sum(st)),Qe.reshape(Ye.shape)}}},"Prelu")}}),Bl=An({relu_:function(je){var y=mn(je,"x","relu");return y.dtype==="bool"?y.toInt():Lt.runKernelFunc(function(v,$e){var Ge=v.relu(y);return $e([y]),Ge},{x:y},function(v,$e){var Ge=$e[0];return{x:function(){return v.mulStrict(Ge.step().toFloat())}}},"Relu")}}),Pl=An({relu6_:function(je){var y=mn(je,"x","relu6");return y.dtype==="bool"?y.toInt():Lt.runKernelFunc(function(v,$e){var Ge=v.relu6(y);return $e([y]),Ge},{x:y},function(v,$e){var Ge=$e[0],Ke=Ge.lessEqual(6).mul(Ge.step());return{x:function(){return v.mulStrict(Ke.toFloat())}}},"Relu6")}}),Ll=An({selu_:function(je){var y=mn(je,"x","selu");return Lt.runKernelFunc(function(v,$e){var Ge=v.selu(y);return $e([y]),Ge},{$x:y},function(v,$e){var Ge=$e[0];return{$x:function(){var Ke=Ge.greater(On(0)),qe=On(bs),Ye=On(ws),Je=v.mul(Ye),Qe=v.mul(qe).mul(Ge.toFloat().exp());return ec(Ke,Je,Qe)}}})}}),Wl=An({transpose_:function(je,y){var v=mn(je,"x","transpose");if(y==null&&(y=v.shape.map(function(Ge,Ke){return Ke}).reverse()),C(v.rank===y.length,function(){return"Error in transpose: rank of input "+v.rank+" must match length of perm "+y+"."}),y.forEach(function(Ge){C(Ge>=0&&Ge<v.rank,function(){return"All entries in 'perm' must be between 0 and "+(v.rank-1)+" but got "+y})}),v.rank<=1)return v.clone();var $e={perm:y};return Lt.runKernelFunc(function(Ge){return Ge.transpose(v,y)},{x:v},function(Ge){var Ke=Rn(y);return{x:function(){return Ge.transpose(Ke)}}},"Transpose",$e)}}),Ul=An({localResponseNormalization_:function(je,y,v,$e,Ge){y===void 0&&(y=5),v===void 0&&(v=1),$e===void 0&&($e=1),Ge===void 0&&(Ge=.5);var Ke=mn(je,"x","localResponseNormalization");C(Ke.rank===4||Ke.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+Ke.rank+"."}),C(A(y),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+y+"."});var qe=Ke,Ye=!1;Ke.rank===3&&(Ye=!0,qe=Ke.as4D(1,Ke.shape[0],Ke.shape[1],Ke.shape[2]));var Je=Lt.runKernelFunc(function(Qe,st){var Mt=Qe.localResponseNormalization4D(qe,y,v,$e,Ge);return st([qe,Mt]),Mt},{x4D:qe},function(Qe,st){var Mt=st[0],on=st[1];return{x4D:function(){return Lt.runKernelFunc(function(sn){return sn.LRNGrad(Qe,Mt,on,y,v,$e,Ge)},{})}}});return Ye?Je.as3D(Je.shape[1],Je.shape[2],Je.shape[3]):Je}}),Vl=An({norm_:function(je,y,v,$e){y===void 0&&(y="euclidean"),v===void 0&&(v=null),$e===void 0&&($e=!1);var Ge=function Ye(Je,Qe,st){if(st===void 0&&(st=null),Je.rank===0)return Je.abs();if(Je.rank!==1&&st===null)return Ye(Je.reshape([-1]),Qe,st);if(Je.rank===1||typeof st=="number"||Array.isArray(st)&&st.length===1){if(Qe===1)return Je.abs().sum(st);if(Qe===1/0)return Je.abs().max(st);if(Qe===-1/0)return Je.abs().min(st);if(Qe==="euclidean"||Qe===2)return Je.abs().pow(On(2,"int32")).sum(st).sqrt();throw new Error("Error in norm: invalid ord value: "+Qe)}if(Array.isArray(st)&&st.length===2){if(Qe===1)return Je.abs().sum(st[0]).max(st[1]-1);if(Qe===1/0)return Je.abs().sum(st[1]).max(st[0]);if(Qe===-1/0)return Je.abs().sum(st[1]).min(st[0]);if(Qe==="fro"||Qe==="euclidean")return Je.square().sum(st).sqrt();throw new Error("Error in norm: invalid ord value: "+Qe)}throw new Error("Error in norm: invalid axis: "+st)}(je=mn(je,"x","norm"),y,v),Ke=Ge.shape;if($e){var qe=O(v,je.shape);Ke=wn(Ge.shape,qe)}return Ge.reshape(Ke)}}),zl=An({basicLSTMCell_:function(je,y,v,$e,Ge,Ke){var qe=mn(je,"forgetBias","basicLSTMCell"),Ye=mn(y,"lstmKernel","basicLSTMCell"),Je=mn(v,"lstmBias","basicLSTMCell"),Qe=mn($e,"data","basicLSTMCell"),st=mn(Ge,"c","basicLSTMCell"),Mt=mn(Ke,"h","basicLSTMCell"),on=Qe.concat(Mt,1).matMul(Ye).add(Je),sn=on.shape[0],fn=on.shape[1]/4,hn=[sn,fn],to=on.slice([0,0],hn),Xr=on.slice([0,fn],hn),co=on.slice([0,2*fn],hn),lo=on.slice([0,3*fn],hn),fo=to.sigmoid().mulStrict(Xr.tanh()).addStrict(st.mulStrict(qe.add(co).sigmoid())),Uo=fo.tanh().mulStrict(lo.sigmoid());return[fo,Uo]}}),Gl=An({multiRNNCell_:function(je,y,v,$e){for(var Ge=mn(y,"data","multiRNNCell"),Ke=gn(v,"c","multiRNNCell"),qe=gn($e,"h","multiRNNCell"),Ye=Ge,Je=[],Qe=0;Qe<je.length;Qe++){var st=je[Qe](Ye,Ke[Qe],qe[Qe]);Je.push(st[0]),Je.push(st[1]),Ye=st[1]}var Mt=[],on=[];for(Qe=0;Qe<Je.length;Qe+=2)Mt.push(Je[Qe]),on.push(Je[Qe+1]);return[Mt,on]}}),Hl=An({movingAverage_:function(je,y,v,$e,Ge){Ge===void 0&&(Ge=!0);var Ke=mn(je,"v","movingAverage"),qe=mn(y,"x","movingAverage"),Ye=mn(v,"decay","movingAverage");Ft(Ke,qe),C(S(Ke.shape,qe.shape),function(){return"Shape mismatch in v and x"});var Je=On(1),Qe=Je.sub(Ye),st=qe.sub(Ke).mul(Qe);if(Ge){C($e!=null,function(){return"When using zeroDebias: true, step is required."});var Mt=mn($e,"step","movingAverage");st=st.div(Je.sub(xc(Ye,Mt)))}return Ke.add(st)}}),ql=An({stridedSlice_:function(je,y,v,$e,Ge,Ke,qe,Ye,Je){if(Ge===void 0&&(Ge=0),Ke===void 0&&(Ke=0),qe===void 0&&(qe=0),Ye===void 0&&(Ye=0),Je===void 0&&(Je=0),$e==null&&($e=new Array(y.length)),qe!==0)throw new Error("ellipsis mask is not yet supported");var Qe=mn(je,"x","stridedSlice"),st=no(Ye),Mt=Qe.shape.slice();st.forEach(function(to){y[to]=0,v[to]=1,Mt.splice(to,0,1)}),Qe=Qe.reshape(Mt);for(var on=0;on<Qe.rank;on++)y[on]=oo(Ge,y,$e,Qe.shape,on),v[on]=ao(Ke,v,$e,Qe.shape,on),$e[on]=$e[on]||1;var sn=no(Je);sn.forEach(function(to){v[to]=y[to]+1,$e[to]=1});var fn=ro(y,v,$e),hn=fn.filter(function(to,Xr){return sn.indexOf(Xr)===-1});return $e.every(function(to){return to===1})?ml(Qe,y,fn).reshape(hn):Lt.runKernelFunc(function(to){return to.stridedSlice(Qe,y,v,$e)},{$x:Qe}).reshape(hn)}}),Kl=An({topk_:function(je,y,v){y===void 0&&(y=1),v===void 0&&(v=!0);var $e=mn(je,"x","topk");if($e.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var Ge=$e.shape[$e.shape.length-1];if(y>Ge)throw new Error("'k' passed to topk() must be <= the last dimension ("+Ge+") but got "+y);var Ke=Lt.runKernelFunc(function(qe){return qe.topk($e,y,v)},{$x:$e});return{values:Ke[0],indices:Ke[1]}}}),jl=An({scatterND_:function(je,y,v){var $e=mn(je,"indices","scatterND","int32"),Ge=mn(y,"updates","scatterND");return Jr(Ge,$e,v),Lt.runKernelFunc(function(Ke){return Ke.scatterND($e,Ge,v)},{indices:$e,updates:Ge},null,"ScatterNd",{shape:v})}}),Xl=An({fft_:function(je){C(je.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+je.dtype+"."});var y=je.shape[je.shape.length-1],v=je.size/y,$e=je.as2D(v,y);return Lt.runKernelFunc(function(Ge){return Ge.fft($e)},{input:je}).reshape(je.shape)}}),Yl=An({ifft_:function(je){C(je.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+je.dtype+"."});var y=je.shape[je.shape.length-1],v=je.size/y,$e=je.as2D(v,y);return Lt.runKernelFunc(function(Ge){return Ge.ifft($e)},{input:je}).reshape(je.shape)}}),$l=An({rfft_:function(je,y){C(je.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+je.dtype});var v,$e=je.shape[je.shape.length-1],Ge=je.size/$e;if(y!=null&&y<$e){var Ke=je.shape.map(function(Xr){return 0}),qe=je.shape.map(function(Xr){return Xr});qe[je.shape.length-1]=y,v=je.slice(Ke,qe),$e=y}else if(y!=null&&y>$e){var Ye=je.shape.map(function(Xr){return Xr});Ye[je.shape.length-1]=y-$e,v=je.concat(Gn(Ye),je.shape.length-1),$e=y}else v=je;var Je=v.zerosLike(),Qe=Dn(v,Je).as2D(Ge,$e),st=Xl(Qe),Mt=Math.floor($e/2)+1,on=Tn(st),sn=Nn(st),fn=on.split([Mt,$e-Mt],on.shape.length-1),hn=sn.split([Mt,$e-Mt],sn.shape.length-1),to=v.shape.slice();return to[v.shape.length-1]=Mt,Dn(fn[0],hn[0]).reshape(to)}}),Ql=An({irfft_:function(je){var y=je.shape[je.shape.length-1],v=je.size/y;if(y<=2){var $e=je.as2D(v,y),Ge=Yl($e);return Tn(Ge)}var Ke=[v,2*(y-1)],qe=Tn(je).as2D(v,y),Ye=Nn(je).as2D(v,y),Je=qe.slice([0,1],[v,y-2]).reverse(1),Qe=Ye.slice([0,1],[v,y-2]).reverse(1).mul(On(-1)),st=qe.concat(Je,1),Mt=Ye.concat(Qe,1);return $e=Dn(st,Mt).as2D(Ke[0],Ke[1]),Ge=Yl($e),Tn(Ge)}}),Jl=Object.freeze({fft:Xl,ifft:Yl,rfft:$l,irfft:Ql}),Zl=An({sparseToDense_:function(je,y,v,$e){$e===void 0&&($e=0);var Ge=mn(je,"sparseIndices","sparseToDense","int32"),Ke=mn(y,"sparseValues","sparseToDense"),qe=mn($e,"defaultValue","sparseToDense",Ke.dtype);return function(Ye,Je,Qe,st){if(Ye.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+Ye.dtype+".");if(Ye.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+Ye.shape+".");var Mt=Ye.rank>0?Ye.shape[0]:1,on=Ye.rank>1?Ye.shape[1]:1;if(Qe.length!==on)throw new Error("outputShape has incorrect number of elements:, "+Qe.length+", should be: "+on+".");var sn=Je.size;if(Je.rank!==0&&(Je.rank!==1||sn!==Mt))throw new Error("sparseValues has incorrect shape "+Je.shape+", should be [] or ["+Mt+"]");if(Je.dtype!==st.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(Ge,Ke,v,qe),Lt.runKernelFunc(function(Ye){return Ye.sparseToDense(Ge,Ke,v,qe)},{$sparseIndices:Ge,$sparseValues:Ke,$defaultValue:qe})}}),th=An({gatherND_:function(je,y){var v=mn(y,"indices","gatherND","int32"),$e=mn(je,"x","gatherND");return Lt.runKernelFunc(function(Ge){return Ge.gatherND($e,v)},{x:$e,indices:v},null,"GatherNd")}}),eh=An({diag_:function(je){var y=mn(je,"x","diag").flatten(),v=je.shape.concat(je.shape);return Lt.runKernelFunc(function($e){return $e.diag(y)},{$x:y}).reshape(v)}}),nh=An({dropout_:function(je,y,v,$e){var Ge=mn(je,"x","dropout");if(C(Ge.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+Ge.dtype+" tensor instead."}),C(y>=0&&y<1,function(){return"rate must be a float in the range [0, 1), but got "+y+"."}),y===0)return je instanceof wt?Ge.clone():Ge;var Ke=function(Je,Qe){if(Qe==null)return Je.shape.slice();if(S(Je.shape,Qe))return Qe;if(Je.shape.length===Qe.length){for(var st=[],Mt=0;Mt<Je.shape.length;Mt++)Qe[Mt]==null&&Je.shape[Mt]!=null?st.push(Je.shape[Mt]):st.push(Qe[Mt]);return st}return Qe}(Ge,v),qe=1-y,Ye=_r(Ke,0,1,"float32",$e).add(qe).floor().div(qe);return Ge.mul(Ye)}});function rh(je,y,v){for(var $e=1-je%2,Ge=new Float32Array(je),Ke=0;Ke<je;++Ke){var qe=2*Math.PI*Ke/(je+$e-1);Ge[Ke]=y-v*Math.cos(qe)}return Mn(Ge,"float32")}var oh=An({hannWindow_:function(je){return rh(je,.5,.5)}}),ah=An({hammingWindow_:function(je){return rh(je,.54,.46)}}),ih=An({frame_:function(je,y,v,$e,Ge){$e===void 0&&($e=!1),Ge===void 0&&(Ge=0);for(var Ke=0,qe=[];Ke+y<=je.size;)qe.push(ml(je,Ke,y)),Ke+=v;if($e)for(;Ke<je.size;){var Ye=Ke+y-je.size,Je=Yn([ml(je,Ke,y-Ye),Hn([Ye],Ge)]);qe.push(Je),Ke+=v}return qe.length===0?Bn([],[0,y]):Yn(qe).as2D(qe.length,y)}}),sh=An({stft_:function(je,y,v,$e,Ge){var Ke;Ge===void 0&&(Ge=oh),$e==null&&(Ke=y,$e=Math.floor(Math.pow(2,Math.ceil(Math.log(Ke)/Math.log(2)))));for(var qe=ih(je,y,v),Ye=gc(qe,Ge(y)),Je=[],Qe=0;Qe<qe.shape[0];Qe++)Je.push($l(Ye.slice([Qe,0],[1,y]),$e));return Yn(Je)}}),uh=Object.freeze({hannWindow:oh,hammingWindow:ah,frame:ih,stft:sh}),ch,lh=function(je,y,v){return v===void 0&&(v=1),n(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to;return r(this,function(Xr){switch(Xr.label){case 0:return $e=mn(je,"predictions","inTopK"),Ge=mn(y,"targets","inTopK"),C($e.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+$e.rank}),C($e.rank-1===Ge.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+$e.rank+" and targets rank "+Ge.rank}),E($e.shape.slice(0,$e.shape.length-1),Ge.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),Ke=$e.shape[$e.shape.length-1],C(v>0&&v<=Ke,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+Ke+"), but got "+v}),[4,$e.data()];case 1:return qe=Xr.sent(),[4,Ge.data()];case 2:for(Ye=Xr.sent(),Je=[qe.length/Ke,Ke],st=Je[1],Mt=B("bool",Qe=Je[0]),on=0;on<Qe;on++){for(sn=on*st,fn=qe.subarray(sn,sn+st),hn=[],to=0;to<fn.length;to++)hn.push({value:fn[to],index:to});for(hn.sort(function(co,lo){return lo.value-co.value}),Mt[on]=0,to=0;to<v;to++)if(hn[to].index===Ye[on]){Mt[on]=1;break}}return je!==$e&&$e.dispose(),y!==Ge&&Ge.dispose(),[2,Fn(Mt,Ge.shape,"bool")]}})})};(function(je){je[je.NONE=0]="NONE",je[je.MEAN=1]="MEAN",je[je.SUM=2]="SUM",je[je.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ch||(ch={}));var hh=An({absoluteDifference_:function(je,y,v,$e){$e===void 0&&($e=ch.SUM_BY_NONZERO_WEIGHTS);var Ge=mn(je,"labels","absoluteDifference"),Ke=mn(y,"predictions","absoluteDifference"),qe=null;v!=null&&(qe=mn(v,"weights","absoluteDifference")),E(Ge.shape,Ke.shape,"Error in absoluteDifference: ");var Ye=Ge.sub(Ke).abs();return fh(Ye,qe,$e)}}),fh=An({computeWeightedLoss_:function(je,y,v){v===void 0&&(v=ch.SUM_BY_NONZERO_WEIGHTS);var $e=mn(je,"losses","computeWeightedLoss"),Ge=null;y!=null&&(Ge=mn(y,"weights","computeWeightedLoss"));var Ke=Ge==null?$e:$e.mul(Ge);if(v===ch.NONE)return Ke;if(v===ch.SUM)return Ke.sum();if(v===ch.MEAN){if(Ge==null)return Ke.mean();var qe=$e.size/Ge.size,Ye=Ke.sum().div(Ge.sum());return qe>1?Ye.div(On(qe)):Ye}if(v===ch.SUM_BY_NONZERO_WEIGHTS){if(Ge==null)return Ke.sum().div(On($e.size));var Je=Ge.mul(zn($e.shape)).notEqual(On(0)).sum().toFloat();return Ke.sum().div(Je)}throw Error("Unknown reduction: "+v)}}),dh=An({cosineDistance_:function(je,y,v,$e,Ge){Ge===void 0&&(Ge=ch.SUM_BY_NONZERO_WEIGHTS);var Ke=mn(je,"labels","cosineDistance"),qe=mn(y,"predictions","cosineDistance"),Ye=null;$e!=null&&(Ye=mn($e,"weights","cosineDistance")),E(Ke.shape,qe.shape,"Error in cosineDistance: ");var Je=On(1).sub(Ke.mul(qe).sum(v,!0));return fh(Je,Ye,Ge)}}),ph=An({hingeLoss_:function(je,y,v,$e){$e===void 0&&($e=ch.SUM_BY_NONZERO_WEIGHTS);var Ge=mn(je,"labels","hingeLoss"),Ke=mn(y,"predictions","hingeLoss"),qe=null;v!=null&&(qe=mn(v,"weights","hingeLoss")),E(Ge.shape,Ke.shape,"Error in hingeLoss: ");var Ye=On(1);Ge=On(2).mul(Ge).sub(Ye);var Je=Ye.sub(Ge.mul(Ke)).relu();return fh(Je,qe,$e)}}),vh=An({huberLoss_:function(je,y,v,$e,Ge){$e===void 0&&($e=1),Ge===void 0&&(Ge=ch.SUM_BY_NONZERO_WEIGHTS);var Ke=mn(je,"labels","huberLoss"),qe=mn(y,"predictions","huberLoss"),Ye=null;v!=null&&(Ye=mn(v,"weights","huberLoss")),E(Ke.shape,qe.shape,"Error in huberLoss: ");var Je=On($e),Qe=qe.sub(Ke).abs(),st=dc(Qe,Je),Mt=Qe.sub(st),on=On(.5).mul(st.square()).add(Je.mul(Mt));return fh(on,Ye,Ge)}}),mh=An({logLoss_:function(je,y,v,$e,Ge){$e===void 0&&($e=1e-7),Ge===void 0&&(Ge=ch.SUM_BY_NONZERO_WEIGHTS);var Ke=mn(je,"labels","logLoss"),qe=mn(y,"predictions","logLoss"),Ye=null;v!=null&&(Ye=mn(v,"weights","logLoss")),E(Ke.shape,qe.shape,"Error in logLoss: ");var Je=On(1),Qe=On($e),st=Ke.mul(qe.add(Qe).log()).neg().sub(Je.sub(Ke).mul(Je.sub(qe).add(Qe).log()));return fh(st,Ye,Ge)}}),gh=An({meanSquaredError_:function(je,y,v,$e){$e===void 0&&($e=ch.SUM_BY_NONZERO_WEIGHTS);var Ge=mn(je,"labels","meanSquaredError"),Ke=mn(y,"predictions","meanSquaredError"),qe=null;v!=null&&(qe=mn(v,"weights","meanSquaredError")),E(Ge.shape,Ke.shape,"Error in meanSquaredError: ");var Ye=Ge.squaredDifference(Ke);return fh(Ye,qe,$e)}}),yh=An({sigmoidCrossEntropy_:function(je,y,v,$e,Ge){$e===void 0&&($e=0),Ge===void 0&&(Ge=ch.SUM_BY_NONZERO_WEIGHTS);var Ke=mn(je,"multiClassLabels","sigmoidCrossEntropy"),qe=mn(y,"logits","sigmoidCrossEntropy"),Ye=null;if(v!=null&&(Ye=mn(v,"weights","sigmoidCrossEntropy")),E(Ke.shape,qe.shape,"Error in sigmoidCrossEntropy: "),$e>0){var Je=On($e),Qe=On(1),st=On(.5);Ke=Ke.mul(Qe.sub(Je)).add(st.mul(Je))}var Mt=function(on,sn){var fn=mn(on,"labels","sigmoidCrossEntropyWithLogits"),hn=mn(sn,"logits","sigmoidCrossEntropyWithLogits");E(fn.shape,hn.shape,"Error in sigmoidCrossEntropyWithLogits: ");var to=hn.relu(),Xr=hn.mul(fn),co=hn.abs().neg().exp().log1p();return to.sub(Xr).add(co)}(Ke,qe);return fh(Mt,Ye,Ge)}}),xh=An({softmaxCrossEntropy_:function(je,y,v,$e,Ge){$e===void 0&&($e=0),Ge===void 0&&(Ge=ch.SUM_BY_NONZERO_WEIGHTS);var Ke=mn(je,"onehotLabels","softmaxCrossEntropy"),qe=mn(y,"logits","softmaxCrossEntropy"),Ye=null;if(v!=null&&(Ye=mn(v,"weights","softmaxCrossEntropy")),E(Ke.shape,qe.shape,"Error in softmaxCrossEntropy: "),$e>0){var Je=On($e),Qe=On(1),st=On(Ke.shape[1]);Ke=Ke.mul(Qe.sub(Je)).add(Je.div(st))}var Mt=function(on,sn,fn){if(fn===void 0&&(fn=-1),fn===-1&&(fn=sn.rank-1),fn!==sn.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+sn.rank+" and dim was "+fn);return vo(function(hn,to,Xr){var co=to.logSumExp([fn],!0),lo=to.toFloat().sub(co);return Xr([hn,lo]),{value:lo.mul(hn).neg().sum([fn]),gradFunc:function(fo,Uo){var mo=Uo[0],rd=Uo[1],od=wn(fo.shape,[fn]);return[fo.reshape(od).mul(mo.toFloat().sub(rd.exp())),fo.reshape(od).mul(rd.exp().sub(mo.toFloat()))]}}})(on,sn)}(Ke,qe);return fh(Mt,Ye,Ge)}}),bh=Object.freeze({get Reduction(){return ch},absoluteDifference:hh,computeWeightedLoss:fh,cosineDistance:dh,hingeLoss:ph,huberLoss:vh,logLoss:mh,meanSquaredError:gh,sigmoidCrossEntropy:yh,softmaxCrossEntropy:xh});function wh(je,y){return y===void 0&&(y=!1),Lt.tidy(function(){if(je.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+je.shape.length+"D Tensor.");for(var v=je.shape[0],$e=je.shape[1],Ge=Cr(v),Ke=je.clone(),qe=Bn([[1]],[1,1]),Ye=qe.clone(),Je=v>=$e?$e:v,Qe=function(Mt){var on,sn=Ke,fn=Ye,hn=Ge;on=Lt.tidy(function(){var to=Ke.slice([Mt,Mt],[v-Mt,1]),Xr=to.norm(),co=Ke.slice([Mt,Mt],[1,1]),lo=Bn([[-1]]).where(co.greater(0),Bn([[1]])),fo=co.sub(lo.mul(Xr)),Uo=to.div(fo);Ye=Uo.shape[0]===1?qe.clone():qe.concat(Uo.slice([1,0],[Uo.shape[0]-1,Uo.shape[1]]),0);var mo=lo.matMul(fo).div(Xr).neg(),rd=Ke.slice([Mt,0],[v-Mt,$e]),od=mo.mul(Ye);if(Mt===0)Ke=rd.sub(od.matMul(Ye.transpose().matMul(rd)));else{var fd=rd.sub(od.matMul(Ye.transpose().matMul(rd)));Ke=Ke.slice([0,0],[Mt,$e]).concat(fd,0)}var hd=Ge.slice([0,Mt],[v,Ge.shape[1]-Mt]);if(Mt===0)Ge=hd.sub(hd.matMul(Ye).matMul(od.transpose()));else{var vd=hd.sub(hd.matMul(Ye).matMul(od.transpose()));Ge=Ge.slice([0,0],[v,Mt]).concat(vd,1)}return[Ye,Ke,Ge]}),Ye=on[0],Ke=on[1],Ge=on[2],tn([sn,fn,hn])},st=0;st<Je;++st)Qe(st);return!y&&v>$e&&(Ge=Ge.slice([0,0],[v,$e]),Ke=Ke.slice([0,0],[$e,$e])),[Ge,Ke]})}var Ch=An({bandPart_:function(je,y,v){if(y%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+y+".");if(v%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+v+".");var $e=mn(je,"a","bandPart");if($e.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+$e.rank+".");var Ge=$e.shape,Ke=$e.shape.slice(-2),qe=Ke[0],Ye=Ke[1];if(!(y<=qe))throw new Error("bandPart(): numLower ("+y+") must not be greater than the number of rows ("+qe+").");if(!(v<=Ye))throw new Error("bandPart(): numUpper ("+v+") must not be greater than the number of columns ("+Ye+").");y<0&&(y=qe),v<0&&(v=Ye);var Je=Kn(0,qe,1,"int32").reshape([-1,1]),Qe=Kn(0,Ye,1,"int32"),st=Cc(Je,Qe),Mt=Qu(st.lessEqual(On(+y,"int32")),st.greaterEqual(On(-v,"int32"))),on=Gn([qe,Ye],$e.dtype);return Pr(Ur($e.reshape([-1,qe,Ye])).map(function(sn){return ec(Mt,sn,on)})).reshape(Ge)}}),Eh=An({gramSchmidt_:function(je){var y;if(Array.isArray(je)){y=!1,C(je!=null&&je.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var v=je[0].shape[0],$e=function(Je){C(je[Je].shape[0]===v,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+je[Je].shape[0]+" vs. "+v+")"})},Ge=1;Ge<je.length;++Ge)$e(Ge)}else y=!0,je=tr(je,je.shape[0],0).map(function(Je){return Br(Je,[0])});C(je.length<=je[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+je.length+") exceeds number of dimensions ("+je[0].shape[0]+")."});var Ke=[],qe=je,Ye=function(Je){Ke.push(Lt.tidy(function(){var Qe=qe[Je];if(Je>0)for(var st=0;st<Je;++st){var Mt=Nl(Ke[st].mulStrict(Qe)).mul(Ke[st]);Qe=Qe.sub(Mt)}return Qe.div(Vl(Qe,"euclidean"))}))};for(Ge=0;Ge<je.length;++Ge)Ye(Ge);return y?Pr(Ke,0):Ke}}),Rh=An({qr_:function(je,y){if(y===void 0&&(y=!1),je.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+je.rank);if(je.rank===2)return wh(je,y);var v=je.shape.slice(0,je.shape.length-2).reduce(function(qe,Ye){return qe*Ye}),$e=Ur(je.reshape([v,je.shape[je.shape.length-2],je.shape[je.shape.length-1]]),0),Ge=[],Ke=[];return $e.forEach(function(qe){var Ye=wh(qe,y),Je=Ye[0],Qe=Ye[1];Ge.push(Je),Ke.push(Qe)}),[Pr(Ge,0).reshape(je.shape),Pr(Ke,0).reshape(je.shape)]}}),Ih=Object.freeze({bandPart:Ch,gramSchmidt:Eh,qr:Rh});function kh(je,y,v,$e,Ge,Ke){$e==null&&($e=.5),Ge==null&&(Ge=Number.NEGATIVE_INFINITY),Ke==null&&(Ke=0);var qe=je.shape[0];return v=Math.min(v,qe),C(0<=$e&&$e<=1,function(){return"iouThreshold must be in [0, 1], but was '"+$e+"'"}),C(je.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+je.rank+"'"}),C(je.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+je.shape[1]}),C(y.rank===1,function(){return"scores must be a 1D tensor"}),C(y.shape[0]===qe,function(){return"scores has incompatible shape with boxes. Expected "+qe+", but was "+y.shape[0]}),C(0<=Ke&&Ke<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+Ke+"'"}),{maxOutputSize:v,iouThreshold:$e,scoreThreshold:Ge,softNmsSigma:Ke}}var Sh=An({resizeBilinear_:function(je,y,v){v===void 0&&(v=!1);var $e=mn(je,"images","resizeBilinear");C($e.rank===3||$e.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+$e.rank+"."}),C(y.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+y+"."});var Ge=$e,Ke=!1;$e.rank===3&&(Ke=!0,Ge=$e.as4D(1,$e.shape[0],$e.shape[1],$e.shape[2]));var qe=y[0],Ye=y[1],Je=Lt.runKernelFunc(function(Qe,st){return st([Ge]),Qe.resizeBilinear(Ge,qe,Ye,v)},{x:Ge},function(Qe,st){return{x:function(){return Lt.runKernelFunc(function(Mt){return Mt.resizeBilinearBackprop(Qe,st[0],v)},{})}}},"ResizeBilinear",{alignCorners:v,newHeight:qe,newWidth:Ye});return Ke?Je.as3D(Je.shape[1],Je.shape[2],Je.shape[3]):Je}}),Ah=An({resizeNearestNeighbor_:function(je,y,v){v===void 0&&(v=!1);var $e=mn(je,"images","resizeNearestNeighbor");C($e.rank===3||$e.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+$e.rank+"."}),C(y.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+y+"."}),C($e.dtype==="float32"||$e.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var Ge=$e,Ke=!1;$e.rank===3&&(Ke=!0,Ge=$e.as4D(1,$e.shape[0],$e.shape[1],$e.shape[2]));var qe=y[0],Ye=y[1],Je=Lt.runKernelFunc(function(Qe,st){return st([Ge]),Qe.resizeNearestNeighbor(Ge,qe,Ye,v)},{batchImages:Ge},function(Qe,st){return{batchImages:function(){return Lt.runKernelFunc(function(Mt){return Mt.resizeNearestNeighborBackprop(Qe,st[0],v)},{})}}});return Ke?Je.as3D(Je.shape[1],Je.shape[2],Je.shape[3]):Je}}),Dh=An({nonMaxSuppression_:function(je,y,v,$e,Ge){$e===void 0&&($e=.5),Ge===void 0&&(Ge=Number.NEGATIVE_INFINITY);var Ke=mn(je,"boxes","nonMaxSuppression"),qe=mn(y,"scores","nonMaxSuppression"),Ye=kh(Ke,qe,v,$e,Ge);v=Ye.maxOutputSize,$e=Ye.iouThreshold,Ge=Ye.scoreThreshold;var Je={maxOutputSize:v,iouThreshold:$e,scoreThreshold:Ge};return Lt.runKernelFunc(function(Qe){return Qe.nonMaxSuppression(Ke,qe,v,$e,Ge)},{boxes:Ke,scores:qe},null,"NonMaxSuppressionV3",Je)}}),Th=function(je,y,v,$e,Ge){return $e===void 0&&($e=.5),Ge===void 0&&(Ge=Number.NEGATIVE_INFINITY),n(this,void 0,void 0,function(){var Ke,qe,Ye,Je,Qe,st,Mt;return r(this,function(on){switch(on.label){case 0:return Ke=mn(je,"boxes","nonMaxSuppressionAsync"),qe=mn(y,"scores","nonMaxSuppressionAsync"),Ye=kh(Ke,qe,v,$e,Ge),v=Ye.maxOutputSize,$e=Ye.iouThreshold,Ge=Ye.scoreThreshold,[4,Promise.all([Ke.data(),qe.data()])];case 1:return Je=on.sent(),Qe=Je[0],st=Je[1],Mt=jo(Qe,st,v,$e,Ge),Ke!==je&&Ke.dispose(),qe!==y&&qe.dispose(),[2,Mt]}})})},Nh=An({nonMaxSuppressionWithScore_:function(je,y,v,$e,Ge,Ke){$e===void 0&&($e=.5),Ge===void 0&&(Ge=Number.NEGATIVE_INFINITY),Ke===void 0&&(Ke=0);var qe=mn(je,"boxes","nonMaxSuppression"),Ye=mn(y,"scores","nonMaxSuppression"),Je=kh(qe,Ye,v,$e,Ge,Ke),Qe={maxOutputSize:v=Je.maxOutputSize,iouThreshold:$e=Je.iouThreshold,scoreThreshold:Ge=Je.scoreThreshold,softNmsSigma:Ke=Je.softNmsSigma},st=Lt.runKernel("NonMaxSuppressionV5",{boxes:qe,scores:Ye},Qe);return{selectedIndices:st[0],selectedScores:st[1]}}}),Fh=function(je,y,v,$e,Ge,Ke){return $e===void 0&&($e=.5),Ge===void 0&&(Ge=Number.NEGATIVE_INFINITY),Ke===void 0&&(Ke=0),n(this,void 0,void 0,function(){var qe,Ye,Je,Qe,st,Mt,on;return r(this,function(sn){switch(sn.label){case 0:return qe=mn(je,"boxes","nonMaxSuppressionAsync"),Ye=mn(y,"scores","nonMaxSuppressionAsync"),Je=kh(qe,Ye,v,$e,Ge,Ke),v=Je.maxOutputSize,$e=Je.iouThreshold,Ge=Je.scoreThreshold,Ke=Je.softNmsSigma,[4,Promise.all([qe.data(),Ye.data()])];case 1:return Qe=sn.sent(),st=Qe[0],Mt=Qe[1],on=Xo(st,Mt,v,$e,Ge,Ke),qe!==je&&qe.dispose(),Ye!==y&&Ye.dispose(),[2,on]}})})},_h=An({cropAndResize_:function(je,y,v,$e,Ge,Ke){var qe=mn(je,"image","cropAndResize"),Ye=mn(y,"boxes","cropAndResize","float32"),Je=mn(v,"boxInd","cropAndResize","int32");Ge=Ge||"bilinear",Ke=Ke||0;var Qe=Ye.shape[0];return C(qe.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+qe.rank+"."}),C(Ye.rank===2&&Ye.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+Qe+",4] but had shape "+Ye.shape+"."}),C(Je.rank===1&&Je.shape[0]===Qe,function(){return"Error in cropAndResize: boxInd must be have size ["+Qe+"] but had shape "+Ye.shape+"."}),C($e.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+$e.length+"."}),C($e[0]>=1&&$e[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+$e}),C(Ge==="bilinear"||Ge==="nearest",function(){return"method must be bilinear or nearest, but was "+Ge}),Lt.runKernelFunc(function(st,Mt){return st.cropAndResize(qe,Ye,Je,$e,Ge,Ke)},{images:qe,boxes:Ye,boxInd:Je},null,"CropAndResize",{method:Ge,extrapolationValue:Ke,cropSize:$e})}}),Oh=Object.freeze({resizeBilinear:Sh,resizeNearestNeighbor:Ah,nonMaxSuppression:Dh,nonMaxSuppressionAsync:Th,nonMaxSuppressionWithScore:Nh,nonMaxSuppressionWithScoreAsync:Fh,cropAndResize:_h}),Mh=function(je,y){return!(je>0)||y==="linear"},Bh=function(je,y,v){if(v==null||v==="linear")return je;if(v==="relu")return je.mul(y.step());throw new Error("Gradient for activation "+v+" has not been implemented yet.")},Ph=function(je,y){var v=y,$e=Eo(je.shape,y.shape);return $e.length>0&&(v=v.sum($e)),v.reshape(je.shape)},Lh=function(je,y,v){if(y==="linear")return je;if(y==="relu")return Bl(je);if(y==="elu")return _l(je);if(y==="relu6")return Pl(je);if(y==="prelu")return Ml(je,v);throw new Error("Unknown fused activation "+y+".")},Wh=An({fusedMatMul_:function(je){var y,v=je.a,$e=je.b,Ge=je.transposeA,Ke=Ge!==void 0&&Ge,qe=je.transposeB,Ye=qe!==void 0&&qe,Je=je.bias,Qe=je.activation,st=Qe===void 0?"linear":Qe,Mt=je.preluActivationWeights;if(Mh(Lt.state.gradientDepth,st)===!1){var on=el(v,$e,Ke,Ye);return Je!=null&&(on=rc(on,Je)),Lh(on,st,Mt)}var sn=mn(v,"a","fused matMul"),fn=mn($e,"b","fused matMul");y=Nt(sn,fn),sn=y[0],fn=y[1];var hn=Ke?sn.shape[sn.rank-2]:sn.shape[sn.rank-1],to=Ye?fn.shape[fn.rank-1]:fn.shape[fn.rank-2],Xr=Ke?sn.shape[sn.rank-1]:sn.shape[sn.rank-2],co=Ye?fn.shape[fn.rank-2]:fn.shape[fn.rank-1],lo=sn.shape.slice(0,-2),fo=fn.shape.slice(0,-2),Uo=k(lo),mo=k(fo);C(sn.rank>=2&&fn.rank>=2&&sn.rank===fn.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+sn.rank+" and "+fn.rank+"."}),C(S(lo,fo),function(){return"Error in fused matMul: outer dimensions ("+lo+") and ("+fo+") of Tensors with shapes "+sn.shape+" and "+fn.shape+" must match."}),C(hn===to,function(){return"Error in fused matMul: inner shapes ("+hn+") and ("+to+") of Tensors with shapes "+sn.shape+" and "+fn.shape+" and transposeA="+Ke+" and transposeB="+Ye+" must match."});var rd,od,fd=sn.shape.slice(0,-2).concat([Xr,co]),hd=Ke?sn.as3D(Uo,hn,Xr):sn.as3D(Uo,Xr,hn),vd=Ye?fn.as3D(mo,co,to):fn.as3D(mo,to,co);Je!=null&&Ro(fd,(rd=Nt(rd=mn(Je,"bias","fused matMul"),sn)[0]).shape),Mt!=null&&(od=mn(Mt,"prelu weights","fused matMul"));var Td={a:hd,b:vd};Je!=null&&(Td.bias=rd),Mt!=null&&(Td.preluActivationWeights=od);var Od=[hd,vd];return Lt.runKernelFunc(function(Md,Fd){var Ud=Md.fusedBatchMatMul({a:hd,b:vd,transposeA:Ke,transposeB:Ye,bias:rd,activation:st,preluActivationWeights:od});return Fd([hd,vd,Ud]),Ud},Td,function(Md,Fd){var Ud=Fd[0],pd=Fd[1],_d=Fd[2],Bd=Bh(Md,_d,st),$d={};return Je!=null&&($d={bias:function(){return Ph(rd,Bd)}}),Object.assign(Ke||Ye?!Ke&&Ye?{a:function(){return Bd.matMul(pd,!1,!1)},b:function(){return Bd.matMul(Ud,!0,!1)}}:Ke&&!Ye?{a:function(){return pd.matMul(Bd,!1,!0)},b:function(){return Ud.matMul(Bd,!1,!1)}}:{a:function(){return pd.matMul(Bd,!0,!0)},b:function(){return Bd.matMul(Ud,!0,!0)}}:{a:function(){return Bd.matMul(pd,!1,!0)},b:function(){return Ud.matMul(Bd,!0,!1)}},$d)},"_FusedMatMul",{transposeA:Ke,transposeB:Ye,activation:st},Od,[!0]).reshape(fd)}}),Uh=An({fusedConv2d_:function(je){var y=je.x,v=je.filter,$e=je.strides,Ge=je.pad,Ke=je.dataFormat,qe=Ke===void 0?"NHWC":Ke,Ye=je.dilations,Je=Ye===void 0?[1,1]:Ye,Qe=je.dimRoundingMode,st=je.bias,Mt=je.activation,on=Mt===void 0?"linear":Mt,sn=je.preluActivationWeights;if(on=on||"linear",Mh(Lt.state.gradientDepth,on)===!1){var fn=qc(y,v,$e,Ge,qe,Je,Qe);return st!=null&&(fn=rc(fn,st)),Lh(fn,on,sn)}var hn=mn(y,"x","conv2d"),to=mn(v,"filter","conv2d"),Xr=hn,co=!1;hn.rank===3&&(co=!0,Xr=hn.as4D(1,hn.shape[0],hn.shape[1],hn.shape[2])),C(Xr.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+Xr.rank+"."}),C(to.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+to.rank+"."}),Qe!=null&&C(A(Ge),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+Qe+" but got pad "+Ge+"."}),C(Xr.shape[3]===to.shape[2],function(){return"Error in conv2d: depth of input ("+Xr.shape[3]+") must match input depth for filter "+to.shape[2]+"."}),C(Mo($e,Je),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+$e+" and dilations '"+Je+"'"}),C(qe==="NHWC",function(){return"Error in conv2d: got dataFormat of "+qe+" but only NHWC is currently supported."});var lo,fo,Uo=So(Xr.shape,to.shape,$e,Je,Ge,Qe);st!=null&&(lo=Nt(lo=mn(st,"bias","fused conv2d"),hn)[0],Ro(Uo.outShape,lo.shape)),sn!=null&&(fo=mn(sn,"prelu weights","fused conv2d"));var mo={x:Xr,filter:to};st!=null&&(mo.bias=lo),sn!=null&&(mo.preluActivationWeights=fo);var rd=[to,Xr],od=Lt.runKernelFunc(function(fd,hd){var vd=fd.fusedConv2d({input:Xr,filter:to,convInfo:Uo,bias:lo,activation:on,preluActivationWeights:fo});return hd([to,Xr,vd]),vd},mo,function(fd,hd){var vd=hd,Td=vd[0],Od=vd[1],Md=vd[2],Fd=Bh(fd,Md,on);C(Oo(Je),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+Je+"'"});var Ud={};return st!=null&&(Ud={bias:function(){return Ph(lo,Fd)}}),Object.assign({x:function(){return Xc(Od.shape,Fd,Td,$e,Ge)},filter:function(){return jc(Od,Fd,Td.shape,$e,Ge)}},Ud)},"FusedConv2D",{convInfo:Uo,activation:on},rd,[!0]);return co?od.as3D(od.shape[1],od.shape[2],od.shape[3]):od}}),Vh=An({fusedDepthwiseConv2d_:function(je){var y=je.x,v=je.filter,$e=je.strides,Ge=je.pad,Ke=je.dataFormat,qe=Ke===void 0?"NHWC":Ke,Ye=je.dilations,Je=Ye===void 0?[1,1]:Ye,Qe=je.dimRoundingMode,st=je.bias,Mt=je.activation,on=Mt===void 0?"linear":Mt,sn=je.preluActivationWeights;if(Mh(Lt.state.gradientDepth,on)===!1){var fn=Yc(y,v,$e,Ge,qe,Je,Qe);return st!=null&&(fn=rc(fn,st)),Lh(fn,on,sn)}var hn=mn(y,"x","depthwiseConv2d"),to=mn(v,"filter","depthwiseConv2d"),Xr=hn,co=!1;hn.rank===3&&(co=!0,Xr=hn.as4D(1,hn.shape[0],hn.shape[1],hn.shape[2])),C(Xr.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+Xr.rank+"."}),C(to.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+to.rank+"."}),C(Xr.shape[3]===to.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+Xr.shape[3]+") must match the inChannels dimension in filter "+to.shape[2]+"."}),Je==null&&(Je=[1,1]),C(Mo($e,Je),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+$e+" and dilations '"+Je+"'"}),Qe!=null&&C(A(Ge),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+Qe+" but got pad "+Ge+"."});var lo,fo,Uo=So(Xr.shape,to.shape,$e,Je,Ge,Qe,!0);st!=null&&(lo=Nt(lo=mn(st,"bias","fused conv2d"),hn)[0],Ro(Uo.outShape,lo.shape)),sn!=null&&(fo=mn(sn,"prelu weights","fused depthwiseConv2d"));var mo={x:Xr,filter:to};st!=null&&(mo.bias=lo),sn!=null&&(mo.preluActivationWeights=fo);var rd=[to,Xr],od=Lt.runKernelFunc(function(fd,hd){var vd=fd.fusedDepthwiseConv2D({input:Xr,filter:to,convInfo:Uo,bias:lo,activation:on,preluActivationWeights:fo});return hd([to,Xr,vd]),vd},mo,function(fd,hd){C(Oo(Je),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+Je+"'"});var vd=hd[0],Td=hd[1],Od=hd[2],Md=Bh(fd,Od,on),Fd={};return st!=null&&(Fd={bias:function(){return Ph(lo,Md)}}),Object.assign({x:function(){return $c(Td.shape,Md,vd,Uo)},filter:function(){return Qc(Td,Md,vd.shape,Uo)}},Fd)},"FusedDepthwiseConv2D",{convInfo:Uo,activation:on},rd,[!0]);return co?od.as3D(od.shape[1],od.shape[2],od.shape[3]):od}}),zh=Object.freeze({matMul:Wh,conv2d:Uh,depthwiseConv2d:Vh}),Gh=Object.freeze({image:Oh,linalg:Ih,losses:bh,spectral:Jl,fused:zh,signal:uh,square:tu,squaredDifference:nu,conv1d:Hc,conv2d:qc,conv3d:Kc,depthwiseConv2d:Yc,separableConv2d:Jc,conv2dTranspose:Zc,conv3dTranspose:tl,op:An,batchNormalization2d:Gu,batchNormalization3d:Hu,batchNormalization4d:qu,batchNormalization:Ku,batchNorm:ju,batchNorm2d:Xu,batchNorm3d:Yu,batchNorm4d:$u,booleanMaskAsync:Uc,complex:Dn,real:Tn,imag:Nn,concat:Yn,concat1d:$n,concat2d:Qn,concat3d:Jn,concat4d:Zn,split:tr,matMul:el,dot:nl,outerProduct:rl,reverse:ol,reverse1d:al,reverse2d:il,reverse3d:sl,reverse4d:ul,maxPool:hl,avgPool:fl,pool:dl,maxPool3d:pl,avgPool3d:vl,slice:ml,slice1d:gl,slice2d:yl,slice3d:xl,slice4d:bl,abs:ru,acos:ou,acosh:au,asin:iu,asinh:su,atan:uu,atanh:cu,ceil:lu,clipByValue:hu,cos:fu,cosh:du,erf:pu,exp:vu,expm1:mu,floor:gu,log:yu,log1p:xu,logSigmoid:bu,neg:wu,reciprocal:Cu,round:Eu,rsqrt:Ru,sigmoid:Iu,sign:ku,isNaN:Su,isInf:Au,isFinite:Du,sin:Tu,sinh:Nu,softplus:Fu,sqrt:_u,step:Ou,tan:Mu,tanh:Bu,all:Cl,any:El,argMax:Rl,argMin:Il,logSumExp:kl,max:Sl,mean:Al,min:Dl,moments:Tl,sum:Nl,prod:Fl,equal:Rc,equalStrict:Ic,greater:kc,greaterEqual:Sc,greaterEqualStrict:Ac,greaterStrict:Dc,less:Tc,lessEqual:Nc,lessEqualStrict:Fc,lessStrict:_c,notEqual:Oc,notEqualStrict:Mc,add:rc,addN:oc,addStrict:ac,atan2:ic,div:sc,divNoNan:uc,divStrict:cc,floorDiv:lc,maximum:hc,maximumStrict:fc,minimum:dc,minimumStrict:pc,mod:vc,modStrict:mc,mul:gc,mulStrict:yc,pow:xc,powStrict:bc,squaredDifferenceStrict:wc,sub:Cc,subStrict:Ec,elu:_l,leakyRelu:Ol,prelu:Ml,relu:Bl,relu6:Pl,selu:Ll,logicalAnd:Qu,logicalNot:Ju,logicalOr:Zu,logicalXor:tc,where:ec,whereAsync:nc,buffer:dr,print:pr,batchToSpaceND:vr,broadcastTo:mr,cast:gr,clone:yr,cumsum:xr,depthToSpace:br,expandDims:wr,eye:Cr,multinomial:Er,oneHot:Rr,pad:Ir,pad1d:kr,pad2d:Sr,pad3d:Ar,pad4d:Dr,rand:Tr,randomNormal:Nr,randomGamma:Fr,randomUniform:_r,reshape:Or,spaceToBatchND:Mr,squeeze:Br,stack:Pr,tile:Lr,truncatedNormal:Wr,unstack:Ur,setdiff1dAsync:Vr,fill:Hn,linspace:qn,ones:zn,range:Kn,scalar:On,tensor:Fn,tensor1d:Mn,tensor2d:Bn,tensor3d:Pn,tensor4d:Ln,tensor5d:Wn,tensor6d:Un,variable:Vn,zeros:Gn,onesLike:jn,zerosLike:Xn,transpose:Wl,softmax:go,logSoftmax:yo,localResponseNormalization:Ul,norm:Vl,gather:Lc,unsortedSegmentSum:Wc,basicLSTMCell:zl,multiRNNCell:Gl,movingAverage:Hl,stridedSlice:ql,topk:Kl,scatterND:jl,fft:Xl,ifft:Yl,rfft:$l,irfft:Ql,sparseToDense:Zl,gatherND:th,diag:eh,dropout:nh,hannWindow:oh,hammingWindow:ah,frame:ih,stft:sh,inTopKAsync:lh});function Hh(je,y){Array.isArray(je)||(je=[je]),je.forEach(function(v){v!=null&&C(v.dtype!=="complex64",function(){return y+" does not support complex64 tensors."})})}function qh(je,y,v,$e){if(v==="linear")return je.linear(y);if(v==="relu")return je.relu(y);if(v==="elu")return je.elu(y);if(v==="relu6")return je.relu6(y);if(v==="prelu")return je.prelu(y,$e);throw new Error("Activation "+v+" has not been implemented for the CPU backend.")}var Kh=function(je){function y(){var v=je.call(this)||this;return v.blockSize=48,v.firstUse=!0,v.data=new xo(v,Lt),v}return e(y,je),y.prototype.write=function(v,$e,Ge){this.firstUse&&(this.firstUse=!1,i().get("IS_NODE")&&dn(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var Ke={};return this.data.set(Ke,{values:v,dtype:Ge}),Ke},y.prototype.move=function(v,$e,Ge,Ke){this.data.set(v,{values:$e,dtype:Ke})},y.prototype.numDataIds=function(){return this.data.numDataIds()},y.prototype.read=function(v){return n(this,void 0,void 0,function(){return r(this,function($e){return[2,this.readSync(v)]})})},y.prototype.readSync=function(v){var $e=this.data.get(v),Ge=$e.dtype,Ke=$e.complexTensors;return Ge==="complex64"?Vo(this.readSync(Ke.real.dataId),this.readSync(Ke.imag.dataId)):this.data.get(v).values},y.prototype.bufferSync=function(v){var $e=this.readSync(v.dataId),Ge=$e;if(v.dtype==="string")try{Ge=$e.map(function(Ke){return ot(Ke)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return dr(v.shape,v.dtype,Ge)},y.prototype.makeOutput=function(v,$e,Ge){var Ke=this.write(v,$e,Ge);return Lt.makeTensorFromDataId(Ke,$e,Ge,this)},y.prototype.disposeData=function(v){if(this.data.has(v)){var $e=this.data.get(v).complexTensors;$e!=null&&($e.real.dispose(),$e.imag.dispose()),this.data.delete(v)}},y.prototype.time=function(v){return n(this,void 0,void 0,function(){var $e;return r(this,function(Ge){return $e=et(),v(),[2,{kernelMs:et()-$e}]})})},y.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},y.prototype.complex=function(v,$e){var Ge=this.makeOutput(null,v.shape,"complex64");return this.data.get(Ge.dataId).complexTensors={real:Lt.keep(v.clone()),imag:Lt.keep($e.clone())},Ge},y.prototype.real=function(v){return this.data.get(v.dataId).complexTensors.real.clone()},y.prototype.imag=function(v){return this.data.get(v.dataId).complexTensors.imag.clone()},y.prototype.slice=function(v,$e,Ge){if(Hh(v,"slice"),io(v.shape,$e,Ge)){var Ke=so($e,v.strides),qe=k(Ge);return Fn(this.readSync(v.dataId).subarray(Ke,Ke+qe),Ge,v.dtype)}for(var Ye=dr(Ge,v.dtype),Je=this.bufferSync(v),Qe=0;Qe<Ye.size;++Qe){var st=Ye.indexToLoc(Qe).map(function(Mt,on){return Mt+$e[on]});Ye.values[Qe]=Je.get.apply(Je,st)}return Ye.toTensor()},y.prototype.stridedSlice=function(v,$e,Ge,Ke){Hh(v,"stridedSlice");var qe=ro($e,Ge,Ke);if(qe.some(function(sn){return sn===0}))return Fn([],qe);for(var Ye=dr(qe,v.dtype),Je=this.bufferSync(v),Qe=0;Qe<Ye.size;Qe++){for(var st=Ye.indexToLoc(Qe),Mt=new Array(st.length),on=0;on<Mt.length;on++)Mt[on]=st[on]*Ke[on]+$e[on];Ye.set.apply(Ye,[Je.get.apply(Je,Mt)].concat(st))}return Ye.toTensor()},y.prototype.diag=function(v){for(var $e=this.readSync(v.dataId),Ge=dr([v.size,v.size],v.dtype),Ke=Ge.values,qe=0;qe<$e.length;qe++)Ke[qe*v.size+qe]=$e[qe];return Ge.toTensor()},y.prototype.unstack=function(v,$e){for(var Ge=v.shape[$e],Ke=new Array(v.rank-1),qe=0,Ye=0;Ye<v.rank;Ye++)Ye!==$e&&(Ke[qe++]=v.shape[Ye]);var Je=new Array(v.rank).fill(0),Qe=v.shape.slice();Qe[$e]=1;var st=new Array(Ge);for(Ye=0;Ye<st.length;Ye++)Je[$e]=Ye,st[Ye]=this.slice(v,Je,Qe).reshape(Ke);return st},y.prototype.reverse=function(v,$e){Hh(v,"reverse");for(var Ge=dr(v.shape,v.dtype),Ke=this.bufferSync(v),qe=function(Je){var Qe=Ge.indexToLoc(Je),st=Qe.slice();$e.forEach(function(Mt){return st[Mt]=v.shape[Mt]-1-st[Mt]}),Ge.set.apply(Ge,[Ke.get.apply(Ke,st)].concat(Qe))},Ye=0;Ye<Ge.size;Ye++)qe(Ye);return Ge.toTensor()},y.prototype.concat=function(v,$e){var Ge=this;if(v[0].dtype==="complex64"){var Ke=v.map(function(sn){return Tn(sn)}),qe=v.map(function(sn){return Nn(sn)});return Dn(this.concat(Ke,$e),this.concat(qe,$e))}var Ye=v.map(function(sn){var fn=k(sn.shape.slice($e));return sn.as2D(-1,fn)}),Je=Sn(Ye.map(function(sn){return sn.shape}),1),Qe=dr(Je,v[0].dtype).values;if(Ye[0].shape[0]===1){var st=0;Ye.forEach(function(sn){Qe.set(Ge.readSync(sn.dataId),st),st+=sn.size})}else{var Mt=0;Ye.forEach(function(sn){for(var fn=Ge.readSync(sn.dataId),hn=0,to=0;to<sn.shape[0];++to)for(var Xr=to*Je[1]+Mt,co=0;co<sn.shape[1];++co)Qe[Xr+co]=fn[hn++];Mt+=sn.shape[1]})}var on=Sn(v.map(function(sn){return sn.shape}),$e);return Fn(Qe,on,v[0].dtype)},y.prototype.neg=function(v){return Hh(v,"neg"),this.multiply(On(-1),v)},y.prototype.add=function(v,$e){return v.dtype==="complex64"||$e.dtype==="complex64"?this.broadcastedBinaryComplexOp(v.cast("complex64"),$e.cast("complex64"),function(Ge,Ke,qe,Ye){return{real:Ge+qe,imag:Ke+Ye}}):this.broadcastedBinaryOp(v,$e,Dt(v.dtype,$e.dtype),function(Ge,Ke){return Ge+Ke})},y.prototype.addN=function(v){var $e=this;Hh(v,"addN");for(var Ge=v.map(function(st){return $e.readSync(st.dataId)}),Ke=dr(v[0].shape,v[0].dtype),qe=Ke.values,Ye=0;Ye<v.length;Ye++)for(var Je=Ge[Ye],Qe=0;Qe<qe.length;Qe++)qe[Qe]+=Je[Qe];return Ke.toTensor()},y.prototype.softmax=function(v,$e){var Ge=O([$e],v.shape),Ke=this.max(v,Ge),qe=wn(Ke.shape,Ge),Ye=this.subtract(v,Ke.reshape(qe)),Je=this.exp(Ye),Qe=this.sum(Je,Ge).reshape(qe);return this.realDivide(Je,Qe)},y.prototype.subtract=function(v,$e){return v.dtype==="complex64"||$e.dtype==="complex64"?this.broadcastedBinaryComplexOp(v.cast("complex64"),$e.cast("complex64"),function(Ge,Ke,qe,Ye){return{real:Ge-qe,imag:Ke-Ye}}):this.broadcastedBinaryOp(v,$e,Dt(v.dtype,$e.dtype),function(Ge,Ke){return Ge-Ke})},y.prototype.pow=function(v,$e){return Hh([v,$e],"pow"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){return Math.pow(Ge,Ke)})},y.prototype.batchMatMul=function(v,$e,Ge,Ke){Hh([v,$e],"matMul");for(var qe=Ge?v.shape[1]:v.shape[2],Ye=Ge?v.shape[2]:v.shape[1],Je=Ke?$e.shape[1]:$e.shape[2],Qe=v.shape[0],st=this.readSync(v.dataId),Mt=this.readSync($e.dataId),on=Ge?[v.strides[0],1,v.strides[1]]:[v.strides[0],v.strides[1],1],sn=on[0],fn=on[1],hn=on[2],to=Ke?[1,$e.strides[1],$e.strides[0]]:[$e.strides[1],1,$e.strides[0]],Xr=to[0],co=to[1],lo=to[2],fo=Ye*Je,Uo=dr([Qe,Ye,Je],v.dtype),mo=Uo.values,rd=this.blockSize,od=0;od<Qe;od++)for(var fd=0;fd<Ye;fd+=rd)for(var hd=0;hd<Je;hd+=rd)for(var vd=0;vd<qe;vd+=rd)for(var Td=Math.min(fd+rd,Ye),Od=Math.min(hd+rd,Je),Md=Math.min(vd+rd,qe),Fd=fd;Fd<Td;Fd++)for(var Ud=hd;Ud<Od;Ud++){for(var pd=0,_d=vd;_d<Md;_d++)pd+=st[od*sn+Fd*fn+_d*hn]*Mt[_d*Xr+Ud*co+od*lo];mo[od*fo+(Fd*Je+Ud)]+=pd}return Uo.toTensor()},y.prototype.fusedBatchMatMul=function(v){var $e=v.a,Ge=v.b,Ke=v.transposeA,qe=v.transposeB,Ye=v.bias,Je=v.activation,Qe=v.preluActivationWeights,st=this.batchMatMul($e,Ge,Ke,qe);return Ye&&(st=this.add(st,Ye)),Je&&(st=qh(this,st,Je,Qe)),st},y.prototype.multiply=function(v,$e){return v.dtype==="complex64"||$e.dtype==="complex64"?this.broadcastedBinaryComplexOp(v.cast("complex64"),$e.cast("complex64"),function(Ge,Ke,qe,Ye){return{real:Ge*qe-Ke*Ye,imag:Ge*Ye+Ke*qe}}):this.broadcastedBinaryOp(v,$e,Dt(v.dtype,$e.dtype),function(Ge,Ke){return Ge*Ke})},y.prototype.realDivide=function(v,$e){return Hh([v,$e],"realDivide"),this.broadcastedBinaryOp(v,$e,"float32",function(Ge,Ke){return Ge/Ke})},y.prototype.floorDiv=function(v,$e){return Hh([v,$e],"floorDiv"),this.broadcastedBinaryOp(v,$e,"int32",function(Ge,Ke){return Math.floor(Ge/Ke)})},y.prototype.sum=function(v,$e){Hh(v,"sum"),Cn("sum",$e,v.rank);for(var Ge=bn(v.shape,$e),Ke=Ge[0],qe=Ge[1],Ye=Gn(Ke,Dt(v.dtype,"int32")),Je=k(qe),Qe=this.readSync(Ye.dataId),st=this.readSync(v.dataId),Mt=0;Mt<Qe.length;++Mt){for(var on=Mt*Je,sn=0,fn=0;fn<Je;++fn)sn+=st[on+fn];Qe[Mt]=sn}return Ye},y.prototype.prod=function(v,$e){Hh(v,"sum");for(var Ge=bn(v.shape,$e),Ke=Ge[0],qe=Ge[1],Ye=Gn(Ke,Dt(v.dtype,"int32")),Je=k(qe),Qe=this.readSync(Ye.dataId),st=this.readSync(v.dataId),Mt=0;Mt<Qe.length;++Mt){for(var on=Mt*Je,sn=1,fn=0;fn<Je;++fn)sn*=st[on+fn];Qe[Mt]=sn}return Ye},y.prototype.unsortedSegmentSum=function(v,$e,Ge){Hh(v,"unsortedSegmentSum");for(var Ke=[],qe=v.rank-$e.rank,Ye=0;Ye<qe;++Ye)$e=$e.expandDims(Ye+1);for(Ye=0;Ye<Ge;++Ye){var Je=On(Ye,"int32"),Qe=Rc(Je,$e).asType("float32").mul(v).sum(0);Ke.push(Qe)}return Pr(Ke)},y.prototype.argMin=function(v,$e){Hh(v,"argMin");var Ge=[$e];Cn("argMin",Ge,v.rank);for(var Ke=bn(v.shape,Ge),qe=Ke[0],Ye=Ke[1],Je=Gn(qe,"int32"),Qe=k(Ye),st=this.readSync(Je.dataId),Mt=this.readSync(v.dataId),on=0;on<st.length;++on){for(var sn=on*Qe,fn=Mt[sn],hn=0,to=0;to<Qe;++to){var Xr=Mt[sn+to];Xr<fn&&(fn=Xr,hn=to)}st[on]=hn}return Je},y.prototype.argMax=function(v,$e){Hh(v,"argMax");var Ge=[$e];Cn("argMax",Ge,v.rank);for(var Ke=bn(v.shape,Ge),qe=Ke[0],Ye=Ke[1],Je=Gn(qe,"int32"),Qe=k(Ye),st=this.readSync(Je.dataId),Mt=this.readSync(v.dataId),on=0;on<st.length;++on){for(var sn=on*Qe,fn=Mt[sn],hn=0,to=0;to<Qe;++to){var Xr=Mt[sn+to];Xr>fn&&(fn=Xr,hn=to)}st[on]=hn}return Je},y.prototype.cumsum=function(v,$e,Ge,Ke){if(Hh(v,"cumsum"),$e!==v.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(v.rank-1)+" but got axis="+$e);for(var qe=Dt(v.dtype,"int32"),Ye=Gn(v.shape,qe),Je=this.readSync(Ye.dataId),Qe=this.readSync(v.dataId),st=v.shape[v.rank-1],Mt=Ke?function(to,Xr){return to+st-Xr-1}:function(to,Xr){return to+Xr},on=0;on<Qe.length;on+=st)for(var sn=0;sn<st;sn++){var fn=Mt(on,sn);if(sn===0)Je[fn]=Ge?0:Qe[fn];else{var hn=Mt(on,sn-1);Je[fn]=Ge?Qe[hn]+Je[hn]:Qe[fn]+Je[hn]}}return Ye},y.prototype.equal=function(v,$e){return Hh([v,$e],"equal"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge===Ke?1:0})},y.prototype.notEqual=function(v,$e){return Hh([v,$e],"notEqual"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge!==Ke?1:0})},y.prototype.less=function(v,$e){return Hh([v,$e],"less"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge<Ke?1:0})},y.prototype.lessEqual=function(v,$e){return Hh([v,$e],"lessEqual"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge<=Ke?1:0})},y.prototype.greater=function(v,$e){return Hh([v,$e],"greater"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge>Ke?1:0})},y.prototype.greaterEqual=function(v,$e){return Hh([v,$e],"greaterEqual"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge>=Ke?1:0})},y.prototype.logicalNot=function(v){Hh(v,"logicalNot");for(var $e=this.readSync(v.dataId),Ge=new Uint8Array($e.length),Ke=0;Ke<$e.length;++Ke)Ge[Ke]=$e[Ke]?0:1;return this.makeOutput(Ge,v.shape,"bool")},y.prototype.logicalAnd=function(v,$e){return Hh([v,$e],"logicalAnd"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge&&Ke})},y.prototype.logicalOr=function(v,$e){return Hh([v,$e],"logicalOr"),this.broadcastedBinaryOp(v,$e,"bool",function(Ge,Ke){return Ge||Ke})},y.prototype.select=function(v,$e,Ge){Hh([v,$e,Ge],"select");for(var Ke=this.readSync(v.dataId),qe=this.readSync($e.dataId),Ye=this.readSync(Ge.dataId),Je=Gn($e.shape,Dt($e.dtype,Ge.dtype)),Qe=this.readSync(Je.dataId),st=0,Mt=v.rank===0||v.rank>1||$e.rank===1?1:k($e.shape.slice(1)),on=0;on<Ke.length;on++)for(var sn=0;sn<Mt;sn++)Ke[on]===1?Qe[st++]=qe[on]:Qe[st++]=Ye[on];return Je},y.prototype.where=function(v){Hh([v],"where");var $e=this.readSync(v.dataId);return na(v.shape,$e)},y.prototype.topk=function(v,$e,Ge){return Hh(v,"topk"),ea(this.readSync(v.dataId),v.shape,v.dtype,$e)},y.prototype.min=function(v,$e){Hh(v,"min"),Cn("min",$e,v.rank);for(var Ge=bn(v.shape,$e),Ke=Ge[0],qe=Ge[1],Ye=Gn(Ke,v.dtype),Je=k(qe),Qe=this.readSync(Ye.dataId),st=this.readSync(v.dataId),Mt=0;Mt<Qe.length;++Mt){for(var on=Mt*Je,sn=st[on],fn=0;fn<Je;++fn){var hn=st[on+fn];hn<sn&&(sn=hn)}Qe[Mt]=sn}return Ye},y.prototype.minimum=function(v,$e){return Hh([v,$e],"minimum"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){return Math.min(Ge,Ke)})},y.prototype.mod=function(v,$e){return Hh([v,$e],"mod"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){var qe=Ge%Ke;return Ge<0&&Ke<0||Ge>=0&&Ke>=0?qe:(qe+Ke)%Ke})},y.prototype.max=function(v,$e){Hh(v,"max"),Cn("max",$e,v.rank);for(var Ge=bn(v.shape,$e),Ke=Ge[0],qe=Ge[1],Ye=Gn(Ke,v.dtype),Je=k(qe),Qe=this.readSync(Ye.dataId),st=this.readSync(v.dataId),Mt=0;Mt<Qe.length;++Mt){for(var on=Mt*Je,sn=st[on],fn=0;fn<Je;++fn){var hn=st[on+fn];hn>sn&&(sn=hn)}Qe[Mt]=sn}return Ye},y.prototype.maximum=function(v,$e){return Hh([v,$e],"maximum"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){return Math.max(Ge,Ke)})},y.prototype.all=function(v,$e){Hh(v,"all"),Cn("all",$e,v.rank);for(var Ge=bn(v.shape,$e),Ke=Ge[0],qe=Ge[1],Ye=Gn(Ke,v.dtype),Je=k(qe),Qe=this.readSync(Ye.dataId),st=this.readSync(v.dataId),Mt=0;Mt<Qe.length;++Mt){for(var on=Mt*Je,sn=st[on],fn=0;fn<Je;++fn){var hn=st[on+fn];sn=sn&&hn}Qe[Mt]=sn}return Ye},y.prototype.any=function(v,$e){Hh(v,"any"),Cn("any",$e,v.rank);for(var Ge=bn(v.shape,$e),Ke=Ge[0],qe=Ge[1],Ye=Gn(Ke,v.dtype),Je=k(qe),Qe=this.readSync(Ye.dataId),st=this.readSync(v.dataId),Mt=0;Mt<Qe.length;++Mt){for(var on=Mt*Je,sn=st[on],fn=0;fn<Je;++fn){var hn=st[on+fn];sn=sn||hn}Qe[Mt]=sn}return Ye},y.prototype.squaredDifference=function(v,$e){return Hh([v,$e],"squaredDifference"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){var qe=Ge-Ke;return qe*qe})},y.prototype.ceil=function(v){Hh(v,"ceil");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke)Ge[Ke]=Math.ceil($e[Ke]);return this.makeOutput(Ge,v.shape,"float32")},y.prototype.floor=function(v){Hh(v,"floor");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke)Ge[Ke]=Math.floor($e[Ke]);return this.makeOutput(Ge,v.shape,"float32")},y.prototype.sign=function(v){Hh(v,"x");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke)$e[Ke]<0?Ge[Ke]=-1:$e[Ke]>0?Ge[Ke]=1:Ge[Ke]=0;return this.makeOutput(Ge,v.shape,"float32")},y.prototype.isNaN=function(v){Hh(v,"x");for(var $e=this.readSync(v.dataId),Ge=new Uint8Array($e.length),Ke=0;Ke<$e.length;++Ke)Number.isNaN($e[Ke])&&(Ge[Ke]=1);return this.makeOutput(Ge,v.shape,"bool")},y.prototype.isInf=function(v){Hh(v,"x");for(var $e=this.readSync(v.dataId),Ge=new Uint8Array($e.length),Ke=0;Ke<$e.length;++Ke)Math.abs($e[Ke])===1/0&&(Ge[Ke]=1);return this.makeOutput(Ge,v.shape,"bool")},y.prototype.isFinite=function(v){Hh(v,"x");for(var $e=this.readSync(v.dataId),Ge=new Uint8Array($e.length),Ke=0;Ke<$e.length;++Ke)Number.isFinite($e[Ke])&&(Ge[Ke]=1);return this.makeOutput(Ge,v.shape,"bool")},y.prototype.round=function(v){Hh(v,"round");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke){var qe=Math.floor($e[Ke]);$e[Ke]-qe<.5?Ge[Ke]=Math.floor($e[Ke]):$e[Ke]-qe>.5?Ge[Ke]=Math.ceil($e[Ke]):Ge[Ke]=qe%2==0?qe:qe+1}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.exp=function(v){Hh(v,"exp");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke)Ge[Ke]=Math.exp($e[Ke]);return this.makeOutput(Ge,v.shape,"float32")},y.prototype.expm1=function(v){Hh(v,"expm1");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke)Ge[Ke]=Math.expm1($e[Ke]);return this.makeOutput(Ge,v.shape,"float32")},y.prototype.log=function(v){Hh(v,"log");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke){var qe=$e[Ke];Ge[Ke]=Math.log(qe)}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.log1p=function(v){Hh(v,"log1p");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke){var qe=$e[Ke];Ge[Ke]=Math.log1p(qe)}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.sqrt=function(v){Hh(v,"sqrt");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke){var qe=$e[Ke];Ge[Ke]=Math.sqrt(qe)}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.rsqrt=function(v){Hh(v,"rsqrt");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke){var qe=$e[Ke];Ge[Ke]=1/Math.sqrt(qe)}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.reciprocal=function(v){Hh(v,"reciprocal");for(var $e=this.readSync(v.dataId),Ge=new Float32Array($e.length),Ke=0;Ke<$e.length;++Ke)Ge[Ke]=1/$e[Ke];return this.makeOutput(Ge,v.shape,"float32")},y.prototype.linear=function(v){return v},y.prototype.relu=function(v){Hh(v,"relu");for(var $e=Gn(v.shape,v.dtype),Ge=this.readSync($e.dataId),Ke=this.readSync(v.dataId),qe=0;qe<Ke.length;++qe)Ge[qe]=Math.max(0,Ke[qe]);return $e},y.prototype.relu6=function(v){Hh(v,"relu");for(var $e=Gn(v.shape,v.dtype),Ge=this.readSync($e.dataId),Ke=this.readSync(v.dataId),qe=0;qe<Ke.length;++qe)Ge[qe]=Math.min(Math.max(0,Ke[qe]),6);return $e},y.prototype.prelu=function(v,$e){return Hh([v,$e],"prelu"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){return Ge<0?Ke*Ge:Ge})},y.prototype.elu=function(v){Hh(v,"elu");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke){var qe=Ge[Ke];$e[Ke]=qe>=0?qe:Math.exp(qe)-1}return this.makeOutput($e,v.shape,"float32")},y.prototype.eluDer=function(v,$e){Hh([v,$e],"eluDer");for(var Ge=new Float32Array($e.size),Ke=this.readSync($e.dataId),qe=this.readSync(v.dataId),Ye=0;Ye<Ke.length;++Ye){var Je=Ke[Ye];Ge[Ye]=Je>=1?qe[Ye]:qe[Ye]*(Je+1)}return this.makeOutput(Ge,$e.shape,"float32")},y.prototype.selu=function(v){Hh(v,"selu");for(var $e=bs,Ge=ws,Ke=new Float32Array(v.size),qe=this.readSync(v.dataId),Ye=0;Ye<qe.length;++Ye){var Je=qe[Ye];Ke[Ye]=Je>=0?Ge*Je:$e*(Math.exp(Je)-1)}return this.makeOutput(Ke,v.shape,"float32")},y.prototype.clip=function(v,$e,Ge){Hh(v,"clip");for(var Ke=new Float32Array(v.size),qe=this.readSync(v.dataId),Ye=0;Ye<qe.length;++Ye){var Je=qe[Ye];Ke[Ye]=Je>Ge?Ge:Je<$e?$e:Je}return this.makeOutput(Ke,v.shape,"float32")},y.prototype.abs=function(v){for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.abs(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.complexAbs=function(v){for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<v.size;++Ke){var qe=Ge[2*Ke],Ye=Ge[2*Ke+1];$e[Ke]=Math.hypot(qe,Ye)}return this.makeOutput($e,v.shape,"float32")},y.prototype.int=function(v){Hh(v,"int");for(var $e=new Int32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Ge[Ke];return this.makeOutput($e,v.shape,"int32")},y.prototype.sigmoid=function(v){Hh(v,"sigmoid");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=1/(1+Math.exp(-Ge[Ke]));return this.makeOutput($e,v.shape,"float32")},y.prototype.softplus=function(v){Hh(v,"softplus");for(var $e=Math.log(11920928955078125e-23)+2,Ge=new Float32Array(v.size),Ke=this.readSync(v.dataId),qe=0;qe<Ke.length;++qe){var Ye=Ke[qe]>-$e,Je=Ke[qe]<$e,Qe=Math.exp(Ke[qe]),st=void 0;st=Je?Qe:Ye?Ke[qe]:Math.log(1+Qe),Ge[qe]=st}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.sin=function(v){Hh(v,"sin");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.sin(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.cos=function(v){Hh(v,"cos");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.cos(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.tan=function(v){Hh(v,"tan");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.tan(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.asin=function(v){Hh(v,"asin");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.asin(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.acos=function(v){Hh(v,"acos");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.acos(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.atan=function(v){Hh(v,"atan");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.atan(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.atan2=function(v,$e){return Hh([v,$e],"atan2"),this.broadcastedBinaryOp(v,$e,v.dtype,function(Ge,Ke){return Math.atan2(Ge,Ke)})},y.prototype.sinh=function(v){Hh(v,"sinh");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.sinh(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.cosh=function(v){Hh(v,"cosh");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.cosh(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.tanh=function(v){Hh(v,"tanh");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=D(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.asinh=function(v){Hh(v,"asinh");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.asinh(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.acosh=function(v){Hh(v,"acosh");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.acosh(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.atanh=function(v){Hh(v,"atanh");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke)$e[Ke]=Math.atanh(Ge[Ke]);return this.makeOutput($e,v.shape,"float32")},y.prototype.erf=function(v){Hh(v,"erf");for(var $e=new Float32Array(v.size),Ge=this.readSync(v.dataId),Ke=0;Ke<Ge.length;++Ke){var qe=Math.sign(Ge[Ke]),Ye=Math.abs(Ge[Ke]),Je=1/(1+.3275911*Ye);$e[Ke]=qe*(1-((((1.061405429*Je-1.453152027)*Je+1.421413741)*Je-.284496736)*Je+.254829592)*Je*Math.exp(-Ye*Ye))}return this.makeOutput($e,v.shape,"float32")},y.prototype.step=function(v,$e){$e===void 0&&($e=0),Hh(v,"step");for(var Ge=new Float32Array(v.size),Ke=this.readSync(v.dataId),qe=0;qe<Ke.length;++qe){var Ye=Ke[qe];isNaN(Ye)?Ge[qe]=NaN:Ge[qe]=Ye>0?1:$e}return this.makeOutput(Ge,v.shape,"float32")},y.prototype.fusedConv2d=function(v){var $e=v.input,Ge=v.filter,Ke=v.convInfo,qe=v.bias,Ye=v.activation,Je=v.preluActivationWeights,Qe=this.conv2d($e,Ge,Ke);return qe&&(Qe=this.add(Qe,qe)),Ye&&(Qe=qh(this,Qe,Ye,Je)),Qe},y.prototype.conv2d=function(v,$e,Ge){Hh([v,$e],"conv2d");for(var Ke=Ge.filterHeight,qe=Ge.filterWidth,Ye=Ge.dilationHeight,Je=Ge.dilationWidth,Qe=Ge.padInfo.left,st=Ge.padInfo.top,Mt=Ge.dataFormat==="channelsLast",on=dr(Ge.outShape,v.dtype),sn=v.strides[0],fn=Mt?v.strides[1]:v.strides[2],hn=Mt?v.strides[2]:1,to=Mt?1:v.strides[1],Xr=on.strides[0],co=Mt?on.strides[1]:on.strides[2],lo=Mt?on.strides[2]:1,fo=Mt?1:on.strides[1],Uo=this.readSync(v.dataId),mo=this.readSync($e.dataId),rd=on.values,od=0;od<Ge.batchSize;++od)for(var fd=od*sn,hd=od*Xr,vd=0;vd<Ge.outHeight;++vd)for(var Td=hd+vd*co,Od=vd*Ge.strideHeight-st,Md=0;Md<Ke;Md++){var Fd=Od+Md*Ye;if(!(Fd<0||Fd>=Ge.inHeight))for(var Ud=Md*$e.strides[0],pd=fd+Fd*fn,_d=0;_d<Ge.outWidth;++_d)for(var Bd=Td+_d*lo,$d=_d*Ge.strideWidth-Qe,jd=0;jd<qe;jd++){var Pd=$d+jd*Je;if(!(Pd<0||Pd>=Ge.inWidth))for(var yd=pd+Pd*hn,Ld=Ud+jd*$e.strides[1],zd=0;zd<Ge.inChannels;++zd){for(var Jd=Uo[yd+zd*to],cp=0;cp<Ge.outChannels;++cp)rd[Bd+cp*fo]+=Jd*mo[Ld+cp];Ld+=Ge.outChannels}}}return on.toTensor()},y.prototype.conv3d=function(v,$e,Ge){for(var Ke=Ge.filterDepth,qe=Ge.filterHeight,Ye=Ge.filterWidth,Je=Ge.dilationDepth,Qe=Ge.dilationHeight,st=Ge.dilationWidth,Mt=Ge.padInfo.front,on=Ge.padInfo.left,sn=Ge.padInfo.top,fn=dr(Ge.outShape,v.dtype),hn=this.readSync(v.dataId),to=this.readSync($e.dataId),Xr=fn.values,co=0;co<Ge.batchSize;++co)for(var lo=co*v.strides[0],fo=co*fn.strides[0],Uo=0;Uo<Ge.outDepth;++Uo)for(var mo=fo+Uo*fn.strides[1],rd=Uo*Ge.strideDepth-Mt,od=0;od<Ke;od++){var fd=rd+od*Je;if(!(fd<0||fd>=Ge.inDepth))for(var hd=od*$e.strides[0],vd=lo+fd*v.strides[1],Td=0;Td<Ge.outHeight;++Td)for(var Od=mo+Td*fn.strides[2],Md=Td*Ge.strideHeight-sn,Fd=0;Fd<qe;Fd++){var Ud=Md+Fd*Qe;if(!(Ud<0||Ud>=Ge.inHeight))for(var pd=hd+Fd*$e.strides[1],_d=vd+Ud*v.strides[2],Bd=0;Bd<Ge.outWidth;++Bd)for(var $d=Od+Bd*Ge.outChannels,jd=Bd*Ge.strideWidth-on,Pd=0;Pd<Ye;Pd++){var yd=jd+Pd*st;if(!(yd<0||yd>=Ge.inWidth))for(var Ld=pd+Pd*$e.strides[2],zd=_d+yd*Ge.inChannels,Jd=Ld,cp=0;cp<Ge.inChannels;++cp){for(var mp=hn[zd+cp],gp=0;gp<Ge.outChannels;++gp)Xr[$d+gp]+=mp*to[Jd+gp];Jd+=Ge.outChannels}}}}return fn.toTensor()},y.prototype.conv2dDerInput=function(v,$e,Ge){Hh([v,$e],"conv2dDerInput");for(var Ke=dr(Ge.inShape,"float32"),qe=Ke.values,Ye=this.readSync(v.dataId),Je=this.readSync($e.dataId),Qe=$e.strides,st=Qe[0],Mt=Qe[1],on=Qe[2],sn=Ge.batchSize,fn=Ge.filterHeight,hn=Ge.filterWidth,to=Ge.inChannels,Xr=Ge.inHeight,co=Ge.inWidth,lo=Ge.outChannels,fo=Ge.outHeight,Uo=Ge.outWidth,mo=Ge.strideHeight,rd=Ge.strideWidth,od=Ge.dataFormat,fd=fn-1-Ge.padInfo.top,hd=hn-1-Ge.padInfo.left,vd=od==="channelsLast",Td=Ke.strides[0],Od=vd?Ke.strides[1]:Ke.strides[2],Md=vd?Ke.strides[2]:1,Fd=vd?1:Ke.strides[1],Ud=v.strides[0],pd=vd?v.strides[1]:v.strides[2],_d=vd?v.strides[2]:1,Bd=vd?1:v.strides[1],$d=0;$d<sn;++$d)for(var jd=0;jd<to;++jd)for(var Pd=0;Pd<Xr;++Pd)for(var yd=Pd-fd,Ld=Math.max(0,Math.ceil(yd/mo)),zd=Math.min(fo,(fn+yd)/mo),Jd=0;Jd<co;++Jd){for(var cp=Jd-hd,mp=Math.max(0,Math.ceil(cp/rd)),gp=Math.min(Uo,(hn+cp)/rd),_p=0,vp=Ld;vp<zd;++vp)for(var wp=vp*mo-yd,md=mp;md<gp;++md)for(var Ad=Ud*$d+pd*vp+_d*md,Nd=st*(fn-1-wp)+Mt*(hn-1-(md*rd-cp))+on*jd,Hd=0;Hd<lo;++Hd)_p+=Ye[Ad+Bd*Hd]*Je[Nd+Hd];qe[Td*$d+Od*Pd+Md*Jd+Fd*jd]=_p}return Ke.toTensor()},y.prototype.conv3dDerInput=function(v,$e,Ge){for(var Ke=dr(Ge.inShape,"float32"),qe=Ke.values,Ye=Ke.strides,Je=Ye[0],Qe=Ye[1],st=Ye[2],Mt=Ye[3],on=this.readSync(v.dataId),sn=v.strides,fn=sn[0],hn=sn[1],to=sn[2],Xr=sn[3],co=this.readSync($e.dataId),lo=$e.strides,fo=lo[0],Uo=lo[1],mo=lo[2],rd=lo[3],od=Ge.batchSize,fd=Ge.filterDepth,hd=Ge.filterHeight,vd=Ge.filterWidth,Td=Ge.inChannels,Od=Ge.inDepth,Md=Ge.inHeight,Fd=Ge.inWidth,Ud=Ge.outChannels,pd=Ge.outDepth,_d=Ge.outHeight,Bd=Ge.outWidth,$d=Ge.strideDepth,jd=Ge.strideHeight,Pd=Ge.strideWidth,yd=fd-1-Ge.padInfo.front,Ld=hd-1-Ge.padInfo.top,zd=vd-1-Ge.padInfo.left,Jd=0;Jd<od;++Jd)for(var cp=0;cp<Td;++cp)for(var mp=0;mp<Od;++mp)for(var gp=mp-yd,_p=Math.max(0,Math.ceil(gp/$d)),vp=Math.min(pd,(fd+gp)/$d),wp=0;wp<Md;++wp)for(var md=wp-Ld,Ad=Math.max(0,Math.ceil(md/jd)),Nd=Math.min(_d,(hd+md)/jd),Hd=0;Hd<Fd;++Hd){for(var Kd=Hd-zd,Qd=Math.max(0,Math.ceil(Kd/Pd)),rp=Math.min(Bd,(vd+Kd)/Pd),np=0,ip=_p;ip<vp;++ip)for(var Zd=ip*$d-gp,sp=Ad;sp<Nd;++sp)for(var yp=sp*jd-md,bp=Qd;bp<rp;++bp)for(var Cp=fn*Jd+hn*ip+to*sp+Xr*bp,Dp=fo*(fd-1-Zd)+Uo*(hd-1-yp)+mo*(vd-1-(bp*Pd-Kd))+rd*cp,Lp=0;Lp<Ud;++Lp)np+=on[Cp+Lp]*co[Dp+Lp];qe[Je*Jd+Qe*mp+st*wp+Mt*Hd+cp]=np}return Ke.toTensor()},y.prototype.conv2dDerFilter=function(v,$e,Ge){Hh([v,$e],"conv2dDerFilter");for(var Ke=Ge.strideHeight,qe=Ge.strideWidth,Ye=Ge.filterHeight,Je=Ge.filterWidth,Qe=Ge.dataFormat==="channelsLast",st=dr(Ge.filterShape,"float32"),Mt=Ge.padInfo.left,on=Ge.padInfo.top,sn=this.bufferSync(v),fn=this.bufferSync($e),hn=0;hn<Ye;++hn)for(var to=Math.max(0,Math.ceil((on-hn)/Ke)),Xr=Math.min(Ge.outHeight,(Ge.inHeight+on-hn)/Ke),co=0;co<Je;++co)for(var lo=Math.max(0,Math.ceil((Mt-co)/qe)),fo=Math.min(Ge.outWidth,(Ge.inWidth+Mt-co)/qe),Uo=0;Uo<Ge.inChannels;++Uo)for(var mo=0;mo<Ge.outChannels;++mo){for(var rd=0,od=0;od<Ge.batchSize;++od)for(var fd=to;fd<Xr;++fd)for(var hd=hn+fd*Ke-on,vd=lo;vd<fo;++vd){var Td=co+vd*qe-Mt;rd+=Qe?sn.get(od,hd,Td,Uo)*fn.get(od,fd,vd,mo):sn.get(od,Uo,hd,Td)*fn.get(od,mo,fd,vd)}st.set(rd,hn,co,Uo,mo)}return st.toTensor()},y.prototype.conv3dDerFilter=function(v,$e,Ge){for(var Ke=Ge.strideDepth,qe=Ge.strideHeight,Ye=Ge.strideWidth,Je=Ge.filterDepth,Qe=Ge.filterHeight,st=Ge.filterWidth,Mt=dr(Ge.filterShape,"float32"),on=Mt.values,sn=Mt.strides,fn=sn[0],hn=sn[1],to=sn[2],Xr=sn[3],co=this.readSync($e.dataId),lo=$e.strides,fo=lo[0],Uo=lo[1],mo=lo[2],rd=lo[3],od=this.readSync(v.dataId),fd=v.strides,hd=fd[0],vd=fd[1],Td=fd[2],Od=fd[3],Md=Ge.padInfo.front,Fd=Ge.padInfo.left,Ud=Ge.padInfo.top,pd=0;pd<Je;++pd)for(var _d=Math.max(0,Math.ceil((Md-pd)/Ke)),Bd=Math.min(Ge.outDepth,(Ge.inDepth+Md-pd)/Ke),$d=pd*fn,jd=0;jd<Qe;++jd)for(var Pd=Math.max(0,Math.ceil((Ud-jd)/qe)),yd=Math.min(Ge.outHeight,(Ge.inHeight+Ud-jd)/qe),Ld=jd*hn+$d,zd=0;zd<st;++zd)for(var Jd=Math.max(0,Math.ceil((Fd-zd)/Ye)),cp=Math.min(Ge.outWidth,(Ge.inWidth+Fd-zd)/Ye),mp=zd*to+Ld,gp=0;gp<Ge.inChannels;++gp)for(var _p=gp*Xr+mp,vp=0;vp<Ge.outChannels;++vp){for(var wp=0,md=0;md<Ge.batchSize;++md)for(var Ad=md*hd,Nd=md*fo,Hd=_d;Hd<Bd;++Hd)for(var Kd=(pd+Hd*Ke-Md)*vd+Ad,Qd=Hd*Uo+Nd,rp=Pd;rp<yd;++rp)for(var np=(jd+rp*qe-Ud)*Td+Kd,ip=rp*mo+Qd,Zd=Jd;Zd<cp;++Zd){var sp=Zd*rd+ip;wp+=od[(zd+Zd*Ye-Fd)*Od+np+gp]*co[sp+vp]}on[_p+vp]=wp}return Mt.toTensor()},y.prototype.fusedDepthwiseConv2D=function(v){var $e=v.input,Ge=v.filter,Ke=v.convInfo,qe=v.bias,Ye=v.activation,Je=v.preluActivationWeights,Qe=this.depthwiseConv2D($e,Ge,Ke);return qe&&(Qe=this.add(Qe,qe)),Ye&&(Qe=qh(this,Qe,Ye,Je)),Qe},y.prototype.depthwiseConv2D=function(v,$e,Ge){Hh([v,$e],"depthwiseConv2D");for(var Ke=Ge.filterHeight,qe=Ge.filterWidth,Ye=Ge.dilationHeight,Je=Ge.dilationWidth,Qe=Ge.padInfo.left,st=Ge.padInfo.top,Mt=Ge.outChannels/Ge.inChannels,on=dr(Ge.outShape,v.dtype),sn=this.readSync(v.dataId),fn=this.readSync($e.dataId),hn=on.values,to=0;to<Ge.batchSize;++to)for(var Xr=to*v.strides[0],co=to*on.strides[0],lo=0;lo<Ge.outHeight;++lo)for(var fo=co+lo*on.strides[1],Uo=lo*Ge.strideHeight-Qe,mo=0;mo<Ke;++mo){var rd=Uo+mo*Ye;if(!(rd<0||rd>=Ge.inHeight))for(var od=mo*$e.strides[0],fd=Xr+rd*v.strides[1],hd=0;hd<Ge.outWidth;++hd)for(var vd=fo+hd*on.strides[2],Td=hd*Ge.strideWidth-st,Od=0;Od<qe;++Od){var Md=Td+Od*Je;if(!(Md<0||Md>=Ge.inWidth))for(var Fd=od+Od*$e.strides[1],Ud=fd+Md*Ge.inChannels,pd=vd,_d=Fd,Bd=0;Bd<Ge.inChannels;++Bd){for(var $d=sn[Ud+Bd],jd=0;jd<Mt;++jd)hn[pd+jd]+=$d*fn[_d+jd];pd+=Mt,_d+=Mt}}}return on.toTensor()},y.prototype.depthwiseConv2DDerInput=function(v,$e,Ge){Hh([v,$e],"depthwiseConv2DDerInput");for(var Ke=dr(Ge.inShape,"float32"),qe=Ke.values,Ye=Ke.strides,Je=Ye[0],Qe=Ye[1],st=Ye[2],Mt=this.readSync(v.dataId),on=v.strides,sn=on[0],fn=on[1],hn=on[2],to=this.readSync($e.dataId),Xr=$e.strides,co=Xr[0],lo=Xr[1],fo=Xr[2],Uo=Ge.batchSize,mo=Ge.filterHeight,rd=Ge.filterWidth,od=Ge.inChannels,fd=Ge.inHeight,hd=Ge.inWidth,vd=Ge.outChannels,Td=Ge.outHeight,Od=Ge.outWidth,Md=Ge.strideHeight,Fd=Ge.strideWidth,Ud=mo-1-Ge.padInfo.top,pd=rd-1-Ge.padInfo.left,_d=vd/od,Bd=0;Bd<Uo;++Bd)for(var $d=0;$d<od;++$d)for(var jd=0;jd<fd;++jd)for(var Pd=jd-Ud,yd=Math.max(0,Math.ceil(Pd/Md)),Ld=Math.min(Td,(mo+Pd)/Md),zd=0;zd<hd;++zd){for(var Jd=zd-pd,cp=Math.max(0,Math.ceil(Jd/Fd)),mp=Math.min(Od,(rd+Jd)/Fd),gp=0,_p=yd;_p<Ld;++_p)for(var vp=_p*Md-Pd,wp=cp;wp<mp;++wp)for(var md=sn*Bd+fn*_p+hn*wp,Ad=co*(mo-1-vp)+lo*(rd-1-(wp*Fd-Jd))+fo*$d,Nd=0;Nd<_d;++Nd)gp+=Mt[md+($d*_d+Nd)]*to[Ad+Nd];qe[Je*Bd+Qe*jd+st*zd+$d]=gp}return Ke.toTensor()},y.prototype.depthwiseConv2DDerFilter=function(v,$e,Ge){Hh([v,$e],"depthwiseConv2DDerFilter");for(var Ke=Ge.strideHeight,qe=Ge.strideWidth,Ye=Ge.filterHeight,Je=Ge.filterWidth,Qe=dr(Ge.filterShape,"float32"),st=Ge.padInfo.left,Mt=Ge.padInfo.top,on=Ge.outChannels/Ge.inChannels,sn=this.bufferSync(v),fn=this.bufferSync($e),hn=0;hn<Ye;++hn)for(var to=Math.max(0,Math.ceil((Mt-hn)/Ke)),Xr=Math.min(Ge.outHeight,(Ge.inHeight+Mt-hn)/Ke),co=0;co<Je;++co)for(var lo=Math.max(0,Math.ceil((st-co)/qe)),fo=Math.min(Ge.outWidth,(Ge.inWidth+st-co)/qe),Uo=0;Uo<Ge.outChannels;++Uo){for(var mo=Math.trunc(Uo/on),rd=Uo%on,od=0,fd=0;fd<Ge.batchSize;++fd)for(var hd=to;hd<Xr;++hd)for(var vd=hn+hd*Ke-Mt,Td=lo;Td<fo;++Td){var Od=co+Td*qe-st;od+=sn.get(fd,vd,Od,mo)*fn.get(fd,hd,Td,Uo)}Qe.set(od,hn,co,mo,rd)}return Qe.toTensor()},y.prototype.tile=function(v,$e){return Hh(v,"tile"),ta(this.bufferSync(v),$e)},y.prototype.pad=function(v,$e,Ge){Hh(v,"pad");var Ke=$e.map(function(on,sn){return on[0]+v.shape[sn]+on[1]}),qe=$e.map(function(on){return on[0]}),Ye=this.bufferSync(v),Je=dr(Ke,v.dtype);Ge!==0&&Je.values.fill(Ge);for(var Qe=0;Qe<v.size;Qe++){var st=Ye.indexToLoc(Qe),Mt=st.map(function(on,sn){return on+qe[sn]});Je.set.apply(Je,[Ye.get.apply(Ye,st)].concat(Mt))}return Je.toTensor()},y.prototype.transpose=function(v,$e){Hh(v,"transpose");for(var Ge=new Array(v.rank),Ke=0;Ke<Ge.length;Ke++)Ge[Ke]=v.shape[$e[Ke]];var qe=this.readSync(v.dataId),Ye=dr(Ge,v.dtype),Je=this.bufferSync(v);for(Ke=0;Ke<v.size;++Ke){for(var Qe=Je.indexToLoc(Ke),st=new Array(Qe.length),Mt=0;Mt<st.length;Mt++)st[Mt]=Qe[$e[Mt]];var on=Ye.locToIndex(st);Ye.values[on]=qe[Ke]}return Ye.toTensor()},y.prototype.gather=function(v,$e,Ge){Hh([v,$e],"gather");var Ke=v.shape.slice(),qe=this.readSync($e.dataId);Ke[Ge]=qe.length;for(var Ye=dr(Ke,v.dtype),Je=this.bufferSync(v),Qe=0;Qe<Ye.size;++Qe){var st=Ye.indexToLoc(Qe),Mt=st.slice();Mt[Ge]=qe[st[Ge]];var on=Je.locToIndex(Mt);Ye.values[Qe]=Je.values[on]}return Ye.toTensor()},y.prototype.batchToSpaceND=function(v,$e,Ge){Hh([v],"batchToSpaceND");var Ke=$e.reduce(function(Mt,on){return Mt*on}),qe=zr(v.shape,$e,Ke),Ye=Gr(qe.length,$e.length),Je=Hr(v.shape,$e,Ke),Qe=qr(Ge,$e.length),st=Kr(Je,Ge,$e.length);return v.reshape(qe).transpose(Ye).reshape(Je).slice(Qe,st)},y.prototype.spaceToBatchND=function(v,$e,Ge){Hh([v],"spaceToBatchND");var Ke=$e.reduce(function(on,sn){return on*sn}),qe=[[0,0]];qe.push.apply(qe,Ge);for(var Ye=1+$e.length;Ye<v.shape.length;++Ye)qe.push([0,0]);var Je=v.pad(qe),Qe=zr(Je.shape,$e,Ke,!1),st=Gr(Qe.length,$e.length,!1),Mt=Hr(Je.shape,$e,Ke,!1);return Je.reshape(Qe).transpose(st).reshape(Mt)},y.prototype.pool=function(v,$e,Ge){Hh(v,"pool");for(var Ke=$e.strideHeight,qe=$e.strideWidth,Ye=$e.dilationHeight,Je=$e.dilationWidth,Qe=$e.effectiveFilterHeight,st=$e.effectiveFilterWidth,Mt=$e.padInfo.top,on=$e.padInfo.left,sn=Ge==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,fn=this.readSync(v.dataId),hn=dr($e.outShape,v.dtype),to=hn.values,Xr=$e.outShape[1]*$e.outShape[2]*$e.outShape[3],co=$e.outShape[2]*$e.outShape[3],lo=$e.outShape[3],fo=0;fo<$e.batchSize;++fo)for(var Uo=fo*Xr,mo=fo*v.strides[0],rd=0;rd<$e.inChannels;++rd)for(var od=0;od<$e.outHeight;++od)for(var fd=od*Ke-Mt,hd=Math.max(0,fd),vd=Math.min($e.inHeight,Qe+fd),Td=Uo+od*co,Od=0;Od<$e.outWidth;++Od){for(var Md=Od*qe-on,Fd=Math.max(0,Md),Ud=Math.min($e.inWidth,st+Md),pd=sn,_d=0,Bd=0,$d=hd;$d<vd;$d+=Ye){for(var jd=mo+$d*v.strides[1],Pd=Fd;Pd<Ud;Pd+=Je){var yd=fn[jd+Pd*v.strides[2]+rd];Ge==="max"&&yd>pd?pd=yd:Ge==="avg"&&(_d+=yd,Bd++)}if(isNaN(pd))break}to[Td+Od*lo+rd]=Ge==="avg"?_d/Bd:pd}return hn.toTensor()},y.prototype.maxPool=function(v,$e){return this.pool(v,$e,"max")},y.prototype.maxPoolPositions=function(v,$e){for(var Ge=dr($e.outShape,"int32"),Ke=$e.strideHeight,qe=$e.strideWidth,Ye=$e.dilationHeight,Je=$e.dilationWidth,Qe=$e.effectiveFilterHeight,st=$e.effectiveFilterWidth,Mt=$e.padInfo.top,on=$e.padInfo.left,sn=this.bufferSync(v),fn=0;fn<$e.batchSize;++fn)for(var hn=0;hn<$e.inChannels;++hn)for(var to=0;to<$e.outHeight;++to){for(var Xr=to*Ke-Mt,co=Xr;co<0;)co+=Ye;for(var lo=Math.min($e.inHeight,Qe+Xr),fo=0;fo<$e.outWidth;++fo){for(var Uo=fo*qe-on,mo=Uo;mo<0;)mo+=Je;for(var rd=Math.min($e.inWidth,st+Uo),od=Number.NEGATIVE_INFINITY,fd=-1,hd=co;hd<lo;hd+=Ye)for(var vd=hd-Xr,Td=mo;Td<rd;Td+=Je){var Od=Td-Uo,Md=sn.get(fn,hd,Td,hn);Md>od&&(od=Md,fd=vd*st+Od)}Ge.set(fd,fn,to,fo,hn)}}return Ge.toTensor()},y.prototype.maxPoolBackprop=function(v,$e,Ge,Ke){Hh([$e,Ge],"maxPoolBackprop");for(var qe=this.maxPoolPositions($e,Ke),Ye=Ke.strideHeight,Je=Ke.strideWidth,Qe=Ke.dilationHeight,st=Ke.dilationWidth,Mt=Ke.effectiveFilterHeight,on=Ke.effectiveFilterWidth,sn=on-1-Ke.padInfo.left,fn=Mt-1-Ke.padInfo.top,hn=dr($e.shape,"float32"),to=this.bufferSync(qe),Xr=this.bufferSync(v),co=0;co<Ke.batchSize;++co)for(var lo=0;lo<Ke.inChannels;++lo)for(var fo=0;fo<Ke.inHeight;++fo)for(var Uo=0;Uo<Ke.inWidth;++Uo){for(var mo=fo-fn,rd=Uo-sn,od=0,fd=0;fd<Mt;fd+=Qe){var hd=(mo+fd)/Ye;if(!(hd<0||hd>=Ke.outHeight||Math.floor(hd)!==hd))for(var vd=0;vd<on;vd+=st){var Td=(rd+vd)/Je;if(!(Td<0||Td>=Ke.outWidth||Math.floor(Td)!==Td)){var Od=Mt*on-1-to.get(co,hd,Td,lo)===fd*on+vd?1:0;Od!==0&&(od+=Xr.get(co,hd,Td,lo)*Od)}}}hn.set(od,co,fo,Uo,lo)}return hn.toTensor()},y.prototype.avgPoolBackprop=function(v,$e,Ge){Hh([v,$e],"avgPoolBackprop");for(var Ke=Ge.strideHeight,qe=Ge.strideWidth,Ye=Ge.filterHeight,Je=Ge.filterWidth,Qe=Ge.dilationHeight,st=Ge.dilationWidth,Mt=Ge.effectiveFilterHeight,on=Ge.effectiveFilterWidth,sn=on-1-Ge.padInfo.left,fn=Mt-1-Ge.padInfo.top,hn=dr($e.shape,"float32"),to=1/(Ye*Je),Xr=this.bufferSync(v),co=0;co<Ge.batchSize;++co)for(var lo=0;lo<Ge.inChannels;++lo)for(var fo=0;fo<Ge.inHeight;++fo)for(var Uo=0;Uo<Ge.inWidth;++Uo){for(var mo=fo-fn,rd=Uo-sn,od=0,fd=0;fd<Mt;fd+=Qe){var hd=(mo+fd)/Ke;if(!(hd<0||hd>=Ge.outHeight||Math.floor(hd)!==hd))for(var vd=0;vd<on;vd+=st){var Td=(rd+vd)/qe;Td<0||Td>=Ge.outWidth||Math.floor(Td)!==Td||(od+=Xr.get(co,hd,Td,lo))}}hn.set(od*to,co,fo,Uo,lo)}return hn.toTensor()},y.prototype.pool3d=function(v,$e,Ge){Hh(v,"pool3d");for(var Ke=$e.strideDepth,qe=$e.strideHeight,Ye=$e.strideWidth,Je=$e.dilationDepth,Qe=$e.dilationHeight,st=$e.dilationWidth,Mt=$e.effectiveFilterDepth,on=$e.effectiveFilterHeight,sn=$e.effectiveFilterWidth,fn=$e.padInfo.front,hn=$e.padInfo.top,to=$e.padInfo.left,Xr=Ge==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,co=this.readSync(v.dataId),lo=dr($e.outShape,v.dtype),fo=lo.values,Uo=$e.outShape[1]*$e.outShape[2]*$e.outShape[3]*$e.outShape[4],mo=$e.outShape[2]*$e.outShape[3]*$e.outShape[4],rd=$e.outShape[3]*$e.outShape[4],od=$e.outShape[4],fd=0;fd<$e.batchSize;++fd)for(var hd=fd*Uo,vd=fd*v.strides[0],Td=0;Td<$e.inChannels;++Td)for(var Od=0;Od<$e.outDepth;++Od){for(var Md=Od*Ke-fn,Fd=Md;Fd<0;)Fd+=Je;for(var Ud=Math.min($e.inDepth,Mt+Md),pd=hd+Od*mo,_d=0;_d<$e.outHeight;++_d){for(var Bd=_d*qe-hn,$d=Bd;$d<0;)$d+=Qe;for(var jd=Math.min($e.inHeight,on+Bd),Pd=pd+_d*rd,yd=0;yd<$e.outWidth;++yd){for(var Ld=yd*Ye-to,zd=Ld;zd<0;)zd+=st;for(var Jd=Math.min($e.inWidth,sn+Ld),cp=Pd+yd*od,mp=Xr,gp=0,_p=0,vp=Fd;vp<Ud;vp+=Je){for(var wp=vd+vp*v.strides[1],md=$d;md<jd;md+=Qe){for(var Ad=wp+md*v.strides[2],Nd=zd;Nd<Jd;Nd+=st){var Hd=co[Ad+Nd*v.strides[3]+Td];if(Ge==="max"&&Hd>mp?mp=Hd:Ge==="avg"&&(gp+=Hd,_p++),isNaN(mp))break}if(isNaN(mp))break}if(isNaN(mp))break}fo[cp+Td]=Ge==="avg"?gp/_p:mp}}}return lo.toTensor()},y.prototype.avgPool3d=function(v,$e){return Hh(v,"avgPool3d"),this.pool3d(v,$e,"avg").toFloat()},y.prototype.avgPool3dBackprop=function(v,$e,Ge){Hh([v,$e],"avgPool3dBackprop");for(var Ke=Ge.strideDepth,qe=Ge.strideHeight,Ye=Ge.strideWidth,Je=Ge.filterDepth,Qe=Ge.filterHeight,st=Ge.filterWidth,Mt=Ge.dilationDepth,on=Ge.dilationHeight,sn=Ge.dilationWidth,fn=Ge.effectiveFilterDepth,hn=Ge.effectiveFilterHeight,to=Ge.effectiveFilterWidth,Xr=fn-1-Ge.padInfo.front,co=to-1-Ge.padInfo.left,lo=hn-1-Ge.padInfo.top,fo=dr($e.shape,"float32"),Uo=1/(Je*Qe*st),mo=this.bufferSync(v),rd=0;rd<Ge.batchSize;++rd)for(var od=0;od<Ge.inChannels;++od)for(var fd=0;fd<Ge.inDepth;++fd)for(var hd=0;hd<Ge.inHeight;++hd)for(var vd=0;vd<Ge.inWidth;++vd){for(var Td=fd-Xr,Od=hd-lo,Md=vd-co,Fd=0,Ud=0;Ud<fn;Ud+=Mt){var pd=(Td+Ud)/Ke;if(!(pd<0||pd>=Ge.outDepth||Math.floor(pd)!==pd))for(var _d=0;_d<hn;_d+=on){var Bd=(Od+_d)/qe;if(!(Bd<0||Bd>=Ge.outHeight||Math.floor(Bd)!==Bd))for(var $d=0;$d<to;$d+=sn){var jd=(Md+$d)/Ye;jd<0||jd>=Ge.outWidth||Math.floor(jd)!==jd||(Fd+=mo.get(rd,pd,Bd,jd,od))}}}fo.set(Fd*Uo,rd,fd,hd,vd,od)}return fo.toTensor()},y.prototype.maxPool3d=function(v,$e){return Hh(v,"maxPool3d"),this.pool3d(v,$e,"max").toFloat()},y.prototype.maxPool3dPositions=function(v,$e){for(var Ge=dr($e.outShape,"int32"),Ke=$e.strideDepth,qe=$e.strideHeight,Ye=$e.strideWidth,Je=$e.dilationDepth,Qe=$e.dilationHeight,st=$e.dilationWidth,Mt=$e.effectiveFilterDepth,on=$e.effectiveFilterHeight,sn=$e.effectiveFilterWidth,fn=$e.padInfo.front,hn=$e.padInfo.top,to=$e.padInfo.left,Xr=this.bufferSync(v),co=0;co<$e.batchSize;++co)for(var lo=0;lo<$e.inChannels;++lo)for(var fo=0;fo<$e.outDepth;++fo){for(var Uo=fo*Ke-fn,mo=Uo;mo<0;)mo+=Je;for(var rd=Math.min($e.inDepth,Mt+Uo),od=0;od<$e.outHeight;++od){for(var fd=od*qe-hn,hd=fd;hd<0;)hd+=Qe;for(var vd=Math.min($e.inHeight,on+fd),Td=0;Td<$e.outWidth;++Td){for(var Od=Td*Ye-to,Md=Od;Md<0;)Md+=st;for(var Fd=Math.min($e.inWidth,sn+Od),Ud=Number.NEGATIVE_INFINITY,pd=-1,_d=mo;_d<rd;_d+=Je)for(var Bd=_d-Uo,$d=hd;$d<vd;$d+=Qe)for(var jd=$d-fd,Pd=Md;Pd<Fd;Pd+=st){var yd=Pd-Od,Ld=Xr.get(co,_d,$d,Pd,lo);Ld>=Ud&&(Ud=Ld,pd=Bd*on*sn+jd*on+yd)}Ge.set(pd,co,fo,od,Td,lo)}}}return Ge.toTensor()},y.prototype.maxPool3dBackprop=function(v,$e,Ge,Ke){Hh([$e,Ge],"maxPool3dBackprop");for(var qe=this.maxPool3dPositions($e,Ke),Ye=Ke.strideDepth,Je=Ke.strideHeight,Qe=Ke.strideWidth,st=Ke.dilationDepth,Mt=Ke.dilationHeight,on=Ke.dilationWidth,sn=Ke.effectiveFilterDepth,fn=Ke.effectiveFilterHeight,hn=Ke.effectiveFilterWidth,to=sn-1-Ke.padInfo.front,Xr=hn-1-Ke.padInfo.left,co=fn-1-Ke.padInfo.top,lo=dr($e.shape,"float32"),fo=this.bufferSync(qe),Uo=this.bufferSync(v),mo=0;mo<Ke.batchSize;++mo)for(var rd=0;rd<Ke.inChannels;++rd)for(var od=0;od<Ke.inDepth;++od)for(var fd=0;fd<Ke.inHeight;++fd)for(var hd=0;hd<Ke.inWidth;++hd){for(var vd=od-to,Td=fd-co,Od=hd-Xr,Md=0,Fd=0;Fd<sn;Fd+=st){var Ud=(vd+Fd)/Ye;if(!(Ud<0||Ud>=Ke.outDepth||Math.floor(Ud)!==Ud))for(var pd=0;pd<fn;pd+=Mt){var _d=(Td+pd)/Je;if(!(_d<0||_d>=Ke.outHeight||Math.floor(_d)!==_d))for(var Bd=0;Bd<hn;Bd+=on){var $d=(Od+Bd)/Qe;if(!($d<0||$d>=Ke.outWidth||Math.floor($d)!==$d)){var jd=sn*fn*hn-1-fo.get(mo,Ud,_d,$d,rd)===Fd*fn*hn+pd*hn+Bd?1:0;jd!==0&&(Md+=Uo.get(mo,Ud,_d,$d,rd)*jd)}}}}lo.set(Md,mo,od,fd,hd,rd)}return lo.toTensor()},y.prototype.cast=function(v,$e){return Po(v,$e,this)},y.prototype.reshape=function(v,$e){return Lo(v,$e)},y.prototype.avgPool=function(v,$e){return Hh(v,"avgPool"),this.pool(v,$e,"avg").toFloat()},y.prototype.resizeBilinear=function(v,$e,Ge,Ke){Hh(v,"resizeBilinear");for(var qe=v.shape,Ye=qe[0],Je=qe[1],Qe=qe[2],st=qe[3],Mt=this.readSync(v.dataId),on=new Float32Array(k([Ye,$e,Ge,st])),sn=[Ke&&$e>1?Je-1:Je,Ke&&Ge>1?Qe-1:Qe],fn=[Ke&&$e>1?$e-1:$e,Ke&&Ge>1?Ge-1:Ge],hn=0,to=sn[0]/fn[0],Xr=sn[1]/fn[1],co=0;co<Ye;co++)for(var lo=0;lo<$e;lo++)for(var fo=to*lo,Uo=Math.floor(fo),mo=fo-Uo,rd=Math.min(Je-1,Math.ceil(fo)),od=co*v.strides[0]+Uo*v.strides[1],fd=co*v.strides[0]+rd*v.strides[1],hd=0;hd<Ge;hd++)for(var vd=Xr*hd,Td=Math.floor(vd),Od=vd-Td,Md=Math.min(Qe-1,Math.ceil(vd)),Fd=od+Td*v.strides[2],Ud=fd+Td*v.strides[2],pd=od+Md*v.strides[2],_d=fd+Md*v.strides[2],Bd=0;Bd<st;Bd++){var $d=Mt[Fd+Bd],jd=Mt[Ud+Bd],Pd=$d+(Mt[pd+Bd]-$d)*Od,yd=Pd+(jd+(Mt[_d+Bd]-jd)*Od-Pd)*mo;on[hn++]=yd}return Fn(on,[Ye,$e,Ge,st])},y.prototype.resizeBilinearBackprop=function(v,$e,Ge){Hh([v,$e],"resizeBilinearBackprop");for(var Ke=$e.shape,qe=Ke[0],Ye=Ke[1],Je=Ke[2],Qe=Ke[3],st=v.shape,Mt=st[1],on=st[2],sn=new Float32Array(qe*Ye*Je*Qe),fn=[Ge&&Mt>1?Ye-1:Ye,Ge&&on>1?Je-1:Je],hn=[Ge&&Mt>1?Mt-1:Mt,Ge&&on>1?on-1:on],to=fn[0]/hn[0],Xr=fn[1]/hn[1],co=this.readSync(v.dataId),lo=0,fo=0;fo<qe;fo++)for(var Uo=fo*$e.strides[0],mo=0;mo<Mt;mo++)for(var rd=mo*to,od=Math.floor(rd),fd=Math.min(Math.ceil(rd),Ye-1),hd=Uo+od*$e.strides[1],vd=Uo+fd*$e.strides[1],Td=rd-od,Od=1-Td,Md=0;Md<on;Md++)for(var Fd=Md*Xr,Ud=Math.floor(Fd),pd=Math.min(Math.ceil(Fd),Je-1),_d=Fd-Ud,Bd=1-_d,$d=hd+Ud*$e.strides[2],jd=hd+pd*$e.strides[2],Pd=vd+Ud*$e.strides[2],yd=vd+pd*$e.strides[2],Ld=Od*Bd,zd=Od*_d,Jd=Td*Bd,cp=Td*_d,mp=0;mp<Qe;mp++){var gp=co[lo++];sn[$d+mp]+=gp*Ld,sn[jd+mp]+=gp*zd,sn[Pd+mp]+=gp*Jd,sn[yd+mp]+=gp*cp}return Ln(sn,[qe,Je,Ye,Qe],$e.dtype)},y.prototype.resizeNearestNeighbor=function(v,$e,Ge,Ke){Hh(v,"resizeNearestNeighbor");for(var qe=v.shape,Ye=qe[0],Je=qe[1],Qe=qe[2],st=qe[3],Mt=this.readSync(v.dataId),on=new Float32Array(Ye*$e*Ge*st),sn=[Ke&&$e>1?Je-1:Je,Ke&&Ge>1?Qe-1:Qe],fn=[Ke&&$e>1?$e-1:$e,Ke&&Ge>1?Ge-1:Ge],hn=sn[0]/fn[0],to=sn[1]/fn[1],Xr=0,co=0;co<Ye;co++)for(var lo=co*v.strides[0],fo=0;fo<$e;fo++)for(var Uo=hn*fo,mo=lo+Math.min(Je-1,Ke?Math.round(Uo):Math.floor(Uo))*v.strides[1],rd=0;rd<Ge;rd++)for(var od=to*rd,fd=mo+Math.min(Qe-1,Ke?Math.round(od):Math.floor(od))*v.strides[2],hd=0;hd<st;hd++){var vd=Mt[fd+hd];on[Xr++]=vd}return Fn(on,[Ye,$e,Ge,st],v.dtype)},y.prototype.resizeNearestNeighborBackprop=function(v,$e,Ge){Hh([v,$e],"resizeNearestNeighborBackprop");for(var Ke=$e.shape,qe=Ke[0],Ye=Ke[1],Je=Ke[2],Qe=Ke[3],st=v.shape,Mt=st[1],on=st[2],sn=new Float32Array(qe*Ye*Je*Qe),fn=this.readSync(v.dataId),hn=[Ge&&Mt>1?Ye-1:Ye,Ge&&on>1?Je-1:Je],to=[Ge&&Mt>1?Mt-1:Mt,Ge&&on>1?on-1:on],Xr=hn[0]/to[0],co=hn[1]/to[1],lo=1/Xr,fo=1/co,Uo=2*Math.ceil(lo)+2,mo=2*Math.ceil(fo)+2,rd=0;rd<qe;rd++)for(var od=rd*$e.strides[0],fd=0;fd<Ye;fd++)for(var hd=od+fd*$e.strides[1],vd=Math.floor(fd*lo),Td=Math.floor(vd-Uo/2),Od=0;Od<Je;Od++)for(var Md=hd+Od*$e.strides[2],Fd=Math.floor(Od*fo),Ud=Math.floor(Fd-mo/2),pd=0;pd<Qe;pd++){for(var _d=0,Bd=0;Bd<Uo;Bd++){var $d=Bd+Td;if(!($d<0||$d>=Mt)){var jd=od+$d*v.strides[1],Pd=$d*Xr;if(fd===Math.min(Ye-1,Ge?Math.round(Pd):Math.floor(Pd)))for(var yd=0;yd<mo;yd++){var Ld=yd+Ud;if(!(Ld<0||Ld>=on)){var zd=jd+Ld*v.strides[2],Jd=Ld*co;Od===Math.min(Je-1,Ge?Math.round(Jd):Math.floor(Jd))&&(_d+=fn[zd+pd])}}}}sn[Md+pd]=_d}return Ln(sn,$e.shape,$e.dtype)},y.prototype.batchNormalization=function(v,$e,Ge,Ke,qe,Ye){Hh([v,$e,Ge,qe,Ye],"batchNorm");for(var Je=this.readSync(v.dataId),Qe=this.readSync($e.dataId),st=this.readSync(Ge.dataId),Mt=qe?this.readSync(qe.dataId):new Float32Array([1]),on=Ye?this.readSync(Ye.dataId):new Float32Array([0]),sn=new Float32Array(Je.length),fn=on.length,hn=Mt.length,to=st.length,Xr=Qe.length,co=0,lo=0,fo=0,Uo=0,mo=0;mo<Je.length;++mo)sn[mo]=on[co++]+(Je[mo]-Qe[lo++])*Mt[fo++]/Math.sqrt(st[Uo++]+Ke),co>=fn&&(co=0),lo>=Xr&&(lo=0),fo>=hn&&(fo=0),Uo>=to&&(Uo=0);return Ln(sn,v.shape)},y.prototype.localResponseNormalization4D=function(v,$e,Ge,Ke,qe){Hh(v,"localResponseNormalization4D");var Ye=v.shape[3],Je=Ye-1,Qe=this.readSync(v.dataId),st=v.size,Mt=new Float32Array(st);function on(to){for(var Xr=to%Ye,co=to-Xr+Math.max(0,Xr-$e),lo=to-Xr+Math.min(Xr+$e,Je),fo=0;co<=lo;co++){var Uo=Qe[co];fo+=Uo*Uo}return fo}for(var sn=0;sn<st;sn++){var fn=on(sn),hn=Qe[sn]*Math.pow(Ge+Ke*fn,-qe);Mt[sn]=hn}return Ln(Mt,v.shape)},y.prototype.LRNGrad=function(v,$e,Ge,Ke,qe,Ye,Je){Hh(v,"LRNGrad");for(var Qe=v.shape[3],st=this.readSync(v.dataId),Mt=this.readSync($e.dataId),on=this.readSync(Ge.dataId),sn=new Float32Array(v.size),fn=v.size,hn=0;hn<fn;hn++){for(var to=hn%Qe,Xr=hn-to+Math.max(0,to-Ke),co=hn-to+Math.min(Qe,to+Ke+1),lo=0,fo=Xr;fo<co;fo++)lo+=Math.pow(Mt[fo],2);for(lo=Ye*lo+qe,fo=Xr;fo<co;fo++){var Uo=-2*Ye*Je*Mt[fo]*on[hn]/lo;hn===fo&&(Uo+=Math.pow(lo,-Je)),Uo*=st[hn],sn[fo]+=Uo}}return Ln(sn,v.shape)},y.prototype.multinomial=function(v,$e,Ge,Ke){Hh(v,"multinomial");for(var qe=$e?v:go(v),Ye=qe.shape[0],Je=qe.shape[1],Qe=Gn([Ye,Ge],"int32"),st=this.readSync(Qe.dataId),Mt=this.readSync(qe.dataId),on=0;on<Ye;++on){var sn=on*Je,fn=new Float32Array(Je-1);fn[0]=Mt[sn];for(var hn=1;hn<fn.length;++hn)fn[hn]=fn[hn-1]+Mt[sn+hn];for(var to=cr(Ke.toString()),Xr=on*Ge,co=0;co<Ge;++co){var lo=to();st[Xr+co]=fn.length;for(var fo=0;fo<fn.length;fo++)if(lo<fn[fo]){st[Xr+co]=fo;break}}}return Qe},y.prototype.oneHot=function(v,$e,Ge,Ke){Hh(v,"oneHot");var qe=new Float32Array(v.size*$e);qe.fill(Ke);for(var Ye=this.readSync(v.dataId),Je=0;Je<v.size;++Je)Ye[Je]>=0&&Ye[Je]<$e&&(qe[Je*$e+Ye[Je]]=Ge);return Bn(qe,[v.size,$e],"int32")},y.prototype.nonMaxSuppression=function(v,$e,Ge,Ke,qe){return Hh(v,"nonMaxSuppression"),jo(this.readSync(v.dataId),this.readSync($e.dataId),Ge,Ke,qe)},y.prototype.fft=function(v){return this.fftBatch(v,!1)},y.prototype.ifft=function(v){return this.fftBatch(v,!0)},y.prototype.fftBatch=function(v,$e){for(var Ge=v.shape[0],Ke=v.shape[1],qe=dr(v.shape,"float32"),Ye=dr(v.shape,"float32"),Je=Tn(v).as2D(Ge,Ke),Qe=Nn(v).as2D(Ge,Ke),st=0;st<Ge;st++)for(var Mt=Je.slice([st,0],[1,Ke]),on=Qe.slice([st,0],[1,Ke]),sn=Dn(Mt,on),fn=this.readSync(this.fftImpl(sn,$e).dataId),hn=0;hn<Ke;hn++){var to=zo(fn,hn);qe.values[st*Ke+hn]=to.real,Ye.values[st*Ke+hn]=to.imag}return Dn(qe.toTensor(),Ye.toTensor()).as2D(Ge,Ke)},y.prototype.fftImpl=function(v,$e){var Ge=v.as1D(),Ke=Ge.size;if(this.isExponentOf2(Ke)){var qe=this.fftRadix2(Ge,Ke,$e).as2D(v.shape[0],v.shape[1]);return $e&&(qe=Dn(Tn(qe).div(On(Ke)),Nn(qe).div(On(Ke)))),qe}var Ye=this.readSync(v.dataId),Je=function(Qe){for(var st=new Float32Array(Qe.length/2),Mt=new Float32Array(Qe.length/2),on=0;on<Qe.length;on+=2)st[on/2]=Qe[on],Mt[on/2]=Qe[on+1];return{real:st,imag:Mt}}(this.fourierTransformByMatmul(Ye,Ke,$e));return Dn(Je.real,Je.imag).as2D(v.shape[0],v.shape[1])},y.prototype.isExponentOf2=function(v){return(v&v-1)==0},y.prototype.fftRadix2=function(v,$e,Ge){if($e===1)return v;var Ke=this.readSync(v.dataId),qe=$e/2,Ye=function(Xr){for(var co=Math.ceil(Xr.length/4),lo=new Float32Array(co),fo=new Float32Array(co),Uo=0;Uo<Xr.length;Uo+=4)lo[Math.floor(Uo/4)]=Xr[Uo],fo[Math.floor(Uo/4)]=Xr[Uo+1];return{real:lo,imag:fo}}(Ke),Je=Dn(Ye.real,Ye.imag).as1D(),Qe=function(Xr){for(var co=Math.floor(Xr.length/4),lo=new Float32Array(co),fo=new Float32Array(co),Uo=2;Uo<Xr.length;Uo+=4)lo[Math.floor(Uo/4)]=Xr[Uo],fo[Math.floor(Uo/4)]=Xr[Uo+1];return{real:lo,imag:fo}}(Ke),st=Dn(Qe.real,Qe.imag).as1D();Je=this.fftRadix2(Je,qe,Ge),st=this.fftRadix2(st,qe,Ge);var Mt=function(Xr,co){for(var lo=new Float32Array(Xr/2),fo=new Float32Array(Xr/2),Uo=0;Uo<Math.ceil(Xr/2);Uo++){var mo=(co?2:-2)*Math.PI*(Uo/Xr);lo[Uo]=Math.cos(mo),fo[Uo]=Math.sin(mo)}return{real:lo,imag:fo}}($e,Ge),on=Dn(Mt.real,Mt.imag).mul(st),sn=Je.add(on),fn=Je.sub(on),hn=Tn(sn).concat(Tn(fn)),to=Nn(sn).concat(Nn(fn));return Dn(hn,to).as1D()},y.prototype.fourierTransformByMatmul=function(v,$e,Ge){for(var Ke=new Float32Array(2*$e),qe=0;qe<$e;qe++){for(var Ye=0,Je=0,Qe=0;Qe<$e;Qe++){var st=Ho(qe*Qe,$e,Ge),Mt=zo(v,Qe);Ye+=Mt.real*st.real-Mt.imag*st.imag,Je+=Mt.real*st.imag+Mt.imag*st.real}Ge&&(Ye/=$e,Je/=$e),Go(Ke,Ye,Je,qe)}return Ke},y.prototype.depthToSpace=function(v,$e,Ge){C(Ge==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+Ge}),C($e>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+$e});for(var Ke=v.shape[0],qe=v.shape[1],Ye=v.shape[2],Je=v.shape[3],Qe=qe*$e,st=Ye*$e,Mt=Je/($e*$e),on=this.readSync(v.dataId),sn=new Float32Array(Ke*Qe*st*Mt),fn=0,hn=0;hn<Ke;++hn)for(var to=0;to<Qe;++to)for(var Xr=Math.floor(to/$e),co=to%$e,lo=0;lo<st;++lo)for(var fo=Math.floor(lo/$e),Uo=(co*$e+lo%$e)*Mt,mo=0;mo<Mt;++mo){var rd=mo+Uo+Je*(fo+Ye*(Xr+qe*hn));sn[fn++]=on[rd]}return Ln(sn,[Ke,Qe,st,Mt])},y.prototype.broadcastedBinaryOp=function(v,$e,Ge,Ke){var qe=Ro(v.shape,$e.shape),Ye=dr(qe,Ge),Je=this.readSync(v.dataId),Qe=this.readSync($e.dataId),st=Co(v.shape,qe),Mt=Co($e.shape,qe),on=Ye.values;if(st.length+Mt.length===0)for(var sn=0;sn<on.length;++sn)on[sn]=Ke(Je[sn%Je.length],Qe[sn%Qe.length]);else{var fn=this.bufferSync(v),hn=this.bufferSync($e),to=function(Xr){var co=Ye.indexToLoc(Xr),lo=co.slice(-v.rank);st.forEach(function(rd){return lo[rd]=0});var fo=fn.locToIndex(lo),Uo=co.slice(-$e.rank);Mt.forEach(function(rd){return Uo[rd]=0});var mo=hn.locToIndex(Uo);on[Xr]=Ke(Je[fo],Qe[mo])};for(sn=0;sn<on.length;++sn)to(sn)}return Ye.toTensor()},y.prototype.broadcastedBinaryComplexOp=function(v,$e,Ge){var Ke=Ro(v.shape,$e.shape),qe=dr(Ke,"float32"),Ye=dr(Ke,"float32"),Je=this.readSync(v.dataId),Qe=this.readSync($e.dataId),st=Co(v.shape,Ke),Mt=Co($e.shape,Ke),on=qe.values,sn=Ye.values;if(st.length+Mt.length===0)for(var fn=0;fn<on.length;fn++){var hn=fn%Je.length,to=fn%Qe.length,Xr=Ge(Je[2*hn],Je[2*hn+1],Qe[2*to],Qe[2*to+1]);on[fn]=Xr.real,sn[fn]=Xr.imag}else{var co=this.bufferSync(this.data.get(v.dataId).complexTensors.real),lo=this.bufferSync(this.data.get($e.dataId).complexTensors.real),fo=function(Uo){var mo=qe.indexToLoc(Uo),rd=mo.slice(-v.rank);st.forEach(function(Td){return rd[Td]=0});var od=co.locToIndex(rd),fd=mo.slice(-$e.rank);Mt.forEach(function(Td){return fd[Td]=0});var hd=lo.locToIndex(fd),vd=Ge(Je[2*od],Je[2*od+1],Qe[2*hd],Qe[2*hd+1]);on[Uo]=vd.real,sn[Uo]=vd.imag};for(fn=0;fn<on.length;fn++)fo(fn)}return this.complex(qe.toTensor(),Ye.toTensor())},y.prototype.split=function(v,$e,Ge){return Zo(v,$e,Ge)},y.prototype.dispose=function(){},y.prototype.floatPrecision=function(){return 32},y.prototype.epsilon=function(){return 1e-7},y.prototype.cropAndResize=function(v,$e,Ge,Ke,qe,Ye){for(var Je=v.shape,Qe=Je[0],st=Je[1],Mt=Je[2],on=Je[3],sn=$e.shape[0],fn=Ke[0],hn=Ke[1],to=dr([sn,fn,hn,on],"float32"),Xr=this.readSync($e.dataId),co=this.readSync(Ge.dataId),lo=this.readSync(v.dataId),fo=v.strides,Uo=to.strides,mo=0;mo<sn;mo++){var rd=4*mo,od=Xr[rd],fd=Xr[rd+1],hd=Xr[rd+2],vd=Xr[rd+3],Td=co[mo];if(!(Td>=Qe))for(var Od=fn>1?(hd-od)*(st-1)/(fn-1):0,Md=hn>1?(vd-fd)*(Mt-1)/(hn-1):0,Fd=0;Fd<fn;Fd++){var Ud=fn>1?od*(st-1)+Fd*Od:.5*(od+hd)*(st-1);if(Ud<0||Ud>st-1)for(var pd=0;pd<hn;pd++)for(var _d=0;_d<on;_d++){var Bd=_d+pd*Uo[2]+Fd*Uo[1]+mo*Uo[0];to.values[Bd]=Ye}else if(qe==="bilinear"){var $d=Math.floor(Ud),jd=Math.ceil(Ud),Pd=Ud-$d;for(pd=0;pd<hn;pd++)if((vp=hn>1?fd*(Mt-1)+pd*Md:.5*(fd+vd)*(Mt-1))<0||vp>Mt-1)for(_d=0;_d<on;_d++)Bd=_d+pd*Uo[2]+Fd*Uo[1]+mo*Uo[0],to.values[Bd]=Ye;else{var yd=Math.floor(vp),Ld=Math.ceil(vp),zd=vp-yd;for(_d=0;_d<on;_d++){var Jd=lo[Bd=_d+yd*fo[2]+$d*fo[1]+Td*fo[0]],cp=lo[Bd=_d+Ld*fo[2]+$d*fo[1]+Td*fo[0]],mp=lo[Bd=_d+yd*fo[2]+jd*fo[1]+Td*fo[0]],gp=Jd+(cp-Jd)*zd,_p=mp+(lo[Bd=_d+Ld*fo[2]+jd*fo[1]+Td*fo[0]]-mp)*zd;Bd=_d+pd*Uo[2]+Fd*Uo[1]+mo*Uo[0],to.values[Bd]=gp+(_p-gp)*Pd}}}else for(pd=0;pd<hn;++pd){var vp;if((vp=hn>1?fd*(Mt-1)+pd*Md:.5*(fd+vd)*(Mt-1))<0||vp>Mt-1)for(_d=0;_d<on;_d++)Bd=_d+pd*Uo[2]+Fd*Uo[1]+mo*Uo[0],to.values[Bd]=Ye;else{var wp=Math.round(vp),md=Math.round(Ud);for(_d=0;_d<on;_d++){var Ad=_d+wp*fo[2]+md*fo[1]+Td*fo[0],Nd=_d+pd*Uo[2]+Fd*Uo[1]+mo*Uo[0];to.values[Nd]=lo[Ad]}}}}}return to.toTensor()},y.prototype.sparseToDense=function(v,$e,Ge,Ke){var qe=Zr(0,v,Ge),Ye=qe.sliceRank,Je=qe.numUpdates,Qe=qe.sliceSize,st=qe.strides,Mt=qe.outputSize;return this.scatter(v,$e,Ge,Mt,Qe,Je,Ye,st,Ke,!1)},y.prototype.gatherND=function(v,$e){var Ge=$e.shape,Ke=Ge[Ge.length-1],qe=jr(v,$e),Ye=qe[0],Je=qe[1],Qe=qe[2],st=qe[3];if(Je===0)return Fn([],Ye,v.dtype);for(var Mt=new gt([Je,Qe],v.dtype),on=this.readSync($e.dataId),sn=this.readSync(v.dataId),fn=0;fn<Je;fn++){for(var hn=[],to=0,Xr=0;Xr<Ke;Xr++){var co=on[fn*Ke+Xr];to+=co*st[Xr],hn.push(co)}if(to<0||to>=v.size/Qe)throw new Error("Invalid indices: "+hn+" does not index into "+v.shape);for(var lo=0;lo<Qe;lo++)Mt.values[fn*Qe+lo]=sn[to*Qe+lo]}return Mt.toTensor().reshape(Ye)},y.prototype.scatterND=function(v,$e,Ge){var Ke=Zr(0,v,Ge),qe=Ke.sliceRank,Ye=Ke.numUpdates,Je=Ke.sliceSize,Qe=Ke.strides,st=Ke.outputSize,Mt=On(0);return this.scatter(v,$e,Ge,st,Je,Ye,qe,Qe,Mt,!0)},y.prototype.fill=function(v,$e,Ge){var Ke=P(Ge=Ge||j($e),k(v));return Ke.fill($e),Lt.makeTensor(Ke,v,Ge,this)},y.prototype.onesLike=function(v){if(v.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(v.shape,1,v.dtype)},y.prototype.zerosLike=function(v){var $e=P(v.dtype,k(v.shape));return this.makeOutput($e,v.shape,v.dtype)},y.prototype.linspace=function(v,$e,Ge){return Wo(v,$e,Ge)},y.prototype.scatter=function(v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt){var on=[Ke/qe,qe],sn=this.readSync(v.dataId),fn=this.readSync($e.dataId);if(Ke===0)return Fn([],Ge,$e.dtype);var hn=new gt(on,$e.dtype);hn.values.fill(this.readSync(st.dataId)[0]);for(var to=0;to<Ye;to++){for(var Xr=[],co=0,lo=0;lo<Je;lo++){var fo=sn[to*Je+lo];Xr.push(fo),co+=fo*Qe[lo]}if(co<0||co>=Ke/qe)throw new Error("Invalid indices: "+Xr+" does not index into "+Ge);for(var Uo=0;Uo<qe;Uo++)Mt?hn.values[co*qe+Uo]+=fn[to*qe+Uo]:hn.values[co*qe+Uo]=$e.rank===0?fn[0]:fn[to*qe+Uo]}return hn.toTensor().reshape(Ge)},y}(bo);Lt.registerBackend("cpu",function(){return new Kh},1);for(var jh=0,Xh=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=je.attrs,Ge=y,Ke=Ge.boxes,qe=Ge.scores,Ye=$e,Je=Ye.maxOutputSize,Qe=Ye.iouThreshold,st=Ye.scoreThreshold,Mt=Ye.softNmsSigma,on=v;Hh(Ke,"NonMaxSuppressionWithScore");var sn=Xo(on.data.get(Ke.dataId).values,on.data.get(qe.dataId).values,Je,Qe,st,Mt);return[sn.selectedIndices,sn.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=y.x,Ge=v;Hh($e,"square");for(var Ke=Ge.data.get($e.dataId).values,qe=new Float32Array(Ke.length),Ye=0;Ye<Ke.length;++Ye){var Je=Ke[Ye];qe[Ye]=Je*Je}return{dataId:Ge.write(qe,$e.shape,$e.dtype),shape:$e.shape,dtype:$e.dtype}}},{kernelName:eu,backendName:"cpu",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=y,Ge=$e.a,Ke=$e.b,qe=v;Hh([Ge,Ke],eu);var Ye=qe.data.get(Ge.dataId).values,Je=qe.data.get(Ke.dataId).values,Qe=function(on,sn,fn,hn,to,Xr){var co=Ro(on,sn),lo=co.length,fo=$(co),Uo=B(to,k(co)),mo=on.length,rd=sn.length,od=$(on),fd=$(sn),hd=Co(on,co),vd=Co(sn,co);if(hd.length+vd.length===0)for(var Td=0;Td<Uo.length;++Td)Uo[Td]=Xr(fn[Td%fn.length],hn[Td%hn.length]);else{var Od=function(Md){var Fd=it(Md,lo,fo),Ud=Fd.slice(-mo);hd.forEach(function($d){return Ud[$d]=0});var pd=at(Ud,mo,od),_d=Fd.slice(-rd);vd.forEach(function($d){return _d[$d]=0});var Bd=at(_d,rd,fd);Uo[Md]=Xr(fn[pd],hn[Bd])};for(Td=0;Td<Uo.length;++Td)Od(Td)}return[Uo,co]}(Ge.shape,Ke.shape,Ye,Je,Ge.dtype,function(on,sn){var fn=on-sn;return fn*fn}),st=Qe[0],Mt=Qe[1];return{dataId:qe.write(st,Mt,Ge.dtype),shape:Mt,dtype:Ge.dtype}}}];jh<Xh.length;jh++)d(Xh[jh]);var Yh,$h=function(je){this.variableNames=["A"];var y=ua(),v=je[0],$e=je[1];this.outputShape=je,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+$e+".0, "+v+`.0);

        vec4 values = `+y.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},Qh=function(je){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var y=ua(),v=je[0],$e=je[1];this.outputShape=je,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+$e+".0, "+v+`.0);
            vec4 values = `+y.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+y.output+` = result;
      }
    `};for(var Jh=0,Zh=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=je.attrs,Ge=y.pixels,Ke=$e.numChannels,qe=typeof HTMLVideoElement<"u"&&Ge instanceof HTMLVideoElement,Ye=typeof HTMLImageElement<"u"&&Ge instanceof HTMLImageElement,Je=qe?[Ge.videoWidth,Ge.videoHeight]:[Ge.width,Ge.height],Qe=Je[0],st=Je[1],Mt=[st,Qe],on=[st,Qe,Ke];(Ye||qe)&&(Yh==null&&(Yh=document.createElement("canvas").getContext("2d")),Yh.canvas.width=Qe,Yh.canvas.height=st,Yh.drawImage(Ge,0,0,Qe,st),Ge=Yh.canvas);var sn=v.makeTensorInfo(Mt,"int32");v.texData.get(sn.dataId).usage=zt.PIXELS,v.gpgpu.uploadPixelDataToTexture(v.getTexture(sn.dataId),Ge);var fn=i().getBool("WEBGL_PACK")?new Qh(on):new $h(on),hn=v.runWebGLProgram(fn,[sn],"int32");return v.disposeData(sn.dataId),hn}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=je.attrs;dn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var Ge=y,Ke=Ge.boxes,qe=Ge.scores,Ye=$e,Je=Ye.maxOutputSize,Qe=Ye.iouThreshold,st=Ye.scoreThreshold,Mt=Ye.softNmsSigma,on=v,sn=Xo(on.readSync(Ke.dataId),on.readSync(qe.dataId),Je,Qe,st,Mt);return[sn.selectedIndices,sn.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=y.x,Ge=v,Ke=new Cs($e.shape,"return x * x;");return Ge.runWebGLProgram(Ke,[$e],$e.dtype)}},{kernelName:eu,backendName:"webgl",kernelFunc:function(je){var y=je.inputs,v=je.backend,$e=y,Ge=$e.a,Ke=$e.b,qe=v,Ye=i().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new La("return (a - b) * (a - b);",Ge.shape,Ke.shape):new Ba("return (a - b) * (a - b);",Ge.shape,Ke.shape);return qe.compileAndRun(Ye,[Ge,Ke])}}];Jh<Zh.length;Jh++)d(Zh[Jh]);for(var tf=0,ef=[{kernelName:"Square",gradFunc:function(je,y){var v=y[0];return{x:function(){return je.mul(v.toFloat().mul(2))}}}},{kernelName:eu,gradFunc:function(je,y){var v=y[0],$e=y[1],Ge=On(2);return{a:function(){return gc(je,gc(Ge,Cc(v,$e)))},b:function(){return gc(je,gc(Ge,Cc($e,v)))}}}}];tf<ef.length;tf++)p(ef[tf]);var nf=function(){function je(){}return je.prototype.fetch=function(y,v){return fetch(y,v)},je.prototype.now=function(){return performance.now()},je.prototype.encode=function(y,v){if(v!=="utf-8"&&v!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+v);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(y)},je.prototype.decode=function(y,v){return new TextDecoder(v).decode(y)},je}();i().get("IS_BROWSER")&&i().setPlatform("browser",new nf);var rf,of=function(){return require("node-fetch")},af=function(){function je(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return je.prototype.fetch=function(y,v){return i().global.fetch!=null?i().global.fetch(y,v):(rf==null&&(rf=of()),rf(y,v))},je.prototype.now=function(){var y=process.hrtime();return 1e3*y[0]+y[1]/1e6},je.prototype.encode=function(y,v){if(v!=="utf-8"&&v!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+v);return this.textEncoder.encode(y)},je.prototype.decode=function(y,v){return y.length===0?"":new this.util.TextDecoder(v).decode(y)},je}();i().get("IS_NODE")&&i().setPlatform("node",new af);var sf={float32:4,int32:4,uint16:2,uint8:1,bool:1},uf=4;function cf(je,y){for(var v={},$e=0,Ge=function(Ye){var Je=Ye.name,Qe=Ye.dtype,st=Ye.shape,Mt=k(st),on=void 0;if("quantization"in Ye){var sn=Ye.quantization;if(sn.dtype!=="uint8"&&sn.dtype!=="uint16")throw new Error("Weight "+Ye.name+" has unknown quantization dtype "+sn.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var fn=sf[sn.dtype],hn=je.slice($e,$e+Mt*fn),to=sn.dtype==="uint8"?new Uint8Array(hn):new Uint16Array(hn);if(Qe==="float32")on=Float32Array.from(to,function(mo){return mo*sn.scale+sn.min});else{if(Qe!=="int32")throw new Error("Unsupported dtype in weight '"+Je+"': "+Qe);on=Int32Array.from(to,function(mo){return Math.round(mo*sn.scale+sn.min)})}$e+=Mt*fn}else if(Qe==="string"){var Xr=k(Ye.shape);on=[];for(var co=0;co<Xr;co++){var lo=new Uint32Array(je.slice($e,$e+uf))[0];$e+=uf;var fo=new Uint8Array(je.slice($e,$e+lo));on.push(fo),$e+=lo}}else{var Uo=sf[Qe];if(hn=je.slice($e,$e+Mt*Uo),Qe==="float32")on=new Float32Array(hn);else if(Qe==="int32")on=new Int32Array(hn);else{if(Qe!=="bool")throw new Error("Unsupported dtype in weight '"+Je+"': "+Qe);on=new Uint8Array(hn)}$e+=Mt*Uo}v[Je]=Fn(on,st,Qe)},Ke=0,qe=y;Ke<qe.length;Ke++)Ge(qe[Ke]);return v}function lf(je){if(je===null)throw new Error("Invalid input value: "+JSON.stringify(je));var y=0,v=[];je.forEach(function(Ke){if(y+=Ke.byteLength,v.push(Ke.byteLength===Ke.buffer.byteLength?Ke:new Ke.constructor(Ke)),!(Ke instanceof Float32Array||Ke instanceof Int32Array||Ke instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+Ke.constructor.name)});var $e=new Uint8Array(y),Ge=0;return v.forEach(function(Ke){$e.set(new Uint8Array(Ke.buffer),Ge),Ge+=Ke.byteLength}),$e.buffer}var hf=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ff(je){return hf?Buffer.byteLength(je):new Blob([je]).size}function df(je){var y=0;je.forEach(function(Ge){y+=Ge.byteLength});var v=new Uint8Array(y),$e=0;return je.forEach(function(Ge){v.set(new Uint8Array(Ge),$e),$e+=Ge.byteLength}),v.buffer}function pf(je){for(je=je.trim();je.endsWith("/");)je=je.slice(0,je.length-1);var y=je.split("/");return y[y.length-1]}function vf(je){if(je.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:je.modelTopology==null?0:ff(JSON.stringify(je.modelTopology)),weightSpecsBytes:je.weightSpecs==null?0:ff(JSON.stringify(je.weightSpecs)),weightDataBytes:je.weightData==null?0:je.weightData.byteLength}}var mf=function(){function je(){this.saveRouters=[],this.loadRouters=[]}return je.getInstance=function(){return je.instance==null&&(je.instance=new je),je.instance},je.registerSaveRouter=function(y){je.getInstance().saveRouters.push(y)},je.registerLoadRouter=function(y){je.getInstance().loadRouters.push(y)},je.getSaveHandlers=function(y){return je.getHandlers(y,"save")},je.getLoadHandlers=function(y,v){return je.getHandlers(y,"load",v)},je.getHandlers=function(y,v,$e){var Ge=[];return(v==="load"?je.getInstance().loadRouters:je.getInstance().saveRouters).forEach(function(Ke){var qe=Ke(y,$e);qe!==null&&Ge.push(qe)}),Ge},je}(),gf="://",yf=function(){function je(){this.managers={}}return je.getInstance=function(){return je.instance==null&&(je.instance=new je),je.instance},je.registerManager=function(y,v){C(y!=null,function(){return"scheme must not be undefined or null."}),y.endsWith(gf)&&(y=y.slice(0,y.indexOf(gf))),C(y.length>0,function(){return"scheme must not be an empty string."});var $e=je.getInstance();C($e.managers[y]==null,function(){return"A model store manager is already registered for scheme '"+y+"'."}),$e.managers[y]=v},je.getManager=function(y){var v=this.getInstance().managers[y];if(v==null)throw new Error("Cannot find model manager for scheme '"+y+"'");return v},je.getSchemes=function(){return Object.keys(this.getInstance().managers)},je}();function xf(je){if(je.indexOf(gf)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+yf.getSchemes().join(","));return{scheme:je.split(gf)[0],path:je.split(gf)[1]}}function bf(je,y,v){return v===void 0&&(v=!1),n(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye,Je,Qe,st,Mt;return r(this,function(on){switch(on.label){case 0:return C(je!==y,function(){return"Old path and new path are the same: '"+je+"'"}),C(($e=mf.getLoadHandlers(je)).length>0,function(){return"Copying failed because no load handler is found for source URL "+je+"."}),C($e.length<2,function(){return"Copying failed because more than one ("+$e.length+") load handlers for source URL "+je+"."}),Ge=$e[0],C((Ke=mf.getSaveHandlers(y)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+y+"."}),C(Ke.length<2,function(){return"Copying failed because more than one ("+$e.length+") save handlers for destination URL "+y+"."}),qe=Ke[0],Ye=xf(je).scheme,Je=xf(je).path,Qe=Ye===xf(je).scheme,[4,Ge.load()];case 1:return st=on.sent(),v&&Qe?[4,yf.getManager(Ye).removeModel(Je)]:[3,3];case 2:on.sent(),on.label=3;case 3:return[4,qe.save(st)];case 4:return Mt=on.sent(),!v||Qe?[3,6]:[4,yf.getManager(Ye).removeModel(Je)];case 5:on.sent(),on.label=6;case 6:return[2,Mt.modelArtifactsInfo]}})})}var wf="models_store",Cf="model_info_store";function Ef(){if(!i().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var je=window||self,y=je.indexedDB||je.mozIndexedDB||je.webkitIndexedDB||je.msIndexedDB||je.shimIndexedDB;if(y==null)throw new Error("The current browser does not appear to support IndexedDB.");return y}function Rf(je){var y=je.result;y.createObjectStore(wf,{keyPath:"modelPath"}),y.createObjectStore(Cf,{keyPath:"modelPath"})}var If=function(){function je(y){if(this.indexedDB=Ef(),y==null||!y)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=y}return je.prototype.save=function(y){return n(this,void 0,void 0,function(){return r(this,function(v){if(y.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,y)]})})},je.prototype.load=function(){return n(this,void 0,void 0,function(){return r(this,function(y){return[2,this.databaseAction(this.modelPath)]})})},je.prototype.databaseAction=function(y,v){var $e=this;return new Promise(function(Ge,Ke){var qe=$e.indexedDB.open("tensorflowjs",1);qe.onupgradeneeded=function(){return Rf(qe)},qe.onsuccess=function(){var Ye=qe.result;if(v==null){var Je=Ye.transaction(wf,"readonly"),Qe=Je.objectStore(wf).get($e.modelPath);Qe.onsuccess=function(){if(Qe.result==null)return Ye.close(),Ke(new Error("Cannot find model with path '"+$e.modelPath+"' in IndexedDB."));Ge(Qe.result.modelArtifacts)},Qe.onerror=function(hn){return Ye.close(),Ke(Qe.error)},Je.oncomplete=function(){return Ye.close()}}else{var st,Mt=vf(v),on=Ye.transaction(Cf,"readwrite"),sn=on.objectStore(Cf),fn=sn.put({modelPath:$e.modelPath,modelArtifactsInfo:Mt});fn.onsuccess=function(){var hn=(st=Ye.transaction(wf,"readwrite")).objectStore(wf).put({modelPath:$e.modelPath,modelArtifacts:v,modelArtifactsInfo:Mt});hn.onsuccess=function(){return Ge({modelArtifactsInfo:Mt})},hn.onerror=function(to){var Xr=(sn=on.objectStore(Cf)).delete($e.modelPath);Xr.onsuccess=function(){return Ye.close(),Ke(hn.error)},Xr.onerror=function(co){return Ye.close(),Ke(hn.error)}}},fn.onerror=function(hn){return Ye.close(),Ke(fn.error)},on.oncomplete=function(){st==null?Ye.close():st.oncomplete=function(){return Ye.close()}}}},qe.onerror=function(Ye){return Ke(qe.error)}})},je.URL_SCHEME="indexeddb://",je}(),kf=function(je){return i().getBool("IS_BROWSER")&&!Array.isArray(je)&&je.startsWith(If.URL_SCHEME)?(y=je.slice(If.URL_SCHEME.length),new If(y)):null;var y};mf.registerSaveRouter(kf),mf.registerLoadRouter(kf);var Sf=function(){function je(){this.indexedDB=Ef()}return je.prototype.listModels=function(){return n(this,void 0,void 0,function(){var y=this;return r(this,function(v){return[2,new Promise(function($e,Ge){var Ke=y.indexedDB.open("tensorflowjs",1);Ke.onupgradeneeded=function(){return Rf(Ke)},Ke.onsuccess=function(){var qe=Ke.result,Ye=qe.transaction(Cf,"readonly"),Je=Ye.objectStore(Cf).getAll();Je.onsuccess=function(){for(var Qe={},st=0,Mt=Je.result;st<Mt.length;st++){var on=Mt[st];Qe[on.modelPath]=on.modelArtifactsInfo}$e(Qe)},Je.onerror=function(Qe){return qe.close(),Ge(Je.error)},Ye.oncomplete=function(){return qe.close()}},Ke.onerror=function(qe){return Ge(Ke.error)}})]})})},je.prototype.removeModel=function(y){return n(this,void 0,void 0,function(){var v=this;return r(this,function($e){var Ge;return y=(Ge=y).startsWith(If.URL_SCHEME)?Ge.slice(If.URL_SCHEME.length):Ge,[2,new Promise(function(Ke,qe){var Ye=v.indexedDB.open("tensorflowjs",1);Ye.onupgradeneeded=function(){return Rf(Ye)},Ye.onsuccess=function(){var Je,Qe=Ye.result,st=Qe.transaction(Cf,"readwrite"),Mt=st.objectStore(Cf),on=Mt.get(y);on.onsuccess=function(){if(on.result==null)return Qe.close(),qe(new Error("Cannot find model with path '"+y+"' in IndexedDB."));var sn=Mt.delete(y),fn=function(){var hn=(Je=Qe.transaction(wf,"readwrite")).objectStore(wf).delete(y);hn.onsuccess=function(){return Ke(on.result.modelArtifactsInfo)},hn.onerror=function(to){return qe(on.error)}};sn.onsuccess=fn,sn.onerror=function(hn){return fn(),Qe.close(),qe(on.error)}},on.onerror=function(sn){return Qe.close(),qe(on.error)},st.oncomplete=function(){Je==null?Qe.close():Je.oncomplete=function(){return Qe.close()}}},Ye.onerror=function(Je){return qe(Ye.error)}})]})})},je}();if(i().getBool("IS_BROWSER"))try{yf.registerManager(If.URL_SCHEME,new Sf)}catch{}var Af="/",Df="tensorflowjs_models",Tf="info",Nf="model_topology",Ff="weight_specs",_f="weight_data",Of="model_metadata";function Mf(je){return{info:[Df,je,Tf].join(Af),topology:[Df,je,Nf].join(Af),weightSpecs:[Df,je,Ff].join(Af),weightData:[Df,je,_f].join(Af),modelMetadata:[Df,je,Of].join(Af)}}function Bf(je){var y=je.split(Af);if(y.length<3)throw new Error("Invalid key format: "+je);return y.slice(1,y.length-1).join(Af)}var Pf=function(){function je(y){if(!i().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,y==null||!y)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=y,this.keys=Mf(this.modelPath)}return je.prototype.save=function(y){return n(this,void 0,void 0,function(){var v,$e,Ge;return r(this,function(Ke){if(y.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");v=JSON.stringify(y.modelTopology),$e=JSON.stringify(y.weightSpecs),Ge=vf(y);try{return this.LS.setItem(this.keys.info,JSON.stringify(Ge)),this.LS.setItem(this.keys.topology,v),this.LS.setItem(this.keys.weightSpecs,$e),this.LS.setItem(this.keys.weightData,function(qe){if(hf)return Buffer.from(qe).toString("base64");for(var Ye=new Uint8Array(qe),Je="",Qe=0,st=Ye.length;Qe<st;Qe++)Je+=String.fromCharCode(Ye[Qe]);return btoa(Je)}(y.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:y.format,generatedBy:y.generatedBy,convertedBy:y.convertedBy,userDefinedMetadata:y.userDefinedMetadata})),[2,{modelArtifactsInfo:Ge}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+Ge.modelTopologyBytes+", weightSpecsBytes="+Ge.weightSpecsBytes+", weightDataBytes="+Ge.weightDataBytes+".")}return[2]})})},je.prototype.load=function(){return n(this,void 0,void 0,function(){var y,v,$e,Ge,Ke,qe,Ye;return r(this,function(Je){if((y=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(y.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(v={},($e=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(v.modelTopology=$e,(Ge=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(v.weightSpecs=Ge,(Ke=this.LS.getItem(this.keys.modelMetadata))!=null&&(qe=JSON.parse(Ke),v.format=qe.format,v.generatedBy=qe.generatedBy,v.convertedBy=qe.convertedBy,v.userDefinedMetadata=qe.userDefinedMetadata),(Ye=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return v.weightData=function(Qe){if(hf){var st=Buffer.from(Qe,"base64");return st.buffer.slice(st.byteOffset,st.byteOffset+st.byteLength)}for(var Mt=atob(Qe),on=new Uint8Array(Mt.length),sn=0;sn<Mt.length;++sn)on.set([Mt.charCodeAt(sn)],sn);return on.buffer}(Ye),[2,v]})})},je.URL_SCHEME="localstorage://",je}(),Lf=function(je){return i().getBool("IS_BROWSER")&&!Array.isArray(je)&&je.startsWith(Pf.URL_SCHEME)?(y=je.slice(Pf.URL_SCHEME.length),new Pf(y)):null;var y};mf.registerSaveRouter(Lf),mf.registerLoadRouter(Lf);var Wf=function(){function je(){C(i().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),C(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return je.prototype.listModels=function(){return n(this,void 0,void 0,function(){var y,v,$e,Ge,Ke,qe;return r(this,function(Ye){for(y={},v=Df+Af,$e=Af+Tf,Ge=0;Ge<this.LS.length;++Ge)(Ke=this.LS.key(Ge)).startsWith(v)&&Ke.endsWith($e)&&(qe=Bf(Ke),y[qe]=JSON.parse(this.LS.getItem(Ke)));return[2,y]})})},je.prototype.removeModel=function(y){return n(this,void 0,void 0,function(){var v,$e;return r(this,function(Ge){var Ke;if(y=(Ke=y).startsWith(Pf.URL_SCHEME)?Ke.slice(Pf.URL_SCHEME.length):Ke,v=Mf(y),this.LS.getItem(v.info)==null)throw new Error("Cannot find model at path '"+y+"'");return $e=JSON.parse(this.LS.getItem(v.info)),this.LS.removeItem(v.info),this.LS.removeItem(v.topology),this.LS.removeItem(v.weightSpecs),this.LS.removeItem(v.weightData),[2,$e]})})},je}();if(i().getBool("IS_BROWSER"))try{yf.registerManager(Pf.URL_SCHEME,new Wf)}catch{}var Uf="model",Vf=".json",zf=".weights.bin";function Gf(je){return new Promise(function(y){return setTimeout(y)}).then(je)}var Hf=function(){function je(y){if(!i().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");y.startsWith(je.URL_SCHEME)&&(y=y.slice(je.URL_SCHEME.length)),y!=null&&y.length!==0||(y=Uf),this.modelTopologyFileName=y+Vf,this.weightDataFileName=y+zf}return je.prototype.save=function(y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye;return r(this,function(Je){switch(Je.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(v=window.URL.createObjectURL(new Blob([y.weightData],{type:"application/octet-stream"})),!(y.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return $e=[{paths:["./"+this.weightDataFileName],weights:y.weightSpecs}],Ge={modelTopology:y.modelTopology,format:y.format,generatedBy:y.generatedBy,convertedBy:y.convertedBy,weightsManifest:$e},Ke=window.URL.createObjectURL(new Blob([JSON.stringify(Ge)],{type:"application/json"})),(qe=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,qe.href=Ke,[4,Gf(function(){return qe.dispatchEvent(new MouseEvent("click"))})];case 2:return Je.sent(),y.weightData==null?[3,4]:((Ye=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,Ye.href=v,[4,Gf(function(){return Ye.dispatchEvent(new MouseEvent("click"))})]);case 3:Je.sent(),Je.label=4;case 4:return[2,{modelArtifactsInfo:vf(y)}]}})})},je.URL_SCHEME="downloads://",je}(),qf=function(){function je(y){if(y==null||y.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+y);this.files=y}return je.prototype.load=function(){return n(this,void 0,void 0,function(){var y,v,$e=this;return r(this,function(Ge){return y=this.files[0],v=this.files.slice(1),[2,new Promise(function(Ke,qe){var Ye=new FileReader;Ye.onload=function(Je){var Qe=JSON.parse(Je.target.result),st=Qe.modelTopology;if(st!=null){v.length===0&&Ke({modelTopology:st});var Mt=Qe.weightsManifest;if(Mt!=null){var on;try{on=$e.checkManifestAndWeightFiles(Mt,v)}catch(to){return void qe(to)}var sn=[],fn=[],hn=[];Mt.forEach(function(to){to.paths.forEach(function(Xr){fn.push(Xr),hn.push(null)}),sn.push.apply(sn,to.weights)}),Mt.forEach(function(to){to.paths.forEach(function(Xr){var co=new FileReader;co.onload=function(lo){var fo=lo.target.result,Uo=fn.indexOf(Xr);hn[Uo]=fo,hn.indexOf(null)===-1&&Ke({modelTopology:st,weightSpecs:sn,weightData:df(hn),format:Qe.format,generatedBy:Qe.generatedBy,convertedBy:Qe.convertedBy,userDefinedMetadata:Qe.userDefinedMetadata})},co.onerror=function(lo){return qe("Failed to weights data from file of path '"+Xr+"'.")},co.readAsArrayBuffer(on[Xr])})})}else qe(new Error("weightManifest field is missing from file "+y.name))}else qe(new Error("modelTopology field is missing from file "+y.name))},Ye.onerror=function(Je){return qe("Failed to read model topology and weights manifest JSON from file '"+y.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},Ye.readAsText(y)})]})})},je.prototype.checkManifestAndWeightFiles=function(y,v){for(var $e=[],Ge=v.map(function(Je){return pf(Je.name)}),Ke={},qe=0,Ye=y;qe<Ye.length;qe++)Ye[qe].paths.forEach(function(Je){var Qe=pf(Je);if($e.indexOf(Qe)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+Qe+"'");if($e.push(Qe),Ge.indexOf(Qe)===-1)throw new Error("Weight file with basename '"+Qe+"' is not provided.");Ke[Je]=v[Ge.indexOf(Qe)]});if($e.length!==v.length)throw new Error("Mismatch in the number of files in weights manifest ("+$e.length+") and the number of weight files provided ("+v.length+").");return Ke},je}();function Kf(je,y,v,$e){(function(Ke){C(Ke!=null&&Array.isArray(Ke)&&Ke.length>0,function(){return"promises must be a none empty array"})})(je),function(Ke,qe){C(Ke>=0&&Ke<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+Ke}),C(qe>=0&&qe<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+qe}),C(qe>=Ke,function(){return"startFraction must be no more than endFraction, but got startFraction "+Ke+" and endFraction "+qe})}(v=v??0,$e=$e??1);var Ge=0;return Promise.all(je.map(function(Ke){return Ke.then(function(qe){var Ye=v+ ++Ge/je.length*($e-v);return y(Ye),qe}),Ke}))}function jf(je,y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye,Je,Qe,st;return r(this,function(Mt){switch(Mt.label){case 0:return y==null&&(y={}),v=y.fetchFunc==null?i().platform.fetch:y.fetchFunc,$e=je.map(function(on){return v(on,y.requestInit,{isBinary:!0})}),Ge=0,Ke=.5,y.onProgress!=null?[3,2]:[4,Promise.all($e)];case 1:return qe=Mt.sent(),[3,4];case 2:return[4,Kf($e,y.onProgress,Ge,Ke)];case 3:qe=Mt.sent(),Mt.label=4;case 4:return Ye=qe.map(function(on){return on.arrayBuffer()}),Je=.5,Qe=1,y.onProgress!=null?[3,6]:[4,Promise.all(Ye)];case 5:return st=Mt.sent(),[3,8];case 6:return[4,Kf(Ye,y.onProgress,Je,Qe)];case 7:st=Mt.sent(),Mt.label=8;case 8:return[2,st]}})})}function Xf(je){var y=this;return function(v,$e,Ge){return $e===void 0&&($e=""),n(y,void 0,void 0,function(){var Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn;return r(this,function(hn){switch(hn.label){case 0:if(Ke=v.map(function(){return!1}),qe={},Ye=Ge!=null?Ge.map(function(){return!1}):[],Je=[],v.forEach(function(to,Xr){var co=0;to.weights.forEach(function(lo){var fo="quantization"in lo?lo.quantization.dtype:lo.dtype,Uo=sf[fo]*k(lo.shape),mo=function(){Ke[Xr]=!0,qe[Xr]==null&&(qe[Xr]=[]),qe[Xr].push({manifestEntry:lo,groupOffset:co,sizeBytes:Uo})};Ge!=null?Ge.forEach(function(rd,od){rd===lo.name&&(mo(),Ye[od]=!0)}):mo(),Je.push(lo.name),co+=Uo})}),!Ye.every(function(to){return to}))throw Qe=Ge.filter(function(to,Xr){return!Ye[Xr]}),new Error("Could not find weights in manifest with names: "+Qe.join(", ")+`. 
Manifest JSON has weights with names: `+Je.join(", ")+".");return st=Ke.reduce(function(to,Xr,co){return Xr&&to.push(co),to},[]),Mt=[],st.forEach(function(to){v[to].paths.forEach(function(Xr){var co=$e+($e.endsWith("/")?"":"/")+Xr;Mt.push(co)})}),[4,je(Mt)];case 1:return on=hn.sent(),sn={},fn=0,st.forEach(function(to){for(var Xr=v[to].paths.length,co=0,lo=0;lo<Xr;lo++)co+=on[fn+lo].byteLength;for(var fo=new ArrayBuffer(co),Uo=new Uint8Array(fo),mo=0,rd=0;rd<Xr;rd++){var od=new Uint8Array(on[fn+rd]);Uo.set(od,mo),mo+=od.byteLength}qe[to].forEach(function(fd){var hd=cf(fo.slice(fd.groupOffset,fd.groupOffset+fd.sizeBytes),[fd.manifestEntry]);for(var vd in hd)sn[vd]=hd[vd]}),fn+=Xr}),[2,sn]}})})}}mf.registerSaveRouter(function(je){return i().getBool("IS_BROWSER")&&!Array.isArray(je)&&je.startsWith(Hf.URL_SCHEME)?function(y){return y===void 0&&(y="model"),new Hf(y)}(je.slice(Hf.URL_SCHEME.length)):null});var Yf=function(){function je(y,v){if(this.DEFAULT_METHOD="POST",v==null&&(v={}),this.weightPathPrefix=v.weightPathPrefix,this.onProgress=v.onProgress,v.fetchFunc!=null?(C(typeof v.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=v.fetchFunc):this.fetch=i().platform.fetch,C(y!=null&&y.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(y)&&C(y.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+y.length+")."}),this.path=y,v.requestInit!=null&&v.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=v.requestInit||{}}return je.prototype.save=function(y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke;return r(this,function(qe){switch(qe.label){case 0:if(y.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(v=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,$e=[{paths:["./model.weights.bin"],weights:y.weightSpecs}],Ge={modelTopology:y.modelTopology,format:y.format,generatedBy:y.generatedBy,convertedBy:y.convertedBy,userDefinedMetadata:y.userDefinedMetadata,weightsManifest:$e},v.body.append("model.json",new Blob([JSON.stringify(Ge)],{type:"application/json"}),"model.json"),y.weightData!=null&&v.body.append("model.weights.bin",new Blob([y.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,v)];case 1:if((Ke=qe.sent()).ok)return[2,{modelArtifactsInfo:vf(y),responses:[Ke]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+Ke.status+".")}})})},je.prototype.load=function(){return n(this,void 0,void 0,function(){var y,v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on;return r(this,function(sn){switch(sn.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(y=sn.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+y.status+". Please verify this URL points to the model JSON of the model to load.");sn.label=2;case 2:return sn.trys.push([2,4,,5]),[4,y.json()];case 3:return v=sn.sent(),[3,5];case 4:throw sn.sent(),$e="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?$e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":$e+=" Please make sure the server is serving valid JSON for this request.",new Error($e);case 5:if(Ge=v.modelTopology,Ke=v.weightsManifest,qe=v.generatedBy,Ye=v.convertedBy,Je=v.format,Qe=v.userDefinedMetadata,Ge==null&&Ke==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return Ke==null?[3,7]:[4,this.loadWeights(Ke)];case 6:on=sn.sent(),st=on[0],Mt=on[1],sn.label=7;case 7:return[2,{modelTopology:Ge,weightSpecs:st,weightData:Mt,userDefinedMetadata:Qe,generatedBy:qe,convertedBy:Ye,format:Je}]}})})},je.prototype.loadWeights=function(y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on;return r(this,function(sn){switch(sn.label){case 0:for(v=Array.isArray(this.path)?this.path[1]:this.path,$e=function(fn){var hn=fn.lastIndexOf("/"),to=fn.lastIndexOf("?"),Xr=fn.substring(0,hn),co=to>hn?fn.substring(to):"";return[Xr+"/",co]}(v),Ge=$e[0],Ke=$e[1],qe=this.weightPathPrefix||Ge,Ye=[],Je=0,Qe=y;Je<Qe.length;Je++)st=Qe[Je],Ye.push.apply(Ye,st.weights);return Mt=[],y.forEach(function(fn){fn.paths.forEach(function(hn){Mt.push(qe+hn+Ke)})}),[4,jf(Mt,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return on=sn.sent(),[2,[Ye,df(on)]]}})})},je.URL_SCHEME_REGEX=/^https?:\/\//,je}();function $f(je){return je.match(Yf.URL_SCHEME_REGEX)!=null}var Qf=function(je,y){return typeof fetch>"u"?null:(Array.isArray(je)?je.every(function(v){return $f(v)}):$f(je))?Jf(je,{onProgress:y}):null};function Jf(je,y){return new Yf(je,y)}mf.registerSaveRouter(Qf),mf.registerLoadRouter(Qf);var Zf=function(){function je(y){this.modelArtifacts=y}return je.prototype.load=function(){return n(this,void 0,void 0,function(){return r(this,function(y){return[2,this.modelArtifacts]})})},je}(),td=function(){function je(y){this.saveHandler=y}return je.prototype.save=function(y){return n(this,void 0,void 0,function(){return r(this,function(v){return[2,this.saveHandler(y)]})})},je}(),ed=Object.freeze({browserFiles:function(je){return new qf(je)},browserHTTPRequest:function(je,y){return Jf(je,y)},concatenateArrayBuffers:df,decodeWeights:cf,encodeWeights:function(je,y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye=this;return r(this,function(Je){switch(Je.label){case 0:for(v=[],$e=[],Ge=Array.isArray(je)?je.map(function(Qe){return Qe.name}):Object.keys(je),Ke=function(Qe){var st=Ge[Qe],Mt=Array.isArray(je)?je[Qe].tensor:je[st];if(Mt.dtype!=="float32"&&Mt.dtype!=="int32"&&Mt.dtype!=="bool"&&Mt.dtype!=="string")throw new Error("Unsupported dtype in weight '"+st+"': "+Mt.dtype);var on={name:st,shape:Mt.shape,dtype:Mt.dtype};if(Mt.dtype==="string"){var sn=new Promise(function(fn){return n(Ye,void 0,void 0,function(){var hn,to,Xr,co,lo,fo,Uo;return r(this,function(mo){switch(mo.label){case 0:return[4,Mt.bytes()];case 1:for(hn=mo.sent(),to=hn.reduce(function(rd,od){return rd+od.length},0)+uf*hn.length,Xr=new Uint8Array(to),co=0,lo=0;lo<hn.length;lo++)fo=hn[lo],Uo=new Uint8Array(new Uint32Array([fo.length]).buffer),Xr.set(Uo,co),co+=uf,Xr.set(fo,co),co+=fo.length;return fn(Xr),[2]}})})});$e.push(sn)}else $e.push(Mt.data());y!=null&&(on.group=y),v.push(on)},qe=0;qe<Ge.length;++qe)Ke(qe);return[4,Promise.all($e)];case 1:return[2,{data:lf(Je.sent()),specs:v}]}})})},fromMemory:function(je,y,v,$e){return arguments.length===1?je.modelTopology!=null||je.weightSpecs!=null?new Zf(je):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zf({modelTopology:je})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Zf({modelTopology:je,weightSpecs:y,weightData:v,trainingConfig:$e}))},getLoadHandlers:function(je,y){return mf.getLoadHandlers(je,y)},getModelArtifactsInfoForJSON:vf,getSaveHandlers:function(je){return mf.getSaveHandlers(je)},http:Jf,isHTTPScheme:$f,loadWeights:function(je,y,v,$e){return y===void 0&&(y=""),n(this,void 0,void 0,function(){return r(this,function(Ge){return[2,Xf(function(Ke){return jf(Ke,{requestInit:$e})})(je,y,v)]})})},registerLoadRouter:function(je){return mf.registerLoadRouter(je)},registerSaveRouter:function(je){return mf.registerSaveRouter(je)},weightsLoaderFactory:Xf,withSaveHandler:function(je){return new td(je)},copyModel:function(je,y){return n(this,void 0,void 0,function(){return r(this,function(v){return[2,bf(je,y,!1)]})})},listModels:function(){return n(this,void 0,void 0,function(){var je,y,v,$e,Ge,Ke,qe;return r(this,function(Ye){switch(Ye.label){case 0:je=yf.getSchemes(),y={},v=0,$e=je,Ye.label=1;case 1:return v<$e.length?(Ge=$e[v],[4,yf.getManager(Ge).listModels()]):[3,4];case 2:for(qe in Ke=Ye.sent())y[Ge+gf+qe]=Ke[qe];Ye.label=3;case 3:return v++,[3,1];case 4:return[2,y]}})})},moveModel:function(je,y){return n(this,void 0,void 0,function(){return r(this,function(v){return[2,bf(je,y,!0)]})})},removeModel:function(je){return n(this,void 0,void 0,function(){var y;return r(this,function(v){return y=xf(je),[2,yf.getManager(y.scheme).removeModel(y.path)]})})}}),nd;An({confusionMatrix_:function(je,y,v){var $e=mn(je,"labels","confusionMatrix"),Ge=mn(y,"predictions","confusionMatrix");C(v==null||v>0&&Number.isInteger(v),function(){return"If provided, numClasses must be a positive integer, but got "+v}),C($e.rank===1,function(){return"Expected the rank of labels to be 1, but got "+$e.rank}),C(Ge.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+Ge.rank}),C($e.shape[0]===Ge.shape[0],function(){return"Mismatch in the number of examples: "+$e.shape[0]+" vs. "+Ge.shape[0]+". Labels and predictions should have the same number of elements."}),C(v>0&&Number.isInteger(v),function(){return"numClasses is required to be a positive integer, but got "+v});var Ke=Rr($e.asType("int32"),v),qe=Rr(Ge.asType("int32"),v);return Ke.transpose().matMul(qe).asType("int32")}});var ad=An({fromPixels_:function(je,y){if(y===void 0&&(y=3),y>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(je==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var v=!1,$e=!1,Ge=!1,Ke=!1,qe=!1;if(je.data instanceof Uint8Array)v=!0;else if(typeof ImageData<"u"&&je instanceof ImageData)$e=!0;else if(typeof HTMLVideoElement<"u"&&je instanceof HTMLVideoElement)Ge=!0;else if(typeof HTMLImageElement<"u"&&je instanceof HTMLImageElement)Ke=!0;else{if(je.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+je.constructor.name);qe=!0}if(Ge&&Ge&&je.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(l("FromPixels",Lt.backendName)!=null)return Lt.runKernel("FromPixels",{pixels:je},{numChannels:y});var Ye,Je,Qe=Ge?[je.videoWidth,je.videoHeight]:[je.width,je.height],st=Qe[0],Mt=Qe[1];if(qe?Ye=je.getContext("2d").getImageData(0,0,st,Mt).data:$e||v?Ye=je.data:(Ke||Ge)&&(nd==null&&(nd=document.createElement("canvas").getContext("2d")),nd.canvas.width=st,nd.canvas.height=Mt,nd.drawImage(je,0,0,st,Mt),Ye=nd.getImageData(0,0,st,Mt).data),y===4)Je=new Int32Array(Ye);else{var on=st*Mt;Je=new Int32Array(on*y);for(var sn=0;sn<on;sn++)for(var fn=0;fn<y;++fn)Je[sn*y+fn]=Ye[4*sn+fn]}return Pn(Je,[Mt,st,y],"int32")}}),id=Object.freeze({toPixels:function(je,y){return n(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo,fo,Uo,mo,rd,od;return r(this,function(fd){switch(fd.label){case 0:if(v=mn(je,"img","toPixels"),je instanceof wt||(v=v.toInt()),v.rank!==2&&v.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+v.rank+".");if($e=v.shape.slice(0,2),Ge=$e[0],Ke=$e[1],(qe=v.rank===2?1:v.shape[2])>4||qe===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+qe);return[4,v.data()];case 1:return Ye=fd.sent(),Je=v.min(),Qe=v.max(),[4,Promise.all([Je.data(),Qe.data()])];case 2:if(st=fd.sent(),Mt=st[0],on=st[1],sn=Mt[0],fn=on[0],Je.dispose(),Qe.dispose(),v.dtype==="float32"){if(sn<0||fn>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+sn+" - "+fn+"].")}else{if(v.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+v.dtype+". Please use float32 or int32 tensors.");if(sn<0||fn>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+sn+" - "+fn+"].")}for(hn=v.dtype==="float32"?255:1,to=new Uint8ClampedArray(Ke*Ge*4),Xr=0;Xr<Ge*Ke;++Xr)co=void 0,lo=void 0,fo=void 0,Uo=void 0,qe===1?(co=Ye[Xr]*hn,lo=Ye[Xr]*hn,fo=Ye[Xr]*hn,Uo=255):qe===3?(co=Ye[3*Xr]*hn,lo=Ye[3*Xr+1]*hn,fo=Ye[3*Xr+2]*hn,Uo=255):qe===4&&(co=Ye[4*Xr]*hn,lo=Ye[4*Xr+1]*hn,fo=Ye[4*Xr+2]*hn,Uo=Ye[4*Xr+3]*hn),to[(mo=4*Xr)+0]=Math.round(co),to[mo+1]=Math.round(lo),to[mo+2]=Math.round(fo),to[mo+3]=Math.round(Uo);return y!=null&&(y.width=Ke,y.height=Ge,rd=y.getContext("2d"),od=new ImageData(to,Ke,Ge),rd.putImageData(od,0,0)),v!==je&&v.dispose(),[2,to]}})})},fromPixels:ad}),sd=function(){function je(){}return je.prototype.getClassName=function(){return this.constructor.className},je.fromConfig=function(y,v){return new y(v)},je}(),ud=function(){function je(){this.classNameMap={}}return je.getMap=function(){return je.instance==null&&(je.instance=new je),je.instance},je.register=function(y){je.getMap().classNameMap[y.className]=[y,y.fromConfig]},je}();function cd(je){C(je.className!=null,function(){return"Class being registered does not have the static className property defined."}),C(typeof je.className=="string",function(){return"className is required to be a string, but got type "+typeof je.className}),C(je.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),ud.register(je)}var xd=function(je){function y(){return je!==null&&je.apply(this,arguments)||this}return e(y,je),y.prototype.minimize=function(v,$e,Ge){$e===void 0&&($e=!1);var Ke=this.computeGradients(v,Ge),qe=Ke.value,Ye=Ke.grads;if(Ge!=null){var Je=Ge.map(function(Qe){return{name:Qe.name,tensor:Ye[Qe.name]}});this.applyGradients(Je)}else this.applyGradients(Ye);return tn(Ye),$e?qe:(qe.dispose(),null)},Object.defineProperty(y.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),y.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},y.prototype.computeGradients=function(v,$e){return po(v,$e)},y.prototype.dispose=function(){this.iterations_!=null&&tn(this.iterations_)},y.prototype.saveIterations=function(){return n(this,void 0,void 0,function(){return r(this,function(v){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:On(this.iterations_,"int32")}]})})},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r(this,function(v){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){return r(this,function($e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},y.prototype.extractIterations=function(v){return n(this,void 0,void 0,function(){var $e;return r(this,function(Ge){switch(Ge.label){case 0:return $e=this,[4,v[0].tensor.data()];case 1:return $e.iterations_=Ge.sent()[0],[2,v.slice(1)]}})})},y}(sd);Object.defineProperty(xd,Symbol.hasInstance,{value:function(je){return je.minimize!=null&&je.computeGradients!=null&&je.applyGradients!=null}});var bd=function(je){function y(v,$e,Ge){Ge===void 0&&(Ge=null);var Ke=je.call(this)||this;return Ke.learningRate=v,Ke.rho=$e,Ke.epsilon=Ge,Ke.accumulatedGrads=[],Ke.accumulatedUpdates=[],Ge==null&&(Ke.epsilon=Lt.backend.epsilon()),Ke}return e(y,je),y.prototype.applyGradients=function(v){var $e=this;(Array.isArray(v)?v.map(function(Ge){return Ge.name}):Object.keys(v)).forEach(function(Ge,Ke){var qe=Lt.registeredVariables[Ge];$e.accumulatedGrads[Ke]==null&&($e.accumulatedGrads[Ke]={originalName:Ge+"/accum_grad",variable:Ze(function(){return Xn(qe).variable(!1)})}),$e.accumulatedUpdates[Ke]==null&&($e.accumulatedUpdates[Ke]={originalName:Ge+"/accum_var",variable:Ze(function(){return Xn(qe).variable(!1)})});var Ye=Array.isArray(v)?v[Ke].tensor:v[Ge];if(Ye!=null){var Je=$e.accumulatedGrads[Ke].variable,Qe=$e.accumulatedUpdates[Ke].variable;Ze(function(){var st=Je.mul($e.rho).add(Ye.square().mul(1-$e.rho)),Mt=Qe.add($e.epsilon).sqrt().div(Je.add($e.epsilon).sqrt()).mul(Ye),on=Qe.mul($e.rho).add(Mt.square().mul(1-$e.rho));Je.assign(st),Qe.assign(on);var sn=Mt.mul(-$e.learningRate).add(qe);qe.assign(sn)})}}),this.incrementIterations()},y.prototype.dispose=function(){this.accumulatedUpdates!=null&&(tn(this.accumulatedGrads.map(function(v){return v.variable})),tn(this.accumulatedUpdates.map(function(v){return v.variable})))},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){var v;return r(this,function($e){switch($e.label){case 0:return v=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[$e.sent()].concat(v.map(function(Ge){return{name:Ge.originalName,tensor:Ge.variable}}))]}})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){var $e;return r(this,function(Ge){switch(Ge.label){case 0:return[4,this.extractIterations(v)];case 1:return v=Ge.sent(),$e=v.length/2,this.accumulatedGrads=v.slice(0,$e).map(function(Ke){return{originalName:Ke.name,variable:Ke.tensor.variable(!1)}}),this.accumulatedUpdates=v.slice($e,2*$e).map(function(Ke){return{originalName:Ke.name,variable:Ke.tensor.variable(!1)}}),[2]}})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},y.fromConfig=function(v,$e){return new v($e.learningRate,$e.rho,$e.epsilon)},y.className="Adadelta",y}(xd);cd(bd);var wd=function(je){function y(v,$e){$e===void 0&&($e=.1);var Ge=je.call(this)||this;return Ge.learningRate=v,Ge.initialAccumulatorValue=$e,Ge.accumulatedGrads=[],Ge}return e(y,je),y.prototype.applyGradients=function(v){var $e=this;(Array.isArray(v)?v.map(function(Ge){return Ge.name}):Object.keys(v)).forEach(function(Ge,Ke){var qe=Lt.registeredVariables[Ge];$e.accumulatedGrads[Ke]==null&&($e.accumulatedGrads[Ke]={originalName:Ge+"/accumulator",variable:Ze(function(){return Hn(qe.shape,$e.initialAccumulatorValue).variable(!1)})});var Ye=Array.isArray(v)?v[Ke].tensor:v[Ge];if(Ye!=null){var Je=$e.accumulatedGrads[Ke].variable;Ze(function(){var Qe=Je.add(Ye.square());Je.assign(Qe);var st=Ye.div(Qe.add(Lt.backend.epsilon()).sqrt()).mul(-$e.learningRate).add(qe);qe.assign(st)})}}),this.incrementIterations()},y.prototype.dispose=function(){this.accumulatedGrads!=null&&tn(this.accumulatedGrads.map(function(v){return v.variable}))},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r(this,function(v){switch(v.label){case 0:return[4,this.saveIterations()];case 1:return[2,[v.sent()].concat(this.accumulatedGrads.map(function($e){return{name:$e.originalName,tensor:$e.variable}}))]}})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){return r(this,function($e){switch($e.label){case 0:return[4,this.extractIterations(v)];case 1:return v=$e.sent(),this.accumulatedGrads=v.map(function(Ge){return{originalName:Ge.name,variable:Ge.tensor.variable(!1)}}),[2]}})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},y.fromConfig=function(v,$e){return new v($e.learningRate,$e.initialAccumulatorValue)},y.className="Adagrad",y}(xd);cd(wd);var Cd=function(je){function y(v,$e,Ge,Ke){Ke===void 0&&(Ke=null);var qe=je.call(this)||this;return qe.learningRate=v,qe.beta1=$e,qe.beta2=Ge,qe.epsilon=Ke,qe.accumulatedFirstMoment=[],qe.accumulatedSecondMoment=[],Ze(function(){qe.accBeta1=On($e).variable(),qe.accBeta2=On(Ge).variable()}),Ke==null&&(qe.epsilon=Lt.backend.epsilon()),qe}return e(y,je),y.prototype.applyGradients=function(v){var $e=this,Ge=Array.isArray(v)?v.map(function(Ke){return Ke.name}):Object.keys(v);Ze(function(){var Ke=Cc(1,$e.accBeta1),qe=Cc(1,$e.accBeta2);Ge.forEach(function(Ye,Je){var Qe=Lt.registeredVariables[Ye];$e.accumulatedFirstMoment[Je]==null&&($e.accumulatedFirstMoment[Je]={originalName:Ye+"/m",variable:Ze(function(){return Xn(Qe).variable(!1)})}),$e.accumulatedSecondMoment[Je]==null&&($e.accumulatedSecondMoment[Je]={originalName:Ye+"/v",variable:Ze(function(){return Xn(Qe).variable(!1)})});var st=Array.isArray(v)?v[Je].tensor:v[Ye];if(st!=null){var Mt=$e.accumulatedFirstMoment[Je].variable,on=$e.accumulatedSecondMoment[Je].variable,sn=Mt.mul($e.beta1).add(st.mul(1-$e.beta1)),fn=on.mul($e.beta2).add(st.square().mul(1-$e.beta2)),hn=sn.div(Ke),to=fn.div(qe);Mt.assign(sn),on.assign(fn);var Xr=hn.div(to.sqrt().add($e.epsilon)).mul(-$e.learningRate).add(Qe);Qe.assign(Xr)}}),$e.accBeta1.assign($e.accBeta1.mul($e.beta1)),$e.accBeta2.assign($e.accBeta2.mul($e.beta2))}),this.incrementIterations()},y.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(function(v){return v.variable})),this.accumulatedSecondMoment!=null&&tn(this.accumulatedSecondMoment.map(function(v){return v.variable}))},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){var v;return r(this,function($e){switch($e.label){case 0:return v=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[$e.sent()].concat(v.map(function(Ge){return{name:Ge.originalName,tensor:Ge.variable}}))]}})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){var $e,Ge=this;return r(this,function(Ke){switch(Ke.label){case 0:return[4,this.extractIterations(v)];case 1:return v=Ke.sent(),Ze(function(){Ge.accBeta1.assign(xc(Ge.beta1,Ge.iterations_+1)),Ge.accBeta2.assign(xc(Ge.beta2,Ge.iterations_+1))}),$e=v.length/2,this.accumulatedFirstMoment=v.slice(0,$e).map(function(qe){return{originalName:qe.name,variable:qe.tensor.variable(!1)}}),this.accumulatedSecondMoment=v.slice($e,2*$e).map(function(qe){return{originalName:qe.name,variable:qe.tensor.variable(!1)}}),[2]}})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},y.fromConfig=function(v,$e){return new v($e.learningRate,$e.beta1,$e.beta2,$e.epsilon)},y.className="Adam",y}(xd);cd(Cd);var Ed=function(je){function y(v,$e,Ge,Ke,qe){Ke===void 0&&(Ke=null),qe===void 0&&(qe=0);var Ye=je.call(this)||this;return Ye.learningRate=v,Ye.beta1=$e,Ye.beta2=Ge,Ye.epsilon=Ke,Ye.decay=qe,Ye.accumulatedFirstMoment=[],Ye.accumulatedWeightedInfNorm=[],Ze(function(){Ye.iteration=On(0).variable(),Ye.accBeta1=On($e).variable()}),Ke==null&&(Ye.epsilon=Lt.backend.epsilon()),Ye}return e(y,je),y.prototype.applyGradients=function(v){var $e=this,Ge=Array.isArray(v)?v.map(function(Ke){return Ke.name}):Object.keys(v);Ze(function(){var Ke=Cc(1,$e.accBeta1),qe=sc(-$e.learningRate,$e.iteration.mul($e.decay).add(1));Ge.forEach(function(Ye,Je){var Qe=Lt.registeredVariables[Ye];$e.accumulatedFirstMoment[Je]==null&&($e.accumulatedFirstMoment[Je]={originalName:Ye+"/m",variable:Xn(Qe).variable(!1)}),$e.accumulatedWeightedInfNorm[Je]==null&&($e.accumulatedWeightedInfNorm[Je]={originalName:Ye+"/v",variable:Xn(Qe).variable(!1)});var st=Array.isArray(v)?v[Je].tensor:v[Ye];if(st!=null){var Mt=$e.accumulatedFirstMoment[Je].variable,on=$e.accumulatedWeightedInfNorm[Je].variable,sn=Mt.mul($e.beta1).add(st.mul(1-$e.beta1)),fn=on.mul($e.beta2),hn=st.abs(),to=fn.maximum(hn);Mt.assign(sn),on.assign(to);var Xr=qe.div(Ke).mul(sn.div(to.add($e.epsilon))).add(Qe);Qe.assign(Xr)}}),$e.iteration.assign($e.iteration.add(1)),$e.accBeta1.assign($e.accBeta1.mul($e.beta1))}),this.incrementIterations()},y.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&tn(this.accumulatedFirstMoment.map(function(v){return v.variable})),this.accumulatedWeightedInfNorm!=null&&tn(this.accumulatedWeightedInfNorm.map(function(v){return v.variable}))},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r(this,function(v){throw new Error("getWeights() is not implemented for Adamax yet.")})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){return r(this,function($e){throw new Error("setWeights() is not implemented for Adamax yet.")})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},y.fromConfig=function(v,$e){return new v($e.learningRate,$e.beta1,$e.beta2,$e.epsilon,$e.decay)},y.className="Adamax",y}(xd);cd(Ed);var Rd=function(je){function y(v){var $e=je.call(this)||this;return $e.learningRate=v,$e.setLearningRate(v),$e}return e(y,je),y.prototype.applyGradients=function(v){var $e=this;(Array.isArray(v)?v.map(function(Ge){return Ge.name}):Object.keys(v)).forEach(function(Ge,Ke){var qe=Array.isArray(v)?v[Ke].tensor:v[Ge];if(qe!=null){var Ye=Lt.registeredVariables[Ge];Ze(function(){var Je=$e.c.mul(qe).add(Ye);Ye.assign(Je)})}}),this.incrementIterations()},y.prototype.setLearningRate=function(v){this.learningRate=v,this.c!=null&&this.c.dispose(),this.c=en(On(-v))},y.prototype.dispose=function(){this.c.dispose()},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r(this,function(v){switch(v.label){case 0:return[4,this.saveIterations()];case 1:return[2,[v.sent()]]}})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){return r(this,function($e){switch($e.label){case 0:return[4,this.extractIterations(v)];case 1:if((v=$e.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate}},y.fromConfig=function(v,$e){return new v($e.learningRate)},y.className="SGD",y}(xd);cd(Rd);var Id=function(je){function y(v,$e,Ge){Ge===void 0&&(Ge=!1);var Ke=je.call(this,v)||this;return Ke.learningRate=v,Ke.momentum=$e,Ke.useNesterov=Ge,Ke.accumulations=[],Ke.m=On(Ke.momentum),Ke}return e(y,je),y.prototype.applyGradients=function(v){var $e=this;(Array.isArray(v)?v.map(function(Ge){return Ge.name}):Object.keys(v)).forEach(function(Ge,Ke){var qe=Lt.registeredVariables[Ge];$e.accumulations[Ke]==null&&($e.accumulations[Ke]={originalName:Ge+"/momentum",variable:Ze(function(){return Xn(qe).variable(!1)})});var Ye=$e.accumulations[Ke].variable,Je=Array.isArray(v)?v[Ke].tensor:v[Ge];Je!=null&&Ze(function(){var Qe,st=$e.m.mul(Ye).add(Je);Qe=$e.useNesterov?$e.c.mul(Je.add(st.mul($e.m))).add(qe):$e.c.mul(st).add(qe),Ye.assign(st),qe.assign(Qe)})}),this.incrementIterations()},y.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&tn(this.accumulations.map(function(v){return v.variable}))},y.prototype.setMomentum=function(v){this.momentum=v},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){return r(this,function(v){switch(v.label){case 0:return[4,this.saveIterations()];case 1:return[2,[v.sent()].concat(this.accumulations.map(function($e){return{name:$e.originalName,tensor:$e.variable}}))]}})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){return r(this,function($e){switch($e.label){case 0:return[4,this.extractIterations(v)];case 1:return v=$e.sent(),this.accumulations=v.map(function(Ge){return{originalName:Ge.name,variable:Ge.tensor.variable(!1)}}),[2]}})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},y.fromConfig=function(v,$e){return new v($e.learningRate,$e.momentum,$e.useNesterov)},y.className="Momentum",y}(Rd);cd(Id);var kd=function(je){function y(v,$e,Ge,Ke,qe){$e===void 0&&($e=.9),Ge===void 0&&(Ge=0),Ke===void 0&&(Ke=null),qe===void 0&&(qe=!1);var Ye=je.call(this)||this;if(Ye.learningRate=v,Ye.decay=$e,Ye.momentum=Ge,Ye.epsilon=Ke,Ye.accumulatedMeanSquares=[],Ye.accumulatedMoments=[],Ye.accumulatedMeanGrads=[],Ye.centered=qe,Ke==null&&(Ye.epsilon=Lt.backend.epsilon()),v==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return Ye}return e(y,je),y.prototype.applyGradients=function(v){var $e=this;(Array.isArray(v)?v.map(function(Ge){return Ge.name}):Object.keys(v)).forEach(function(Ge,Ke){var qe=Lt.registeredVariables[Ge];$e.accumulatedMeanSquares[Ke]==null&&($e.accumulatedMeanSquares[Ke]={originalName:Ge+"/rms",variable:Ze(function(){return Xn(qe).variable(!1)})}),$e.accumulatedMoments[Ke]==null&&($e.accumulatedMoments[Ke]={originalName:Ge+"/momentum",variable:Ze(function(){return Xn(qe).variable(!1)})}),$e.accumulatedMeanGrads[Ke]==null&&$e.centered&&($e.accumulatedMeanGrads[Ke]={originalName:Ge+"/mg",variable:Ze(function(){return Xn(qe).variable(!1)})});var Ye=Array.isArray(v)?v[Ke].tensor:v[Ge];if(Ye!=null){var Je=$e.accumulatedMeanSquares[Ke].variable,Qe=$e.accumulatedMoments[Ke].variable;Ze(function(){var st=Je.mul($e.decay).add(Ye.square().mul(1-$e.decay));if($e.centered){var Mt=$e.accumulatedMeanGrads[Ke].variable,on=Mt.mul($e.decay).add(Ye.mul(1-$e.decay)),sn=Qe.mul($e.momentum).add(Ye.mul($e.learningRate).div(st.sub(on.square().add($e.epsilon)).sqrt()));Je.assign(st),Mt.assign(on),Qe.assign(sn);var fn=qe.sub(sn);qe.assign(fn)}else{var hn=Je.mul($e.decay).add(Ye.square().mul(1-$e.decay));sn=Qe.mul($e.momentum).add(Ye.mul($e.learningRate).div(hn.add($e.epsilon).sqrt())),Je.assign(hn),Qe.assign(sn),fn=qe.sub(sn),qe.assign(fn)}})}}),this.incrementIterations()},y.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&tn(this.accumulatedMeanSquares.map(function(v){return v.variable})),this.accumulatedMeanGrads!=null&&this.centered&&tn(this.accumulatedMeanGrads.map(function(v){return v.variable})),this.accumulatedMoments!=null&&tn(this.accumulatedMoments.map(function(v){return v.variable}))},y.prototype.getWeights=function(){return n(this,void 0,void 0,function(){var v;return r(this,function($e){switch($e.label){case 0:return v=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&v.push.apply(v,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[$e.sent()].concat(v.map(function(Ge){return{name:Ge.originalName,tensor:Ge.variable}}))]}})})},y.prototype.setWeights=function(v){return n(this,void 0,void 0,function(){var $e;return r(this,function(Ge){switch(Ge.label){case 0:return[4,this.extractIterations(v)];case 1:return v=Ge.sent(),$e=this.centered?v.length/3:v.length/2,this.accumulatedMeanSquares=v.slice(0,$e).map(function(Ke){return{originalName:Ke.name,variable:Ke.tensor.variable(!1)}}),this.accumulatedMoments=v.slice($e,2*$e).map(function(Ke){return{originalName:Ke.name,variable:Ke.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=v.slice(2*$e,3*$e).map(function(Ke){return{originalName:Ke.name,variable:Ke.tensor.variable(!1)}})),[2]}})})},y.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},y.fromConfig=function(v,$e){return new v($e.learningRate,$e.decay,$e.momentum,$e.epsilon,$e.centered)},y.className="RMSProp",y}(xd);cd(kd);typeof requestAnimationFrame<"u"||typeof setImmediate<"u"&&setImmediate;wt.prototype.squaredDifference=function(je){return nu(this,je)},xt=Gh;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(je,y){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,$e){v.__proto__=$e}||function(v,$e){for(var Ge in $e)$e.hasOwnProperty(Ge)&&(v[Ge]=$e[Ge])},extendStatics(je,y)};function __extends(je,y){extendStatics(je,y);function v(){this.constructor=je}je.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)}var __assign=function(){return __assign=Object.assign||function(y){for(var v,$e=1,Ge=arguments.length;$e<Ge;$e++){v=arguments[$e];for(var Ke in v)Object.prototype.hasOwnProperty.call(v,Ke)&&(y[Ke]=v[Ke])}return y},__assign.apply(this,arguments)};function __awaiter(je,y,v,$e){function Ge(Ke){return Ke instanceof v?Ke:new v(function(qe){qe(Ke)})}return new(v||(v=Promise))(function(Ke,qe){function Ye(st){try{Qe($e.next(st))}catch(Mt){qe(Mt)}}function Je(st){try{Qe($e.throw(st))}catch(Mt){qe(Mt)}}function Qe(st){st.done?Ke(st.value):Ge(st.value).then(Ye,Je)}Qe(($e=$e.apply(je,[])).next())})}function __generator(je,y){var v={label:0,sent:function(){if(Ke[0]&1)throw Ke[1];return Ke[1]},trys:[],ops:[]},$e,Ge,Ke,qe;return qe={next:Ye(0),throw:Ye(1),return:Ye(2)},typeof Symbol=="function"&&(qe[Symbol.iterator]=function(){return this}),qe;function Ye(Qe){return function(st){return Je([Qe,st])}}function Je(Qe){if($e)throw new TypeError("Generator is already executing.");for(;v;)try{if($e=1,Ge&&(Ke=Qe[0]&2?Ge.return:Qe[0]?Ge.throw||((Ke=Ge.return)&&Ke.call(Ge),0):Ge.next)&&!(Ke=Ke.call(Ge,Qe[1])).done)return Ke;switch(Ge=0,Ke&&(Qe=[Qe[0]&2,Ke.value]),Qe[0]){case 0:case 1:Ke=Qe;break;case 4:return v.label++,{value:Qe[1],done:!1};case 5:v.label++,Ge=Qe[1],Qe=[0];continue;case 7:Qe=v.ops.pop(),v.trys.pop();continue;default:if(Ke=v.trys,!(Ke=Ke.length>0&&Ke[Ke.length-1])&&(Qe[0]===6||Qe[0]===2)){v=0;continue}if(Qe[0]===3&&(!Ke||Qe[1]>Ke[0]&&Qe[1]<Ke[3])){v.label=Qe[1];break}if(Qe[0]===6&&v.label<Ke[1]){v.label=Ke[1],Ke=Qe;break}if(Ke&&v.label<Ke[2]){v.label=Ke[2],v.ops.push(Qe);break}Ke[2]&&v.ops.pop(),v.trys.pop();continue}Qe=y.call(je,v)}catch(st){Qe=[6,st],Ge=0}finally{$e=Ke=0}if(Qe[0]&5)throw Qe[1];return{value:Qe[0]?Qe[1]:void 0,done:!0}}}function __spreadArrays(){for(var je=0,y=0,v=arguments.length;y<v;y++)je+=arguments[y].length;for(var $e=Array(je),Ge=0,y=0;y<v;y++)for(var Ke=arguments[y],qe=0,Ye=Ke.length;qe<Ye;qe++,Ge++)$e[Ge]=Ke[qe];return $e}var Dimensions=function(){function je(y,v){if(!isValidNumber(y)||!isValidNumber(v))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:y,height:v}));this._width=y,this._height=v}return Object.defineProperty(je.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),je.prototype.reverse=function(){return new je(1/this.width,1/this.height)},je}();function isTensor(je,y){return je instanceof wt&&je.shape.length===y}function isTensor2D(je){return isTensor(je,2)}function isTensor3D(je){return isTensor(je,3)}function isTensor4D(je){return isTensor(je,4)}function isFloat(je){return je%1!==0}function isEven(je){return je%2===0}function round(je,y){y===void 0&&(y=2);var v=Math.pow(10,y);return Math.floor(je*v)/v}function isDimensions(je){return je&&je.width&&je.height}function computeReshapedDimensions(je,y){var v=je.width,$e=je.height,Ge=y/Math.max($e,v);return new Dimensions(Math.round(v*Ge),Math.round($e*Ge))}function getCenterPoint(je){return je.reduce(function(y,v){return y.add(v)},new Point(0,0)).div(new Point(je.length,je.length))}function range(je,y,v){return Array(je).fill(0).map(function($e,Ge){return y+Ge*v})}function isValidNumber(je){return!!je&&je!==1/0&&je!==-1/0&&!isNaN(je)||je===0}function isValidProbablitiy(je){return isValidNumber(je)&&0<=je&&je<=1}var Point=function(){function je(y,v){this._x=y,this._y=v}return Object.defineProperty(je.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),je.prototype.add=function(y){return new je(this.x+y.x,this.y+y.y)},je.prototype.sub=function(y){return new je(this.x-y.x,this.y-y.y)},je.prototype.mul=function(y){return new je(this.x*y.x,this.y*y.y)},je.prototype.div=function(y){return new je(this.x/y.x,this.y/y.y)},je.prototype.abs=function(){return new je(Math.abs(this.x),Math.abs(this.y))},je.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},je.prototype.floor=function(){return new je(Math.floor(this.x),Math.floor(this.y))},je}(),Box=function(){function je(y,v){v===void 0&&(v=!0);var $e=y||{},Ge=[$e.left,$e.top,$e.right,$e.bottom].every(isValidNumber),Ke=[$e.x,$e.y,$e.width,$e.height].every(isValidNumber);if(!Ke&&!Ge)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify($e));var qe=Ke?[$e.x,$e.y,$e.width,$e.height]:[$e.left,$e.top,$e.right-$e.left,$e.bottom-$e.top],Ye=qe[0],Je=qe[1],Qe=qe[2],st=qe[3];je.assertIsValidBox({x:Ye,y:Je,width:Qe,height:st},"Box.constructor",v),this._x=Ye,this._y=Je,this._width=Qe,this._height=st}return je.isRect=function(y){return!!y&&[y.x,y.y,y.width,y.height].every(isValidNumber)},je.assertIsValidBox=function(y,v,$e){if($e===void 0&&($e=!1),!je.isRect(y))throw new Error(v+" - invalid box: "+JSON.stringify(y)+", expected object with properties x, y, width, height");if(!$e&&(y.width<0||y.height<0))throw new Error(v+" - width ("+y.width+") and height ("+y.height+") must be positive numbers")},Object.defineProperty(je.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"topLeft",{get:function(){return new Point(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"topRight",{get:function(){return new Point(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"bottomLeft",{get:function(){return new Point(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"bottomRight",{get:function(){return new Point(this.right,this.bottom)},enumerable:!0,configurable:!0}),je.prototype.round=function(){var y=[this.x,this.y,this.width,this.height].map(function(qe){return Math.round(qe)}),v=y[0],$e=y[1],Ge=y[2],Ke=y[3];return new je({x:v,y:$e,width:Ge,height:Ke})},je.prototype.floor=function(){var y=[this.x,this.y,this.width,this.height].map(function(qe){return Math.floor(qe)}),v=y[0],$e=y[1],Ge=y[2],Ke=y[3];return new je({x:v,y:$e,width:Ge,height:Ke})},je.prototype.toSquare=function(){var y=this,v=y.x,$e=y.y,Ge=y.width,Ke=y.height,qe=Math.abs(Ge-Ke);return Ge<Ke&&(v-=qe/2,Ge+=qe),Ke<Ge&&($e-=qe/2,Ke+=qe),new je({x:v,y:$e,width:Ge,height:Ke})},je.prototype.rescale=function(y){var v=isDimensions(y)?y.width:y,$e=isDimensions(y)?y.height:y;return new je({x:this.x*v,y:this.y*$e,width:this.width*v,height:this.height*$e})},je.prototype.pad=function(y,v){var $e=[this.x-y/2,this.y-v/2,this.width+y,this.height+v],Ge=$e[0],Ke=$e[1],qe=$e[2],Ye=$e[3];return new je({x:Ge,y:Ke,width:qe,height:Ye})},je.prototype.clipAtImageBorders=function(y,v){var $e=this,Ge=$e.x,Ke=$e.y,qe=$e.right,Ye=$e.bottom,Je=Math.max(Ge,0),Qe=Math.max(Ke,0),st=qe-Je,Mt=Ye-Qe,on=Math.min(st,y-Je),sn=Math.min(Mt,v-Qe);return new je({x:Je,y:Qe,width:on,height:sn}).floor()},je.prototype.shift=function(y,v){var $e=this,Ge=$e.width,Ke=$e.height,qe=this.x+y,Ye=this.y+v;return new je({x:qe,y:Ye,width:Ge,height:Ke})},je.prototype.padAtBorders=function(y,v){var $e=this.width+1,Ge=this.height+1,Ke=1,qe=1,Ye=$e,Je=Ge,Qe=this.left,st=this.top,Mt=this.right,on=this.bottom;return Mt>v&&(Ye=-Mt+v+$e,Mt=v),on>y&&(Je=-on+y+Ge,on=y),Qe<1&&(Je=2-Qe,Qe=1),st<1&&(Je=2-st,st=1),{dy:qe,edy:Je,dx:Ke,edx:Ye,y:st,ey:on,x:Qe,ex:Mt,w:$e,h:Ge}},je.prototype.calibrate=function(y){return new je({left:this.left+y.left*this.width,top:this.top+y.top*this.height,right:this.right+y.right*this.width,bottom:this.bottom+y.bottom*this.height}).toSquare().round()},je}(),BoundingBox=function(je){__extends(y,je);function y(v,$e,Ge,Ke,qe){return qe===void 0&&(qe=!1),je.call(this,{left:v,top:$e,right:Ge,bottom:Ke},qe)||this}return y}(Box),ObjectDetection=function(){function je(y,v,$e,Ge,Ke){this._imageDims=new Dimensions(Ke.width,Ke.height),this._score=y,this._classScore=v,this._className=$e,this._box=new Box(Ge).rescale(this._imageDims)}return Object.defineProperty(je.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"relativeBox",{get:function(){return new Box(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),je.prototype.forSize=function(y,v){return new je(this.score,this.classScore,this.className,this.relativeBox,{width:y,height:v})},je}(),FaceDetection=function(je){__extends(y,je);function y(v,$e,Ge){return je.call(this,v,v,"",$e,Ge)||this}return y.prototype.forSize=function(v,$e){var Ge=je.prototype.forSize.call(this,v,$e),Ke=Ge.score,qe=Ge.relativeBox,Ye=Ge.imageDims;return new y(Ke,qe,Ye)},y}(ObjectDetection);function iou(je,y,v){v===void 0&&(v=!0);var $e=Math.max(0,Math.min(je.right,y.right)-Math.max(je.left,y.left)),Ge=Math.max(0,Math.min(je.bottom,y.bottom)-Math.max(je.top,y.top)),Ke=$e*Ge;return v?Ke/(je.area+y.area-Ke):Ke/Math.min(je.area,y.area)}function minBbox(je){var y=je.map(function(Ye){return Ye.x}),v=je.map(function(Ye){return Ye.y}),$e=y.reduce(function(Ye,Je){return Je<Ye?Je:Ye},1/0),Ge=v.reduce(function(Ye,Je){return Je<Ye?Je:Ye},1/0),Ke=y.reduce(function(Ye,Je){return Ye<Je?Je:Ye},0),qe=v.reduce(function(Ye,Je){return Ye<Je?Je:Ye},0);return new BoundingBox($e,Ge,Ke,qe)}function nonMaxSuppression$1(je,y,v,$e){$e===void 0&&($e=!0);for(var Ge=y.map(function(Ye,Je){return{score:Ye,boxIndex:Je}}).sort(function(Ye,Je){return Ye.score-Je.score}).map(function(Ye){return Ye.boxIndex}),Ke=[],qe=function(){var Ye=Ge.pop();Ke.push(Ye);for(var Je=Ge,Qe=[],st=0;st<Je.length;st++){var Mt=Je[st],on=je[Ye],sn=je[Mt];Qe.push(iou(on,sn,$e))}Ge=Ge.filter(function(fn,hn){return Qe[hn]<=v})};Ge.length>0;)qe();return Ke}function normalize$1(je,y){return Ze(function(){var v=y[0],$e=y[1],Ge=y[2],Ke=Hn(__spreadArrays(je.shape.slice(0,3),[1]),v),qe=Hn(__spreadArrays(je.shape.slice(0,3),[1]),$e),Ye=Hn(__spreadArrays(je.shape.slice(0,3),[1]),Ge),Je=Yn([Ke,qe,Ye],3);return Cc(je,Je)})}function padToSquare(je,y){return y===void 0&&(y=!1),Ze(function(){var v=je.shape.slice(1),$e=v[0],Ge=v[1];if($e===Ge)return je;var Ke=Math.abs($e-Ge),qe=Math.round(Ke*(y?.5:1)),Ye=$e>Ge?2:1,Je=function(sn){var fn=je.shape.slice();return fn[Ye]=sn,Hn(fn,0)},Qe=Je(qe),st=Ke-Qe.shape[Ye],Mt=y&&st?Je(st):null,on=[Mt,je,Qe].filter(function(sn){return!!sn}).map(function(sn){return sn.toFloat()});return Yn(on,Ye)})}function sigmoid(je){return 1/(1+Math.exp(-je))}var Rect=function(je){__extends(y,je);function y(v,$e,Ge,Ke,qe){return qe===void 0&&(qe=!1),je.call(this,{x:v,y:$e,width:Ge,height:Ke},qe)||this}return y}(Box),relX=.5,relY=.43,relScale=.45,FaceLandmarks=function(){function je(y,v,$e){$e===void 0&&($e=new Point(0,0));var Ge=v.width,Ke=v.height;this._imgDims=new Dimensions(Ge,Ke),this._shift=$e,this._positions=y.map(function(qe){return qe.mul(new Point(Ge,Ke)).add($e)})}return Object.defineProperty(je.prototype,"shift",{get:function(){return new Point(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"relativePositions",{get:function(){var y=this;return this._positions.map(function(v){return v.sub(y._shift).div(new Point(y.imageWidth,y.imageHeight))})},enumerable:!0,configurable:!0}),je.prototype.forSize=function(y,v){return new this.constructor(this.relativePositions,{width:y,height:v})},je.prototype.shiftBy=function(y,v){return new this.constructor(this.relativePositions,this._imgDims,new Point(y,v))},je.prototype.shiftByPoint=function(y){return this.shiftBy(y.x,y.y)},je.prototype.align=function(y,v){if(v===void 0&&(v={}),y){var $e=y instanceof FaceDetection?y.box.floor():new Box(y);return this.shiftBy($e.x,$e.y).align(null,v)}var Ge=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},v),Ke=Ge.useDlibAlignment,qe=Ge.minBoxPadding;return Ke?this.alignDlib():this.alignMinBbox(qe)},je.prototype.alignDlib=function(){var y=this.getRefPointsForAlignment(),v=y[0],$e=y[1],Ge=y[2],Ke=function(Mt){return Ge.sub(Mt).magnitude()},qe=(Ke(v)+Ke($e))/2,Ye=Math.floor(qe/relScale),Je=getCenterPoint(y),Qe=Math.floor(Math.max(0,Je.x-relX*Ye)),st=Math.floor(Math.max(0,Je.y-relY*Ye));return new Rect(Qe,st,Math.min(Ye,this.imageWidth+Qe),Math.min(Ye,this.imageHeight+st))},je.prototype.alignMinBbox=function(y){var v=minBbox(this.positions);return v.pad(v.width*y,v.height*y)},je.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},je}(),FaceLandmarks5=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.getRefPointsForAlignment=function(){var v=this.positions;return[v[0],v[1],getCenterPoint([v[3],v[4]])]},y}(FaceLandmarks),FaceLandmarks68=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.getJawOutline=function(){return this.positions.slice(0,17)},y.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},y.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},y.prototype.getNose=function(){return this.positions.slice(27,36)},y.prototype.getLeftEye=function(){return this.positions.slice(36,42)},y.prototype.getRightEye=function(){return this.positions.slice(42,48)},y.prototype.getMouth=function(){return this.positions.slice(48,68)},y.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(getCenterPoint)},y}(FaceLandmarks),FaceMatch=function(){function je(y,v){this._label=y,this._distance=v}return Object.defineProperty(je.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),je.prototype.toString=function(y){return y===void 0&&(y=!0),""+this.label+(y?" ("+round(this.distance)+")":"")},je}(),LabeledBox=function(je){__extends(y,je);function y(v,$e){var Ge=je.call(this,v)||this;return Ge._label=$e,Ge}return y.assertIsValidLabeledBox=function(v,$e){if(Box.assertIsValidBox(v,$e),!isValidNumber(v.label))throw new Error($e+" - expected property label ("+v.label+") to be a number")},Object.defineProperty(y.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),y}(Box),LabeledFaceDescriptors=function(){function je(y,v){if(typeof y!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(v)||v.some(function($e){return!($e instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=y,this._descriptors=v}return Object.defineProperty(je.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),je.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(y){return Array.from(y)})}},je.fromJSON=function(y){var v=y.descriptors.map(function($e){return new Float32Array($e)});return new je(y.label,v)},je}();(function(je){__extends(y,je);function y(v,$e,Ge,Ke){var qe=je.call(this,v,$e)||this;return qe._score=Ge,qe._classScore=Ke,qe}return y.assertIsValidPredictedBox=function(v,$e){if(LabeledBox.assertIsValidLabeledBox(v,$e),!isValidProbablitiy(v.score)||!isValidProbablitiy(v.classScore))throw new Error($e+" - expected properties score ("+v.score+") and ("+v.classScore+") to be a number between [0, 1]")},Object.defineProperty(y.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),y})(LabeledBox);function isWithFaceDetection(je){return je.detection instanceof FaceDetection}function extendWithFaceDetection(je,y){var v={detection:y};return Object.assign({},je,v)}function createBrowserEnv(){var je=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},y=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:je,readFile:y}}function createFileSystem(je){var y="";if(!je)try{je=require("fs")}catch($e){y=$e.toString()}var v=je?function($e){return new Promise(function(Ge,Ke){je.readFile($e,function(qe,Ye){return qe?Ke(qe):Ge(Ye)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+y)};return{readFile:v}}function createNodejsEnv(){var je=global.Canvas||global.HTMLCanvasElement,y=global.Image||global.HTMLImageElement,v=function(){if(je)return new je;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},$e=function(){if(y)return new y;throw new Error("createImageElement - missing Image implementation for nodejs environment")},Ge=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},Ke=createFileSystem();return __assign({Canvas:je||function(){function qe(){}return qe}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function qe(){}return qe}(),Image:y||function(){function qe(){}return qe}(),ImageData:global.ImageData||function(){function qe(){}return qe}(),Video:global.HTMLVideoElement||function(){function qe(){}return qe}(),createCanvasElement:v,createImageElement:$e,fetch:Ge},Ke)}function isBrowser(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function isNodejs(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var environment;function getEnv(){if(!environment)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return environment}function setEnv(je){environment=je}function initialize(){isBrowser()&&setEnv(createBrowserEnv()),isNodejs()&&setEnv(createNodejsEnv())}function monkeyPatch(je){if(environment||initialize(),!environment)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var y=je.Canvas,v=y===void 0?environment.Canvas:y,$e=je.Image,Ge=$e===void 0?environment.Image:$e;environment.Canvas=v,environment.Image=Ge,environment.createCanvasElement=je.createCanvasElement||function(){return new v},environment.createImageElement=je.createImageElement||function(){return new Ge},environment.ImageData=je.ImageData||environment.ImageData,environment.Video=je.Video||environment.Video,environment.fetch=je.fetch||environment.fetch,environment.readFile=je.readFile||environment.readFile}var env={getEnv,setEnv,initialize,createBrowserEnv,createFileSystem,createNodejsEnv,monkeyPatch,isBrowser,isNodejs};initialize();function resolveInput(je){return!env.isNodejs()&&typeof je=="string"?document.getElementById(je):je}function getContext2dOrThrow(je){var y=env.getEnv(),v=y.Canvas,$e=y.CanvasRenderingContext2D;if(je instanceof $e)return je;var Ge=resolveInput(je);if(!(Ge instanceof v))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var Ke=Ge.getContext("2d");if(!Ke)throw new Error("resolveContext2d - canvas 2d context is null");return Ke}var AnchorPosition;(function(je){je.TOP_LEFT="TOP_LEFT",je.TOP_RIGHT="TOP_RIGHT",je.BOTTOM_LEFT="BOTTOM_LEFT",je.BOTTOM_RIGHT="BOTTOM_RIGHT"})(AnchorPosition||(AnchorPosition={}));function isMediaLoaded(je){var y=env.getEnv(),v=y.Image,$e=y.Video;return je instanceof v&&je.complete||je instanceof $e&&je.readyState>=3}function awaitMediaLoaded(je){return new Promise(function(y,v){if(je instanceof env.getEnv().Canvas||isMediaLoaded(je))return y();function $e(Ke){Ke.currentTarget&&(Ke.currentTarget.removeEventListener("load",$e),Ke.currentTarget.removeEventListener("error",Ge),y(Ke))}function Ge(Ke){Ke.currentTarget&&(Ke.currentTarget.removeEventListener("load",$e),Ke.currentTarget.removeEventListener("error",Ge),v(Ke))}je.addEventListener("load",$e),je.addEventListener("error",Ge)})}function getMediaDimensions(je){var y=env.getEnv(),v=y.Image,$e=y.Video;return je instanceof v?new Dimensions(je.naturalWidth,je.naturalHeight):je instanceof $e?new Dimensions(je.videoWidth,je.videoHeight):new Dimensions(je.width,je.height)}function createCanvas(je){var y=je.width,v=je.height,$e=env.getEnv().createCanvasElement,Ge=$e();return Ge.width=y,Ge.height=v,Ge}function createCanvasFromMedia(je,y){var v=env.getEnv().ImageData;if(!(je instanceof v)&&!isMediaLoaded(je))throw new Error("createCanvasFromMedia - media has not finished loading yet");var $e=getMediaDimensions(je),Ge=$e.width,Ke=$e.height,qe=createCanvas({width:Ge,height:Ke});return je instanceof v?getContext2dOrThrow(qe).putImageData(je,0,0):getContext2dOrThrow(qe).drawImage(je,0,0,Ge,Ke),qe}function imageTensorToCanvas(je,y){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye;return __generator(this,function(Je){switch(Je.label){case 0:return v=env.getEnv().createCanvasElement(),$e=je.shape.slice(isTensor4D(je)?1:0),Ge=$e[0],Ke=$e[1],qe=$e[2],Ye=Ze(function(){return je.as3D(Ge,Ke,qe).toInt()}),[4,id.toPixels(Ye,v)];case 1:return Je.sent(),Ye.dispose(),[2,v]}})})}function isMediaElement(je){var y=env.getEnv(),v=y.Image,$e=y.Canvas,Ge=y.Video;return je instanceof v||je instanceof $e||je instanceof Ge}function imageToSquare(je,y,v){v===void 0&&(v=!1);var $e=env.getEnv(),Ge=$e.Image,Ke=$e.Canvas;if(!(je instanceof Ge||je instanceof Ke))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var qe=getMediaDimensions(je),Ye=y/Math.max(qe.height,qe.width),Je=Ye*qe.width,Qe=Ye*qe.height,st=createCanvas({width:y,height:y}),Mt=je instanceof Ke?je:createCanvasFromMedia(je),on=Math.abs(Je-Qe)/2,sn=v&&Je<Qe?on:0,fn=v&&Qe<Je?on:0;return getContext2dOrThrow(st).drawImage(Mt,sn,fn,Je,Qe),st}var NetInput=function(){function je(y,v){var $e=this;if(v===void 0&&(v=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(y))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+y);this._treatAsBatchInput=v,this._batchSize=y.length,y.forEach(function(Ge,Ke){if(isTensor3D(Ge)){$e._imageTensors[Ke]=Ge,$e._inputDimensions[Ke]=Ge.shape;return}if(isTensor4D(Ge)){var qe=Ge.shape[0];if(qe!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+qe+" passed, but not supported in input array");$e._imageTensors[Ke]=Ge,$e._inputDimensions[Ke]=Ge.shape.slice(1);return}var Ye=Ge instanceof env.getEnv().Canvas?Ge:createCanvasFromMedia(Ge);$e._canvases[Ke]=Ye,$e._inputDimensions[Ke]=[Ye.height,Ye.width,3]})}return Object.defineProperty(je.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"reshapedInputDimensions",{get:function(){var y=this;return range(this.batchSize,0,1).map(function(v,$e){return y.getReshapedInputDimensions($e)})},enumerable:!0,configurable:!0}),je.prototype.getInput=function(y){return this.canvases[y]||this.imageTensors[y]},je.prototype.getInputDimensions=function(y){return this._inputDimensions[y]},je.prototype.getInputHeight=function(y){return this._inputDimensions[y][0]},je.prototype.getInputWidth=function(y){return this._inputDimensions[y][1]},je.prototype.getReshapedInputDimensions=function(y){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var v=this.getInputWidth(y),$e=this.getInputHeight(y);return computeReshapedDimensions({width:v,height:$e},this.inputSize)},je.prototype.toBatchTensor=function(y,v){var $e=this;return v===void 0&&(v=!0),this._inputSize=y,Ze(function(){var Ge=range($e.batchSize,0,1).map(function(qe){var Ye=$e.getInput(qe);if(Ye instanceof wt){var Je=isTensor4D(Ye)?Ye:Ye.expandDims();return Je=padToSquare(Je,v),(Je.shape[1]!==y||Je.shape[2]!==y)&&(Je=Oh.resizeBilinear(Je,[y,y])),Je.as3D(y,y,3)}if(Ye instanceof env.getEnv().Canvas)return id.fromPixels(imageToSquare(Ye,y,v));throw new Error("toBatchTensor - at batchIdx "+qe+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+Ye)}),Ke=Pr(Ge.map(function(qe){return qe.toFloat()})).as4D($e.batchSize,y,y,3);return Ke})},je}();function toNetInput(je){return __awaiter(this,void 0,void 0,function(){var y,v,$e;return __generator(this,function(Ge){switch(Ge.label){case 0:if(je instanceof NetInput)return[2,je];if(y=Array.isArray(je)?je:[je],!y.length)throw new Error("toNetInput - empty array passed as input");return v=function(Ke){return Array.isArray(je)?" at input index "+Ke+":":""},$e=y.map(resolveInput),$e.forEach(function(Ke,qe){if(!isMediaElement(Ke)&&!isTensor3D(Ke)&&!isTensor4D(Ke))throw typeof y[qe]=="string"?new Error("toNetInput -"+v(qe)+" string passed, but could not resolve HTMLElement for element id "+y[qe]):new Error("toNetInput -"+v(qe)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(isTensor4D(Ke)){var Ye=Ke.shape[0];if(Ye!==1)throw new Error("toNetInput -"+v(qe)+" tf.Tensor4D with batchSize "+Ye+" passed, but not supported in input array")}}),[4,Promise.all($e.map(function(Ke){return isMediaElement(Ke)&&awaitMediaLoaded(Ke)}))];case 1:return Ge.sent(),[2,new NetInput($e,Array.isArray(je))]}})})}function extractFaces(je,y){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye,Je;return __generator(this,function(Qe){switch(Qe.label){case 0:return v=env.getEnv().Canvas,$e=je,je instanceof v?[3,5]:[4,toNetInput(je)];case 1:if(Ge=Qe.sent(),Ge.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return Ke=Ge.getInput(0),Ke instanceof v?(qe=Ke,[3,4]):[3,2];case 2:return[4,imageTensorToCanvas(Ke)];case 3:qe=Qe.sent(),Qe.label=4;case 4:$e=qe,Qe.label=5;case 5:return Ye=getContext2dOrThrow($e),Je=y.map(function(st){return st instanceof FaceDetection?st.forSize($e.width,$e.height).box.floor():st}).map(function(st){return st.clipAtImageBorders($e.width,$e.height)}),[2,Je.map(function(st){var Mt=st.x,on=st.y,sn=st.width,fn=st.height,hn=createCanvas({width:sn,height:fn});return getContext2dOrThrow(hn).putImageData(Ye.getImageData(Mt,on,sn,fn),0,0),hn})]}})})}function extractFaceTensors(je,y){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(v){if(!isTensor3D(je)&&!isTensor4D(je))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(isTensor4D(je)&&je.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,Ze(function(){var $e=je.shape.slice(isTensor4D(je)?1:0),Ge=$e[0],Ke=$e[1],qe=$e[2],Ye=y.map(function(Qe){return Qe instanceof FaceDetection?Qe.forSize(Ke,Ge).box:Qe}).map(function(Qe){return Qe.clipAtImageBorders(Ke,Ge)}),Je=Ye.map(function(Qe){var st=Qe.x,Mt=Qe.y,on=Qe.width,sn=Qe.height;return xl(je.as3D(Ge,Ke,qe),[Mt,st,0],[sn,on,qe])});return Je})]})})}function fetchOrThrow(je,y){return __awaiter(this,void 0,void 0,function(){var v,$e;return __generator(this,function(Ge){switch(Ge.label){case 0:return v=env.getEnv().fetch,[4,v(je,y)];case 1:if($e=Ge.sent(),!($e.status<400))throw new Error("failed to fetch: ("+$e.status+") "+$e.statusText+", from url: "+$e.url);return[2,$e]}})})}function fetchJson(je){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(y){switch(y.label){case 0:return[4,fetchOrThrow(je)];case 1:return[2,y.sent().json()]}})})}function getModelUris(je,y){var v=y+"-weights_manifest.json";if(!je)return{modelBaseUri:"",manifestUri:v};if(je==="/")return{modelBaseUri:"/",manifestUri:"/"+v};var $e=je.startsWith("http://")?"http://":je.startsWith("https://")?"https://":"";je=je.replace($e,"");var Ge=je.split("/").filter(function(Ye){return Ye}),Ke=je.endsWith(".json")?Ge[Ge.length-1]:v,qe=$e+(je.endsWith(".json")?Ge.slice(0,Ge.length-1):Ge).join("/");return qe=je.startsWith("/")?"/"+qe:qe,{modelBaseUri:qe,manifestUri:qe==="/"?"/"+Ke:qe+"/"+Ke}}function loadWeightMap(je,y){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke;return __generator(this,function(qe){switch(qe.label){case 0:return v=getModelUris(je,y),$e=v.manifestUri,Ge=v.modelBaseUri,[4,fetchJson($e)];case 1:return Ke=qe.sent(),[2,ed.loadWeights(Ke,Ge)]}})})}var NeuralNetwork=function(){function je(y){this._name=y,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(je.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),je.prototype.getParamFromPath=function(y){var v=this.traversePropertyPath(y),$e=v.obj,Ge=v.objProp;return $e[Ge]},je.prototype.reassignParamFromPath=function(y,v){var $e=this.traversePropertyPath(y),Ge=$e.obj,Ke=$e.objProp;Ge[Ke].dispose(),Ge[Ke]=v},je.prototype.getParamList=function(){var y=this;return this._paramMappings.map(function(v){var $e=v.paramPath;return{path:$e,tensor:y.getParamFromPath($e)}})},je.prototype.getTrainableParams=function(){return this.getParamList().filter(function(y){return y.tensor instanceof St})},je.prototype.getFrozenParams=function(){return this.getParamList().filter(function(y){return!(y.tensor instanceof St)})},je.prototype.variable=function(){var y=this;this.getFrozenParams().forEach(function(v){var $e=v.path,Ge=v.tensor;y.reassignParamFromPath($e,Ge.variable())})},je.prototype.freeze=function(){var y=this;this.getTrainableParams().forEach(function(v){var $e=v.path,Ge=v.tensor,Ke=Fn(Ge.dataSync());Ge.dispose(),y.reassignParamFromPath($e,Ke)})},je.prototype.dispose=function(y){y===void 0&&(y=!0),this.getParamList().forEach(function(v){if(y&&v.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+v.path);v.tensor.dispose()}),this._params=void 0},je.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(y){var v=y.tensor;return Array.from(v.dataSync())}).reduce(function(y,v){return y.concat(v)}))},je.prototype.load=function(y){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(v){switch(v.label){case 0:return y instanceof Float32Array?(this.extractWeights(y),[2]):[4,this.loadFromUri(y)];case 1:return v.sent(),[2]}})})},je.prototype.loadFromUri=function(y){return __awaiter(this,void 0,void 0,function(){var v;return __generator(this,function($e){switch($e.label){case 0:if(y&&typeof y!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,loadWeightMap(y,this.getDefaultModelName())];case 1:return v=$e.sent(),this.loadFromWeightMap(v),[2]}})})},je.prototype.loadFromDisk=function(y){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt;return __generator(this,function(on){switch(on.label){case 0:if(y&&typeof y!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return v=env.getEnv().readFile,$e=getModelUris(y,this.getDefaultModelName()),Ge=$e.manifestUri,Ke=$e.modelBaseUri,qe=function(sn){return Promise.all(sn.map(function(fn){return v(fn).then(function(hn){return hn.buffer})}))},Ye=ed.weightsLoaderFactory(qe),st=(Qe=JSON).parse,[4,v(Ge)];case 1:return Je=st.apply(Qe,[on.sent().toString()]),[4,Ye(Je,Ke)];case 2:return Mt=on.sent(),this.loadFromWeightMap(Mt),[2]}})})},je.prototype.loadFromWeightMap=function(y){var v=this.extractParamsFromWeigthMap(y),$e=v.paramMappings,Ge=v.params;this._paramMappings=$e,this._params=Ge},je.prototype.extractWeights=function(y){var v=this.extractParams(y),$e=v.paramMappings,Ge=v.params;this._paramMappings=$e,this._params=Ge},je.prototype.traversePropertyPath=function(y){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var v=y.split("/").reduce(function(Ke,qe){if(!Ke.nextObj.hasOwnProperty(qe))throw new Error("traversePropertyPath - object does not have property "+qe+", for path "+y);return{obj:Ke.nextObj,objProp:qe,nextObj:Ke.nextObj[qe]}},{nextObj:this.params}),$e=v.obj,Ge=v.objProp;if(!$e||!Ge||!($e[Ge]instanceof wt))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+y);return{obj:$e,objProp:Ge}},je}();function depthwiseSeparableConv$1(je,y,v){return Ze(function(){var $e=Jc(je,y.depthwise_filter,y.pointwise_filter,v,"same");return $e=rc($e,y.bias),$e})}function denseBlock3(je,y,v){return v===void 0&&(v=!1),Ze(function(){var $e=Bl(v?rc(qc(je,y.conv0.filters,[2,2],"same"),y.conv0.bias):depthwiseSeparableConv$1(je,y.conv0,[2,2])),Ge=depthwiseSeparableConv$1($e,y.conv1,[1,1]),Ke=Bl(rc($e,Ge)),qe=depthwiseSeparableConv$1(Ke,y.conv2,[1,1]);return Bl(rc($e,rc(Ge,qe)))})}function denseBlock4(je,y,v,$e){return v===void 0&&(v=!1),$e===void 0&&($e=!0),Ze(function(){var Ge=Bl(v?rc(qc(je,y.conv0.filters,$e?[2,2]:[1,1],"same"),y.conv0.bias):depthwiseSeparableConv$1(je,y.conv0,$e?[2,2]:[1,1])),Ke=depthwiseSeparableConv$1(Ge,y.conv1,[1,1]),qe=Bl(rc(Ge,Ke)),Ye=depthwiseSeparableConv$1(qe,y.conv2,[1,1]),Je=Bl(rc(Ge,rc(Ke,Ye))),Qe=depthwiseSeparableConv$1(Je,y.conv3,[1,1]);return Bl(rc(Ge,rc(Ke,rc(Ye,Qe))))})}function convLayer$1(je,y,v,$e){return v===void 0&&(v="same"),$e===void 0&&($e=!1),Ze(function(){var Ge=rc(qc(je,y.filters,[1,1],v),y.bias);return $e?Bl(Ge):Ge})}function disposeUnusedWeightTensors(je,y){Object.keys(je).forEach(function(v){y.some(function($e){return $e.originalPath===v})||je[v].dispose()})}function extractConvParamsFactory(je,y){return function(v,$e,Ge,Ke){var qe=Ln(je(v*$e*Ge*Ge),[Ge,Ge,v,$e]),Ye=Mn(je($e));return y.push({paramPath:Ke+"/filters"},{paramPath:Ke+"/bias"}),{filters:qe,bias:Ye}}}function extractFCParamsFactory(je,y){return function(v,$e,Ge){var Ke=Bn(je(v*$e),[v,$e]),qe=Mn(je($e));return y.push({paramPath:Ge+"/weights"},{paramPath:Ge+"/bias"}),{weights:Ke,bias:qe}}}var SeparableConvParams=function(){function je(y,v,$e){this.depthwise_filter=y,this.pointwise_filter=v,this.bias=$e}return je}();function extractSeparableConvParamsFactory(je,y){return function(v,$e,Ge){var Ke=Ln(je(9*v),[3,3,v,1]),qe=Ln(je(v*$e),[1,1,v,$e]),Ye=Mn(je($e));return y.push({paramPath:Ge+"/depthwise_filter"},{paramPath:Ge+"/pointwise_filter"},{paramPath:Ge+"/bias"}),new SeparableConvParams(Ke,qe,Ye)}}function loadSeparableConvParamsFactory(je){return function(y){var v=je(y+"/depthwise_filter",4),$e=je(y+"/pointwise_filter",4),Ge=je(y+"/bias",1);return new SeparableConvParams(v,$e,Ge)}}function extractWeightEntryFactory(je,y){return function(v,$e,Ge){var Ke=je[v];if(!isTensor(Ke,$e))throw new Error("expected weightMap["+v+"] to be a Tensor"+$e+"D, instead have "+Ke);return y.push({originalPath:v,paramPath:Ge||v}),Ke}}function extractWeightsFactory(je){var y=je;function v(Ge){var Ke=y.slice(0,Ge);return y=y.slice(Ge),Ke}function $e(){return y}return{extractWeights:v,getRemainingWeights:$e}}function extractorsFactory$9(je,y){var v=extractConvParamsFactory(je,y),$e=extractSeparableConvParamsFactory(je,y);function Ge(qe,Ye,Je,Qe){Qe===void 0&&(Qe=!1);var st=Qe?v(qe,Ye,3,Je+"/conv0"):$e(qe,Ye,Je+"/conv0"),Mt=$e(Ye,Ye,Je+"/conv1"),on=$e(Ye,Ye,Je+"/conv2");return{conv0:st,conv1:Mt,conv2:on}}function Ke(qe,Ye,Je,Qe){Qe===void 0&&(Qe=!1);var st=Ge(qe,Ye,Je,Qe),Mt=st.conv0,on=st.conv1,sn=st.conv2,fn=$e(Ye,Ye,Je+"/conv3");return{conv0:Mt,conv1:on,conv2:sn,conv3:fn}}return{extractDenseBlock3Params:Ge,extractDenseBlock4Params:Ke}}function extractParams$7(je){var y=[],v=extractWeightsFactory(je),$e=v.extractWeights,Ge=v.getRemainingWeights,Ke=extractorsFactory$9($e,y).extractDenseBlock4Params,qe=Ke(3,32,"dense0",!0),Ye=Ke(32,64,"dense1"),Je=Ke(64,128,"dense2"),Qe=Ke(128,256,"dense3");if(Ge().length!==0)throw new Error("weights remaing after extract: "+Ge().length);return{paramMappings:y,params:{dense0:qe,dense1:Ye,dense2:Je,dense3:Qe}}}function loadConvParamsFactory(je){return function(y){var v=je(y+"/filters",4),$e=je(y+"/bias",1);return{filters:v,bias:$e}}}function loadParamsFactory$1(je,y){var v=extractWeightEntryFactory(je,y),$e=loadConvParamsFactory(v),Ge=loadSeparableConvParamsFactory(v);function Ke(Ye,Je){Je===void 0&&(Je=!1);var Qe=Je?$e(Ye+"/conv0"):Ge(Ye+"/conv0"),st=Ge(Ye+"/conv1"),Mt=Ge(Ye+"/conv2");return{conv0:Qe,conv1:st,conv2:Mt}}function qe(Ye,Je){Je===void 0&&(Je=!1);var Qe=Je?$e(Ye+"/conv0"):Ge(Ye+"/conv0"),st=Ge(Ye+"/conv1"),Mt=Ge(Ye+"/conv2"),on=Ge(Ye+"/conv3");return{conv0:Qe,conv1:st,conv2:Mt,conv3:on}}return{extractDenseBlock3Params:Ke,extractDenseBlock4Params:qe}}function extractParamsFromWeigthMap$7(je){var y=[],v=loadParamsFactory$1(je,y).extractDenseBlock4Params,$e={dense0:v("dense0",!0),dense1:v("dense1"),dense2:v("dense2"),dense3:v("dense3")};return disposeUnusedWeightTensors(je,y),{params:$e,paramMappings:y}}var FaceFeatureExtractor=function(je){__extends(y,je);function y(){return je.call(this,"FaceFeatureExtractor")||this}return y.prototype.forwardInput=function(v){var $e=this.params;if(!$e)throw new Error("FaceFeatureExtractor - load model before inference");return Ze(function(){var Ge=v.toBatchTensor(112,!0),Ke=[122.782,117.001,104.298],qe=normalize$1(Ge,Ke).div(On(255)),Ye=denseBlock4(qe,$e.dense0,!0);return Ye=denseBlock4(Ye,$e.dense1),Ye=denseBlock4(Ye,$e.dense2),Ye=denseBlock4(Ye,$e.dense3),Ye=fl(Ye,[7,7],[2,2],"valid"),Ye})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMap$7(v)},y.prototype.extractParams=function(v){return extractParams$7(v)},y}(NeuralNetwork);function fullyConnectedLayer(je,y){return Ze(function(){return rc(el(je,y.weights),y.bias)})}function extractParams$6(je,y,v){var $e=[],Ge=extractWeightsFactory(je),Ke=Ge.extractWeights,qe=Ge.getRemainingWeights,Ye=extractFCParamsFactory(Ke,$e),Je=Ye(y,v,"fc");if(qe().length!==0)throw new Error("weights remaing after extract: "+qe().length);return{paramMappings:$e,params:{fc:Je}}}function extractParamsFromWeigthMap$6(je){var y=[],v=extractWeightEntryFactory(je,y);function $e(Ke){var qe=v(Ke+"/weights",2),Ye=v(Ke+"/bias",1);return{weights:qe,bias:Ye}}var Ge={fc:$e("fc")};return disposeUnusedWeightTensors(je,y),{params:Ge,paramMappings:y}}function seperateWeightMaps(je){var y={},v={};return Object.keys(je).forEach(function($e){var Ge=$e.startsWith("fc")?v:y;Ge[$e]=je[$e]}),{featureExtractorMap:y,classifierMap:v}}var FaceProcessor=function(je){__extends(y,je);function y(v,$e){var Ge=je.call(this,v)||this;return Ge._faceFeatureExtractor=$e,Ge}return Object.defineProperty(y.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),y.prototype.runNet=function(v){var $e=this,Ge=this.params;if(!Ge)throw new Error(this._name+" - load model before inference");return Ze(function(){var Ke=v instanceof NetInput?$e.faceFeatureExtractor.forwardInput(v):v;return fullyConnectedLayer(Ke.as2D(Ke.shape[0],-1),Ge.fc)})},y.prototype.dispose=function(v){v===void 0&&(v=!0),this.faceFeatureExtractor.dispose(v),je.prototype.dispose.call(this,v)},y.prototype.loadClassifierParams=function(v){var $e=this.extractClassifierParams(v),Ge=$e.params,Ke=$e.paramMappings;this._params=Ge,this._paramMappings=Ke},y.prototype.extractClassifierParams=function(v){return extractParams$6(v,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},y.prototype.extractParamsFromWeigthMap=function(v){var $e=seperateWeightMaps(v),Ge=$e.featureExtractorMap,Ke=$e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(Ge),extractParamsFromWeigthMap$6(Ke)},y.prototype.extractParams=function(v){var $e=this.getClassifierChannelsIn(),Ge=this.getClassifierChannelsOut(),Ke=Ge*$e+Ge,qe=v.slice(0,v.length-Ke),Ye=v.slice(v.length-Ke);return this.faceFeatureExtractor.extractWeights(qe),this.extractClassifierParams(Ye)},y}(NeuralNetwork),FACE_EXPRESSION_LABELS=["neutral","happy","sad","angry","fearful","disgusted","surprised"],FaceExpressions=function(){function je(y){var v=this;if(y.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+y.length);FACE_EXPRESSION_LABELS.forEach(function($e,Ge){v[$e]=y[Ge]})}return je.prototype.asSortedArray=function(){var y=this;return FACE_EXPRESSION_LABELS.map(function(v){return{expression:v,probability:y[v]}}).sort(function(v,$e){return $e.probability-v.probability})},je}(),FaceExpressionNet=function(je){__extends(y,je);function y(v){return v===void 0&&(v=new FaceFeatureExtractor),je.call(this,"FaceExpressionNet",v)||this}return y.prototype.forwardInput=function(v){var $e=this;return Ze(function(){return go($e.runNet(v))})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.predictExpressions=function(v){return __awaiter(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye=this;return __generator(this,function(Je){switch(Je.label){case 0:return[4,toNetInput(v)];case 1:return $e=Je.sent(),[4,this.forwardInput($e)];case 2:return Ge=Je.sent(),[4,Promise.all(Ur(Ge).map(function(Qe){return __awaiter(Ye,void 0,void 0,function(){var st;return __generator(this,function(Mt){switch(Mt.label){case 0:return[4,Qe.data()];case 1:return st=Mt.sent(),Qe.dispose(),[2,st]}})})}))];case 3:return Ke=Je.sent(),Ge.dispose(),qe=Ke.map(function(Qe){return new FaceExpressions(Qe)}),[2,$e.isBatchInput?qe:qe[0]]}})})},y.prototype.getDefaultModelName=function(){return"face_expression_model"},y.prototype.getClassifierChannelsIn=function(){return 256},y.prototype.getClassifierChannelsOut=function(){return 7},y}(FaceProcessor);function extendWithFaceExpressions(je,y){var v={expressions:y};return Object.assign({},je,v)}function isWithFaceLandmarks(je){return isWithFaceDetection(je)&&je.landmarks instanceof FaceLandmarks&&je.unshiftedLandmarks instanceof FaceLandmarks&&je.alignedRect instanceof FaceDetection}function extendWithFaceLandmarks(je,y){var v=je.detection.box,$e=y.shiftBy(v.x,v.y),Ge=$e.align(),Ke=je.detection.imageDims,qe=new FaceDetection(je.detection.score,Ge.rescale(Ke.reverse()),Ke),Ye={landmarks:$e,unshiftedLandmarks:y,alignedRect:qe};return Object.assign({},je,Ye)}function extractorsFactory$8(je,y){var v=extractConvParamsFactory(je,y),$e=extractSeparableConvParamsFactory(je,y);function Ge(qe,Ye,Je){var Qe=$e(qe,Ye,Je+"/separable_conv0"),st=$e(Ye,Ye,Je+"/separable_conv1"),Mt=v(qe,Ye,1,Je+"/expansion_conv");return{separable_conv0:Qe,separable_conv1:st,expansion_conv:Mt}}function Ke(qe,Ye){var Je=$e(qe,qe,Ye+"/separable_conv0"),Qe=$e(qe,qe,Ye+"/separable_conv1"),st=$e(qe,qe,Ye+"/separable_conv2");return{separable_conv0:Je,separable_conv1:Qe,separable_conv2:st}}return{extractConvParams:v,extractSeparableConvParams:$e,extractReductionBlockParams:Ge,extractMainBlockParams:Ke}}function extractParams$5(je,y){var v=[],$e=extractWeightsFactory(je),Ge=$e.extractWeights,Ke=$e.getRemainingWeights,qe=extractorsFactory$8(Ge,v),Ye=qe.extractConvParams,Je=qe.extractSeparableConvParams,Qe=qe.extractReductionBlockParams,st=qe.extractMainBlockParams,Mt=Ye(3,32,3,"entry_flow/conv_in"),on=Qe(32,64,"entry_flow/reduction_block_0"),sn=Qe(64,128,"entry_flow/reduction_block_1"),fn={conv_in:Mt,reduction_block_0:on,reduction_block_1:sn},hn={};range(y,0,1).forEach(function(lo){hn["main_block_"+lo]=st(128,"middle_flow/main_block_"+lo)});var to=Qe(128,256,"exit_flow/reduction_block"),Xr=Je(256,512,"exit_flow/separable_conv"),co={reduction_block:to,separable_conv:Xr};if(Ke().length!==0)throw new Error("weights remaing after extract: "+Ke().length);return{paramMappings:v,params:{entry_flow:fn,middle_flow:hn,exit_flow:co}}}function loadParamsFactory(je,y){var v=extractWeightEntryFactory(je,y),$e=loadConvParamsFactory(v),Ge=loadSeparableConvParamsFactory(v);function Ke(Ye){var Je=Ge(Ye+"/separable_conv0"),Qe=Ge(Ye+"/separable_conv1"),st=$e(Ye+"/expansion_conv");return{separable_conv0:Je,separable_conv1:Qe,expansion_conv:st}}function qe(Ye){var Je=Ge(Ye+"/separable_conv0"),Qe=Ge(Ye+"/separable_conv1"),st=Ge(Ye+"/separable_conv2");return{separable_conv0:Je,separable_conv1:Qe,separable_conv2:st}}return{extractConvParams:$e,extractSeparableConvParams:Ge,extractReductionBlockParams:Ke,extractMainBlockParams:qe}}function extractParamsFromWeigthMap$5(je,y){var v=[],$e=loadParamsFactory(je,v),Ge=$e.extractConvParams,Ke=$e.extractSeparableConvParams,qe=$e.extractReductionBlockParams,Ye=$e.extractMainBlockParams,Je=Ge("entry_flow/conv_in"),Qe=qe("entry_flow/reduction_block_0"),st=qe("entry_flow/reduction_block_1"),Mt={conv_in:Je,reduction_block_0:Qe,reduction_block_1:st},on={};range(y,0,1).forEach(function(to){on["main_block_"+to]=Ye("middle_flow/main_block_"+to)});var sn=qe("exit_flow/reduction_block"),fn=Ke("exit_flow/separable_conv"),hn={reduction_block:sn,separable_conv:fn};return disposeUnusedWeightTensors(je,v),{params:{entry_flow:Mt,middle_flow:on,exit_flow:hn},paramMappings:v}}function conv$1(je,y,v){return rc(qc(je,y.filters,v,"same"),y.bias)}function reductionBlock(je,y,v){v===void 0&&(v=!0);var $e=v?Bl(je):je;return $e=depthwiseSeparableConv$1($e,y.separable_conv0,[1,1]),$e=depthwiseSeparableConv$1(Bl($e),y.separable_conv1,[1,1]),$e=hl($e,[3,3],[2,2],"same"),$e=rc($e,conv$1(je,y.expansion_conv,[2,2])),$e}function mainBlock(je,y){var v=depthwiseSeparableConv$1(Bl(je),y.separable_conv0,[1,1]);return v=depthwiseSeparableConv$1(Bl(v),y.separable_conv1,[1,1]),v=depthwiseSeparableConv$1(Bl(v),y.separable_conv2,[1,1]),v=rc(v,je),v}var TinyXception=function(je){__extends(y,je);function y(v){var $e=je.call(this,"TinyXception")||this;return $e._numMainBlocks=v,$e}return y.prototype.forwardInput=function(v){var $e=this,Ge=this.params;if(!Ge)throw new Error("TinyXception - load model before inference");return Ze(function(){var Ke=v.toBatchTensor(112,!0),qe=[122.782,117.001,104.298],Ye=normalize$1(Ke,qe).div(On(256)),Je=Bl(conv$1(Ye,Ge.entry_flow.conv_in,[2,2]));return Je=reductionBlock(Je,Ge.entry_flow.reduction_block_0,!1),Je=reductionBlock(Je,Ge.entry_flow.reduction_block_1),range($e._numMainBlocks,0,1).forEach(function(Qe){Je=mainBlock(Je,Ge.middle_flow["main_block_"+Qe])}),Je=reductionBlock(Je,Ge.exit_flow.reduction_block),Je=Bl(depthwiseSeparableConv$1(Je,Ge.exit_flow.separable_conv,[1,1])),Je})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.getDefaultModelName=function(){return"tiny_xception_model"},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMap$5(v,this._numMainBlocks)},y.prototype.extractParams=function(v){return extractParams$5(v,this._numMainBlocks)},y}(NeuralNetwork);function extractParams$4(je){var y=[],v=extractWeightsFactory(je),$e=v.extractWeights,Ge=v.getRemainingWeights,Ke=extractFCParamsFactory($e,y),qe=Ke(512,1,"fc/age"),Ye=Ke(512,2,"fc/gender");if(Ge().length!==0)throw new Error("weights remaing after extract: "+Ge().length);return{paramMappings:y,params:{fc:{age:qe,gender:Ye}}}}function extractParamsFromWeigthMap$4(je){var y=[],v=extractWeightEntryFactory(je,y);function $e(Ke){var qe=v(Ke+"/weights",2),Ye=v(Ke+"/bias",1);return{weights:qe,bias:Ye}}var Ge={fc:{age:$e("fc/age"),gender:$e("fc/gender")}};return disposeUnusedWeightTensors(je,y),{params:Ge,paramMappings:y}}var Gender;(function(je){je.FEMALE="female",je.MALE="male"})(Gender||(Gender={}));var AgeGenderNet=function(je){__extends(y,je);function y(v){v===void 0&&(v=new TinyXception(2));var $e=je.call(this,"AgeGenderNet")||this;return $e._faceFeatureExtractor=v,$e}return Object.defineProperty(y.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),y.prototype.runNet=function(v){var $e=this,Ge=this.params;if(!Ge)throw new Error(this._name+" - load model before inference");return Ze(function(){var Ke=v instanceof NetInput?$e.faceFeatureExtractor.forwardInput(v):v,qe=fl(Ke,[7,7],[2,2],"valid").as2D(Ke.shape[0],-1),Ye=fullyConnectedLayer(qe,Ge.fc.age).as1D(),Je=fullyConnectedLayer(qe,Ge.fc.gender);return{age:Ye,gender:Je}})},y.prototype.forwardInput=function(v){var $e=this;return Ze(function(){var Ge=$e.runNet(v),Ke=Ge.age,qe=Ge.gender;return{age:Ke,gender:go(qe)}})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.predictAgeAndGender=function(v){return __awaiter(this,void 0,void 0,function(){var $e,Ge,Ke,qe,Ye,Je,Qe=this;return __generator(this,function(st){switch(st.label){case 0:return[4,toNetInput(v)];case 1:return $e=st.sent(),[4,this.forwardInput($e)];case 2:return Ge=st.sent(),Ke=Ur(Ge.age),qe=Ur(Ge.gender),Ye=Ke.map(function(Mt,on){return{ageTensor:Mt,genderTensor:qe[on]}}),[4,Promise.all(Ye.map(function(Mt){var on=Mt.ageTensor,sn=Mt.genderTensor;return __awaiter(Qe,void 0,void 0,function(){var fn,hn,to,Xr,co;return __generator(this,function(lo){switch(lo.label){case 0:return[4,on.data()];case 1:return fn=lo.sent()[0],[4,sn.data()];case 2:return hn=lo.sent()[0],to=hn>.5,Xr=to?Gender.MALE:Gender.FEMALE,co=to?hn:1-hn,on.dispose(),sn.dispose(),[2,{age:fn,gender:Xr,genderProbability:co}]}})})}))];case 3:return Je=st.sent(),Ge.age.dispose(),Ge.gender.dispose(),[2,$e.isBatchInput?Je:Je[0]]}})})},y.prototype.getDefaultModelName=function(){return"age_gender_model"},y.prototype.dispose=function(v){v===void 0&&(v=!0),this.faceFeatureExtractor.dispose(v),je.prototype.dispose.call(this,v)},y.prototype.loadClassifierParams=function(v){var $e=this.extractClassifierParams(v),Ge=$e.params,Ke=$e.paramMappings;this._params=Ge,this._paramMappings=Ke},y.prototype.extractClassifierParams=function(v){return extractParams$4(v)},y.prototype.extractParamsFromWeigthMap=function(v){var $e=seperateWeightMaps(v),Ge=$e.featureExtractorMap,Ke=$e.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(Ge),extractParamsFromWeigthMap$4(Ke)},y.prototype.extractParams=function(v){var $e=1539,Ge=v.slice(0,v.length-$e),Ke=v.slice(v.length-$e);return this.faceFeatureExtractor.extractWeights(Ge),this.extractClassifierParams(Ke)},y}(NeuralNetwork),FaceLandmark68NetBase=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.postProcess=function(v,$e,Ge){var Ke=Ge.map(function(Ye){var Je=Ye.width,Qe=Ye.height,st=$e/Math.max(Qe,Je);return{width:Je*st,height:Qe*st}}),qe=Ke.length;return Ze(function(){var Ye=function(on,sn){return Pr([Hn([68],on),Hn([68],sn)],1).as2D(1,136).as1D()},Je=function(on,sn){var fn=Ke[on],hn=fn.width,to=fn.height;return sn(hn,to)?Math.abs(hn-to)/2:0},Qe=function(on){return Je(on,function(sn,fn){return sn<fn})},st=function(on){return Je(on,function(sn,fn){return fn<sn})},Mt=v.mul(Hn([qe,136],$e)).sub(Pr(Array.from(Array(qe),function(on,sn){return Ye(Qe(sn),st(sn))}))).div(Pr(Array.from(Array(qe),function(on,sn){return Ye(Ke[sn].width,Ke[sn].height)})));return Mt})},y.prototype.forwardInput=function(v){var $e=this;return Ze(function(){var Ge=$e.runNet(v);return $e.postProcess(Ge,v.inputSize,v.inputDimensions.map(function(Ke){var qe=Ke[0],Ye=Ke[1];return{height:qe,width:Ye}}))})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.detectLandmarks=function(v){return __awaiter(this,void 0,void 0,function(){var $e,Ge,Ke,qe=this;return __generator(this,function(Ye){switch(Ye.label){case 0:return[4,toNetInput(v)];case 1:return $e=Ye.sent(),Ge=Ze(function(){return Ur(qe.forwardInput($e))}),[4,Promise.all(Ge.map(function(Je,Qe){return __awaiter(qe,void 0,void 0,function(){var st,Mt,on,sn,fn;return __generator(this,function(hn){switch(hn.label){case 0:return on=(Mt=Array).from,[4,Je.data()];case 1:return st=on.apply(Mt,[hn.sent()]),sn=st.filter(function(to,Xr){return isEven(Xr)}),fn=st.filter(function(to,Xr){return!isEven(Xr)}),[2,new FaceLandmarks68(Array(68).fill(0).map(function(to,Xr){return new Point(sn[Xr],fn[Xr])}),{height:$e.getInputHeight(Qe),width:$e.getInputWidth(Qe)})]}})})}))];case 2:return Ke=Ye.sent(),Ge.forEach(function(Je){return Je.dispose()}),[2,$e.isBatchInput?Ke:Ke[0]]}})})},y.prototype.getClassifierChannelsOut=function(){return 136},y}(FaceProcessor),FaceLandmark68Net=function(je){__extends(y,je);function y(v){return v===void 0&&(v=new FaceFeatureExtractor),je.call(this,"FaceLandmark68Net",v)||this}return y.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},y.prototype.getClassifierChannelsIn=function(){return 256},y}(FaceLandmark68NetBase);function extractParamsFromWeigthMapTiny(je){var y=[],v=loadParamsFactory$1(je,y).extractDenseBlock3Params,$e={dense0:v("dense0",!0),dense1:v("dense1"),dense2:v("dense2")};return disposeUnusedWeightTensors(je,y),{params:$e,paramMappings:y}}function extractParamsTiny(je){var y=[],v=extractWeightsFactory(je),$e=v.extractWeights,Ge=v.getRemainingWeights,Ke=extractorsFactory$9($e,y).extractDenseBlock3Params,qe=Ke(3,32,"dense0",!0),Ye=Ke(32,64,"dense1"),Je=Ke(64,128,"dense2");if(Ge().length!==0)throw new Error("weights remaing after extract: "+Ge().length);return{paramMappings:y,params:{dense0:qe,dense1:Ye,dense2:Je}}}var TinyFaceFeatureExtractor=function(je){__extends(y,je);function y(){return je.call(this,"TinyFaceFeatureExtractor")||this}return y.prototype.forwardInput=function(v){var $e=this.params;if(!$e)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Ze(function(){var Ge=v.toBatchTensor(112,!0),Ke=[122.782,117.001,104.298],qe=normalize$1(Ge,Ke).div(On(255)),Ye=denseBlock3(qe,$e.dense0,!0);return Ye=denseBlock3(Ye,$e.dense1),Ye=denseBlock3(Ye,$e.dense2),Ye=fl(Ye,[14,14],[2,2],"valid"),Ye})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMapTiny(v)},y.prototype.extractParams=function(v){return extractParamsTiny(v)},y}(NeuralNetwork),FaceLandmark68TinyNet=function(je){__extends(y,je);function y(v){return v===void 0&&(v=new TinyFaceFeatureExtractor),je.call(this,"FaceLandmark68TinyNet",v)||this}return y.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},y.prototype.getClassifierChannelsIn=function(){return 128},y}(FaceLandmark68NetBase);(function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y})(FaceLandmark68Net);function scale(je,y){return rc(gc(je,y.weights),y.biases)}function convLayer(je,y,v,$e,Ge){Ge===void 0&&(Ge="same");var Ke=y.conv,qe=Ke.filters,Ye=Ke.bias,Je=qc(je,qe,v,Ge);return Je=rc(Je,Ye),Je=scale(Je,y.scale),$e?Bl(Je):Je}function conv(je,y){return convLayer(je,y,[1,1],!0)}function convNoRelu(je,y){return convLayer(je,y,[1,1],!1)}function convDown(je,y){return convLayer(je,y,[2,2],!0,"valid")}function extractorsFactory$7(je,y){function v(Ye,Je,Qe){var st=je(Ye),Mt=st.length/(Je*Qe*Qe);if(isFloat(Mt))throw new Error("depth has to be an integer: "+Mt+", weights.length: "+st.length+", numFilters: "+Je+", filterSize: "+Qe);return Ze(function(){return Wl(Ln(st,[Je,Mt,Qe,Qe]),[2,3,1,0])})}function $e(Ye,Je,Qe,st){var Mt=v(Ye,Je,Qe),on=Mn(je(Je));return y.push({paramPath:st+"/filters"},{paramPath:st+"/bias"}),{filters:Mt,bias:on}}function Ge(Ye,Je){var Qe=Mn(je(Ye)),st=Mn(je(Ye));return y.push({paramPath:Je+"/weights"},{paramPath:Je+"/biases"}),{weights:Qe,biases:st}}function Ke(Ye,Je,Qe,st){var Mt=$e(Ye,Je,Qe,st+"/conv"),on=Ge(Je,st+"/scale");return{conv:Mt,scale:on}}function qe(Ye,Je,Qe,st,Mt){Mt===void 0&&(Mt=!1);var on=Ke((Mt?.5:1)*Ye,Je,Qe,st+"/conv1"),sn=Ke(Ye,Je,Qe,st+"/conv2");return{conv1:on,conv2:sn}}return{extractConvLayerParams:Ke,extractResidualLayerParams:qe}}function extractParams$3(je){var y=extractWeightsFactory(je),v=y.extractWeights,$e=y.getRemainingWeights,Ge=[],Ke=extractorsFactory$7(v,Ge),qe=Ke.extractConvLayerParams,Ye=Ke.extractResidualLayerParams,Je=qe(4704,32,7,"conv32_down"),Qe=Ye(9216,32,3,"conv32_1"),st=Ye(9216,32,3,"conv32_2"),Mt=Ye(9216,32,3,"conv32_3"),on=Ye(36864,64,3,"conv64_down",!0),sn=Ye(36864,64,3,"conv64_1"),fn=Ye(36864,64,3,"conv64_2"),hn=Ye(36864,64,3,"conv64_3"),to=Ye(147456,128,3,"conv128_down",!0),Xr=Ye(147456,128,3,"conv128_1"),co=Ye(147456,128,3,"conv128_2"),lo=Ye(589824,256,3,"conv256_down",!0),fo=Ye(589824,256,3,"conv256_1"),Uo=Ye(589824,256,3,"conv256_2"),mo=Ye(589824,256,3,"conv256_down_out"),rd=Ze(function(){return Wl(Bn(v(256*128),[128,256]),[1,0])});if(Ge.push({paramPath:"fc"}),$e().length!==0)throw new Error("weights remaing after extract: "+$e().length);var od={conv32_down:Je,conv32_1:Qe,conv32_2:st,conv32_3:Mt,conv64_down:on,conv64_1:sn,conv64_2:fn,conv64_3:hn,conv128_down:to,conv128_1:Xr,conv128_2:co,conv256_down:lo,conv256_1:fo,conv256_2:Uo,conv256_down_out:mo,fc:rd};return{params:od,paramMappings:Ge}}function extractorsFactory$6(je,y){var v=extractWeightEntryFactory(je,y);function $e(qe){var Ye=v(qe+"/scale/weights",1),Je=v(qe+"/scale/biases",1);return{weights:Ye,biases:Je}}function Ge(qe){var Ye=v(qe+"/conv/filters",4),Je=v(qe+"/conv/bias",1),Qe=$e(qe);return{conv:{filters:Ye,bias:Je},scale:Qe}}function Ke(qe){return{conv1:Ge(qe+"/conv1"),conv2:Ge(qe+"/conv2")}}return{extractConvLayerParams:Ge,extractResidualLayerParams:Ke}}function extractParamsFromWeigthMap$3(je){var y=[],v=extractorsFactory$6(je,y),$e=v.extractConvLayerParams,Ge=v.extractResidualLayerParams,Ke=$e("conv32_down"),qe=Ge("conv32_1"),Ye=Ge("conv32_2"),Je=Ge("conv32_3"),Qe=Ge("conv64_down"),st=Ge("conv64_1"),Mt=Ge("conv64_2"),on=Ge("conv64_3"),sn=Ge("conv128_down"),fn=Ge("conv128_1"),hn=Ge("conv128_2"),to=Ge("conv256_down"),Xr=Ge("conv256_1"),co=Ge("conv256_2"),lo=Ge("conv256_down_out"),fo=je.fc;if(y.push({originalPath:"fc",paramPath:"fc"}),!isTensor2D(fo))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+fo);var Uo={conv32_down:Ke,conv32_1:qe,conv32_2:Ye,conv32_3:Je,conv64_down:Qe,conv64_1:st,conv64_2:Mt,conv64_3:on,conv128_down:sn,conv128_1:fn,conv128_2:hn,conv256_down:to,conv256_1:Xr,conv256_2:co,conv256_down_out:lo,fc:fo};return disposeUnusedWeightTensors(je,y),{params:Uo,paramMappings:y}}function residual(je,y){var v=conv(je,y.conv1);return v=convNoRelu(v,y.conv2),v=rc(v,je),v=Bl(v),v}function residualDown(je,y){var v=convDown(je,y.conv1);v=convNoRelu(v,y.conv2);var $e=fl(je,2,2,"valid"),Ge=Gn($e.shape),Ke=$e.shape[3]!==v.shape[3],qe=$e.shape[1]!==v.shape[1]||$e.shape[2]!==v.shape[2];if(qe){var Ye=__spreadArrays(v.shape);Ye[1]=1;var Je=Gn(Ye);v=Yn([v,Je],1);var Qe=__spreadArrays(v.shape);Qe[2]=1;var st=Gn(Qe);v=Yn([v,st],2)}return $e=Ke?Yn([$e,Ge],3):$e,v=rc($e,v),v=Bl(v),v}var FaceRecognitionNet=function(je){__extends(y,je);function y(){return je.call(this,"FaceRecognitionNet")||this}return y.prototype.forwardInput=function(v){var $e=this.params;if(!$e)throw new Error("FaceRecognitionNet - load model before inference");return Ze(function(){var Ge=v.toBatchTensor(150,!0).toFloat(),Ke=[122.782,117.001,104.298],qe=normalize$1(Ge,Ke).div(On(256)),Ye=convDown(qe,$e.conv32_down);Ye=hl(Ye,3,2,"valid"),Ye=residual(Ye,$e.conv32_1),Ye=residual(Ye,$e.conv32_2),Ye=residual(Ye,$e.conv32_3),Ye=residualDown(Ye,$e.conv64_down),Ye=residual(Ye,$e.conv64_1),Ye=residual(Ye,$e.conv64_2),Ye=residual(Ye,$e.conv64_3),Ye=residualDown(Ye,$e.conv128_down),Ye=residual(Ye,$e.conv128_1),Ye=residual(Ye,$e.conv128_2),Ye=residualDown(Ye,$e.conv256_down),Ye=residual(Ye,$e.conv256_1),Ye=residual(Ye,$e.conv256_2),Ye=residualDown(Ye,$e.conv256_down_out);var Je=Ye.mean([1,2]),Qe=el(Je,$e.fc);return Qe})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.computeFaceDescriptor=function(v){return __awaiter(this,void 0,void 0,function(){var $e,Ge,Ke,qe=this;return __generator(this,function(Ye){switch(Ye.label){case 0:return[4,toNetInput(v)];case 1:return $e=Ye.sent(),Ge=Ze(function(){return Ur(qe.forwardInput($e))}),[4,Promise.all(Ge.map(function(Je){return Je.data()}))];case 2:return Ke=Ye.sent(),Ge.forEach(function(Je){return Je.dispose()}),[2,$e.isBatchInput?Ke:Ke[0]]}})})},y.prototype.getDefaultModelName=function(){return"face_recognition_model"},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMap$3(v)},y.prototype.extractParams=function(v){return extractParams$3(v)},y}(NeuralNetwork);function extendWithFaceDescriptor(je,y){var v={descriptor:y};return Object.assign({},je,v)}function extendWithAge(je,y){var v={age:y};return Object.assign({},je,v)}function extendWithGender(je,y,v){var $e={gender:y,genderProbability:v};return Object.assign({},je,$e)}var MtcnnOptions=function(){function je(y){var v=y===void 0?{}:y,$e=v.minFaceSize,Ge=v.scaleFactor,Ke=v.maxNumScales,qe=v.scoreThresholds,Ye=v.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=$e||20,this._scaleFactor=Ge||.709,this._maxNumScales=Ke||10,this._scoreThresholds=qe||[.6,.7,.7],this._scaleSteps=Ye,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(Je){return typeof Je!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(Je){return typeof Je!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(je.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),je}();function extractorsFactory$5(je,y){function v(Je,Qe){var st=Ln(je(9*Je),[3,3,Je,1]),Mt=Mn(je(Je)),on=Mn(je(Je)),sn=Mn(je(Je)),fn=Mn(je(Je));return y.push({paramPath:Qe+"/filters"},{paramPath:Qe+"/batch_norm_scale"},{paramPath:Qe+"/batch_norm_offset"},{paramPath:Qe+"/batch_norm_mean"},{paramPath:Qe+"/batch_norm_variance"}),{filters:st,batch_norm_scale:Mt,batch_norm_offset:on,batch_norm_mean:sn,batch_norm_variance:fn}}function $e(Je,Qe,st,Mt,on){var sn=Ln(je(Je*Qe*st*st),[st,st,Je,Qe]),fn=Mn(je(Qe));return y.push({paramPath:Mt+"/filters"},{paramPath:Mt+"/"+(on?"batch_norm_offset":"bias")}),{filters:sn,bias:fn}}function Ge(Je,Qe,st,Mt){var on=$e(Je,Qe,st,Mt,!0),sn=on.filters,fn=on.bias;return{filters:sn,batch_norm_offset:fn}}function Ke(Je,Qe,st){var Mt=v(Je,st+"/depthwise_conv"),on=Ge(Je,Qe,1,st+"/pointwise_conv");return{depthwise_conv:Mt,pointwise_conv:on}}function qe(){var Je=Ge(3,32,3,"mobilenetv1/conv_0"),Qe=Ke(32,64,"mobilenetv1/conv_1"),st=Ke(64,128,"mobilenetv1/conv_2"),Mt=Ke(128,128,"mobilenetv1/conv_3"),on=Ke(128,256,"mobilenetv1/conv_4"),sn=Ke(256,256,"mobilenetv1/conv_5"),fn=Ke(256,512,"mobilenetv1/conv_6"),hn=Ke(512,512,"mobilenetv1/conv_7"),to=Ke(512,512,"mobilenetv1/conv_8"),Xr=Ke(512,512,"mobilenetv1/conv_9"),co=Ke(512,512,"mobilenetv1/conv_10"),lo=Ke(512,512,"mobilenetv1/conv_11"),fo=Ke(512,1024,"mobilenetv1/conv_12"),Uo=Ke(1024,1024,"mobilenetv1/conv_13");return{conv_0:Je,conv_1:Qe,conv_2:st,conv_3:Mt,conv_4:on,conv_5:sn,conv_6:fn,conv_7:hn,conv_8:to,conv_9:Xr,conv_10:co,conv_11:lo,conv_12:fo,conv_13:Uo}}function Ye(){var Je=Ge(1024,256,1,"prediction_layer/conv_0"),Qe=Ge(256,512,3,"prediction_layer/conv_1"),st=Ge(512,128,1,"prediction_layer/conv_2"),Mt=Ge(128,256,3,"prediction_layer/conv_3"),on=Ge(256,128,1,"prediction_layer/conv_4"),sn=Ge(128,256,3,"prediction_layer/conv_5"),fn=Ge(256,64,1,"prediction_layer/conv_6"),hn=Ge(64,128,3,"prediction_layer/conv_7"),to=$e(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),Xr=$e(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),co=$e(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),lo=$e(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),fo=$e(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),Uo=$e(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),mo=$e(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),rd=$e(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),od=$e(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),fd=$e(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),hd=$e(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),vd=$e(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),Td={box_encoding_predictor:to,class_predictor:Xr},Od={box_encoding_predictor:co,class_predictor:lo},Md={box_encoding_predictor:fo,class_predictor:Uo},Fd={box_encoding_predictor:mo,class_predictor:rd},Ud={box_encoding_predictor:od,class_predictor:fd},pd={box_encoding_predictor:hd,class_predictor:vd};return{conv_0:Je,conv_1:Qe,conv_2:st,conv_3:Mt,conv_4:on,conv_5:sn,conv_6:fn,conv_7:hn,box_predictor_0:Td,box_predictor_1:Od,box_predictor_2:Md,box_predictor_3:Fd,box_predictor_4:Ud,box_predictor_5:pd}}return{extractMobilenetV1Params:qe,extractPredictionLayerParams:Ye}}function extractParams$2(je){var y=[],v=extractWeightsFactory(je),$e=v.extractWeights,Ge=v.getRemainingWeights,Ke=extractorsFactory$5($e,y),qe=Ke.extractMobilenetV1Params,Ye=Ke.extractPredictionLayerParams,Je=qe(),Qe=Ye(),st=Pn($e(5118*4),[1,5118,4]),Mt={extra_dim:st};if(y.push({paramPath:"output_layer/extra_dim"}),Ge().length!==0)throw new Error("weights remaing after extract: "+Ge().length);return{params:{mobilenetv1:Je,prediction_layer:Qe,output_layer:Mt},paramMappings:y}}function extractorsFactory$4(je,y){var v=extractWeightEntryFactory(je,y);function $e(Qe,st,Mt){var on=v(Qe+"/Conv2d_"+st+"_pointwise/weights",4,Mt+"/filters"),sn=v(Qe+"/Conv2d_"+st+"_pointwise/convolution_bn_offset",1,Mt+"/batch_norm_offset");return{filters:on,batch_norm_offset:sn}}function Ge(Qe){var st="mobilenetv1/conv_"+Qe,Mt="MobilenetV1/Conv2d_"+Qe+"_depthwise",on=st+"/depthwise_conv",sn=st+"/pointwise_conv",fn=v(Mt+"/depthwise_weights",4,on+"/filters"),hn=v(Mt+"/BatchNorm/gamma",1,on+"/batch_norm_scale"),to=v(Mt+"/BatchNorm/beta",1,on+"/batch_norm_offset"),Xr=v(Mt+"/BatchNorm/moving_mean",1,on+"/batch_norm_mean"),co=v(Mt+"/BatchNorm/moving_variance",1,on+"/batch_norm_variance");return{depthwise_conv:{filters:fn,batch_norm_scale:hn,batch_norm_offset:to,batch_norm_mean:Xr,batch_norm_variance:co},pointwise_conv:$e("MobilenetV1",Qe,sn)}}function Ke(){return{conv_0:$e("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:Ge(1),conv_2:Ge(2),conv_3:Ge(3),conv_4:Ge(4),conv_5:Ge(5),conv_6:Ge(6),conv_7:Ge(7),conv_8:Ge(8),conv_9:Ge(9),conv_10:Ge(10),conv_11:Ge(11),conv_12:Ge(12),conv_13:Ge(13)}}function qe(Qe,st){var Mt=v(Qe+"/weights",4,st+"/filters"),on=v(Qe+"/biases",1,st+"/bias");return{filters:Mt,bias:on}}function Ye(Qe){var st=qe("Prediction/BoxPredictor_"+Qe+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+Qe+"/box_encoding_predictor"),Mt=qe("Prediction/BoxPredictor_"+Qe+"/ClassPredictor","prediction_layer/box_predictor_"+Qe+"/class_predictor");return{box_encoding_predictor:st,class_predictor:Mt}}function Je(){return{conv_0:$e("Prediction",0,"prediction_layer/conv_0"),conv_1:$e("Prediction",1,"prediction_layer/conv_1"),conv_2:$e("Prediction",2,"prediction_layer/conv_2"),conv_3:$e("Prediction",3,"prediction_layer/conv_3"),conv_4:$e("Prediction",4,"prediction_layer/conv_4"),conv_5:$e("Prediction",5,"prediction_layer/conv_5"),conv_6:$e("Prediction",6,"prediction_layer/conv_6"),conv_7:$e("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:Ye(0),box_predictor_1:Ye(1),box_predictor_2:Ye(2),box_predictor_3:Ye(3),box_predictor_4:Ye(4),box_predictor_5:Ye(5)}}return{extractMobilenetV1Params:Ke,extractPredictionLayerParams:Je}}function extractParamsFromWeigthMap$2(je){var y=[],v=extractorsFactory$4(je,y),$e=v.extractMobilenetV1Params,Ge=v.extractPredictionLayerParams,Ke=je["Output/extra_dim"];if(y.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!isTensor3D(Ke))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+Ke);var qe={mobilenetv1:$e(),prediction_layer:Ge(),output_layer:{extra_dim:Ke}};return disposeUnusedWeightTensors(je,y),{params:qe,paramMappings:y}}function pointwiseConvLayer(je,y,v){return Ze(function(){var $e=qc(je,y.filters,v,"same");return $e=rc($e,y.batch_norm_offset),hu($e,0,6)})}var epsilon=.0010000000474974513;function depthwiseConvLayer(je,y,v){return Ze(function(){var $e=Yc(je,y.filters,v,"same");return $e=ju($e,y.batch_norm_mean,y.batch_norm_variance,y.batch_norm_offset,y.batch_norm_scale,epsilon),hu($e,0,6)})}function getStridesForLayerIdx(je){return[2,4,6,12].some(function(y){return y===je})?[2,2]:[1,1]}function mobileNetV1(je,y){return Ze(function(){var v=null,$e=pointwiseConvLayer(je,y.conv_0,[2,2]),Ge=[y.conv_1,y.conv_2,y.conv_3,y.conv_4,y.conv_5,y.conv_6,y.conv_7,y.conv_8,y.conv_9,y.conv_10,y.conv_11,y.conv_12,y.conv_13];if(Ge.forEach(function(Ke,qe){var Ye=qe+1,Je=getStridesForLayerIdx(Ye);$e=depthwiseConvLayer($e,Ke.depthwise_conv,Je),$e=pointwiseConvLayer($e,Ke.pointwise_conv,[1,1]),Ye===11&&(v=$e)}),v===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:$e,conv11:v}})}function nonMaxSuppression(je,y,v,$e,Ge){var Ke=je.shape[0],qe=Math.min(v,Ke),Ye=y.map(function(st,Mt){return{score:st,boxIndex:Mt}}).filter(function(st){return st.score>Ge}).sort(function(st,Mt){return Mt.score-st.score}),Je=function(st){return st<=$e?1:0},Qe=[];return Ye.forEach(function(st){if(!(Qe.length>=qe)){for(var Mt=st.score,on=Qe.length-1;on>=0;--on){var sn=IOU(je,st.boxIndex,Qe[on]);if(sn!==0&&(st.score*=Je(sn),st.score<=Ge))break}Mt===st.score&&Qe.push(st.boxIndex)}}),Qe}function IOU(je,y,v){var $e=je.arraySync(),Ge=Math.min($e[y][0],$e[y][2]),Ke=Math.min($e[y][1],$e[y][3]),qe=Math.max($e[y][0],$e[y][2]),Ye=Math.max($e[y][1],$e[y][3]),Je=Math.min($e[v][0],$e[v][2]),Qe=Math.min($e[v][1],$e[v][3]),st=Math.max($e[v][0],$e[v][2]),Mt=Math.max($e[v][1],$e[v][3]),on=(qe-Ge)*(Ye-Ke),sn=(st-Je)*(Mt-Qe);if(on<=0||sn<=0)return 0;var fn=Math.max(Ge,Je),hn=Math.max(Ke,Qe),to=Math.min(qe,st),Xr=Math.min(Ye,Mt),co=Math.max(to-fn,0)*Math.max(Xr-hn,0);return co/(on+sn-co)}function getCenterCoordinatesAndSizesLayer(je){var y=Ur(Wl(je,[1,0])),v=[Cc(y[2],y[0]),Cc(y[3],y[1])],$e=[rc(y[0],sc(v[0],On(2))),rc(y[1],sc(v[1],On(2)))];return{sizes:v,centers:$e}}function decodeBoxesLayer(je,y){var v=getCenterCoordinatesAndSizesLayer(je),$e=v.sizes,Ge=v.centers,Ke=Ur(Wl(y,[1,0])),qe=sc(gc(vu(sc(Ke[2],On(5))),$e[0]),On(2)),Ye=rc(gc(sc(Ke[0],On(10)),$e[0]),Ge[0]),Je=sc(gc(vu(sc(Ke[3],On(5))),$e[1]),On(2)),Qe=rc(gc(sc(Ke[1],On(10)),$e[1]),Ge[1]);return Wl(Pr([Cc(Ye,qe),Cc(Qe,Je),rc(Ye,qe),rc(Qe,Je)]),[1,0])}function outputLayer(je,y,v){return Ze(function(){var $e=je.shape[0],Ge=decodeBoxesLayer(Or(Lr(v.extra_dim,[$e,1,1]),[-1,4]),Or(je,[-1,4]));Ge=Or(Ge,[$e,Ge.shape[0]/$e,4]);var Ke=Iu(ml(y,[0,0,1],[-1,-1,-1])),qe=ml(Ke,[0,0,0],[-1,-1,1]);qe=Or(qe,[$e,qe.shape[1]]);var Ye=Ur(Ge),Je=Ur(qe);return{boxes:Ye,scores:Je}})}function boxPredictionLayer(je,y){return Ze(function(){var v=je.shape[0],$e=Or(convLayer$1(je,y.box_encoding_predictor),[v,-1,1,4]),Ge=Or(convLayer$1(je,y.class_predictor),[v,-1,3]);return{boxPredictionEncoding:$e,classPrediction:Ge}})}function predictionLayer(je,y,v){return Ze(function(){var $e=pointwiseConvLayer(je,v.conv_0,[1,1]),Ge=pointwiseConvLayer($e,v.conv_1,[2,2]),Ke=pointwiseConvLayer(Ge,v.conv_2,[1,1]),qe=pointwiseConvLayer(Ke,v.conv_3,[2,2]),Ye=pointwiseConvLayer(qe,v.conv_4,[1,1]),Je=pointwiseConvLayer(Ye,v.conv_5,[2,2]),Qe=pointwiseConvLayer(Je,v.conv_6,[1,1]),st=pointwiseConvLayer(Qe,v.conv_7,[2,2]),Mt=boxPredictionLayer(y,v.box_predictor_0),on=boxPredictionLayer(je,v.box_predictor_1),sn=boxPredictionLayer(Ge,v.box_predictor_2),fn=boxPredictionLayer(qe,v.box_predictor_3),hn=boxPredictionLayer(Je,v.box_predictor_4),to=boxPredictionLayer(st,v.box_predictor_5),Xr=Yn([Mt.boxPredictionEncoding,on.boxPredictionEncoding,sn.boxPredictionEncoding,fn.boxPredictionEncoding,hn.boxPredictionEncoding,to.boxPredictionEncoding],1),co=Yn([Mt.classPrediction,on.classPrediction,sn.classPrediction,fn.classPrediction,hn.classPrediction,to.classPrediction],1);return{boxPredictions:Xr,classPredictions:co}})}var SsdMobilenetv1Options=function(){function je(y){var v=y===void 0?{}:y,$e=v.minConfidence,Ge=v.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=$e||.5,this._maxResults=Ge||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(je.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),je}(),SsdMobilenetv1=function(je){__extends(y,je);function y(){return je.call(this,"SsdMobilenetv1")||this}return y.prototype.forwardInput=function(v){var $e=this.params;if(!$e)throw new Error("SsdMobilenetv1 - load model before inference");return Ze(function(){var Ge=v.toBatchTensor(512,!1).toFloat(),Ke=Cc(gc(Ge,On(.007843137718737125)),On(1)),qe=mobileNetV1(Ke,$e.mobilenetv1),Ye=predictionLayer(qe.out,qe.conv11,$e.prediction_layer),Je=Ye.boxPredictions,Qe=Ye.classPredictions;return outputLayer(Je,Qe,$e.output_layer)})},y.prototype.forward=function(v){return __awaiter(this,void 0,void 0,function(){var $e;return __generator(this,function(Ge){switch(Ge.label){case 0:return $e=this.forwardInput,[4,toNetInput(v)];case 1:return[2,$e.apply(this,[Ge.sent()])]}})})},y.prototype.locateFaces=function(v,$e){return $e===void 0&&($e={}),__awaiter(this,void 0,void 0,function(){var Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo,fo,Uo,mo,rd,od;return __generator(this,function(fd){switch(fd.label){case 0:return Ge=new SsdMobilenetv1Options($e),Ke=Ge.maxResults,qe=Ge.minConfidence,[4,toNetInput(v)];case 1:for(Ye=fd.sent(),Je=this.forwardInput(Ye),Qe=Je.boxes,st=Je.scores,Mt=Qe[0],on=st[0],sn=1;sn<Qe.length;sn++)Qe[sn].dispose(),st[sn].dispose();return to=(hn=Array).from,[4,on.data()];case 2:return fn=to.apply(hn,[fd.sent()]),Xr=.5,co=nonMaxSuppression(Mt,fn,Ke,Xr,qe),lo=Ye.getReshapedInputDimensions(0),fo=Ye.inputSize,Uo=fo/lo.width,mo=fo/lo.height,rd=Mt.arraySync(),od=co.map(function(hd){var vd=[Math.max(0,rd[hd][0]),Math.min(1,rd[hd][2])].map(function(pd){return pd*mo}),Td=vd[0],Od=vd[1],Md=[Math.max(0,rd[hd][1]),Math.min(1,rd[hd][3])].map(function(pd){return pd*Uo}),Fd=Md[0],Ud=Md[1];return new FaceDetection(fn[hd],new Rect(Fd,Td,Ud-Fd,Od-Td),{height:Ye.getInputHeight(0),width:Ye.getInputWidth(0)})}),Mt.dispose(),on.dispose(),[2,od]}})})},y.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMap$2(v)},y.prototype.extractParams=function(v){return extractParams$2(v)},y}(NeuralNetwork);(function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y})(SsdMobilenetv1);var IOU_THRESHOLD$1=.4,BOX_ANCHORS$1=[new Point(.738768,.874946),new Point(2.42204,2.65704),new Point(4.30971,7.04493),new Point(10.246,4.59428),new Point(12.6868,11.8741)],BOX_ANCHORS_SEPARABLE=[new Point(1.603231,2.094468),new Point(6.041143,7.080126),new Point(2.882459,3.518061),new Point(4.266906,5.178857),new Point(9.041765,10.66308)],MEAN_RGB_SEPARABLE=[117.001,114.697,97.404],DEFAULT_MODEL_NAME="tiny_yolov2_model",DEFAULT_MODEL_NAME_SEPARABLE_CONV="tiny_yolov2_separable_conv_model",isNumber=function(je){return typeof je=="number"};function validateConfig(je){if(!je)throw new Error("invalid config: "+je);if(typeof je.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+je.withSeparableConvs);if(!isNumber(je.iouThreshold)||je.iouThreshold<0||je.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+je.iouThreshold);if(!Array.isArray(je.classes)||!je.classes.length||!je.classes.every(function(y){return typeof y=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(je.classes));if(!Array.isArray(je.anchors)||!je.anchors.length||!je.anchors.map(function(y){return y||{}}).every(function(y){return isNumber(y.x)&&isNumber(y.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(je.anchors));if(je.meanRgb&&(!Array.isArray(je.meanRgb)||je.meanRgb.length!==3||!je.meanRgb.every(isNumber)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(je.meanRgb))}function leaky(je){return Ze(function(){var y=gc(je,On(.10000000149011612));return rc(Bl(Cc(je,y)),y)})}function convWithBatchNorm(je,y){return Ze(function(){var v=Ir(je,[[0,0],[1,1],[1,1],[0,0]]);return v=qc(v,y.conv.filters,[1,1],"valid"),v=Cc(v,y.bn.sub),v=gc(v,y.bn.truediv),v=rc(v,y.conv.bias),leaky(v)})}function depthwiseSeparableConv(je,y){return Ze(function(){var v=Ir(je,[[0,0],[1,1],[1,1],[0,0]]);return v=Jc(v,y.depthwise_filter,y.pointwise_filter,[1,1],"valid"),v=rc(v,y.bias),leaky(v)})}function extractorsFactory$3(je,y){var v=extractConvParamsFactory(je,y);function $e(qe,Ye){var Je=Mn(je(qe)),Qe=Mn(je(qe));return y.push({paramPath:Ye+"/sub"},{paramPath:Ye+"/truediv"}),{sub:Je,truediv:Qe}}function Ge(qe,Ye,Je){var Qe=v(qe,Ye,3,Je+"/conv"),st=$e(Ye,Je+"/bn");return{conv:Qe,bn:st}}var Ke=extractSeparableConvParamsFactory(je,y);return{extractConvParams:v,extractConvWithBatchNormParams:Ge,extractSeparableConvParams:Ke}}function extractParams$1(je,y,v,$e){var Ge=extractWeightsFactory(je),Ke=Ge.extractWeights,qe=Ge.getRemainingWeights,Ye=[],Je=extractorsFactory$3(Ke,Ye),Qe=Je.extractConvParams,st=Je.extractConvWithBatchNormParams,Mt=Je.extractSeparableConvParams,on;if(y.withSeparableConvs){var sn=$e[0],fn=$e[1],hn=$e[2],to=$e[3],Xr=$e[4],co=$e[5],lo=$e[6],fo=$e[7],Uo=$e[8],mo=y.isFirstLayerConv2d?Qe(sn,fn,3,"conv0"):Mt(sn,fn,"conv0"),rd=Mt(fn,hn,"conv1"),od=Mt(hn,to,"conv2"),fd=Mt(to,Xr,"conv3"),hd=Mt(Xr,co,"conv4"),vd=Mt(co,lo,"conv5"),Td=fo?Mt(lo,fo,"conv6"):void 0,Od=Uo?Mt(fo,Uo,"conv7"):void 0,Md=Qe(Uo||fo||lo,5*v,1,"conv8");on={conv0:mo,conv1:rd,conv2:od,conv3:fd,conv4:hd,conv5:vd,conv6:Td,conv7:Od,conv8:Md}}else{var sn=$e[0],fn=$e[1],hn=$e[2],to=$e[3],Xr=$e[4],co=$e[5],lo=$e[6],fo=$e[7],Uo=$e[8],mo=st(sn,fn,"conv0"),rd=st(fn,hn,"conv1"),od=st(hn,to,"conv2"),fd=st(to,Xr,"conv3"),hd=st(Xr,co,"conv4"),vd=st(co,lo,"conv5"),Td=st(lo,fo,"conv6"),Od=st(fo,Uo,"conv7"),Md=Qe(Uo,5*v,1,"conv8");on={conv0:mo,conv1:rd,conv2:od,conv3:fd,conv4:hd,conv5:vd,conv6:Td,conv7:Od,conv8:Md}}if(qe().length!==0)throw new Error("weights remaing after extract: "+qe().length);return{params:on,paramMappings:Ye}}function extractorsFactory$2(je,y){var v=extractWeightEntryFactory(je,y);function $e(Ye){var Je=v(Ye+"/sub",1),Qe=v(Ye+"/truediv",1);return{sub:Je,truediv:Qe}}function Ge(Ye){var Je=v(Ye+"/filters",4),Qe=v(Ye+"/bias",1);return{filters:Je,bias:Qe}}function Ke(Ye){var Je=Ge(Ye+"/conv"),Qe=$e(Ye+"/bn");return{conv:Je,bn:Qe}}var qe=loadSeparableConvParamsFactory(v);return{extractConvParams:Ge,extractConvWithBatchNormParams:Ke,extractSeparableConvParams:qe}}function extractParamsFromWeigthMap$1(je,y){var v=[],$e=extractorsFactory$2(je,v),Ge=$e.extractConvParams,Ke=$e.extractConvWithBatchNormParams,qe=$e.extractSeparableConvParams,Ye;if(y.withSeparableConvs){var Je=y.filterSizes&&y.filterSizes.length||9;Ye={conv0:y.isFirstLayerConv2d?Ge("conv0"):qe("conv0"),conv1:qe("conv1"),conv2:qe("conv2"),conv3:qe("conv3"),conv4:qe("conv4"),conv5:qe("conv5"),conv6:Je>7?qe("conv6"):void 0,conv7:Je>8?qe("conv7"):void 0,conv8:Ge("conv8")}}else Ye={conv0:Ke("conv0"),conv1:Ke("conv1"),conv2:Ke("conv2"),conv3:Ke("conv3"),conv4:Ke("conv4"),conv5:Ke("conv5"),conv6:Ke("conv6"),conv7:Ke("conv7"),conv8:Ge("conv8")};return disposeUnusedWeightTensors(je,v),{params:Ye,paramMappings:v}}var TinyYolov2SizeType;(function(je){je[je.XS=224]="XS",je[je.SM=320]="SM",je[je.MD=416]="MD",je[je.LG=608]="LG"})(TinyYolov2SizeType||(TinyYolov2SizeType={}));var TinyYolov2Options=function(){function je(y){var v=y===void 0?{}:y,$e=v.inputSize,Ge=v.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=$e||416,this._scoreThreshold=Ge||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(je.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),je}(),TinyYolov2Base=function(je){__extends(y,je);function y(v){var $e=je.call(this,"TinyYolov2")||this;return validateConfig(v),$e._config=v,$e}return Object.defineProperty(y.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),y.prototype.runTinyYolov2=function(v,$e){var Ge=convWithBatchNorm(v,$e.conv0);return Ge=hl(Ge,[2,2],[2,2],"same"),Ge=convWithBatchNorm(Ge,$e.conv1),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=convWithBatchNorm(Ge,$e.conv2),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=convWithBatchNorm(Ge,$e.conv3),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=convWithBatchNorm(Ge,$e.conv4),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=convWithBatchNorm(Ge,$e.conv5),Ge=hl(Ge,[2,2],[1,1],"same"),Ge=convWithBatchNorm(Ge,$e.conv6),Ge=convWithBatchNorm(Ge,$e.conv7),convLayer$1(Ge,$e.conv8,"valid",!1)},y.prototype.runMobilenet=function(v,$e){var Ge=this.config.isFirstLayerConv2d?leaky(convLayer$1(v,$e.conv0,"valid",!1)):depthwiseSeparableConv(v,$e.conv0);return Ge=hl(Ge,[2,2],[2,2],"same"),Ge=depthwiseSeparableConv(Ge,$e.conv1),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=depthwiseSeparableConv(Ge,$e.conv2),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=depthwiseSeparableConv(Ge,$e.conv3),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=depthwiseSeparableConv(Ge,$e.conv4),Ge=hl(Ge,[2,2],[2,2],"same"),Ge=depthwiseSeparableConv(Ge,$e.conv5),Ge=hl(Ge,[2,2],[1,1],"same"),Ge=$e.conv6?depthwiseSeparableConv(Ge,$e.conv6):Ge,Ge=$e.conv7?depthwiseSeparableConv(Ge,$e.conv7):Ge,convLayer$1(Ge,$e.conv8,"valid",!1)},y.prototype.forwardInput=function(v,$e){var Ge=this,Ke=this.params;if(!Ke)throw new Error("TinyYolov2 - load model before inference");return Ze(function(){var qe=v.toBatchTensor($e,!1).toFloat();return qe=Ge.config.meanRgb?normalize$1(qe,Ge.config.meanRgb):qe,qe=qe.div(On(256)),Ge.config.withSeparableConvs?Ge.runMobilenet(qe,Ke):Ge.runTinyYolov2(qe,Ke)})},y.prototype.forward=function(v,$e){return __awaiter(this,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return Ge=this.forwardInput,[4,toNetInput(v)];case 1:return[4,Ge.apply(this,[Ke.sent(),$e])];case 2:return[2,Ke.sent()]}})})},y.prototype.detect=function(v,$e){return $e===void 0&&($e={}),__awaiter(this,void 0,void 0,function(){var Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co=this;return __generator(this,function(lo){switch(lo.label){case 0:return Ge=new TinyYolov2Options($e),Ke=Ge.inputSize,qe=Ge.scoreThreshold,[4,toNetInput(v)];case 1:return Ye=lo.sent(),[4,this.forwardInput(Ye,Ke)];case 2:return Je=lo.sent(),Qe=Ze(function(){return Ur(Je)[0].expandDims()}),st={width:Ye.getInputWidth(0),height:Ye.getInputHeight(0)},[4,this.extractBoxes(Qe,Ye.getReshapedInputDimensions(0),qe)];case 3:return Mt=lo.sent(),Je.dispose(),Qe.dispose(),on=Mt.map(function(fo){return fo.box}),sn=Mt.map(function(fo){return fo.score}),fn=Mt.map(function(fo){return fo.classScore}),hn=Mt.map(function(fo){return co.config.classes[fo.label]}),to=nonMaxSuppression$1(on.map(function(fo){return fo.rescale(Ke)}),sn,this.config.iouThreshold,!0),Xr=to.map(function(fo){return new ObjectDetection(sn[fo],fn[fo],hn[fo],on[fo],st)}),[2,Xr]}})})},y.prototype.getDefaultModelName=function(){return""},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMap$1(v,this.config)},y.prototype.extractParams=function(v){var $e=this.config.filterSizes||y.DEFAULT_FILTER_SIZES,Ge=$e?$e.length:void 0;if(Ge!==7&&Ge!==8&&Ge!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+Ge+" filterSizes in config");return extractParams$1(v,this.config,this.boxEncodingSize,$e)},y.prototype.extractBoxes=function(v,$e,Ge){return __awaiter(this,void 0,void 0,function(){var Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo,fo,Uo,mo,rd,od,fd,hd,vd,Td,Od,Md,Fd,Ud,pd,_d=this;return __generator(this,function(Bd){switch(Bd.label){case 0:return Ke=$e.width,qe=$e.height,Ye=Math.max(Ke,qe),Je=Ye/Ke,Qe=Ye/qe,st=v.shape[1],Mt=this.config.anchors.length,on=Ze(function(){var $d=v.reshape([st,st,Mt,_d.boxEncodingSize]),jd=$d.slice([0,0,0,0],[st,st,Mt,4]),Pd=$d.slice([0,0,0,4],[st,st,Mt,1]),yd=_d.withClassScores?go($d.slice([0,0,0,5],[st,st,Mt,_d.config.classes.length]),3):On(0);return[jd,Pd,yd]}),sn=on[0],fn=on[1],hn=on[2],to=[],[4,fn.array()];case 1:return Xr=Bd.sent(),[4,sn.array()];case 2:co=Bd.sent(),lo=0,Bd.label=3;case 3:if(!(lo<st))return[3,12];fo=0,Bd.label=4;case 4:if(!(fo<st))return[3,11];Uo=0,Bd.label=5;case 5:return Uo<Mt?(mo=sigmoid(Xr[lo][fo][Uo][0]),!Ge||mo>Ge?(rd=(fo+sigmoid(co[lo][fo][Uo][0]))/st*Je,od=(lo+sigmoid(co[lo][fo][Uo][1]))/st*Qe,fd=Math.exp(co[lo][fo][Uo][2])*this.config.anchors[Uo].x/st*Je,hd=Math.exp(co[lo][fo][Uo][3])*this.config.anchors[Uo].y/st*Qe,vd=rd-fd/2,Td=od-hd/2,Od={row:lo,col:fo,anchor:Uo},this.withClassScores?[4,this.extractPredictedClass(hn,Od)]:[3,7]):[3,9]):[3,10];case 6:return pd=Bd.sent(),[3,8];case 7:pd={classScore:1,label:0},Bd.label=8;case 8:Md=pd,Fd=Md.classScore,Ud=Md.label,to.push(__assign({box:new BoundingBox(vd,Td,vd+fd,Td+hd),score:mo,classScore:mo*Fd,label:Ud},Od)),Bd.label=9;case 9:return Uo++,[3,5];case 10:return fo++,[3,4];case 11:return lo++,[3,3];case 12:return sn.dispose(),fn.dispose(),hn.dispose(),[2,to]}})})},y.prototype.extractPredictedClass=function(v,$e){return __awaiter(this,void 0,void 0,function(){var Ge,Ke,qe,Ye;return __generator(this,function(Je){switch(Je.label){case 0:return Ge=$e.row,Ke=$e.col,qe=$e.anchor,[4,v.array()];case 1:return Ye=Je.sent(),[2,Array(this.config.classes.length).fill(0).map(function(Qe,st){return Ye[Ge][Ke][qe][st]}).map(function(Qe,st){return{classScore:Qe,label:st}}).reduce(function(Qe,st){return Qe.classScore>st.classScore?Qe:st})]}})})},y.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],y}(NeuralNetwork),TinyYolov2=function(je){__extends(y,je);function y(v){v===void 0&&(v=!0);var $e=this,Ge=Object.assign({},{withSeparableConvs:v,iouThreshold:IOU_THRESHOLD$1,classes:["face"]},v?{anchors:BOX_ANCHORS_SEPARABLE,meanRgb:MEAN_RGB_SEPARABLE}:{anchors:BOX_ANCHORS$1,withClassScores:!0});return $e=je.call(this,Ge)||this,$e}return Object.defineProperty(y.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),y.prototype.locateFaces=function(v,$e){return __awaiter(this,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return[4,this.detect(v,$e)];case 1:return Ge=Ke.sent(),[2,Ge.map(function(qe){return new FaceDetection(qe.score,qe.relativeBox,{width:qe.imageWidth,height:qe.imageHeight})})]}})})},y.prototype.getDefaultModelName=function(){return this.withSeparableConvs?DEFAULT_MODEL_NAME_SEPARABLE_CONV:DEFAULT_MODEL_NAME},y.prototype.extractParamsFromWeigthMap=function(v){return je.prototype.extractParamsFromWeigthMap.call(this,v)},y}(TinyYolov2Base),TinyFaceDetectorOptions=function(je){__extends(y,je);function y(){var v=je!==null&&je.apply(this,arguments)||this;return v._name="TinyFaceDetectorOptions",v}return y}(TinyYolov2Options),ComposableTask=function(){function je(){}return je.prototype.then=function(y){return __awaiter(this,void 0,void 0,function(){var v;return __generator(this,function($e){switch($e.label){case 0:return v=y,[4,this.run()];case 1:return[2,v.apply(void 0,[$e.sent()])]}})})},je.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(y){throw new Error("ComposableTask - run is not implemented")})})},je}();function extractAllFacesAndComputeResults(je,y,v,$e,Ge){return Ge===void 0&&(Ge=function(Ke){var qe=Ke.alignedRect;return qe}),__awaiter(this,void 0,void 0,function(){var Ke,qe,Ye,Je,Qe;return __generator(this,function(st){switch(st.label){case 0:return Ke=je.map(function(Mt){return isWithFaceLandmarks(Mt)?Ge(Mt):Mt.detection}),Ye=$e,Ye?[3,5]:y instanceof wt?[4,extractFaceTensors(y,Ke)]:[3,2];case 1:return Je=st.sent(),[3,4];case 2:return[4,extractFaces(y,Ke)];case 3:Je=st.sent(),st.label=4;case 4:Ye=Je,st.label=5;case 5:return qe=Ye,[4,v(qe)];case 6:return Qe=st.sent(),qe.forEach(function(Mt){return Mt instanceof wt&&Mt.dispose()}),[2,Qe]}})})}function extractSingleFaceAndComputeResult(je,y,v,$e,Ge){return __awaiter(this,void 0,void 0,function(){var Ke=this;return __generator(this,function(qe){return[2,extractAllFacesAndComputeResults([je],y,function(Ye){return __awaiter(Ke,void 0,void 0,function(){return __generator(this,function(Je){return[2,v(Ye[0])]})})},$e,Ge)]})})}function bgrToRgbTensor(je){return Ze(function(){return Pr(Ur(je,3).reverse(),3)})}var CELL_STRIDE=2,CELL_SIZE=12;function extractorsFactory$1(je,y){var v=extractConvParamsFactory(je,y),$e=extractFCParamsFactory(je,y);function Ge(Qe,st){var Mt=Mn(je(Qe));return y.push({paramPath:st}),Mt}function Ke(Qe,st,Mt){Mt===void 0&&(Mt=!1);var on=v(Qe[0],Qe[1],3,st+"/conv1"),sn=Ge(Qe[1],st+"/prelu1_alpha"),fn=v(Qe[1],Qe[2],3,st+"/conv2"),hn=Ge(Qe[2],st+"/prelu2_alpha"),to=v(Qe[2],Qe[3],Mt?2:3,st+"/conv3"),Xr=Ge(Qe[3],st+"/prelu3_alpha");return{conv1:on,prelu1_alpha:sn,conv2:fn,prelu2_alpha:hn,conv3:to,prelu3_alpha:Xr}}function qe(){var Qe=Ke([3,10,16,32],"pnet"),st=v(32,2,1,"pnet/conv4_1"),Mt=v(32,4,1,"pnet/conv4_2");return __assign(__assign({},Qe),{conv4_1:st,conv4_2:Mt})}function Ye(){var Qe=Ke([3,28,48,64],"rnet",!0),st=$e(576,128,"rnet/fc1"),Mt=Ge(128,"rnet/prelu4_alpha"),on=$e(128,2,"rnet/fc2_1"),sn=$e(128,4,"rnet/fc2_2");return __assign(__assign({},Qe),{fc1:st,prelu4_alpha:Mt,fc2_1:on,fc2_2:sn})}function Je(){var Qe=Ke([3,32,64,64],"onet"),st=v(64,128,2,"onet/conv4"),Mt=Ge(128,"onet/prelu4_alpha"),on=$e(1152,256,"onet/fc1"),sn=Ge(256,"onet/prelu5_alpha"),fn=$e(256,2,"onet/fc2_1"),hn=$e(256,4,"onet/fc2_2"),to=$e(256,10,"onet/fc2_3");return __assign(__assign({},Qe),{conv4:st,prelu4_alpha:Mt,fc1:on,prelu5_alpha:sn,fc2_1:fn,fc2_2:hn,fc2_3:to})}return{extractPNetParams:qe,extractRNetParams:Ye,extractONetParams:Je}}function extractParams(je){var y=extractWeightsFactory(je),v=y.extractWeights,$e=y.getRemainingWeights,Ge=[],Ke=extractorsFactory$1(v,Ge),qe=Ke.extractPNetParams,Ye=Ke.extractRNetParams,Je=Ke.extractONetParams,Qe=qe(),st=Ye(),Mt=Je();if($e().length!==0)throw new Error("weights remaing after extract: "+$e().length);return{params:{pnet:Qe,rnet:st,onet:Mt},paramMappings:Ge}}function extractorsFactory(je,y){var v=extractWeightEntryFactory(je,y);function $e(st){var Mt=v(st+"/weights",4,st+"/filters"),on=v(st+"/bias",1);return{filters:Mt,bias:on}}function Ge(st){var Mt=v(st+"/weights",2),on=v(st+"/bias",1);return{weights:Mt,bias:on}}function Ke(st){return v(st,1)}function qe(st){var Mt=$e(st+"/conv1"),on=Ke(st+"/prelu1_alpha"),sn=$e(st+"/conv2"),fn=Ke(st+"/prelu2_alpha"),hn=$e(st+"/conv3"),to=Ke(st+"/prelu3_alpha");return{conv1:Mt,prelu1_alpha:on,conv2:sn,prelu2_alpha:fn,conv3:hn,prelu3_alpha:to}}function Ye(){var st=qe("pnet"),Mt=$e("pnet/conv4_1"),on=$e("pnet/conv4_2");return __assign(__assign({},st),{conv4_1:Mt,conv4_2:on})}function Je(){var st=qe("rnet"),Mt=Ge("rnet/fc1"),on=Ke("rnet/prelu4_alpha"),sn=Ge("rnet/fc2_1"),fn=Ge("rnet/fc2_2");return __assign(__assign({},st),{fc1:Mt,prelu4_alpha:on,fc2_1:sn,fc2_2:fn})}function Qe(){var st=qe("onet"),Mt=$e("onet/conv4"),on=Ke("onet/prelu4_alpha"),sn=Ge("onet/fc1"),fn=Ke("onet/prelu5_alpha"),hn=Ge("onet/fc2_1"),to=Ge("onet/fc2_2"),Xr=Ge("onet/fc2_3");return __assign(__assign({},st),{conv4:Mt,prelu4_alpha:on,fc1:sn,prelu5_alpha:fn,fc2_1:hn,fc2_2:to,fc2_3:Xr})}return{extractPNetParams:Ye,extractRNetParams:Je,extractONetParams:Qe}}function extractParamsFromWeigthMap(je){var y=[],v=extractorsFactory(je,y),$e=v.extractPNetParams,Ge=v.extractRNetParams,Ke=v.extractONetParams,qe=$e(),Ye=Ge(),Je=Ke();return disposeUnusedWeightTensors(je,y),{params:{pnet:qe,rnet:Ye,onet:Je},paramMappings:y}}function getSizesForScale(je,y){var v=y[0],$e=y[1];return{height:Math.floor(v*je),width:Math.floor($e*je)}}function pyramidDown(je,y,v){for(var $e=v[0],Ge=v[1],Ke=CELL_SIZE/je,qe=[],Ye=Math.min($e,Ge)*Ke,Je=0;Ye>=12;)qe.push(Ke*Math.pow(y,Je)),Ye=Ye*y,Je+=1;return qe}var MtcnnBox=function(je){__extends(y,je);function y(v,$e,Ge,Ke){return je.call(this,{left:v,top:$e,right:Ge,bottom:Ke},!0)||this}return y}(Box);function normalize(je){return Ze(function(){return gc(Cc(je,On(127.5)),On(.0078125))})}function prelu(je,y){return Ze(function(){return rc(Bl(je),gc(y,wu(Bl(wu(je)))))})}function sharedLayer(je,y,v){return v===void 0&&(v=!1),Ze(function(){var $e=convLayer$1(je,y.conv1,"valid");return $e=prelu($e,y.prelu1_alpha),$e=hl($e,v?[2,2]:[3,3],[2,2],"same"),$e=convLayer$1($e,y.conv2,"valid"),$e=prelu($e,y.prelu2_alpha),$e=v?$e:hl($e,[3,3],[2,2],"valid"),$e=convLayer$1($e,y.conv3,"valid"),$e=prelu($e,y.prelu3_alpha),$e})}function PNet(je,y){return Ze(function(){var v=sharedLayer(je,y,!0),$e=convLayer$1(v,y.conv4_1,"valid"),Ge=wr(Sl($e,3),3),Ke=go(Cc($e,Ge),3),qe=convLayer$1(v,y.conv4_2,"valid");return{prob:Ke,regions:qe}})}function rescaleAndNormalize(je,y){return Ze(function(){var v=getSizesForScale(y,je.shape.slice(1)),$e=v.height,Ge=v.width,Ke=Oh.resizeBilinear(je,[$e,Ge]),qe=normalize(Ke);return Wl(qe,[0,2,1,3])})}function extractBoundingBoxes(je,y,v,$e){for(var Ge=[],Ke=je.arraySync(),qe=0;qe<je.shape[0];qe++)for(var Ye=0;Ye<je.shape[1];Ye++)Ke[qe][Ye]>=$e&&Ge.push(new Point(Ye,qe));var Je=Ge.map(function(Qe){var st=new BoundingBox(Math.round((Qe.y*CELL_STRIDE+1)/v),Math.round((Qe.x*CELL_STRIDE+1)/v),Math.round((Qe.y*CELL_STRIDE+CELL_SIZE)/v),Math.round((Qe.x*CELL_STRIDE+CELL_SIZE)/v)),Mt=Ke[Qe.y][Qe.x],on=y.arraySync(),sn=new MtcnnBox(on[Qe.y][Qe.x][0],on[Qe.y][Qe.x][1],on[Qe.y][Qe.x][2],on[Qe.y][Qe.x][3]);return{cell:st,score:Mt,region:sn}});return Je}function stage1(je,y,v,$e,Ge){Ge.stage1=[];var Ke=y.map(function(on){return Ze(function(){var sn={scale:on},fn=rescaleAndNormalize(je,on),hn=Date.now(),to=PNet(fn,$e),Xr=to.prob,co=to.regions;sn.pnet=Date.now()-hn;var lo=Ur(Ur(Xr,3)[1])[0],fo=Ur(co)[0];return{scoresTensor:lo,regionsTensor:fo,scale:on,statsForScale:sn}})}),qe=Ke.map(function(on){var sn=on.scoresTensor,fn=on.regionsTensor,hn=on.scale,to=on.statsForScale,Xr=extractBoundingBoxes(sn,fn,hn,v);if(sn.dispose(),fn.dispose(),!Xr.length)return Ge.stage1.push(to),[];var co=Date.now(),lo=nonMaxSuppression$1(Xr.map(function(fo){return fo.cell}),Xr.map(function(fo){return fo.score}),.5);return to.nms=Date.now()-co,to.numBoxes=lo.length,Ge.stage1.push(to),lo.map(function(fo){return Xr[fo]})}),Ye=qe.reduce(function(on,sn){return on.concat(sn)},[]),Je=[],Qe=[];if(Ye.length>0){var st=Date.now(),Mt=nonMaxSuppression$1(Ye.map(function(on){return on.cell}),Ye.map(function(on){return on.score}),.7);Ge.stage1_nms=Date.now()-st,Qe=Mt.map(function(on){return Ye[on].score}),Je=Mt.map(function(on){return Ye[on]}).map(function(on){var sn=on.cell,fn=on.region;return new BoundingBox(sn.left+fn.left*sn.width,sn.top+fn.top*sn.height,sn.right+fn.right*sn.width,sn.bottom+fn.bottom*sn.height).toSquare().round()})}return{boxes:Je,scores:Qe}}function extractImagePatches(je,y,v){var $e=v.width,Ge=v.height;return __awaiter(this,void 0,void 0,function(){var Ke,qe,Ye,Je=this;return __generator(this,function(Qe){switch(Qe.label){case 0:return Ke=getContext2dOrThrow(je),[4,Promise.all(y.map(function(st){return __awaiter(Je,void 0,void 0,function(){var Mt,on,sn,fn,hn,to,Xr,co;return __generator(this,function(lo){return Mt=st.padAtBorders(je.height,je.width),on=Mt.y,sn=Mt.ey,fn=Mt.x,hn=Mt.ex,to=fn-1,Xr=on-1,co=Ke.getImageData(to,Xr,hn-to,sn-Xr),[2,env.isNodejs()?createCanvasFromMedia(co):createImageBitmap(co)]})})}))];case 1:return qe=Qe.sent(),Ye=[],qe.forEach(function(st){var Mt=createCanvas({width:$e,height:Ge}),on=getContext2dOrThrow(Mt);on.drawImage(st,0,0,$e,Ge);for(var sn=on.getImageData(0,0,$e,Ge).data,fn=[],hn=0;hn<sn.length;hn+=4)fn.push(sn[hn+2]),fn.push(sn[hn+1]),fn.push(sn[hn]);Ye.push(fn)}),[2,Ye.map(function(st){var Mt=Ze(function(){var on=Wl(Ln(st,[1,$e,Ge,3]),[0,2,1,3]).toFloat();return normalize(on)});return Mt})]}})})}function RNet(je,y){return Ze(function(){var v=sharedLayer(je,y),$e=Or(v,[v.shape[0],y.fc1.weights.shape[0]]),Ge=fullyConnectedLayer($e,y.fc1),Ke=prelu(Ge,y.prelu4_alpha),qe=fullyConnectedLayer(Ke,y.fc2_1),Ye=wr(Sl(qe,1),1),Je=go(Cc(qe,Ye),1),Qe=fullyConnectedLayer(Ke,y.fc2_2),st=Ur(Je,1)[1];return{scores:st,regions:Qe}})}function stage2(je,y,v,$e,Ge){return __awaiter(this,void 0,void 0,function(){var Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co;return __generator(this,function(lo){switch(lo.label){case 0:return Ke=Date.now(),[4,extractImagePatches(je,y,{width:24,height:24})];case 1:return qe=lo.sent(),Ge.stage2_extractImagePatches=Date.now()-Ke,Ke=Date.now(),Ye=qe.map(function(fo){var Uo=RNet(fo,$e);return fo.dispose(),Uo}),Ge.stage2_rnet=Date.now()-Ke,Je=Ye.length>1?Yn(Ye.map(function(fo){return fo.scores})):Ye[0].scores,Mt=(st=Array).from,[4,Je.data()];case 2:return Qe=Mt.apply(st,[lo.sent()]),Je.dispose(),on=Qe.map(function(fo,Uo){return{score:fo,idx:Uo}}).filter(function(fo){return fo.score>v}).map(function(fo){var Uo=fo.idx;return Uo}),sn=on.map(function(fo){return y[fo]}),fn=on.map(function(fo){return Qe[fo]}),hn=[],to=[],sn.length>0&&(Ke=Date.now(),Xr=nonMaxSuppression$1(sn,fn,.7),Ge.stage2_nms=Date.now()-Ke,co=Xr.map(function(fo){var Uo=Ye[on[fo]].regions.arraySync();return new MtcnnBox(Uo[0][0],Uo[0][1],Uo[0][2],Uo[0][3])}),to=Xr.map(function(fo){return fn[fo]}),hn=Xr.map(function(fo,Uo){return sn[fo].calibrate(co[Uo])})),Ye.forEach(function(fo){fo.regions.dispose(),fo.scores.dispose()}),[2,{boxes:hn,scores:to}]}})})}function ONet(je,y){return Ze(function(){var v=sharedLayer(je,y);v=hl(v,[2,2],[2,2],"same"),v=convLayer$1(v,y.conv4,"valid"),v=prelu(v,y.prelu4_alpha);var $e=Or(v,[v.shape[0],y.fc1.weights.shape[0]]),Ge=fullyConnectedLayer($e,y.fc1),Ke=prelu(Ge,y.prelu5_alpha),qe=fullyConnectedLayer(Ke,y.fc2_1),Ye=wr(Sl(qe,1),1),Je=go(Cc(qe,Ye),1),Qe=fullyConnectedLayer(Ke,y.fc2_2),st=fullyConnectedLayer(Ke,y.fc2_3),Mt=Ur(Je,1)[1];return{scores:Mt,regions:Qe,points:st}})}function stage3(je,y,v,$e,Ge){return __awaiter(this,void 0,void 0,function(){var Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo;return __generator(this,function(fo){switch(fo.label){case 0:return Ke=Date.now(),[4,extractImagePatches(je,y,{width:48,height:48})];case 1:return qe=fo.sent(),Ge.stage3_extractImagePatches=Date.now()-Ke,Ke=Date.now(),Ye=qe.map(function(Uo){var mo=ONet(Uo,$e);return Uo.dispose(),mo}),Ge.stage3_onet=Date.now()-Ke,Je=Ye.length>1?Yn(Ye.map(function(Uo){return Uo.scores})):Ye[0].scores,Mt=(st=Array).from,[4,Je.data()];case 2:return Qe=Mt.apply(st,[fo.sent()]),Je.dispose(),on=Qe.map(function(Uo,mo){return{score:Uo,idx:mo}}).filter(function(Uo){return Uo.score>v}).map(function(Uo){var mo=Uo.idx;return mo}),sn=on.map(function(Uo){var mo=Ye[Uo].regions.arraySync();return new MtcnnBox(mo[0][0],mo[0][1],mo[0][2],mo[0][3])}),fn=on.map(function(Uo,mo){return y[Uo].calibrate(sn[mo])}),hn=on.map(function(Uo){return Qe[Uo]}),to=[],Xr=[],co=[],fn.length>0&&(Ke=Date.now(),lo=nonMaxSuppression$1(fn,hn,.7,!1),Ge.stage3_nms=Date.now()-Ke,to=lo.map(function(Uo){return fn[Uo]}),Xr=lo.map(function(Uo){return hn[Uo]}),co=lo.map(function(Uo,mo){return Array(5).fill(0).map(function(rd,od){var fd=Ye[Uo].points.arraySync();return new Point(fd[0][od]*(to[mo].width+1)+to[mo].left,fd[0][od+5]*(to[mo].height+1)+to[mo].top)})})),Ye.forEach(function(Uo){Uo.regions.dispose(),Uo.scores.dispose(),Uo.points.dispose()}),[2,{boxes:to,scores:Xr,points:co}]}})})}var Mtcnn=function(je){__extends(y,je);function y(){return je.call(this,"Mtcnn")||this}return y.prototype.load=function(v){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($e){return console.warn("mtcnn is deprecated and will be removed soon"),[2,je.prototype.load.call(this,v)]})})},y.prototype.loadFromDisk=function(v){return __awaiter(this,void 0,void 0,function(){return __generator(this,function($e){return console.warn("mtcnn is deprecated and will be removed soon"),[2,je.prototype.loadFromDisk.call(this,v)]})})},y.prototype.forwardInput=function(v,$e){return $e===void 0&&($e={}),__awaiter(this,void 0,void 0,function(){var Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo,fo,Uo,mo,rd,od;return __generator(this,function(fd){switch(fd.label){case 0:if(Ge=this.params,!Ge)throw new Error("Mtcnn - load model before inference");if(Ke=v.canvases[0],!Ke)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return qe={},Ye=Date.now(),Je=Ze(function(){return bgrToRgbTensor(wr(id.fromPixels(Ke)).toFloat())}),Qe=function(hd){return Je.dispose(),qe.total=Date.now()-Ye,hd},st=Je.shape.slice(1),Mt=st[0],on=st[1],sn=new MtcnnOptions($e),fn=sn.minFaceSize,hn=sn.scaleFactor,to=sn.maxNumScales,Xr=sn.scoreThresholds,co=sn.scaleSteps,lo=(co||pyramidDown(fn,hn,[Mt,on])).filter(function(hd){var vd=getSizesForScale(hd,[Mt,on]);return Math.min(vd.width,vd.height)>CELL_SIZE}).slice(0,to),qe.scales=lo,qe.pyramid=lo.map(function(hd){return getSizesForScale(hd,[Mt,on])}),fo=Date.now(),[4,stage1(Je,lo,Xr[0],Ge.pnet,qe)];case 1:return Uo=fd.sent(),qe.total_stage1=Date.now()-fo,Uo.boxes.length?(qe.stage2_numInputBoxes=Uo.boxes.length,fo=Date.now(),[4,stage2(Ke,Uo.boxes,Xr[1],Ge.rnet,qe)]):[2,Qe({results:[],stats:qe})];case 2:return mo=fd.sent(),qe.total_stage2=Date.now()-fo,mo.boxes.length?(qe.stage3_numInputBoxes=mo.boxes.length,fo=Date.now(),[4,stage3(Ke,mo.boxes,Xr[2],Ge.onet,qe)]):[2,Qe({results:[],stats:qe})];case 3:return rd=fd.sent(),qe.total_stage3=Date.now()-fo,od=rd.boxes.map(function(hd,vd){return extendWithFaceLandmarks(extendWithFaceDetection({},new FaceDetection(rd.scores[vd],new Rect(hd.left/on,hd.top/Mt,hd.width/on,hd.height/Mt),{height:Mt,width:on})),new FaceLandmarks5(rd.points[vd].map(function(Td){return Td.sub(new Point(hd.left,hd.top)).div(new Point(hd.width,hd.height))}),{width:hd.width,height:hd.height}))}),[2,Qe({results:od,stats:qe})]}})})},y.prototype.forward=function(v,$e){return $e===void 0&&($e={}),__awaiter(this,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return Ge=this.forwardInput,[4,toNetInput(v)];case 1:return[4,Ge.apply(this,[Ke.sent(),$e])];case 2:return[2,Ke.sent().results]}})})},y.prototype.forwardWithStats=function(v,$e){return $e===void 0&&($e={}),__awaiter(this,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return Ge=this.forwardInput,[4,toNetInput(v)];case 1:return[2,Ge.apply(this,[Ke.sent(),$e])]}})})},y.prototype.getDefaultModelName=function(){return"mtcnn_model"},y.prototype.extractParamsFromWeigthMap=function(v){return extractParamsFromWeigthMap(v)},y.prototype.extractParams=function(v){return extractParams(v)},y}(NeuralNetwork),IOU_THRESHOLD=.4,BOX_ANCHORS=[new Point(1.603231,2.094468),new Point(6.041143,7.080126),new Point(2.882459,3.518061),new Point(4.266906,5.178857),new Point(9.041765,10.66308)],MEAN_RGB=[117.001,114.697,97.404],TinyFaceDetector=function(je){__extends(y,je);function y(){var v=this,$e={withSeparableConvs:!0,iouThreshold:IOU_THRESHOLD,classes:["face"],anchors:BOX_ANCHORS,meanRgb:MEAN_RGB,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return v=je.call(this,$e)||this,v}return Object.defineProperty(y.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),y.prototype.locateFaces=function(v,$e){return __awaiter(this,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return[4,this.detect(v,$e)];case 1:return Ge=Ke.sent(),[2,Ge.map(function(qe){return new FaceDetection(qe.score,qe.relativeBox,{width:qe.imageWidth,height:qe.imageHeight})})]}})})},y.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},y.prototype.extractParamsFromWeigthMap=function(v){return je.prototype.extractParamsFromWeigthMap.call(this,v)},y}(TinyYolov2Base),nets={ssdMobilenetv1:new SsdMobilenetv1,tinyFaceDetector:new TinyFaceDetector,tinyYolov2:new TinyYolov2,mtcnn:new Mtcnn,faceLandmark68Net:new FaceLandmark68Net,faceLandmark68TinyNet:new FaceLandmark68TinyNet,faceRecognitionNet:new FaceRecognitionNet,faceExpressionNet:new FaceExpressionNet,ageGenderNet:new AgeGenderNet},PredictFaceExpressionsTaskBase=function(je){__extends(y,je);function y(v,$e,Ge){var Ke=je.call(this)||this;return Ke.parentTask=v,Ke.input=$e,Ke.extractedFaces=Ge,Ke}return y}(ComposableTask),PredictAllFaceExpressionsTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge=this;return __generator(this,function(Ke){switch(Ke.label){case 0:return[4,this.parentTask];case 1:return v=Ke.sent(),[4,extractAllFacesAndComputeResults(v,this.input,function(qe){return __awaiter(Ge,void 0,void 0,function(){return __generator(this,function(Ye){switch(Ye.label){case 0:return[4,Promise.all(qe.map(function(Je){return nets.faceExpressionNet.predictExpressions(Je)}))];case 1:return[2,Ye.sent()]}})})},this.extractedFaces)];case 2:return $e=Ke.sent(),[2,v.map(function(qe,Ye){return extendWithFaceExpressions(qe,$e[Ye])})]}})})},y.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderTask(this,this.input)},y}(PredictFaceExpressionsTaskBase),PredictSingleFaceExpressionsTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e;return __generator(this,function(Ge){switch(Ge.label){case 0:return[4,this.parentTask];case 1:return v=Ge.sent(),v?[4,extractSingleFaceAndComputeResult(v,this.input,function(Ke){return nets.faceExpressionNet.predictExpressions(Ke)},this.extractedFaces)]:[2];case 2:return $e=Ge.sent(),[2,extendWithFaceExpressions(v,$e)]}})})},y.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderTask(this,this.input)},y}(PredictFaceExpressionsTaskBase),PredictAllFaceExpressionsWithFaceAlignmentTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},y.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},y}(PredictAllFaceExpressionsTask),PredictSingleFaceExpressionsWithFaceAlignmentTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},y.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},y}(PredictSingleFaceExpressionsTask),PredictAgeAndGenderTaskBase=function(je){__extends(y,je);function y(v,$e,Ge){var Ke=je.call(this)||this;return Ke.parentTask=v,Ke.input=$e,Ke.extractedFaces=Ge,Ke}return y}(ComposableTask),PredictAllAgeAndGenderTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge=this;return __generator(this,function(Ke){switch(Ke.label){case 0:return[4,this.parentTask];case 1:return v=Ke.sent(),[4,extractAllFacesAndComputeResults(v,this.input,function(qe){return __awaiter(Ge,void 0,void 0,function(){return __generator(this,function(Ye){switch(Ye.label){case 0:return[4,Promise.all(qe.map(function(Je){return nets.ageGenderNet.predictAgeAndGender(Je)}))];case 1:return[2,Ye.sent()]}})})},this.extractedFaces)];case 2:return $e=Ke.sent(),[2,v.map(function(qe,Ye){var Je=$e[Ye],Qe=Je.age,st=Je.gender,Mt=Je.genderProbability;return extendWithAge(extendWithGender(qe,st,Mt),Qe)})]}})})},y.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsTask(this,this.input)},y}(PredictAgeAndGenderTaskBase),PredictSingleAgeAndGenderTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe;return __generator(this,function(Ye){switch(Ye.label){case 0:return[4,this.parentTask];case 1:return v=Ye.sent(),v?[4,extractSingleFaceAndComputeResult(v,this.input,function(Je){return nets.ageGenderNet.predictAgeAndGender(Je)},this.extractedFaces)]:[2];case 2:return $e=Ye.sent(),Ge=$e.age,Ke=$e.gender,qe=$e.genderProbability,[2,extendWithAge(extendWithGender(v,Ke,qe),Ge)]}})})},y.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsTask(this,this.input)},y}(PredictAgeAndGenderTaskBase),PredictAllAgeAndGenderWithFaceAlignmentTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},y.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},y}(PredictAllAgeAndGenderTask),PredictSingleAgeAndGenderWithFaceAlignmentTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},y.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},y}(PredictSingleAgeAndGenderTask),ComputeFaceDescriptorsTaskBase=function(je){__extends(y,je);function y(v,$e){var Ge=je.call(this)||this;return Ge.parentTask=v,Ge.input=$e,Ge}return y}(ComposableTask),ComputeAllFaceDescriptorsTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e;return __generator(this,function(Ge){switch(Ge.label){case 0:return[4,this.parentTask];case 1:return v=Ge.sent(),[4,extractAllFacesAndComputeResults(v,this.input,function(Ke){return Promise.all(Ke.map(function(qe){return nets.faceRecognitionNet.computeFaceDescriptor(qe)}))},null,function(Ke){return Ke.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return $e=Ge.sent(),[2,$e.map(function(Ke,qe){return extendWithFaceDescriptor(v[qe],Ke)})]}})})},y.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},y.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},y}(ComputeFaceDescriptorsTaskBase),ComputeSingleFaceDescriptorTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e;return __generator(this,function(Ge){switch(Ge.label){case 0:return[4,this.parentTask];case 1:return v=Ge.sent(),v?[4,extractSingleFaceAndComputeResult(v,this.input,function(Ke){return nets.faceRecognitionNet.computeFaceDescriptor(Ke)},null,function(Ke){return Ke.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return $e=Ge.sent(),[2,extendWithFaceDescriptor(v,$e)]}})})},y.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},y.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},y}(ComputeFaceDescriptorsTaskBase),DetectFaceLandmarksTaskBase=function(je){__extends(y,je);function y(v,$e,Ge){var Ke=je.call(this)||this;return Ke.parentTask=v,Ke.input=$e,Ke.useTinyLandmarkNet=Ge,Ke}return Object.defineProperty(y.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?nets.faceLandmark68TinyNet:nets.faceLandmark68Net},enumerable:!0,configurable:!0}),y}(ComposableTask),DetectAllFaceLandmarksTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe,Ye=this;return __generator(this,function(Je){switch(Je.label){case 0:return[4,this.parentTask];case 1:return v=Je.sent(),$e=v.map(function(Qe){return Qe.detection}),this.input instanceof wt?[4,extractFaceTensors(this.input,$e)]:[3,3];case 2:return Ke=Je.sent(),[3,5];case 3:return[4,extractFaces(this.input,$e)];case 4:Ke=Je.sent(),Je.label=5;case 5:return Ge=Ke,[4,Promise.all(Ge.map(function(Qe){return Ye.landmarkNet.detectLandmarks(Qe)}))];case 6:return qe=Je.sent(),Ge.forEach(function(Qe){return Qe instanceof wt&&Qe.dispose()}),[2,v.map(function(Qe,st){return extendWithFaceLandmarks(Qe,qe[st])})]}})})},y.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsWithFaceAlignmentTask(this,this.input)},y.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderWithFaceAlignmentTask(this,this.input)},y.prototype.withFaceDescriptors=function(){return new ComputeAllFaceDescriptorsTask(this,this.input)},y}(DetectFaceLandmarksTaskBase),DetectSingleFaceLandmarksTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke,qe;return __generator(this,function(Ye){switch(Ye.label){case 0:return[4,this.parentTask];case 1:return v=Ye.sent(),v?($e=v.detection,this.input instanceof wt?[4,extractFaceTensors(this.input,[$e])]:[3,3]):[2];case 2:return Ke=Ye.sent(),[3,5];case 3:return[4,extractFaces(this.input,[$e])];case 4:Ke=Ye.sent(),Ye.label=5;case 5:return Ge=Ke,[4,this.landmarkNet.detectLandmarks(Ge[0])];case 6:return qe=Ye.sent(),Ge.forEach(function(Je){return Je instanceof wt&&Je.dispose()}),[2,extendWithFaceLandmarks(v,qe)]}})})},y.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsWithFaceAlignmentTask(this,this.input)},y.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderWithFaceAlignmentTask(this,this.input)},y.prototype.withFaceDescriptor=function(){return new ComputeSingleFaceDescriptorTask(this,this.input)},y}(DetectFaceLandmarksTaskBase),DetectFacesTaskBase=function(je){__extends(y,je);function y(v,$e){$e===void 0&&($e=new SsdMobilenetv1Options);var Ge=je.call(this)||this;return Ge.input=v,Ge.options=$e,Ge}return y}(ComposableTask),DetectAllFacesTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e,Ge,Ke;return __generator(this,function(qe){switch(qe.label){case 0:return v=this,$e=v.input,Ge=v.options,Ge instanceof MtcnnOptions?[4,nets.mtcnn.forward($e,Ge)]:[3,2];case 1:return[2,qe.sent().map(function(Ye){return Ye.detection})];case 2:if(Ke=Ge instanceof TinyFaceDetectorOptions?function(Ye){return nets.tinyFaceDetector.locateFaces(Ye,Ge)}:Ge instanceof SsdMobilenetv1Options?function(Ye){return nets.ssdMobilenetv1.locateFaces(Ye,Ge)}:Ge instanceof TinyYolov2Options?function(Ye){return nets.tinyYolov2.locateFaces(Ye,Ge)}:null,!Ke)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,Ke($e)]}})})},y.prototype.runAndExtendWithFaceDetections=function(){var v=this;return new Promise(function($e){return __awaiter(v,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return[4,this.run()];case 1:return Ge=Ke.sent(),[2,$e(Ge.map(function(qe){return extendWithFaceDetection({},qe)}))]}})})})},y.prototype.withFaceLandmarks=function(v){return v===void 0&&(v=!1),new DetectAllFaceLandmarksTask(this.runAndExtendWithFaceDetections(),this.input,v)},y.prototype.withFaceExpressions=function(){return new PredictAllFaceExpressionsTask(this.runAndExtendWithFaceDetections(),this.input)},y.prototype.withAgeAndGender=function(){return new PredictAllAgeAndGenderTask(this.runAndExtendWithFaceDetections(),this.input)},y}(DetectFacesTaskBase),DetectSingleFaceTask=function(je){__extends(y,je);function y(){return je!==null&&je.apply(this,arguments)||this}return y.prototype.run=function(){return __awaiter(this,void 0,void 0,function(){var v,$e;return __generator(this,function(Ge){switch(Ge.label){case 0:return[4,new DetectAllFacesTask(this.input,this.options)];case 1:return v=Ge.sent(),$e=v[0],v.forEach(function(Ke){Ke.score>$e.score&&($e=Ke)}),[2,$e]}})})},y.prototype.runAndExtendWithFaceDetection=function(){var v=this;return new Promise(function($e){return __awaiter(v,void 0,void 0,function(){var Ge;return __generator(this,function(Ke){switch(Ke.label){case 0:return[4,this.run()];case 1:return Ge=Ke.sent(),[2,$e(Ge?extendWithFaceDetection({},Ge):void 0)]}})})})},y.prototype.withFaceLandmarks=function(v){return v===void 0&&(v=!1),new DetectSingleFaceLandmarksTask(this.runAndExtendWithFaceDetection(),this.input,v)},y.prototype.withFaceExpressions=function(){return new PredictSingleFaceExpressionsTask(this.runAndExtendWithFaceDetection(),this.input)},y.prototype.withAgeAndGender=function(){return new PredictSingleAgeAndGenderTask(this.runAndExtendWithFaceDetection(),this.input)},y}(DetectFacesTaskBase);function detectSingleFace(je,y){return y===void 0&&(y=new SsdMobilenetv1Options),new DetectSingleFaceTask(je,y)}function euclideanDistance(je,y){if(je.length!==y.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var v=Array.from(je),$e=Array.from(y);return Math.sqrt(v.map(function(Ge,Ke){return Ge-$e[Ke]}).reduce(function(Ge,Ke){return Ge+Math.pow(Ke,2)},0))}(function(){function je(y,v){v===void 0&&(v=.6),this._distanceThreshold=v;var $e=Array.isArray(y)?y:[y];if(!$e.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var Ge=1,Ke=function(){return"person "+Ge++};this._labeledDescriptors=$e.map(function(qe){if(qe instanceof LabeledFaceDescriptors)return qe;if(qe instanceof Float32Array)return new LabeledFaceDescriptors(Ke(),[qe]);if(qe.descriptor&&qe.descriptor instanceof Float32Array)return new LabeledFaceDescriptors(Ke(),[qe.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(je.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(je.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),je.prototype.computeMeanDistance=function(y,v){return v.map(function($e){return euclideanDistance($e,y)}).reduce(function($e,Ge){return $e+Ge},0)/(v.length||1)},je.prototype.matchDescriptor=function(y){var v=this;return this.labeledDescriptors.map(function($e){var Ge=$e.descriptors,Ke=$e.label;return new FaceMatch(Ke,v.computeMeanDistance(y,Ge))}).reduce(function($e,Ge){return $e.distance<Ge.distance?$e:Ge})},je.prototype.findBestMatch=function(y){var v=this.matchDescriptor(y);return v.distance<this.distanceThreshold?v:new FaceMatch("unknown",v.distance)},je.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(y){return y.toJSON()})}},je.fromJSON=function(y){var v=y.labeledDescriptors.map(function($e){return LabeledFaceDescriptors.fromJSON($e)});return new je(v,y.distanceThreshold)},je})();const faceapiGestureGetDataMap=new Map([["nod",["getNose",4,"y","x"]],["shake",["getNose",4,"x","y"]],["mouth",["getMouth",10,"y",3]],["eye",["getLeftEye",1,"y",4]]]),faceapiGestureThersholdMap=new Map([["nod",["height",.3,2]],["shake",["width",.8,5]],["mouth",["height",.12,1]],["eye",["height",.01,0]]]),modelsPath="./static/weights";nets.ssdMobilenetv1.loadFromUri(modelsPath);nets.faceLandmark68Net.loadFromUri(modelsPath);async function getFaceLandmarks(je,y=.5,v=0){await sleep(v);const $e=await detectSingleFace(je,new SsdMobilenetv1Options).withFaceLandmarks();if(!(!($e!=null&&$e.detection.score)||($e==null?void 0:$e.detection.score)<y))return $e}function*generatorFaceLandmarks(je,y=8,v=0){for(let $e=y;$e>0;$e--)yield getFaceLandmarks(je,.5,v)}async function getFaceGestureResult(je,y,v=6){const[$e,Ge,Ke,qe]=faceapiGestureGetDataMap.get(y),[Ye,Je,Qe]=faceapiGestureThersholdMap.get(y);let st=0;if(!$e||!Ye)return!1;const Mt=[],on=[],sn=generatorFaceLandmarks(je,v,Qe);for(const to of sn){const Xr=await to;if(!Xr)continue;if(st===0){const lo={width:je.videoWidth,height:je.videoHeight},fo=Xr==null?void 0:Xr.detection.box[Ye];st=fo*Je/(lo[Ye]/fo),console.log(fo,fo*Je,lo[Ye],lo[Ye]/fo)}const co=Xr==null?void 0:Xr.landmarks[$e]();Array.isArray(co)&&(Mt.push(co[Ge][Ke]),typeof qe=="number"?on.push(co[qe][Ke]):typeof qe=="string"&&on.push(co[Ge][qe]),console.log(co[Ge][Ke]))}const fn=Mt.reduce((to,Xr)=>to+Xr,0)/Mt.length,hn=Mt.filter(to=>Math.abs(to-fn)>st);return console.log(st,fn,Math.max(...on)-Math.min(...on),hn,Mt.map(to=>[to,Math.abs(to-fn)])),hn.length>=(v/2|0)&&(!on.length||Math.max(...on)-Math.min(...on)<st)}const faceapiLivingEvent=["nod","shake","mouth"],faceapiLivingEventHint={nod:"请点头",shake:"请摇头",mouth:"请张嘴",eye:"请眨眼"},_hoisted_1={class:"home"},_hoisted_2=createBaseVNode("p",null,"version: 1",-1),_hoisted_3={class:"video-box"},_hoisted_4=createBaseVNode("label",null,"摄像头视频媒体：",-1),_hoisted_5=["disabled"],_hoisted_6=createBaseVNode("label",null,"前置or后置切换：",-1),_hoisted_7=createBaseVNode("option",{value:"user"},"前置",-1),_hoisted_8=createBaseVNode("option",{value:"environment"},"后置",-1),_hoisted_9=[_hoisted_7,_hoisted_8],_sfc_main=defineComponent({__name:"App",setup(je){const y=ref(null),v=ref(""),$e=ref(!1),Ge=reactive(new Map),Ke=reactive({constraints:{audio:!1,video:{width:{min:320,ideal:720,max:1280},height:{min:200,ideal:480,max:720},frameRate:{min:7,ideal:15,max:30},facingMode:"user"}},stream:null,videoEl:null});async function qe(){if(Ke.stream===null)try{Ke.stream={};const st=await navigator.mediaDevices.getUserMedia(Ke.constraints);Ke.stream=st,Ke.videoEl.srcObject=st,Ke.videoEl.play()}catch(st){Ke.stream=null,console.error(st),alert("视频媒体流获取错误: "+st)}}function Ye(){Ke.stream!==null&&(Ke.videoEl.pause(),Ke.videoEl.srcObject=null,Ke.stream.getTracks().forEach(st=>st.stop()),Ke.stream=null)}watch(()=>Ke.constraints.video.facingMode,()=>{Ke.stream!==null?(Ye(),qe()):Ye()}),onMounted(()=>{Ke.videoEl=document.getElementById("page_draw-video")}),onUnmounted(()=>{Ye()}),onMounted(()=>{}),watchEffect(()=>{}),watch(Ge,()=>{let st=0,Mt;if([...Ge.entries()].some(([sn,fn])=>(fn?st++:Mt=sn,!fn)),Mt)return v.value=faceapiLivingEventHint[Mt],Qe(Ke.videoEl,Mt),!1;v.value="请保持静止",setTimeout(async()=>{$e.value=!1,alert("已完成所有活体事件")},2e3)});async function Je(){$e.value=!0;const st=Ke.videoEl;if((st.paused||st.currentTime===0)&&st.play(),await sleep(100),!await getFaceLandmarks(st,void 0,.6))return alert("未检测到人脸，请确保脸部清晰完整，光线充足"),v.value="",$e.value=!1,v.value="",!1;await countdownTimer(3,sn=>{v.value=sn.toString()});const on=getRandomElements(faceapiLivingEvent,2);console.log("🚀 ~ handleStart ~ eventArr:",on),on.forEach(sn=>Ge.set(sn,!1))}async function Qe(st,Mt){if(!st||!Mt)return!1;await getFaceGestureResult(st,Mt)?Ge.set(Mt,!0):Qe(st,Mt)}return(st,Mt)=>(openBlock(),createElementBlock("div",_hoisted_1,[_hoisted_2,createBaseVNode("div",_hoisted_3,[createBaseVNode("video",{class:"video-ctrl",id:"page_draw-video",autoplay:"",muted:"","webkit-playsinline":"true",playsinline:"true","x5-video-player-type":"h5-page","x5-video-orientation":"landscape|portrait",ref_key:"videoEl",ref:y,"overflow-hidden":""},null,512)]),createBaseVNode("div",null,[createBaseVNode("div",null,[_hoisted_4,createBaseVNode("button",{onClick:Mt[0]||(Mt[0]=on=>qe()),disabled:Ke.stream!==null}," 启动 ",8,_hoisted_5),createTextVNode("   "),createBaseVNode("button",{onClick:Mt[1]||(Mt[1]=on=>Ye())},"结束")]),createBaseVNode("div",null,[_hoisted_6,withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Mt[2]||(Mt[2]=on=>Ke.constraints.video.facingMode=on)},_hoisted_9,512),[[vModelSelect,Ke.constraints.video.facingMode]])])]),createBaseVNode("div",null,[createBaseVNode("div",null,"authLoading: "+toDisplayString($e.value),1),createBaseVNode("div",null,"reminder: "+toDisplayString(v.value),1),createBaseVNode("button",{onClick:Je},"handleStart")])]))}});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(je){return je&&je.__esModule&&Object.prototype.hasOwnProperty.call(je,"default")?je.default:je}var vconsole_min={exports:{}};/*!
 * vConsole v3.15.1 (https://github.com/Tencent/vConsole)
 *
 * Tencent is pleased to support the open source community by making vConsole available.
 * Copyright (C) 2017 THL A29 Limited, a Tencent company. All rights reserved.
 * Licensed under the MIT License (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at
 * http://opensource.org/licenses/MIT
 * Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.
 */(function(module,exports){(function(je,y){module.exports=y()})(commonjsGlobal||self,function(){return function(){var __webpack_modules__={4264:function(je,y,v){je.exports=v(7588)},5036:function(je,y,v){v(1719),v(5677),v(6394),v(5334),v(6969),v(2021),v(8328),v(2129);var $e=v(1287);je.exports=$e.Promise},2582:function(je,y,v){v(1646),v(6394),v(2004),v(462),v(8407),v(2429),v(1172),v(8288),v(1274),v(8201),v(6626),v(3211),v(9952),v(15),v(9831),v(7521),v(2972),v(6956),v(5222),v(2257);var $e=v(1287);je.exports=$e.Symbol},8257:function(je,y,v){var $e=v(7583),Ge=v(9212),Ke=v(5637),qe=$e.TypeError;je.exports=function(Ye){if(Ge(Ye))return Ye;throw qe(Ke(Ye)+" is not a function")}},1186:function(je,y,v){var $e=v(7583),Ge=v(2097),Ke=v(5637),qe=$e.TypeError;je.exports=function(Ye){if(Ge(Ye))return Ye;throw qe(Ke(Ye)+" is not a constructor")}},9882:function(je,y,v){var $e=v(7583),Ge=v(9212),Ke=$e.String,qe=$e.TypeError;je.exports=function(Ye){if(typeof Ye=="object"||Ge(Ye))return Ye;throw qe("Can't set "+Ke(Ye)+" as a prototype")}},6288:function(je,y,v){var $e=v(3649),Ge=v(3590),Ke=v(4615),qe=$e("unscopables"),Ye=Array.prototype;Ye[qe]==null&&Ke.f(Ye,qe,{configurable:!0,value:Ge(null)}),je.exports=function(Je){Ye[qe][Je]=!0}},4761:function(je,y,v){var $e=v(7583),Ge=v(2447),Ke=$e.TypeError;je.exports=function(qe,Ye){if(Ge(Ye,qe))return qe;throw Ke("Incorrect invocation")}},2569:function(je,y,v){var $e=v(7583),Ge=v(794),Ke=$e.String,qe=$e.TypeError;je.exports=function(Ye){if(Ge(Ye))return Ye;throw qe(Ke(Ye)+" is not an object")}},5766:function(je,y,v){var $e=v(2977),Ge=v(6782),Ke=v(1825),qe=function(Ye){return function(Je,Qe,st){var Mt,on=$e(Je),sn=Ke(on),fn=Ge(st,sn);if(Ye&&Qe!=Qe){for(;sn>fn;)if((Mt=on[fn++])!=Mt)return!0}else for(;sn>fn;fn++)if((Ye||fn in on)&&on[fn]===Qe)return Ye||fn||0;return!Ye&&-1}};je.exports={includes:qe(!0),indexOf:qe(!1)}},4805:function(je,y,v){var $e=v(2938),Ge=v(7386),Ke=v(5044),qe=v(1324),Ye=v(1825),Je=v(4822),Qe=Ge([].push),st=function(Mt){var on=Mt==1,sn=Mt==2,fn=Mt==3,hn=Mt==4,to=Mt==6,Xr=Mt==7,co=Mt==5||to;return function(lo,fo,Uo,mo){for(var rd,od,fd=qe(lo),hd=Ke(fd),vd=$e(fo,Uo),Td=Ye(hd),Od=0,Md=mo||Je,Fd=on?Md(lo,Td):sn||Xr?Md(lo,0):void 0;Td>Od;Od++)if((co||Od in hd)&&(od=vd(rd=hd[Od],Od,fd),Mt))if(on)Fd[Od]=od;else if(od)switch(Mt){case 3:return!0;case 5:return rd;case 6:return Od;case 2:Qe(Fd,rd)}else switch(Mt){case 4:return!1;case 7:Qe(Fd,rd)}return to?-1:fn||hn?hn:Fd}};je.exports={forEach:st(0),map:st(1),filter:st(2),some:st(3),every:st(4),find:st(5),findIndex:st(6),filterReject:st(7)}},9269:function(je,y,v){var $e=v(6544),Ge=v(3649),Ke=v(4061),qe=Ge("species");je.exports=function(Ye){return Ke>=51||!$e(function(){var Je=[];return(Je.constructor={})[qe]=function(){return{foo:1}},Je[Ye](Boolean).foo!==1})}},4546:function(je,y,v){var $e=v(7583),Ge=v(6782),Ke=v(1825),qe=v(5999),Ye=$e.Array,Je=Math.max;je.exports=function(Qe,st,Mt){for(var on=Ke(Qe),sn=Ge(st,on),fn=Ge(Mt===void 0?on:Mt,on),hn=Ye(Je(fn-sn,0)),to=0;sn<fn;sn++,to++)qe(hn,to,Qe[sn]);return hn.length=to,hn}},6917:function(je,y,v){var $e=v(7386);je.exports=$e([].slice)},5289:function(je,y,v){var $e=v(7583),Ge=v(4521),Ke=v(2097),qe=v(794),Ye=v(3649)("species"),Je=$e.Array;je.exports=function(Qe){var st;return Ge(Qe)&&(st=Qe.constructor,(Ke(st)&&(st===Je||Ge(st.prototype))||qe(st)&&(st=st[Ye])===null)&&(st=void 0)),st===void 0?Je:st}},4822:function(je,y,v){var $e=v(5289);je.exports=function(Ge,Ke){return new($e(Ge))(Ke===0?0:Ke)}},3616:function(je,y,v){var $e=v(3649)("iterator"),Ge=!1;try{var Ke=0,qe={next:function(){return{done:!!Ke++}},return:function(){Ge=!0}};qe[$e]=function(){return this},Array.from(qe,function(){throw 2})}catch{}je.exports=function(Ye,Je){if(!Je&&!Ge)return!1;var Qe=!1;try{var st={};st[$e]=function(){return{next:function(){return{done:Qe=!0}}}},Ye(st)}catch{}return Qe}},9624:function(je,y,v){var $e=v(7386),Ge=$e({}.toString),Ke=$e("".slice);je.exports=function(qe){return Ke(Ge(qe),8,-1)}},3058:function(je,y,v){var $e=v(7583),Ge=v(8191),Ke=v(9212),qe=v(9624),Ye=v(3649)("toStringTag"),Je=$e.Object,Qe=qe(function(){return arguments}())=="Arguments";je.exports=Ge?qe:function(st){var Mt,on,sn;return st===void 0?"Undefined":st===null?"Null":typeof(on=function(fn,hn){try{return fn[hn]}catch{}}(Mt=Je(st),Ye))=="string"?on:Qe?qe(Mt):(sn=qe(Mt))=="Object"&&Ke(Mt.callee)?"Arguments":sn}},1509:function(je,y,v){var $e=v(7386)("".replace),Ge=String(Error("zxcasd").stack),Ke=/\n\s*at [^:]*:[^\n]*/,qe=Ke.test(Ge);je.exports=function(Ye,Je){if(qe&&typeof Ye=="string")for(;Je--;)Ye=$e(Ye,Ke,"");return Ye}},3478:function(je,y,v){var $e=v(2870),Ge=v(929),Ke=v(6683),qe=v(4615);je.exports=function(Ye,Je,Qe){for(var st=Ge(Je),Mt=qe.f,on=Ke.f,sn=0;sn<st.length;sn++){var fn=st[sn];$e(Ye,fn)||Qe&&$e(Qe,fn)||Mt(Ye,fn,on(Je,fn))}}},926:function(je,y,v){var $e=v(6544);je.exports=!$e(function(){function Ge(){}return Ge.prototype.constructor=null,Object.getPrototypeOf(new Ge)!==Ge.prototype})},4683:function(je,y,v){var $e=v(2365).IteratorPrototype,Ge=v(3590),Ke=v(4677),qe=v(8821),Ye=v(339),Je=function(){return this};je.exports=function(Qe,st,Mt,on){var sn=st+" Iterator";return Qe.prototype=Ge($e,{next:Ke(+!on,Mt)}),qe(Qe,sn,!1,!0),Ye[sn]=Je,Qe}},57:function(je,y,v){var $e=v(8494),Ge=v(4615),Ke=v(4677);je.exports=$e?function(qe,Ye,Je){return Ge.f(qe,Ye,Ke(1,Je))}:function(qe,Ye,Je){return qe[Ye]=Je,qe}},4677:function(je){je.exports=function(y,v){return{enumerable:!(1&y),configurable:!(2&y),writable:!(4&y),value:v}}},5999:function(je,y,v){var $e=v(8734),Ge=v(4615),Ke=v(4677);je.exports=function(qe,Ye,Je){var Qe=$e(Ye);Qe in qe?Ge.f(qe,Qe,Ke(0,Je)):qe[Qe]=Je}},9012:function(je,y,v){var $e=v(7263),Ge=v(8262),Ke=v(6268),qe=v(4340),Ye=v(9212),Je=v(4683),Qe=v(729),st=v(7496),Mt=v(8821),on=v(57),sn=v(1270),fn=v(3649),hn=v(339),to=v(2365),Xr=qe.PROPER,co=qe.CONFIGURABLE,lo=to.IteratorPrototype,fo=to.BUGGY_SAFARI_ITERATORS,Uo=fn("iterator"),mo="keys",rd="values",od="entries",fd=function(){return this};je.exports=function(hd,vd,Td,Od,Md,Fd,Ud){Je(Td,vd,Od);var pd,_d,Bd,$d=function(cp){if(cp===Md&&zd)return zd;if(!fo&&cp in yd)return yd[cp];switch(cp){case mo:case rd:case od:return function(){return new Td(this,cp)}}return function(){return new Td(this)}},jd=vd+" Iterator",Pd=!1,yd=hd.prototype,Ld=yd[Uo]||yd["@@iterator"]||Md&&yd[Md],zd=!fo&&Ld||$d(Md),Jd=vd=="Array"&&yd.entries||Ld;if(Jd&&(pd=Qe(Jd.call(new hd)))!==Object.prototype&&pd.next&&(Ke||Qe(pd)===lo||(st?st(pd,lo):Ye(pd[Uo])||sn(pd,Uo,fd)),Mt(pd,jd,!0,!0),Ke&&(hn[jd]=fd)),Xr&&Md==rd&&Ld&&Ld.name!==rd&&(!Ke&&co?on(yd,"name",rd):(Pd=!0,zd=function(){return Ge(Ld,this)})),Md)if(_d={values:$d(rd),keys:Fd?zd:$d(mo),entries:$d(od)},Ud)for(Bd in _d)(fo||Pd||!(Bd in yd))&&sn(yd,Bd,_d[Bd]);else $e({target:vd,proto:!0,forced:fo||Pd},_d);return Ke&&!Ud||yd[Uo]===zd||sn(yd,Uo,zd,{name:Md}),hn[vd]=zd,_d}},2219:function(je,y,v){var $e=v(1287),Ge=v(2870),Ke=v(491),qe=v(4615).f;je.exports=function(Ye){var Je=$e.Symbol||($e.Symbol={});Ge(Je,Ye)||qe(Je,Ye,{value:Ke.f(Ye)})}},8494:function(je,y,v){var $e=v(6544);je.exports=!$e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},6668:function(je,y,v){var $e=v(7583),Ge=v(794),Ke=$e.document,qe=Ge(Ke)&&Ge(Ke.createElement);je.exports=function(Ye){return qe?Ke.createElement(Ye):{}}},6778:function(je){je.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9307:function(je,y,v){var $e=v(6668)("span").classList,Ge=$e&&$e.constructor&&$e.constructor.prototype;je.exports=Ge===Object.prototype?void 0:Ge},2274:function(je){je.exports=typeof window=="object"},3256:function(je,y,v){var $e=v(6918),Ge=v(7583);je.exports=/ipad|iphone|ipod/i.test($e)&&Ge.Pebble!==void 0},7020:function(je,y,v){var $e=v(6918);je.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test($e)},5354:function(je,y,v){var $e=v(9624),Ge=v(7583);je.exports=$e(Ge.process)=="process"},6846:function(je,y,v){var $e=v(6918);je.exports=/web0s(?!.*chrome)/i.test($e)},6918:function(je,y,v){var $e=v(5897);je.exports=$e("navigator","userAgent")||""},4061:function(je,y,v){var $e,Ge,Ke=v(7583),qe=v(6918),Ye=Ke.process,Je=Ke.Deno,Qe=Ye&&Ye.versions||Je&&Je.version,st=Qe&&Qe.v8;st&&(Ge=($e=st.split("."))[0]>0&&$e[0]<4?1:+($e[0]+$e[1])),!Ge&&qe&&(!($e=qe.match(/Edge\/(\d+)/))||$e[1]>=74)&&($e=qe.match(/Chrome\/(\d+)/))&&(Ge=+$e[1]),je.exports=Ge},5690:function(je){je.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1178:function(je,y,v){var $e=v(6544),Ge=v(4677);je.exports=!$e(function(){var Ke=Error("a");return!("stack"in Ke)||(Object.defineProperty(Ke,"stack",Ge(1,7)),Ke.stack!==7)})},7263:function(je,y,v){var $e=v(7583),Ge=v(6683).f,Ke=v(57),qe=v(1270),Ye=v(460),Je=v(3478),Qe=v(4451);je.exports=function(st,Mt){var on,sn,fn,hn,to,Xr=st.target,co=st.global,lo=st.stat;if(on=co?$e:lo?$e[Xr]||Ye(Xr,{}):($e[Xr]||{}).prototype)for(sn in Mt){if(hn=Mt[sn],fn=st.noTargetGet?(to=Ge(on,sn))&&to.value:on[sn],!Qe(co?sn:Xr+(lo?".":"#")+sn,st.forced)&&fn!==void 0){if(typeof hn==typeof fn)continue;Je(hn,fn)}(st.sham||fn&&fn.sham)&&Ke(hn,"sham",!0),qe(on,sn,hn,st)}}},6544:function(je){je.exports=function(y){try{return!!y()}catch{return!0}}},1611:function(je,y,v){var $e=v(8987),Ge=Function.prototype,Ke=Ge.apply,qe=Ge.call;je.exports=typeof Reflect=="object"&&Reflect.apply||($e?qe.bind(Ke):function(){return qe.apply(Ke,arguments)})},2938:function(je,y,v){var $e=v(7386),Ge=v(8257),Ke=v(8987),qe=$e($e.bind);je.exports=function(Ye,Je){return Ge(Ye),Je===void 0?Ye:Ke?qe(Ye,Je):function(){return Ye.apply(Je,arguments)}}},8987:function(je,y,v){var $e=v(6544);je.exports=!$e(function(){var Ge=(function(){}).bind();return typeof Ge!="function"||Ge.hasOwnProperty("prototype")})},8262:function(je,y,v){var $e=v(8987),Ge=Function.prototype.call;je.exports=$e?Ge.bind(Ge):function(){return Ge.apply(Ge,arguments)}},4340:function(je,y,v){var $e=v(8494),Ge=v(2870),Ke=Function.prototype,qe=$e&&Object.getOwnPropertyDescriptor,Ye=Ge(Ke,"name"),Je=Ye&&(function(){}).name==="something",Qe=Ye&&(!$e||$e&&qe(Ke,"name").configurable);je.exports={EXISTS:Ye,PROPER:Je,CONFIGURABLE:Qe}},7386:function(je,y,v){var $e=v(8987),Ge=Function.prototype,Ke=Ge.bind,qe=Ge.call,Ye=$e&&Ke.bind(qe,qe);je.exports=$e?function(Je){return Je&&Ye(Je)}:function(Je){return Je&&function(){return qe.apply(Je,arguments)}}},5897:function(je,y,v){var $e=v(7583),Ge=v(9212),Ke=function(qe){return Ge(qe)?qe:void 0};je.exports=function(qe,Ye){return arguments.length<2?Ke($e[qe]):$e[qe]&&$e[qe][Ye]}},8272:function(je,y,v){var $e=v(3058),Ge=v(911),Ke=v(339),qe=v(3649)("iterator");je.exports=function(Ye){if(Ye!=null)return Ge(Ye,qe)||Ge(Ye,"@@iterator")||Ke[$e(Ye)]}},6307:function(je,y,v){var $e=v(7583),Ge=v(8262),Ke=v(8257),qe=v(2569),Ye=v(5637),Je=v(8272),Qe=$e.TypeError;je.exports=function(st,Mt){var on=arguments.length<2?Je(st):Mt;if(Ke(on))return qe(Ge(on,st));throw Qe(Ye(st)+" is not iterable")}},911:function(je,y,v){var $e=v(8257);je.exports=function(Ge,Ke){var qe=Ge[Ke];return qe==null?void 0:$e(qe)}},7583:function(je,y,v){var $e=function(Ge){return Ge&&Ge.Math==Math&&Ge};je.exports=$e(typeof globalThis=="object"&&globalThis)||$e(typeof window=="object"&&window)||$e(typeof self=="object"&&self)||$e(typeof v.g=="object"&&v.g)||function(){return this}()||Function("return this")()},2870:function(je,y,v){var $e=v(7386),Ge=v(1324),Ke=$e({}.hasOwnProperty);je.exports=Object.hasOwn||function(qe,Ye){return Ke(Ge(qe),Ye)}},4639:function(je){je.exports={}},2716:function(je,y,v){var $e=v(7583);je.exports=function(Ge,Ke){var qe=$e.console;qe&&qe.error&&(arguments.length==1?qe.error(Ge):qe.error(Ge,Ke))}},482:function(je,y,v){var $e=v(5897);je.exports=$e("document","documentElement")},275:function(je,y,v){var $e=v(8494),Ge=v(6544),Ke=v(6668);je.exports=!$e&&!Ge(function(){return Object.defineProperty(Ke("div"),"a",{get:function(){return 7}}).a!=7})},5044:function(je,y,v){var $e=v(7583),Ge=v(7386),Ke=v(6544),qe=v(9624),Ye=$e.Object,Je=Ge("".split);je.exports=Ke(function(){return!Ye("z").propertyIsEnumerable(0)})?function(Qe){return qe(Qe)=="String"?Je(Qe,""):Ye(Qe)}:Ye},9734:function(je,y,v){var $e=v(7386),Ge=v(9212),Ke=v(1314),qe=$e(Function.toString);Ge(Ke.inspectSource)||(Ke.inspectSource=function(Ye){return qe(Ye)}),je.exports=Ke.inspectSource},4402:function(je,y,v){var $e=v(794),Ge=v(57);je.exports=function(Ke,qe){$e(qe)&&"cause"in qe&&Ge(Ke,"cause",qe.cause)}},2743:function(je,y,v){var $e,Ge,Ke,qe=v(9491),Ye=v(7583),Je=v(7386),Qe=v(794),st=v(57),Mt=v(2870),on=v(1314),sn=v(9137),fn=v(4639),hn="Object already initialized",to=Ye.TypeError,Xr=Ye.WeakMap;if(qe||on.state){var co=on.state||(on.state=new Xr),lo=Je(co.get),fo=Je(co.has),Uo=Je(co.set);$e=function(rd,od){if(fo(co,rd))throw new to(hn);return od.facade=rd,Uo(co,rd,od),od},Ge=function(rd){return lo(co,rd)||{}},Ke=function(rd){return fo(co,rd)}}else{var mo=sn("state");fn[mo]=!0,$e=function(rd,od){if(Mt(rd,mo))throw new to(hn);return od.facade=rd,st(rd,mo,od),od},Ge=function(rd){return Mt(rd,mo)?rd[mo]:{}},Ke=function(rd){return Mt(rd,mo)}}je.exports={set:$e,get:Ge,has:Ke,enforce:function(rd){return Ke(rd)?Ge(rd):$e(rd,{})},getterFor:function(rd){return function(od){var fd;if(!Qe(od)||(fd=Ge(od)).type!==rd)throw to("Incompatible receiver, "+rd+" required");return fd}}}},114:function(je,y,v){var $e=v(3649),Ge=v(339),Ke=$e("iterator"),qe=Array.prototype;je.exports=function(Ye){return Ye!==void 0&&(Ge.Array===Ye||qe[Ke]===Ye)}},4521:function(je,y,v){var $e=v(9624);je.exports=Array.isArray||function(Ge){return $e(Ge)=="Array"}},9212:function(je){je.exports=function(y){return typeof y=="function"}},2097:function(je,y,v){var $e=v(7386),Ge=v(6544),Ke=v(9212),qe=v(3058),Ye=v(5897),Je=v(9734),Qe=function(){},st=[],Mt=Ye("Reflect","construct"),on=/^\s*(?:class|function)\b/,sn=$e(on.exec),fn=!on.exec(Qe),hn=function(Xr){if(!Ke(Xr))return!1;try{return Mt(Qe,st,Xr),!0}catch{return!1}},to=function(Xr){if(!Ke(Xr))return!1;switch(qe(Xr)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return fn||!!sn(on,Je(Xr))}catch{return!0}};to.sham=!0,je.exports=!Mt||Ge(function(){var Xr;return hn(hn.call)||!hn(Object)||!hn(function(){Xr=!0})||Xr})?to:hn},4451:function(je,y,v){var $e=v(6544),Ge=v(9212),Ke=/#|\.prototype\./,qe=function(Mt,on){var sn=Je[Ye(Mt)];return sn==st||sn!=Qe&&(Ge(on)?$e(on):!!on)},Ye=qe.normalize=function(Mt){return String(Mt).replace(Ke,".").toLowerCase()},Je=qe.data={},Qe=qe.NATIVE="N",st=qe.POLYFILL="P";je.exports=qe},794:function(je,y,v){var $e=v(9212);je.exports=function(Ge){return typeof Ge=="object"?Ge!==null:$e(Ge)}},6268:function(je){je.exports=!1},5871:function(je,y,v){var $e=v(7583),Ge=v(5897),Ke=v(9212),qe=v(2447),Ye=v(7786),Je=$e.Object;je.exports=Ye?function(Qe){return typeof Qe=="symbol"}:function(Qe){var st=Ge("Symbol");return Ke(st)&&qe(st.prototype,Je(Qe))}},4026:function(je,y,v){var $e=v(7583),Ge=v(2938),Ke=v(8262),qe=v(2569),Ye=v(5637),Je=v(114),Qe=v(1825),st=v(2447),Mt=v(6307),on=v(8272),sn=v(7093),fn=$e.TypeError,hn=function(Xr,co){this.stopped=Xr,this.result=co},to=hn.prototype;je.exports=function(Xr,co,lo){var fo,Uo,mo,rd,od,fd,hd,vd=lo&&lo.that,Td=!(!lo||!lo.AS_ENTRIES),Od=!(!lo||!lo.IS_ITERATOR),Md=!(!lo||!lo.INTERRUPTED),Fd=Ge(co,vd),Ud=function(_d){return fo&&sn(fo,"normal",_d),new hn(!0,_d)},pd=function(_d){return Td?(qe(_d),Md?Fd(_d[0],_d[1],Ud):Fd(_d[0],_d[1])):Md?Fd(_d,Ud):Fd(_d)};if(Od)fo=Xr;else{if(!(Uo=on(Xr)))throw fn(Ye(Xr)+" is not iterable");if(Je(Uo)){for(mo=0,rd=Qe(Xr);rd>mo;mo++)if((od=pd(Xr[mo]))&&st(to,od))return od;return new hn(!1)}fo=Mt(Xr,Uo)}for(fd=fo.next;!(hd=Ke(fd,fo)).done;){try{od=pd(hd.value)}catch(_d){sn(fo,"throw",_d)}if(typeof od=="object"&&od&&st(to,od))return od}return new hn(!1)}},7093:function(je,y,v){var $e=v(8262),Ge=v(2569),Ke=v(911);je.exports=function(qe,Ye,Je){var Qe,st;Ge(qe);try{if(!(Qe=Ke(qe,"return"))){if(Ye==="throw")throw Je;return Je}Qe=$e(Qe,qe)}catch(Mt){st=!0,Qe=Mt}if(Ye==="throw")throw Je;if(st)throw Qe;return Ge(Qe),Je}},2365:function(je,y,v){var $e,Ge,Ke,qe=v(6544),Ye=v(9212),Je=v(3590),Qe=v(729),st=v(1270),Mt=v(3649),on=v(6268),sn=Mt("iterator"),fn=!1;[].keys&&("next"in(Ke=[].keys())?(Ge=Qe(Qe(Ke)))!==Object.prototype&&($e=Ge):fn=!0),$e==null||qe(function(){var hn={};return $e[sn].call(hn)!==hn})?$e={}:on&&($e=Je($e)),Ye($e[sn])||st($e,sn,function(){return this}),je.exports={IteratorPrototype:$e,BUGGY_SAFARI_ITERATORS:fn}},339:function(je){je.exports={}},1825:function(je,y,v){var $e=v(97);je.exports=function(Ge){return $e(Ge.length)}},2095:function(je,y,v){var $e,Ge,Ke,qe,Ye,Je,Qe,st,Mt=v(7583),on=v(2938),sn=v(6683).f,fn=v(8117).set,hn=v(7020),to=v(3256),Xr=v(6846),co=v(5354),lo=Mt.MutationObserver||Mt.WebKitMutationObserver,fo=Mt.document,Uo=Mt.process,mo=Mt.Promise,rd=sn(Mt,"queueMicrotask"),od=rd&&rd.value;od||($e=function(){var fd,hd;for(co&&(fd=Uo.domain)&&fd.exit();Ge;){hd=Ge.fn,Ge=Ge.next;try{hd()}catch(vd){throw Ge?qe():Ke=void 0,vd}}Ke=void 0,fd&&fd.enter()},hn||co||Xr||!lo||!fo?!to&&mo&&mo.resolve?((Qe=mo.resolve(void 0)).constructor=mo,st=on(Qe.then,Qe),qe=function(){st($e)}):co?qe=function(){Uo.nextTick($e)}:(fn=on(fn,Mt),qe=function(){fn($e)}):(Ye=!0,Je=fo.createTextNode(""),new lo($e).observe(Je,{characterData:!0}),qe=function(){Je.data=Ye=!Ye})),je.exports=od||function(fd){var hd={fn:fd,next:void 0};Ke&&(Ke.next=hd),Ge||(Ge=hd,qe()),Ke=hd}},783:function(je,y,v){var $e=v(7583);je.exports=$e.Promise},8640:function(je,y,v){var $e=v(4061),Ge=v(6544);je.exports=!!Object.getOwnPropertySymbols&&!Ge(function(){var Ke=Symbol();return!String(Ke)||!(Object(Ke)instanceof Symbol)||!Symbol.sham&&$e&&$e<41})},9491:function(je,y,v){var $e=v(7583),Ge=v(9212),Ke=v(9734),qe=$e.WeakMap;je.exports=Ge(qe)&&/native code/.test(Ke(qe))},5084:function(je,y,v){var $e=v(8257),Ge=function(Ke){var qe,Ye;this.promise=new Ke(function(Je,Qe){if(qe!==void 0||Ye!==void 0)throw TypeError("Bad Promise constructor");qe=Je,Ye=Qe}),this.resolve=$e(qe),this.reject=$e(Ye)};je.exports.f=function(Ke){return new Ge(Ke)}},2764:function(je,y,v){var $e=v(8320);je.exports=function(Ge,Ke){return Ge===void 0?arguments.length<2?"":Ke:$e(Ge)}},3590:function(je,y,v){var $e,Ge=v(2569),Ke=v(8728),qe=v(5690),Ye=v(4639),Je=v(482),Qe=v(6668),st=v(9137),Mt=st("IE_PROTO"),on=function(){},sn=function(to){return"<script>"+to+"<\/script>"},fn=function(to){to.write(sn("")),to.close();var Xr=to.parentWindow.Object;return to=null,Xr},hn=function(){try{$e=new ActiveXObject("htmlfile")}catch{}var to,Xr;hn=typeof document<"u"?document.domain&&$e?fn($e):((Xr=Qe("iframe")).style.display="none",Je.appendChild(Xr),Xr.src="javascript:",(to=Xr.contentWindow.document).open(),to.write(sn("document.F=Object")),to.close(),to.F):fn($e);for(var co=qe.length;co--;)delete hn.prototype[qe[co]];return hn()};Ye[Mt]=!0,je.exports=Object.create||function(to,Xr){var co;return to!==null?(on.prototype=Ge(to),co=new on,on.prototype=null,co[Mt]=to):co=hn(),Xr===void 0?co:Ke.f(co,Xr)}},8728:function(je,y,v){var $e=v(8494),Ge=v(7670),Ke=v(4615),qe=v(2569),Ye=v(2977),Je=v(5432);y.f=$e&&!Ge?Object.defineProperties:function(Qe,st){qe(Qe);for(var Mt,on=Ye(st),sn=Je(st),fn=sn.length,hn=0;fn>hn;)Ke.f(Qe,Mt=sn[hn++],on[Mt]);return Qe}},4615:function(je,y,v){var $e=v(7583),Ge=v(8494),Ke=v(275),qe=v(7670),Ye=v(2569),Je=v(8734),Qe=$e.TypeError,st=Object.defineProperty,Mt=Object.getOwnPropertyDescriptor,on="enumerable",sn="configurable",fn="writable";y.f=Ge?qe?function(hn,to,Xr){if(Ye(hn),to=Je(to),Ye(Xr),typeof hn=="function"&&to==="prototype"&&"value"in Xr&&fn in Xr&&!Xr.writable){var co=Mt(hn,to);co&&co.writable&&(hn[to]=Xr.value,Xr={configurable:sn in Xr?Xr.configurable:co.configurable,enumerable:on in Xr?Xr.enumerable:co.enumerable,writable:!1})}return st(hn,to,Xr)}:st:function(hn,to,Xr){if(Ye(hn),to=Je(to),Ye(Xr),Ke)try{return st(hn,to,Xr)}catch{}if("get"in Xr||"set"in Xr)throw Qe("Accessors not supported");return"value"in Xr&&(hn[to]=Xr.value),hn}},6683:function(je,y,v){var $e=v(8494),Ge=v(8262),Ke=v(112),qe=v(4677),Ye=v(2977),Je=v(8734),Qe=v(2870),st=v(275),Mt=Object.getOwnPropertyDescriptor;y.f=$e?Mt:function(on,sn){if(on=Ye(on),sn=Je(sn),st)try{return Mt(on,sn)}catch{}if(Qe(on,sn))return qe(!Ge(Ke.f,on,sn),on[sn])}},3130:function(je,y,v){var $e=v(9624),Ge=v(2977),Ke=v(9275).f,qe=v(4546),Ye=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];je.exports.f=function(Je){return Ye&&$e(Je)=="Window"?function(Qe){try{return Ke(Qe)}catch{return qe(Ye)}}(Je):Ke(Ge(Je))}},9275:function(je,y,v){var $e=v(8356),Ge=v(5690).concat("length","prototype");y.f=Object.getOwnPropertyNames||function(Ke){return $e(Ke,Ge)}},4012:function(je,y){y.f=Object.getOwnPropertySymbols},729:function(je,y,v){var $e=v(7583),Ge=v(2870),Ke=v(9212),qe=v(1324),Ye=v(9137),Je=v(926),Qe=Ye("IE_PROTO"),st=$e.Object,Mt=st.prototype;je.exports=Je?st.getPrototypeOf:function(on){var sn=qe(on);if(Ge(sn,Qe))return sn[Qe];var fn=sn.constructor;return Ke(fn)&&sn instanceof fn?fn.prototype:sn instanceof st?Mt:null}},2447:function(je,y,v){var $e=v(7386);je.exports=$e({}.isPrototypeOf)},8356:function(je,y,v){var $e=v(7386),Ge=v(2870),Ke=v(2977),qe=v(5766).indexOf,Ye=v(4639),Je=$e([].push);je.exports=function(Qe,st){var Mt,on=Ke(Qe),sn=0,fn=[];for(Mt in on)!Ge(Ye,Mt)&&Ge(on,Mt)&&Je(fn,Mt);for(;st.length>sn;)Ge(on,Mt=st[sn++])&&(~qe(fn,Mt)||Je(fn,Mt));return fn}},5432:function(je,y,v){var $e=v(8356),Ge=v(5690);je.exports=Object.keys||function(Ke){return $e(Ke,Ge)}},112:function(je,y){var v={}.propertyIsEnumerable,$e=Object.getOwnPropertyDescriptor,Ge=$e&&!v.call({1:2},1);y.f=Ge?function(Ke){var qe=$e(this,Ke);return!!qe&&qe.enumerable}:v},7496:function(je,y,v){var $e=v(7386),Ge=v(2569),Ke=v(9882);je.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var qe,Ye=!1,Je={};try{(qe=$e(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(Je,[]),Ye=Je instanceof Array}catch{}return function(Qe,st){return Ge(Qe),Ke(st),Ye?qe(Qe,st):Qe.__proto__=st,Qe}}():void 0)},3060:function(je,y,v){var $e=v(8191),Ge=v(3058);je.exports=$e?{}.toString:function(){return"[object "+Ge(this)+"]"}},6252:function(je,y,v){var $e=v(7583),Ge=v(8262),Ke=v(9212),qe=v(794),Ye=$e.TypeError;je.exports=function(Je,Qe){var st,Mt;if(Qe==="string"&&Ke(st=Je.toString)&&!qe(Mt=Ge(st,Je))||Ke(st=Je.valueOf)&&!qe(Mt=Ge(st,Je))||Qe!=="string"&&Ke(st=Je.toString)&&!qe(Mt=Ge(st,Je)))return Mt;throw Ye("Can't convert object to primitive value")}},929:function(je,y,v){var $e=v(5897),Ge=v(7386),Ke=v(9275),qe=v(4012),Ye=v(2569),Je=Ge([].concat);je.exports=$e("Reflect","ownKeys")||function(Qe){var st=Ke.f(Ye(Qe)),Mt=qe.f;return Mt?Je(st,Mt(Qe)):st}},1287:function(je,y,v){var $e=v(7583);je.exports=$e},544:function(je){je.exports=function(y){try{return{error:!1,value:y()}}catch(v){return{error:!0,value:v}}}},5732:function(je,y,v){var $e=v(2569),Ge=v(794),Ke=v(5084);je.exports=function(qe,Ye){if($e(qe),Ge(Ye)&&Ye.constructor===qe)return Ye;var Je=Ke.f(qe);return(0,Je.resolve)(Ye),Je.promise}},2723:function(je){var y=function(){this.head=null,this.tail=null};y.prototype={add:function(v){var $e={item:v,next:null};this.head?this.tail.next=$e:this.head=$e,this.tail=$e},get:function(){var v=this.head;if(v)return this.head=v.next,this.tail===v&&(this.tail=null),v.item}},je.exports=y},6893:function(je,y,v){var $e=v(1270);je.exports=function(Ge,Ke,qe){for(var Ye in Ke)$e(Ge,Ye,Ke[Ye],qe);return Ge}},1270:function(je,y,v){var $e=v(7583),Ge=v(9212),Ke=v(2870),qe=v(57),Ye=v(460),Je=v(9734),Qe=v(2743),st=v(4340).CONFIGURABLE,Mt=Qe.get,on=Qe.enforce,sn=String(String).split("String");(je.exports=function(fn,hn,to,Xr){var co,lo=!!Xr&&!!Xr.unsafe,fo=!!Xr&&!!Xr.enumerable,Uo=!!Xr&&!!Xr.noTargetGet,mo=Xr&&Xr.name!==void 0?Xr.name:hn;Ge(to)&&(String(mo).slice(0,7)==="Symbol("&&(mo="["+String(mo).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Ke(to,"name")||st&&to.name!==mo)&&qe(to,"name",mo),(co=on(to)).source||(co.source=sn.join(typeof mo=="string"?mo:""))),fn!==$e?(lo?!Uo&&fn[hn]&&(fo=!0):delete fn[hn],fo?fn[hn]=to:qe(fn,hn,to)):fo?fn[hn]=to:Ye(hn,to)})(Function.prototype,"toString",function(){return Ge(this)&&Mt(this).source||Je(this)})},3955:function(je,y,v){var $e=v(7583).TypeError;je.exports=function(Ge){if(Ge==null)throw $e("Can't call method on "+Ge);return Ge}},460:function(je,y,v){var $e=v(7583),Ge=Object.defineProperty;je.exports=function(Ke,qe){try{Ge($e,Ke,{value:qe,configurable:!0,writable:!0})}catch{$e[Ke]=qe}return qe}},7730:function(je,y,v){var $e=v(5897),Ge=v(4615),Ke=v(3649),qe=v(8494),Ye=Ke("species");je.exports=function(Je){var Qe=$e(Je),st=Ge.f;qe&&Qe&&!Qe[Ye]&&st(Qe,Ye,{configurable:!0,get:function(){return this}})}},8821:function(je,y,v){var $e=v(4615).f,Ge=v(2870),Ke=v(3649)("toStringTag");je.exports=function(qe,Ye,Je){qe&&!Je&&(qe=qe.prototype),qe&&!Ge(qe,Ke)&&$e(qe,Ke,{configurable:!0,value:Ye})}},9137:function(je,y,v){var $e=v(7836),Ge=v(8284),Ke=$e("keys");je.exports=function(qe){return Ke[qe]||(Ke[qe]=Ge(qe))}},1314:function(je,y,v){var $e=v(7583),Ge=v(460),Ke="__core-js_shared__",qe=$e[Ke]||Ge(Ke,{});je.exports=qe},7836:function(je,y,v){var $e=v(6268),Ge=v(1314);(je.exports=function(Ke,qe){return Ge[Ke]||(Ge[Ke]=qe!==void 0?qe:{})})("versions",[]).push({version:"3.21.1",mode:$e?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"})},564:function(je,y,v){var $e=v(2569),Ge=v(1186),Ke=v(3649)("species");je.exports=function(qe,Ye){var Je,Qe=$e(qe).constructor;return Qe===void 0||(Je=$e(Qe)[Ke])==null?Ye:Ge(Je)}},6389:function(je,y,v){var $e=v(7386),Ge=v(7486),Ke=v(8320),qe=v(3955),Ye=$e("".charAt),Je=$e("".charCodeAt),Qe=$e("".slice),st=function(Mt){return function(on,sn){var fn,hn,to=Ke(qe(on)),Xr=Ge(sn),co=to.length;return Xr<0||Xr>=co?Mt?"":void 0:(fn=Je(to,Xr))<55296||fn>56319||Xr+1===co||(hn=Je(to,Xr+1))<56320||hn>57343?Mt?Ye(to,Xr):fn:Mt?Qe(to,Xr,Xr+2):hn-56320+(fn-55296<<10)+65536}};je.exports={codeAt:st(!1),charAt:st(!0)}},8117:function(je,y,v){var $e,Ge,Ke,qe,Ye=v(7583),Je=v(1611),Qe=v(2938),st=v(9212),Mt=v(2870),on=v(6544),sn=v(482),fn=v(6917),hn=v(6668),to=v(7520),Xr=v(7020),co=v(5354),lo=Ye.setImmediate,fo=Ye.clearImmediate,Uo=Ye.process,mo=Ye.Dispatch,rd=Ye.Function,od=Ye.MessageChannel,fd=Ye.String,hd=0,vd={},Td="onreadystatechange";try{$e=Ye.location}catch{}var Od=function(pd){if(Mt(vd,pd)){var _d=vd[pd];delete vd[pd],_d()}},Md=function(pd){return function(){Od(pd)}},Fd=function(pd){Od(pd.data)},Ud=function(pd){Ye.postMessage(fd(pd),$e.protocol+"//"+$e.host)};lo&&fo||(lo=function(pd){to(arguments.length,1);var _d=st(pd)?pd:rd(pd),Bd=fn(arguments,1);return vd[++hd]=function(){Je(_d,void 0,Bd)},Ge(hd),hd},fo=function(pd){delete vd[pd]},co?Ge=function(pd){Uo.nextTick(Md(pd))}:mo&&mo.now?Ge=function(pd){mo.now(Md(pd))}:od&&!Xr?(qe=(Ke=new od).port2,Ke.port1.onmessage=Fd,Ge=Qe(qe.postMessage,qe)):Ye.addEventListener&&st(Ye.postMessage)&&!Ye.importScripts&&$e&&$e.protocol!=="file:"&&!on(Ud)?(Ge=Ud,Ye.addEventListener("message",Fd,!1)):Ge=Td in hn("script")?function(pd){sn.appendChild(hn("script")).onreadystatechange=function(){sn.removeChild(this),Od(pd)}}:function(pd){setTimeout(Md(pd),0)}),je.exports={set:lo,clear:fo}},6782:function(je,y,v){var $e=v(7486),Ge=Math.max,Ke=Math.min;je.exports=function(qe,Ye){var Je=$e(qe);return Je<0?Ge(Je+Ye,0):Ke(Je,Ye)}},2977:function(je,y,v){var $e=v(5044),Ge=v(3955);je.exports=function(Ke){return $e(Ge(Ke))}},7486:function(je){var y=Math.ceil,v=Math.floor;je.exports=function($e){var Ge=+$e;return Ge!=Ge||Ge===0?0:(Ge>0?v:y)(Ge)}},97:function(je,y,v){var $e=v(7486),Ge=Math.min;je.exports=function(Ke){return Ke>0?Ge($e(Ke),9007199254740991):0}},1324:function(je,y,v){var $e=v(7583),Ge=v(3955),Ke=$e.Object;je.exports=function(qe){return Ke(Ge(qe))}},2670:function(je,y,v){var $e=v(7583),Ge=v(8262),Ke=v(794),qe=v(5871),Ye=v(911),Je=v(6252),Qe=v(3649),st=$e.TypeError,Mt=Qe("toPrimitive");je.exports=function(on,sn){if(!Ke(on)||qe(on))return on;var fn,hn=Ye(on,Mt);if(hn){if(sn===void 0&&(sn="default"),fn=Ge(hn,on,sn),!Ke(fn)||qe(fn))return fn;throw st("Can't convert object to primitive value")}return sn===void 0&&(sn="number"),Je(on,sn)}},8734:function(je,y,v){var $e=v(2670),Ge=v(5871);je.exports=function(Ke){var qe=$e(Ke,"string");return Ge(qe)?qe:qe+""}},8191:function(je,y,v){var $e={};$e[v(3649)("toStringTag")]="z",je.exports=String($e)==="[object z]"},8320:function(je,y,v){var $e=v(7583),Ge=v(3058),Ke=$e.String;je.exports=function(qe){if(Ge(qe)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Ke(qe)}},5637:function(je,y,v){var $e=v(7583).String;je.exports=function(Ge){try{return $e(Ge)}catch{return"Object"}}},8284:function(je,y,v){var $e=v(7386),Ge=0,Ke=Math.random(),qe=$e(1 .toString);je.exports=function(Ye){return"Symbol("+(Ye===void 0?"":Ye)+")_"+qe(++Ge+Ke,36)}},7786:function(je,y,v){var $e=v(8640);je.exports=$e&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},7670:function(je,y,v){var $e=v(8494),Ge=v(6544);je.exports=$e&&Ge(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},7520:function(je,y,v){var $e=v(7583).TypeError;je.exports=function(Ge,Ke){if(Ge<Ke)throw $e("Not enough arguments");return Ge}},491:function(je,y,v){var $e=v(3649);y.f=$e},3649:function(je,y,v){var $e=v(7583),Ge=v(7836),Ke=v(2870),qe=v(8284),Ye=v(8640),Je=v(7786),Qe=Ge("wks"),st=$e.Symbol,Mt=st&&st.for,on=Je?st:st&&st.withoutSetter||qe;je.exports=function(sn){if(!Ke(Qe,sn)||!Ye&&typeof Qe[sn]!="string"){var fn="Symbol."+sn;Ye&&Ke(st,sn)?Qe[sn]=st[sn]:Qe[sn]=Je&&Mt?Mt(fn):on(fn)}return Qe[sn]}},1719:function(je,y,v){var $e=v(7263),Ge=v(7583),Ke=v(2447),qe=v(729),Ye=v(7496),Je=v(3478),Qe=v(3590),st=v(57),Mt=v(4677),on=v(1509),sn=v(4402),fn=v(4026),hn=v(2764),to=v(3649),Xr=v(1178),co=to("toStringTag"),lo=Ge.Error,fo=[].push,Uo=function(rd,od){var fd,hd=arguments.length>2?arguments[2]:void 0,vd=Ke(mo,this);Ye?fd=Ye(new lo,vd?qe(this):mo):(fd=vd?this:Qe(mo),st(fd,co,"Error")),od!==void 0&&st(fd,"message",hn(od)),Xr&&st(fd,"stack",on(fd.stack,1)),sn(fd,hd);var Td=[];return fn(rd,fo,{that:Td}),st(fd,"errors",Td),fd};Ye?Ye(Uo,lo):Je(Uo,lo,{name:!0});var mo=Uo.prototype=Qe(lo.prototype,{constructor:Mt(1,Uo),message:Mt(1,""),name:Mt(1,"AggregateError")});$e({global:!0},{AggregateError:Uo})},1646:function(je,y,v){var $e=v(7263),Ge=v(7583),Ke=v(6544),qe=v(4521),Ye=v(794),Je=v(1324),Qe=v(1825),st=v(5999),Mt=v(4822),on=v(9269),sn=v(3649),fn=v(4061),hn=sn("isConcatSpreadable"),to=9007199254740991,Xr="Maximum allowed index exceeded",co=Ge.TypeError,lo=fn>=51||!Ke(function(){var mo=[];return mo[hn]=!1,mo.concat()[0]!==mo}),fo=on("concat"),Uo=function(mo){if(!Ye(mo))return!1;var rd=mo[hn];return rd!==void 0?!!rd:qe(mo)};$e({target:"Array",proto:!0,forced:!lo||!fo},{concat:function(mo){var rd,od,fd,hd,vd,Td=Je(this),Od=Mt(Td,0),Md=0;for(rd=-1,fd=arguments.length;rd<fd;rd++)if(Uo(vd=rd===-1?Td:arguments[rd])){if(Md+(hd=Qe(vd))>to)throw co(Xr);for(od=0;od<hd;od++,Md++)od in vd&&st(Od,Md,vd[od])}else{if(Md>=to)throw co(Xr);st(Od,Md++,vd)}return Od.length=Md,Od}})},5677:function(je,y,v){var $e=v(2977),Ge=v(6288),Ke=v(339),qe=v(2743),Ye=v(4615).f,Je=v(9012),Qe=v(6268),st=v(8494),Mt="Array Iterator",on=qe.set,sn=qe.getterFor(Mt);je.exports=Je(Array,"Array",function(hn,to){on(this,{type:Mt,target:$e(hn),index:0,kind:to})},function(){var hn=sn(this),to=hn.target,Xr=hn.kind,co=hn.index++;return!to||co>=to.length?(hn.target=void 0,{value:void 0,done:!0}):Xr=="keys"?{value:co,done:!1}:Xr=="values"?{value:to[co],done:!1}:{value:[co,to[co]],done:!1}},"values");var fn=Ke.Arguments=Ke.Array;if(Ge("keys"),Ge("values"),Ge("entries"),!Qe&&st&&fn.name!=="values")try{Ye(fn,"name",{value:"values"})}catch{}},6956:function(je,y,v){var $e=v(7583);v(8821)($e.JSON,"JSON",!0)},5222:function(je,y,v){v(8821)(Math,"Math",!0)},6394:function(je,y,v){var $e=v(8191),Ge=v(1270),Ke=v(3060);$e||Ge(Object.prototype,"toString",Ke,{unsafe:!0})},6969:function(je,y,v){var $e=v(7263),Ge=v(8262),Ke=v(8257),qe=v(5084),Ye=v(544),Je=v(4026);$e({target:"Promise",stat:!0},{allSettled:function(Qe){var st=this,Mt=qe.f(st),on=Mt.resolve,sn=Mt.reject,fn=Ye(function(){var hn=Ke(st.resolve),to=[],Xr=0,co=1;Je(Qe,function(lo){var fo=Xr++,Uo=!1;co++,Ge(hn,st,lo).then(function(mo){Uo||(Uo=!0,to[fo]={status:"fulfilled",value:mo},--co||on(to))},function(mo){Uo||(Uo=!0,to[fo]={status:"rejected",reason:mo},--co||on(to))})}),--co||on(to)});return fn.error&&sn(fn.value),Mt.promise}})},2021:function(je,y,v){var $e=v(7263),Ge=v(8257),Ke=v(5897),qe=v(8262),Ye=v(5084),Je=v(544),Qe=v(4026),st="No one promise resolved";$e({target:"Promise",stat:!0},{any:function(Mt){var on=this,sn=Ke("AggregateError"),fn=Ye.f(on),hn=fn.resolve,to=fn.reject,Xr=Je(function(){var co=Ge(on.resolve),lo=[],fo=0,Uo=1,mo=!1;Qe(Mt,function(rd){var od=fo++,fd=!1;Uo++,qe(co,on,rd).then(function(hd){fd||mo||(mo=!0,hn(hd))},function(hd){fd||mo||(fd=!0,lo[od]=hd,--Uo||to(new sn(lo,st)))})}),--Uo||to(new sn(lo,st))});return Xr.error&&to(Xr.value),fn.promise}})},8328:function(je,y,v){var $e=v(7263),Ge=v(6268),Ke=v(783),qe=v(6544),Ye=v(5897),Je=v(9212),Qe=v(564),st=v(5732),Mt=v(1270);if($e({target:"Promise",proto:!0,real:!0,forced:!!Ke&&qe(function(){Ke.prototype.finally.call({then:function(){}},function(){})})},{finally:function(sn){var fn=Qe(this,Ye("Promise")),hn=Je(sn);return this.then(hn?function(to){return st(fn,sn()).then(function(){return to})}:sn,hn?function(to){return st(fn,sn()).then(function(){throw to})}:sn)}}),!Ge&&Je(Ke)){var on=Ye("Promise").prototype.finally;Ke.prototype.finally!==on&&Mt(Ke.prototype,"finally",on,{unsafe:!0})}},5334:function(je,y,v){var $e,Ge,Ke,qe,Ye=v(7263),Je=v(6268),Qe=v(7583),st=v(5897),Mt=v(8262),on=v(783),sn=v(1270),fn=v(6893),hn=v(7496),to=v(8821),Xr=v(7730),co=v(8257),lo=v(9212),fo=v(794),Uo=v(4761),mo=v(9734),rd=v(4026),od=v(3616),fd=v(564),hd=v(8117).set,vd=v(2095),Td=v(5732),Od=v(2716),Md=v(5084),Fd=v(544),Ud=v(2723),pd=v(2743),_d=v(4451),Bd=v(3649),$d=v(2274),jd=v(5354),Pd=v(4061),yd=Bd("species"),Ld="Promise",zd=pd.getterFor(Ld),Jd=pd.set,cp=pd.getterFor(Ld),mp=on&&on.prototype,gp=on,_p=mp,vp=Qe.TypeError,wp=Qe.document,md=Qe.process,Ad=Md.f,Nd=Ad,Hd=!!(wp&&wp.createEvent&&Qe.dispatchEvent),Kd=lo(Qe.PromiseRejectionEvent),Qd="unhandledrejection",rp=!1,np=_d(Ld,function(){var ap=mo(gp),dp=ap!==String(gp);if(!dp&&Pd===66||Je&&!_p.finally)return!0;if(Pd>=51&&/native code/.test(ap))return!1;var Ep=new gp(function(Np){Np(1)}),Ap=function(Np){Np(function(){},function(){})};return(Ep.constructor={})[yd]=Ap,!(rp=Ep.then(function(){})instanceof Ap)||!dp&&$d&&!Kd}),ip=np||!od(function(ap){gp.all(ap).catch(function(){})}),Zd=function(ap){var dp;return!(!fo(ap)||!lo(dp=ap.then))&&dp},sp=function(ap,dp){var Ep,Ap,Np,Zp=dp.value,vv=dp.state==1,Vd=vv?ap.ok:ap.fail,Yd=ap.resolve,qd=ap.reject,ep=ap.domain;try{Vd?(vv||(dp.rejection===2&&Lp(dp),dp.rejection=1),Vd===!0?Ep=Zp:(ep&&ep.enter(),Ep=Vd(Zp),ep&&(ep.exit(),Np=!0)),Ep===ap.promise?qd(vp("Promise-chain cycle")):(Ap=Zd(Ep))?Mt(Ap,Ep,Yd,qd):Yd(Ep)):qd(Zp)}catch(fp){ep&&!Np&&ep.exit(),qd(fp)}},yp=function(ap,dp){ap.notified||(ap.notified=!0,vd(function(){for(var Ep,Ap=ap.reactions;Ep=Ap.get();)sp(Ep,ap);ap.notified=!1,dp&&!ap.rejection&&Cp(ap)}))},bp=function(ap,dp,Ep){var Ap,Np;Hd?((Ap=wp.createEvent("Event")).promise=dp,Ap.reason=Ep,Ap.initEvent(ap,!1,!0),Qe.dispatchEvent(Ap)):Ap={promise:dp,reason:Ep},!Kd&&(Np=Qe["on"+ap])?Np(Ap):ap===Qd&&Od("Unhandled promise rejection",Ep)},Cp=function(ap){Mt(hd,Qe,function(){var dp,Ep=ap.facade,Ap=ap.value;if(Dp(ap)&&(dp=Fd(function(){jd?md.emit("unhandledRejection",Ap,Ep):bp(Qd,Ep,Ap)}),ap.rejection=jd||Dp(ap)?2:1,dp.error))throw dp.value})},Dp=function(ap){return ap.rejection!==1&&!ap.parent},Lp=function(ap){Mt(hd,Qe,function(){var dp=ap.facade;jd?md.emit("rejectionHandled",dp):bp("rejectionhandled",dp,ap.value)})},Mp=function(ap,dp,Ep){return function(Ap){ap(dp,Ap,Ep)}},jp=function(ap,dp,Ep){ap.done||(ap.done=!0,Ep&&(ap=Ep),ap.value=dp,ap.state=2,yp(ap,!0))},ev=function ap(dp,Ep,Ap){if(!dp.done){dp.done=!0,Ap&&(dp=Ap);try{if(dp.facade===Ep)throw vp("Promise can't be resolved itself");var Np=Zd(Ep);Np?vd(function(){var Zp={done:!1};try{Mt(Np,Ep,Mp(ap,Zp,dp),Mp(jp,Zp,dp))}catch(vv){jp(Zp,vv,dp)}}):(dp.value=Ep,dp.state=1,yp(dp,!1))}catch(Zp){jp({done:!1},Zp,dp)}}};if(np&&(_p=(gp=function(ap){Uo(this,_p),co(ap),Mt($e,this);var dp=zd(this);try{ap(Mp(ev,dp),Mp(jp,dp))}catch(Ep){jp(dp,Ep)}}).prototype,($e=function(ap){Jd(this,{type:Ld,done:!1,notified:!1,parent:!1,reactions:new Ud,rejection:!1,state:0,value:void 0})}).prototype=fn(_p,{then:function(ap,dp){var Ep=cp(this),Ap=Ad(fd(this,gp));return Ep.parent=!0,Ap.ok=!lo(ap)||ap,Ap.fail=lo(dp)&&dp,Ap.domain=jd?md.domain:void 0,Ep.state==0?Ep.reactions.add(Ap):vd(function(){sp(Ap,Ep)}),Ap.promise},catch:function(ap){return this.then(void 0,ap)}}),Ge=function(){var ap=new $e,dp=zd(ap);this.promise=ap,this.resolve=Mp(ev,dp),this.reject=Mp(jp,dp)},Md.f=Ad=function(ap){return ap===gp||ap===Ke?new Ge(ap):Nd(ap)},!Je&&lo(on)&&mp!==Object.prototype)){qe=mp.then,rp||(sn(mp,"then",function(ap,dp){var Ep=this;return new gp(function(Ap,Np){Mt(qe,Ep,Ap,Np)}).then(ap,dp)},{unsafe:!0}),sn(mp,"catch",_p.catch,{unsafe:!0}));try{delete mp.constructor}catch{}hn&&hn(mp,_p)}Ye({global:!0,wrap:!0,forced:np},{Promise:gp}),to(gp,Ld,!1,!0),Xr(Ld),Ke=st(Ld),Ye({target:Ld,stat:!0,forced:np},{reject:function(ap){var dp=Ad(this);return Mt(dp.reject,void 0,ap),dp.promise}}),Ye({target:Ld,stat:!0,forced:Je||np},{resolve:function(ap){return Td(Je&&this===Ke?gp:this,ap)}}),Ye({target:Ld,stat:!0,forced:ip},{all:function(ap){var dp=this,Ep=Ad(dp),Ap=Ep.resolve,Np=Ep.reject,Zp=Fd(function(){var vv=co(dp.resolve),Vd=[],Yd=0,qd=1;rd(ap,function(ep){var fp=Yd++,Op=!1;qd++,Mt(vv,dp,ep).then(function(Wp){Op||(Op=!0,Vd[fp]=Wp,--qd||Ap(Vd))},Np)}),--qd||Ap(Vd)});return Zp.error&&Np(Zp.value),Ep.promise},race:function(ap){var dp=this,Ep=Ad(dp),Ap=Ep.reject,Np=Fd(function(){var Zp=co(dp.resolve);rd(ap,function(vv){Mt(Zp,dp,vv).then(Ep.resolve,Ap)})});return Np.error&&Ap(Np.value),Ep.promise}})},2257:function(je,y,v){var $e=v(7263),Ge=v(7583),Ke=v(8821);$e({global:!0},{Reflect:{}}),Ke(Ge.Reflect,"Reflect",!0)},2129:function(je,y,v){var $e=v(6389).charAt,Ge=v(8320),Ke=v(2743),qe=v(9012),Ye="String Iterator",Je=Ke.set,Qe=Ke.getterFor(Ye);qe(String,"String",function(st){Je(this,{type:Ye,string:Ge(st),index:0})},function(){var st,Mt=Qe(this),on=Mt.string,sn=Mt.index;return sn>=on.length?{value:void 0,done:!0}:(st=$e(on,sn),Mt.index+=st.length,{value:st,done:!1})})},462:function(je,y,v){v(2219)("asyncIterator")},8407:function(je,y,v){var $e=v(7263),Ge=v(8494),Ke=v(7583),qe=v(7386),Ye=v(2870),Je=v(9212),Qe=v(2447),st=v(8320),Mt=v(4615).f,on=v(3478),sn=Ke.Symbol,fn=sn&&sn.prototype;if(Ge&&Je(sn)&&(!("description"in fn)||sn().description!==void 0)){var hn={},to=function(){var rd=arguments.length<1||arguments[0]===void 0?void 0:st(arguments[0]),od=Qe(fn,this)?new sn(rd):rd===void 0?sn():sn(rd);return rd===""&&(hn[od]=!0),od};on(to,sn),to.prototype=fn,fn.constructor=to;var Xr=String(sn("test"))=="Symbol(test)",co=qe(fn.toString),lo=qe(fn.valueOf),fo=/^Symbol\((.*)\)[^)]+$/,Uo=qe("".replace),mo=qe("".slice);Mt(fn,"description",{configurable:!0,get:function(){var rd=lo(this),od=co(rd);if(Ye(hn,rd))return"";var fd=Xr?mo(od,7,-1):Uo(od,fo,"$1");return fd===""?void 0:fd}}),$e({global:!0,forced:!0},{Symbol:to})}},2429:function(je,y,v){v(2219)("hasInstance")},1172:function(je,y,v){v(2219)("isConcatSpreadable")},8288:function(je,y,v){v(2219)("iterator")},2004:function(je,y,v){var $e=v(7263),Ge=v(7583),Ke=v(5897),qe=v(1611),Ye=v(8262),Je=v(7386),Qe=v(6268),st=v(8494),Mt=v(8640),on=v(6544),sn=v(2870),fn=v(4521),hn=v(9212),to=v(794),Xr=v(2447),co=v(5871),lo=v(2569),fo=v(1324),Uo=v(2977),mo=v(8734),rd=v(8320),od=v(4677),fd=v(3590),hd=v(5432),vd=v(9275),Td=v(3130),Od=v(4012),Md=v(6683),Fd=v(4615),Ud=v(8728),pd=v(112),_d=v(6917),Bd=v(1270),$d=v(7836),jd=v(9137),Pd=v(4639),yd=v(8284),Ld=v(3649),zd=v(491),Jd=v(2219),cp=v(8821),mp=v(2743),gp=v(4805).forEach,_p=jd("hidden"),vp="Symbol",wp=Ld("toPrimitive"),md=mp.set,Ad=mp.getterFor(vp),Nd=Object.prototype,Hd=Ge.Symbol,Kd=Hd&&Hd.prototype,Qd=Ge.TypeError,rp=Ge.QObject,np=Ke("JSON","stringify"),ip=Md.f,Zd=Fd.f,sp=Td.f,yp=pd.f,bp=Je([].push),Cp=$d("symbols"),Dp=$d("op-symbols"),Lp=$d("string-to-symbol-registry"),Mp=$d("symbol-to-string-registry"),jp=$d("wks"),ev=!rp||!rp.prototype||!rp.prototype.findChild,ap=st&&on(function(){return fd(Zd({},"a",{get:function(){return Zd(this,"a",{value:7}).a}})).a!=7})?function(qd,ep,fp){var Op=ip(Nd,ep);Op&&delete Nd[ep],Zd(qd,ep,fp),Op&&qd!==Nd&&Zd(Nd,ep,Op)}:Zd,dp=function(qd,ep){var fp=Cp[qd]=fd(Kd);return md(fp,{type:vp,tag:qd,description:ep}),st||(fp.description=ep),fp},Ep=function(qd,ep,fp){qd===Nd&&Ep(Dp,ep,fp),lo(qd);var Op=mo(ep);return lo(fp),sn(Cp,Op)?(fp.enumerable?(sn(qd,_p)&&qd[_p][Op]&&(qd[_p][Op]=!1),fp=fd(fp,{enumerable:od(0,!1)})):(sn(qd,_p)||Zd(qd,_p,od(1,{})),qd[_p][Op]=!0),ap(qd,Op,fp)):Zd(qd,Op,fp)},Ap=function(qd,ep){lo(qd);var fp=Uo(ep),Op=hd(fp).concat(Vd(fp));return gp(Op,function(Wp){st&&!Ye(Np,fp,Wp)||Ep(qd,Wp,fp[Wp])}),qd},Np=function(qd){var ep=mo(qd),fp=Ye(yp,this,ep);return!(this===Nd&&sn(Cp,ep)&&!sn(Dp,ep))&&(!(fp||!sn(this,ep)||!sn(Cp,ep)||sn(this,_p)&&this[_p][ep])||fp)},Zp=function(qd,ep){var fp=Uo(qd),Op=mo(ep);if(fp!==Nd||!sn(Cp,Op)||sn(Dp,Op)){var Wp=ip(fp,Op);return!Wp||!sn(Cp,Op)||sn(fp,_p)&&fp[_p][Op]||(Wp.enumerable=!0),Wp}},vv=function(qd){var ep=sp(Uo(qd)),fp=[];return gp(ep,function(Op){sn(Cp,Op)||sn(Pd,Op)||bp(fp,Op)}),fp},Vd=function(qd){var ep=qd===Nd,fp=sp(ep?Dp:Uo(qd)),Op=[];return gp(fp,function(Wp){!sn(Cp,Wp)||ep&&!sn(Nd,Wp)||bp(Op,Cp[Wp])}),Op};if(Mt||(Hd=function(){if(Xr(Kd,this))throw Qd("Symbol is not a constructor");var qd=arguments.length&&arguments[0]!==void 0?rd(arguments[0]):void 0,ep=yd(qd),fp=function Op(Wp){this===Nd&&Ye(Op,Dp,Wp),sn(this,_p)&&sn(this[_p],ep)&&(this[_p][ep]=!1),ap(this,ep,od(1,Wp))};return st&&ev&&ap(Nd,ep,{configurable:!0,set:fp}),dp(ep,qd)},Bd(Kd=Hd.prototype,"toString",function(){return Ad(this).tag}),Bd(Hd,"withoutSetter",function(qd){return dp(yd(qd),qd)}),pd.f=Np,Fd.f=Ep,Ud.f=Ap,Md.f=Zp,vd.f=Td.f=vv,Od.f=Vd,zd.f=function(qd){return dp(Ld(qd),qd)},st&&(Zd(Kd,"description",{configurable:!0,get:function(){return Ad(this).description}}),Qe||Bd(Nd,"propertyIsEnumerable",Np,{unsafe:!0}))),$e({global:!0,wrap:!0,forced:!Mt,sham:!Mt},{Symbol:Hd}),gp(hd(jp),function(qd){Jd(qd)}),$e({target:vp,stat:!0,forced:!Mt},{for:function(qd){var ep=rd(qd);if(sn(Lp,ep))return Lp[ep];var fp=Hd(ep);return Lp[ep]=fp,Mp[fp]=ep,fp},keyFor:function(qd){if(!co(qd))throw Qd(qd+" is not a symbol");if(sn(Mp,qd))return Mp[qd]},useSetter:function(){ev=!0},useSimple:function(){ev=!1}}),$e({target:"Object",stat:!0,forced:!Mt,sham:!st},{create:function(qd,ep){return ep===void 0?fd(qd):Ap(fd(qd),ep)},defineProperty:Ep,defineProperties:Ap,getOwnPropertyDescriptor:Zp}),$e({target:"Object",stat:!0,forced:!Mt},{getOwnPropertyNames:vv,getOwnPropertySymbols:Vd}),$e({target:"Object",stat:!0,forced:on(function(){Od.f(1)})},{getOwnPropertySymbols:function(qd){return Od.f(fo(qd))}}),np&&$e({target:"JSON",stat:!0,forced:!Mt||on(function(){var qd=Hd();return np([qd])!="[null]"||np({a:qd})!="{}"||np(Object(qd))!="{}"})},{stringify:function(qd,ep,fp){var Op=_d(arguments),Wp=ep;if((to(ep)||qd!==void 0)&&!co(qd))return fn(ep)||(ep=function(iv,gv){if(hn(Wp)&&(gv=Ye(Wp,this,iv,gv)),!co(gv))return gv}),Op[1]=ep,qe(np,null,Op)}}),!Kd[wp]){var Yd=Kd.valueOf;Bd(Kd,wp,function(qd){return Ye(Yd,this)})}cp(Hd,vp),Pd[_p]=!0},8201:function(je,y,v){v(2219)("matchAll")},1274:function(je,y,v){v(2219)("match")},6626:function(je,y,v){v(2219)("replace")},3211:function(je,y,v){v(2219)("search")},9952:function(je,y,v){v(2219)("species")},15:function(je,y,v){v(2219)("split")},9831:function(je,y,v){v(2219)("toPrimitive")},7521:function(je,y,v){v(2219)("toStringTag")},2972:function(je,y,v){v(2219)("unscopables")},4655:function(je,y,v){var $e=v(7583),Ge=v(6778),Ke=v(9307),qe=v(5677),Ye=v(57),Je=v(3649),Qe=Je("iterator"),st=Je("toStringTag"),Mt=qe.values,on=function(fn,hn){if(fn){if(fn[Qe]!==Mt)try{Ye(fn,Qe,Mt)}catch{fn[Qe]=Mt}if(fn[st]||Ye(fn,st,hn),Ge[hn]){for(var to in qe)if(fn[to]!==qe[to])try{Ye(fn,to,qe[to])}catch{fn[to]=qe[to]}}}};for(var sn in Ge)on($e[sn]&&$e[sn].prototype,sn);on(Ke,"DOMTokenList")},8765:function(je,y,v){var $e=v(5036);v(4655),je.exports=$e},5441:function(je,y,v){var $e=v(2582);v(4655),je.exports=$e},7705:function(je){je.exports=function(y){var v=[];return v.toString=function(){return this.map(function($e){var Ge="",Ke=$e[5]!==void 0;return $e[4]&&(Ge+="@supports (".concat($e[4],") {")),$e[2]&&(Ge+="@media ".concat($e[2]," {")),Ke&&(Ge+="@layer".concat($e[5].length>0?" ".concat($e[5]):""," {")),Ge+=y($e),Ke&&(Ge+="}"),$e[2]&&(Ge+="}"),$e[4]&&(Ge+="}"),Ge}).join("")},v.i=function($e,Ge,Ke,qe,Ye){typeof $e=="string"&&($e=[[null,$e,void 0]]);var Je={};if(Ke)for(var Qe=0;Qe<this.length;Qe++){var st=this[Qe][0];st!=null&&(Je[st]=!0)}for(var Mt=0;Mt<$e.length;Mt++){var on=[].concat($e[Mt]);Ke&&Je[on[0]]||(Ye!==void 0&&(on[5]===void 0||(on[1]="@layer".concat(on[5].length>0?" ".concat(on[5]):""," {").concat(on[1],"}")),on[5]=Ye),Ge&&(on[2]&&(on[1]="@media ".concat(on[2]," {").concat(on[1],"}")),on[2]=Ge),qe&&(on[4]?(on[1]="@supports (".concat(on[4],") {").concat(on[1],"}"),on[4]=qe):on[4]="".concat(qe)),v.push(on))}},v}},6738:function(je){je.exports=function(y){return y[1]}},8679:function(je){var y=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,v=window.WeakMap;if(v===void 0){var $e=Object.defineProperty,Ge=Date.now()%1e9;(v=function(){this.name="__st"+(1e9*Math.random()>>>0)+Ge+++"__"}).prototype={set:function(mo,rd){var od=mo[this.name];return od&&od[0]===mo?od[1]=rd:$e(mo,this.name,{value:[mo,rd],writable:!0}),this},get:function(mo){var rd;return(rd=mo[this.name])&&rd[0]===mo?rd[1]:void 0},delete:function(mo){var rd=mo[this.name];if(!rd)return!1;var od=rd[0]===mo;return rd[0]=rd[1]=void 0,od},has:function(mo){var rd=mo[this.name];return!!rd&&rd[0]===mo}}}var Ke=new v,qe=window.msSetImmediate;if(!qe){var Ye=[],Je=String(Math.random());window.addEventListener("message",function(mo){if(mo.data===Je){var rd=Ye;Ye=[],rd.forEach(function(od){od()})}}),qe=function(mo){Ye.push(mo),window.postMessage(Je,"*")}}var Qe=!1,st=[];function Mt(){Qe=!1;var mo=st;st=[],mo.sort(function(od,fd){return od.uid_-fd.uid_});var rd=!1;mo.forEach(function(od){var fd=od.takeRecords();(function(hd){hd.nodes_.forEach(function(vd){var Td=Ke.get(vd);Td&&Td.forEach(function(Od){Od.observer===hd&&Od.removeTransientObservers()})})})(od),fd.length&&(od.callback_(fd,od),rd=!0)}),rd&&Mt()}function on(mo,rd){for(var od=mo;od;od=od.parentNode){var fd=Ke.get(od);if(fd)for(var hd=0;hd<fd.length;hd++){var vd=fd[hd],Td=vd.options;if(od===mo||Td.subtree){var Od=rd(Td);Od&&vd.enqueue(Od)}}}}var sn,fn,hn=0;function to(mo){this.callback_=mo,this.nodes_=[],this.records_=[],this.uid_=++hn}function Xr(mo,rd){this.type=mo,this.target=rd,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function co(mo,rd){return sn=new Xr(mo,rd)}function lo(mo){return fn||((od=new Xr((rd=sn).type,rd.target)).addedNodes=rd.addedNodes.slice(),od.removedNodes=rd.removedNodes.slice(),od.previousSibling=rd.previousSibling,od.nextSibling=rd.nextSibling,od.attributeName=rd.attributeName,od.attributeNamespace=rd.attributeNamespace,od.oldValue=rd.oldValue,(fn=od).oldValue=mo,fn);var rd,od}function fo(mo,rd){return mo===rd?mo:fn&&((od=mo)===fn||od===sn)?fn:null;var od}function Uo(mo,rd,od){this.observer=mo,this.target=rd,this.options=od,this.transientObservedNodes=[]}to.prototype={observe:function(mo,rd){var od;if(od=mo,mo=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(od)||od,!rd.childList&&!rd.attributes&&!rd.characterData||rd.attributeOldValue&&!rd.attributes||rd.attributeFilter&&rd.attributeFilter.length&&!rd.attributes||rd.characterDataOldValue&&!rd.characterData)throw new SyntaxError;var fd,hd=Ke.get(mo);hd||Ke.set(mo,hd=[]);for(var vd=0;vd<hd.length;vd++)if(hd[vd].observer===this){(fd=hd[vd]).removeListeners(),fd.options=rd;break}fd||(fd=new Uo(this,mo,rd),hd.push(fd),this.nodes_.push(mo)),fd.addListeners()},disconnect:function(){this.nodes_.forEach(function(mo){for(var rd=Ke.get(mo),od=0;od<rd.length;od++){var fd=rd[od];if(fd.observer===this){fd.removeListeners(),rd.splice(od,1);break}}},this),this.records_=[]},takeRecords:function(){var mo=this.records_;return this.records_=[],mo}},Uo.prototype={enqueue:function(mo){var rd,od=this.observer.records_,fd=od.length;if(od.length>0){var hd=fo(od[fd-1],mo);if(hd)return void(od[fd-1]=hd)}else rd=this.observer,st.push(rd),Qe||(Qe=!0,qe(Mt));od[fd]=mo},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(mo){var rd=this.options;rd.attributes&&mo.addEventListener("DOMAttrModified",this,!0),rd.characterData&&mo.addEventListener("DOMCharacterDataModified",this,!0),rd.childList&&mo.addEventListener("DOMNodeInserted",this,!0),(rd.childList||rd.subtree)&&mo.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(mo){var rd=this.options;rd.attributes&&mo.removeEventListener("DOMAttrModified",this,!0),rd.characterData&&mo.removeEventListener("DOMCharacterDataModified",this,!0),rd.childList&&mo.removeEventListener("DOMNodeInserted",this,!0),(rd.childList||rd.subtree)&&mo.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(mo){if(mo!==this.target){this.addListeners_(mo),this.transientObservedNodes.push(mo);var rd=Ke.get(mo);rd||Ke.set(mo,rd=[]),rd.push(this)}},removeTransientObservers:function(){var mo=this.transientObservedNodes;this.transientObservedNodes=[],mo.forEach(function(rd){this.removeListeners_(rd);for(var od=Ke.get(rd),fd=0;fd<od.length;fd++)if(od[fd]===this){od.splice(fd,1);break}},this)},handleEvent:function(mo){switch(mo.stopImmediatePropagation(),mo.type){case"DOMAttrModified":var rd=mo.attrName,od=mo.relatedNode.namespaceURI,fd=mo.target;(vd=new co("attributes",fd)).attributeName=rd,vd.attributeNamespace=od;var hd=null;typeof MutationEvent<"u"&&mo.attrChange===MutationEvent.ADDITION||(hd=mo.prevValue),on(fd,function(pd){if(pd.attributes&&(!pd.attributeFilter||!pd.attributeFilter.length||pd.attributeFilter.indexOf(rd)!==-1||pd.attributeFilter.indexOf(od)!==-1))return pd.attributeOldValue?lo(hd):vd});break;case"DOMCharacterDataModified":var vd=co("characterData",fd=mo.target);hd=mo.prevValue,on(fd,function(pd){if(pd.characterData)return pd.characterDataOldValue?lo(hd):vd});break;case"DOMNodeRemoved":this.addTransientObserver(mo.target);case"DOMNodeInserted":fd=mo.relatedNode;var Td,Od,Md=mo.target;mo.type==="DOMNodeInserted"?(Td=[Md],Od=[]):(Td=[],Od=[Md]);var Fd=Md.previousSibling,Ud=Md.nextSibling;(vd=co("childList",fd)).addedNodes=Td,vd.removedNodes=Od,vd.previousSibling=Fd,vd.nextSibling=Ud,on(fd,function(pd){if(pd.childList)return vd})}sn=fn=void 0}},y||(y=to),je.exports=y},7588:function(je){var y=function(v){var $e,Ge=Object.prototype,Ke=Ge.hasOwnProperty,qe=typeof Symbol=="function"?Symbol:{},Ye=qe.iterator||"@@iterator",Je=qe.asyncIterator||"@@asyncIterator",Qe=qe.toStringTag||"@@toStringTag";function st(pd,_d,Bd){return Object.defineProperty(pd,_d,{value:Bd,enumerable:!0,configurable:!0,writable:!0}),pd[_d]}try{st({},"")}catch{st=function(_d,Bd,$d){return _d[Bd]=$d}}function Mt(pd,_d,Bd,$d){var jd=_d&&_d.prototype instanceof co?_d:co,Pd=Object.create(jd.prototype),yd=new Md($d||[]);return Pd._invoke=function(Ld,zd,Jd){var cp=sn;return function(mp,gp){if(cp===hn)throw new Error("Generator is already running");if(cp===to){if(mp==="throw")throw gp;return Ud()}for(Jd.method=mp,Jd.arg=gp;;){var _p=Jd.delegate;if(_p){var vp=vd(_p,Jd);if(vp){if(vp===Xr)continue;return vp}}if(Jd.method==="next")Jd.sent=Jd._sent=Jd.arg;else if(Jd.method==="throw"){if(cp===sn)throw cp=to,Jd.arg;Jd.dispatchException(Jd.arg)}else Jd.method==="return"&&Jd.abrupt("return",Jd.arg);cp=hn;var wp=on(Ld,zd,Jd);if(wp.type==="normal"){if(cp=Jd.done?to:fn,wp.arg===Xr)continue;return{value:wp.arg,done:Jd.done}}wp.type==="throw"&&(cp=to,Jd.method="throw",Jd.arg=wp.arg)}}}(pd,Bd,yd),Pd}function on(pd,_d,Bd){try{return{type:"normal",arg:pd.call(_d,Bd)}}catch($d){return{type:"throw",arg:$d}}}v.wrap=Mt;var sn="suspendedStart",fn="suspendedYield",hn="executing",to="completed",Xr={};function co(){}function lo(){}function fo(){}var Uo={};st(Uo,Ye,function(){return this});var mo=Object.getPrototypeOf,rd=mo&&mo(mo(Fd([])));rd&&rd!==Ge&&Ke.call(rd,Ye)&&(Uo=rd);var od=fo.prototype=co.prototype=Object.create(Uo);function fd(pd){["next","throw","return"].forEach(function(_d){st(pd,_d,function(Bd){return this._invoke(_d,Bd)})})}function hd(pd,_d){function Bd(jd,Pd,yd,Ld){var zd=on(pd[jd],pd,Pd);if(zd.type!=="throw"){var Jd=zd.arg,cp=Jd.value;return cp&&typeof cp=="object"&&Ke.call(cp,"__await")?_d.resolve(cp.__await).then(function(mp){Bd("next",mp,yd,Ld)},function(mp){Bd("throw",mp,yd,Ld)}):_d.resolve(cp).then(function(mp){Jd.value=mp,yd(Jd)},function(mp){return Bd("throw",mp,yd,Ld)})}Ld(zd.arg)}var $d;this._invoke=function(jd,Pd){function yd(){return new _d(function(Ld,zd){Bd(jd,Pd,Ld,zd)})}return $d=$d?$d.then(yd,yd):yd()}}function vd(pd,_d){var Bd=pd.iterator[_d.method];if(Bd===$e){if(_d.delegate=null,_d.method==="throw"){if(pd.iterator.return&&(_d.method="return",_d.arg=$e,vd(pd,_d),_d.method==="throw"))return Xr;_d.method="throw",_d.arg=new TypeError("The iterator does not provide a 'throw' method")}return Xr}var $d=on(Bd,pd.iterator,_d.arg);if($d.type==="throw")return _d.method="throw",_d.arg=$d.arg,_d.delegate=null,Xr;var jd=$d.arg;return jd?jd.done?(_d[pd.resultName]=jd.value,_d.next=pd.nextLoc,_d.method!=="return"&&(_d.method="next",_d.arg=$e),_d.delegate=null,Xr):jd:(_d.method="throw",_d.arg=new TypeError("iterator result is not an object"),_d.delegate=null,Xr)}function Td(pd){var _d={tryLoc:pd[0]};1 in pd&&(_d.catchLoc=pd[1]),2 in pd&&(_d.finallyLoc=pd[2],_d.afterLoc=pd[3]),this.tryEntries.push(_d)}function Od(pd){var _d=pd.completion||{};_d.type="normal",delete _d.arg,pd.completion=_d}function Md(pd){this.tryEntries=[{tryLoc:"root"}],pd.forEach(Td,this),this.reset(!0)}function Fd(pd){if(pd){var _d=pd[Ye];if(_d)return _d.call(pd);if(typeof pd.next=="function")return pd;if(!isNaN(pd.length)){var Bd=-1,$d=function jd(){for(;++Bd<pd.length;)if(Ke.call(pd,Bd))return jd.value=pd[Bd],jd.done=!1,jd;return jd.value=$e,jd.done=!0,jd};return $d.next=$d}}return{next:Ud}}function Ud(){return{value:$e,done:!0}}return lo.prototype=fo,st(od,"constructor",fo),st(fo,"constructor",lo),lo.displayName=st(fo,Qe,"GeneratorFunction"),v.isGeneratorFunction=function(pd){var _d=typeof pd=="function"&&pd.constructor;return!!_d&&(_d===lo||(_d.displayName||_d.name)==="GeneratorFunction")},v.mark=function(pd){return Object.setPrototypeOf?Object.setPrototypeOf(pd,fo):(pd.__proto__=fo,st(pd,Qe,"GeneratorFunction")),pd.prototype=Object.create(od),pd},v.awrap=function(pd){return{__await:pd}},fd(hd.prototype),st(hd.prototype,Je,function(){return this}),v.AsyncIterator=hd,v.async=function(pd,_d,Bd,$d,jd){jd===void 0&&(jd=Promise);var Pd=new hd(Mt(pd,_d,Bd,$d),jd);return v.isGeneratorFunction(_d)?Pd:Pd.next().then(function(yd){return yd.done?yd.value:Pd.next()})},fd(od),st(od,Qe,"Generator"),st(od,Ye,function(){return this}),st(od,"toString",function(){return"[object Generator]"}),v.keys=function(pd){var _d=[];for(var Bd in pd)_d.push(Bd);return _d.reverse(),function $d(){for(;_d.length;){var jd=_d.pop();if(jd in pd)return $d.value=jd,$d.done=!1,$d}return $d.done=!0,$d}},v.values=Fd,Md.prototype={constructor:Md,reset:function(pd){if(this.prev=0,this.next=0,this.sent=this._sent=$e,this.done=!1,this.delegate=null,this.method="next",this.arg=$e,this.tryEntries.forEach(Od),!pd)for(var _d in this)_d.charAt(0)==="t"&&Ke.call(this,_d)&&!isNaN(+_d.slice(1))&&(this[_d]=$e)},stop:function(){this.done=!0;var pd=this.tryEntries[0].completion;if(pd.type==="throw")throw pd.arg;return this.rval},dispatchException:function(pd){if(this.done)throw pd;var _d=this;function Bd(zd,Jd){return Pd.type="throw",Pd.arg=pd,_d.next=zd,Jd&&(_d.method="next",_d.arg=$e),!!Jd}for(var $d=this.tryEntries.length-1;$d>=0;--$d){var jd=this.tryEntries[$d],Pd=jd.completion;if(jd.tryLoc==="root")return Bd("end");if(jd.tryLoc<=this.prev){var yd=Ke.call(jd,"catchLoc"),Ld=Ke.call(jd,"finallyLoc");if(yd&&Ld){if(this.prev<jd.catchLoc)return Bd(jd.catchLoc,!0);if(this.prev<jd.finallyLoc)return Bd(jd.finallyLoc)}else if(yd){if(this.prev<jd.catchLoc)return Bd(jd.catchLoc,!0)}else{if(!Ld)throw new Error("try statement without catch or finally");if(this.prev<jd.finallyLoc)return Bd(jd.finallyLoc)}}}},abrupt:function(pd,_d){for(var Bd=this.tryEntries.length-1;Bd>=0;--Bd){var $d=this.tryEntries[Bd];if($d.tryLoc<=this.prev&&Ke.call($d,"finallyLoc")&&this.prev<$d.finallyLoc){var jd=$d;break}}jd&&(pd==="break"||pd==="continue")&&jd.tryLoc<=_d&&_d<=jd.finallyLoc&&(jd=null);var Pd=jd?jd.completion:{};return Pd.type=pd,Pd.arg=_d,jd?(this.method="next",this.next=jd.finallyLoc,Xr):this.complete(Pd)},complete:function(pd,_d){if(pd.type==="throw")throw pd.arg;return pd.type==="break"||pd.type==="continue"?this.next=pd.arg:pd.type==="return"?(this.rval=this.arg=pd.arg,this.method="return",this.next="end"):pd.type==="normal"&&_d&&(this.next=_d),Xr},finish:function(pd){for(var _d=this.tryEntries.length-1;_d>=0;--_d){var Bd=this.tryEntries[_d];if(Bd.finallyLoc===pd)return this.complete(Bd.completion,Bd.afterLoc),Od(Bd),Xr}},catch:function(pd){for(var _d=this.tryEntries.length-1;_d>=0;--_d){var Bd=this.tryEntries[_d];if(Bd.tryLoc===pd){var $d=Bd.completion;if($d.type==="throw"){var jd=$d.arg;Od(Bd)}return jd}}throw new Error("illegal catch attempt")},delegateYield:function(pd,_d,Bd){return this.delegate={iterator:Fd(pd),resultName:_d,nextLoc:Bd},this.method==="next"&&(this.arg=$e),Xr}},v}(je.exports);try{regeneratorRuntime=y}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=y:Function("r","regeneratorRuntime = r")(y)}},8702:function(je,y,v){v.d(y,{Z:function(){return $d}});var $e=v(4296),Ge=v(6464),Ke=v(6881),qe=v(2942),Ye=v(7003),Je=v(3379),Qe=v.n(Je),st=v(7795),Mt=v.n(st),on=v(569),sn=v.n(on),fn=v(3565),hn=v.n(fn),to=v(9216),Xr=v.n(to),co=v(4589),lo=v.n(co),fo=v(5313),Uo={};fo.Z&&fo.Z.locals&&(Uo.locals=fo.Z.locals);var mo,rd=0,od={};od.styleTagTransform=lo(),od.setAttributes=hn(),od.insert=sn().bind(null,"head"),od.domAPI=Mt(),od.insertStyleElement=Xr(),Uo.use=function(jd){return od.options=jd||{},rd++||(mo=Qe()(fo.Z,od)),Uo},Uo.unuse=function(){rd>0&&!--rd&&(mo(),mo=null)};var fd=Uo;function hd(jd){var Pd,yd;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"d","M599.99999 832.000004h47.999999a24 24 0 0 0 23.999999-24V376.000013a24 24 0 0 0-23.999999-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24zM927.999983 160.000017h-164.819997l-67.999998-113.399998A95.999998 95.999998 0 0 0 612.819989 0.00002H411.179993a95.999998 95.999998 0 0 0-82.319998 46.599999L260.819996 160.000017H95.999999A31.999999 31.999999 0 0 0 64 192.000016v32a31.999999 31.999999 0 0 0 31.999999 31.999999h32v671.999987a95.999998 95.999998 0 0 0 95.999998 95.999998h575.999989a95.999998 95.999998 0 0 0 95.999998-95.999998V256.000015h31.999999a31.999999 31.999999 0 0 0 32-31.999999V192.000016a31.999999 31.999999 0 0 0-32-31.999999zM407.679993 101.820018A12 12 0 0 1 417.999993 96.000018h187.999996a12 12 0 0 1 10.3 5.82L651.219989 160.000017H372.779994zM799.999986 928.000002H223.999997V256.000015h575.999989z m-423.999992-95.999998h47.999999a24 24 0 0 0 24-24V376.000013a24 24 0 0 0-24-24h-47.999999a24 24 0 0 0-24 24v431.999991a24 24 0 0 0 24 24z"),(0,qe.Ljt)(Pd,"class","vc-icon-delete"),(0,qe.Ljt)(Pd,"viewBox","0 0 1024 1024"),(0,qe.Ljt)(Pd,"width","200"),(0,qe.Ljt)(Pd,"height","200")},m:function(Ld,zd){(0,qe.$Tr)(Ld,Pd,zd),(0,qe.R3I)(Pd,yd)},d:function(Ld){Ld&&(0,qe.ogt)(Pd)}}}function vd(jd){var Pd,yd,Ld;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),Ld=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"d","M874.154197 150.116875A511.970373 511.970373 0 1 0 1023.993986 511.991687a511.927744 511.927744 0 0 0-149.839789-361.874812z m-75.324866 648.382129A405.398688 405.398688 0 1 1 917.422301 511.991687a405.313431 405.313431 0 0 1-118.59297 286.507317z"),(0,qe.Ljt)(Ld,"d","M725.039096 299.274605a54.351559 54.351559 0 0 0-76.731613 0l-135.431297 135.431297L377.274375 299.274605a54.436817 54.436817 0 0 0-76.944756 76.987385l135.388668 135.431297-135.388668 135.473925a54.436817 54.436817 0 0 0 76.944756 76.987385l135.388668-135.431297 135.431297 135.473926a54.436817 54.436817 0 0 0 76.731613-76.987385l-135.388668-135.473926 135.388668-135.431296a54.479445 54.479445 0 0 0 0.213143-77.030014z"),(0,qe.Ljt)(Pd,"viewBox","0 0 1024 1024"),(0,qe.Ljt)(Pd,"width","200"),(0,qe.Ljt)(Pd,"height","200")},m:function(zd,Jd){(0,qe.$Tr)(zd,Pd,Jd),(0,qe.R3I)(Pd,yd),(0,qe.R3I)(Pd,Ld)},d:function(zd){zd&&(0,qe.ogt)(Pd)}}}function Td(jd){var Pd,yd;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"fill-rule","evenodd"),(0,qe.Ljt)(yd,"d","M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"),(0,qe.Ljt)(Pd,"class","vc-icon-copy"),(0,qe.Ljt)(Pd,"viewBox","0 0 16 16")},m:function(Ld,zd){(0,qe.$Tr)(Ld,Pd,zd),(0,qe.R3I)(Pd,yd)},d:function(Ld){Ld&&(0,qe.ogt)(Pd)}}}function Od(jd){var Pd,yd;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"fill-rule","evenodd"),(0,qe.Ljt)(yd,"d","M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"),(0,qe.Ljt)(Pd,"class","vc-icon-suc"),(0,qe.Ljt)(Pd,"viewBox","0 0 16 16")},m:function(Ld,zd){(0,qe.$Tr)(Ld,Pd,zd),(0,qe.R3I)(Pd,yd)},d:function(Ld){Ld&&(0,qe.ogt)(Pd)}}}function Md(jd){var Pd,yd,Ld;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),Ld=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"d","M776.533333 1024 162.133333 1024C72.533333 1024 0 951.466667 0 861.866667L0 247.466667C0 157.866667 72.533333 85.333333 162.133333 85.333333L469.333333 85.333333c25.6 0 42.666667 17.066667 42.666667 42.666667s-17.066667 42.666667-42.666667 42.666667L162.133333 170.666667C119.466667 170.666667 85.333333 204.8 85.333333 247.466667l0 610.133333c0 42.666667 34.133333 76.8 76.8 76.8l610.133333 0c42.666667 0 76.8-34.133333 76.8-76.8L849.066667 554.666667c0-25.6 17.066667-42.666667 42.666667-42.666667s42.666667 17.066667 42.666667 42.666667l0 307.2C938.666667 951.466667 866.133333 1024 776.533333 1024z"),(0,qe.Ljt)(Ld,"d","M256 810.666667c-12.8 0-21.333333-4.266667-29.866667-12.8C217.6 789.333333 213.333333 772.266667 213.333333 759.466667l42.666667-213.333333c0-8.533333 4.266667-17.066667 12.8-21.333333l512-512c17.066667-17.066667 42.666667-17.066667 59.733333 0l170.666667 170.666667c17.066667 17.066667 17.066667 42.666667 0 59.733333l-512 512c-4.266667 4.266667-12.8 8.533333-21.333333 12.8l-213.333333 42.666667C260.266667 810.666667 260.266667 810.666667 256 810.666667zM337.066667 576l-25.6 136.533333 136.533333-25.6L921.6 213.333333 810.666667 102.4 337.066667 576z"),(0,qe.Ljt)(Pd,"class","vc-icon-edit"),(0,qe.Ljt)(Pd,"viewBox","0 0 1024 1024"),(0,qe.Ljt)(Pd,"width","200"),(0,qe.Ljt)(Pd,"height","200")},m:function(zd,Jd){(0,qe.$Tr)(zd,Pd,Jd),(0,qe.R3I)(Pd,yd),(0,qe.R3I)(Pd,Ld)},d:function(zd){zd&&(0,qe.ogt)(Pd)}}}function Fd(jd){var Pd,yd;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"d","M581.338005 987.646578c-2.867097 4.095853-4.573702 8.669555-8.191705 12.287558a83.214071 83.214071 0 0 1-60.959939 24.029001 83.214071 83.214071 0 0 1-61.028203-24.029001c-3.618003-3.618003-5.324608-8.191705-8.123441-12.15103L24.370323 569.050448a83.418864 83.418864 0 0 1 117.892289-117.89229l369.923749 369.92375L1308.829682 24.438587A83.418864 83.418864 0 0 1 1426.721971 142.194348L581.338005 987.646578z"),(0,qe.Ljt)(Pd,"class","vc-icon-don"),(0,qe.Ljt)(Pd,"viewBox","0 0 1501 1024"),(0,qe.Ljt)(Pd,"width","200"),(0,qe.Ljt)(Pd,"height","200")},m:function(Ld,zd){(0,qe.$Tr)(Ld,Pd,zd),(0,qe.R3I)(Pd,yd)},d:function(Ld){Ld&&(0,qe.ogt)(Pd)}}}function Ud(jd){var Pd,yd;return{c:function(){Pd=(0,qe.bi5)("svg"),yd=(0,qe.bi5)("path"),(0,qe.Ljt)(yd,"d","M894.976 574.464q0 78.848-29.696 148.48t-81.408 123.392-121.856 88.064-151.04 41.472q-5.12 1.024-9.216 1.536t-9.216 0.512l-177.152 0q-17.408 0-34.304-6.144t-30.208-16.896-22.016-25.088-8.704-29.696 8.192-29.696 21.504-24.576 29.696-16.384 33.792-6.144l158.72 1.024q54.272 0 102.4-19.968t83.968-53.76 56.32-79.36 20.48-97.792q0-49.152-18.432-92.16t-50.688-76.8-75.264-54.784-93.184-26.112q-2.048 0-2.56 0.512t-2.56 0.512l-162.816 0 0 80.896q0 17.408-13.824 25.6t-44.544-10.24q-8.192-5.12-26.112-17.92t-41.984-30.208-50.688-36.864l-51.2-38.912q-15.36-12.288-26.624-22.016t-11.264-24.064q0-12.288 12.8-25.6t29.184-26.624q18.432-15.36 44.032-35.84t50.688-39.936 45.056-35.328 28.16-22.016q24.576-17.408 39.936-7.168t16.384 30.72l0 81.92 162.816 0q5.12 0 10.752 1.024t10.752 2.048q79.872 8.192 149.504 41.984t121.344 87.552 80.896 123.392 29.184 147.456z"),(0,qe.Ljt)(Pd,"class","vc-icon-cancel"),(0,qe.Ljt)(Pd,"viewBox","0 0 1024 1024"),(0,qe.Ljt)(Pd,"width","200"),(0,qe.Ljt)(Pd,"height","200")},m:function(Ld,zd){(0,qe.$Tr)(Ld,Pd,zd),(0,qe.R3I)(Pd,yd)},d:function(Ld){Ld&&(0,qe.ogt)(Pd)}}}function pd(jd){var Pd,yd,Ld,zd,Jd,cp,mp,gp,_p,vp=jd[0]==="delete"&&hd(),wp=jd[0]==="clear"&&vd(),md=jd[0]==="copy"&&Td(),Ad=jd[0]==="success"&&Od(),Nd=jd[0]==="edit"&&Md(),Hd=jd[0]==="done"&&Fd(),Kd=jd[0]==="cancel"&&Ud();return{c:function(){Pd=(0,qe.bGB)("i"),vp&&vp.c(),yd=(0,qe.DhX)(),wp&&wp.c(),Ld=(0,qe.DhX)(),md&&md.c(),zd=(0,qe.DhX)(),Ad&&Ad.c(),Jd=(0,qe.DhX)(),Nd&&Nd.c(),cp=(0,qe.DhX)(),Hd&&Hd.c(),mp=(0,qe.DhX)(),Kd&&Kd.c(),(0,qe.Ljt)(Pd,"class","vc-icon")},m:function(Qd,rp){(0,qe.$Tr)(Qd,Pd,rp),vp&&vp.m(Pd,null),(0,qe.R3I)(Pd,yd),wp&&wp.m(Pd,null),(0,qe.R3I)(Pd,Ld),md&&md.m(Pd,null),(0,qe.R3I)(Pd,zd),Ad&&Ad.m(Pd,null),(0,qe.R3I)(Pd,Jd),Nd&&Nd.m(Pd,null),(0,qe.R3I)(Pd,cp),Hd&&Hd.m(Pd,null),(0,qe.R3I)(Pd,mp),Kd&&Kd.m(Pd,null),gp||(_p=(0,qe.oLt)(Pd,"click",jd[1]),gp=!0)},p:function(Qd,rp){rp[0],Qd[0]==="delete"?vp||((vp=hd()).c(),vp.m(Pd,yd)):vp&&(vp.d(1),vp=null),Qd[0]==="clear"?wp||((wp=vd()).c(),wp.m(Pd,Ld)):wp&&(wp.d(1),wp=null),Qd[0]==="copy"?md||((md=Td()).c(),md.m(Pd,zd)):md&&(md.d(1),md=null),Qd[0]==="success"?Ad||((Ad=Od()).c(),Ad.m(Pd,Jd)):Ad&&(Ad.d(1),Ad=null),Qd[0]==="edit"?Nd||((Nd=Md()).c(),Nd.m(Pd,cp)):Nd&&(Nd.d(1),Nd=null),Qd[0]==="done"?Hd||((Hd=Fd()).c(),Hd.m(Pd,mp)):Hd&&(Hd.d(1),Hd=null),Qd[0]==="cancel"?Kd||((Kd=Ud()).c(),Kd.m(Pd,null)):Kd&&(Kd.d(1),Kd=null)},i:qe.ZTd,o:qe.ZTd,d:function(Qd){Qd&&(0,qe.ogt)(Pd),vp&&vp.d(),wp&&wp.d(),md&&md.d(),Ad&&Ad.d(),Nd&&Nd.d(),Hd&&Hd.d(),Kd&&Kd.d(),gp=!1,_p()}}}function _d(jd,Pd,yd){var Ld=Pd.name;return(0,Ye.H3)(function(){fd.use()}),(0,Ye.ev)(function(){fd.unuse()}),jd.$$set=function(zd){"name"in zd&&yd(0,Ld=zd.name)},[Ld,function(zd){qe.cKT.call(this,jd,zd)}]}var Bd=function(jd){function Pd(yd){var Ld;return Ld=jd.call(this)||this,(0,qe.S1n)((0,Ge.Z)(Ld),yd,_d,pd,qe.N8,{name:0}),Ld}return(0,Ke.Z)(Pd,jd),(0,$e.Z)(Pd,[{key:"name",get:function(){return this.$$.ctx[0]},set:function(yd){this.$$set({name:yd}),(0,qe.yl1)()}}]),Pd}(qe.f_C),$d=Bd},3903:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6464),_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6881),svelte_internal__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2942),svelte__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(7003),_component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(8702),_logTool__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8665),_log_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5629),_logCommand_less__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3411);function get_each_context(je,y,v){var $e=je.slice();return $e[28]=y[v],$e}function create_if_block_2(je){var y,v,$e;return{c:function(){(y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="Close",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(y,"class","vc-cmd-prompted-hide")},m:function(Ge,Ke){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(Ge,y,Ke),v||($e=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(y,"click",je[5]),v=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(Ge){Ge&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(y),v=!1,$e()}}}function create_else_block(je){var y;return{c:function(){(y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li")).textContent="No Prompted"},m:function(v,$e){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(v,y,$e)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,d:function(v){v&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(y)}}}function create_each_block(je){var y,v,$e,Ge,Ke=je[28].text+"";function qe(){return je[14](je[28])}return{c:function(){y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("li"),v=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.fLW)(Ke)},m:function(Ye,Je){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(Ye,y,Je),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(y,v),$e||(Ge=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(y,"click",qe),$e=!0)},p:function(Ye,Je){je=Ye,8&Je&&Ke!==(Ke=je[28].text+"")&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.rTO)(v,Ke)},d:function(Ye){Ye&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(y),$e=!1,Ge()}}}function create_if_block_1(je){var y,v,$e,Ge,Ke;return v=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(v.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(y,"class","vc-cmd-clear-btn")},m:function(qe,Ye){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(qe,y,Ye),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(v,y,null),$e=!0,Ge||(Ke=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(y,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(je[17])),Ge=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(qe){$e||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(v.$$.fragment,qe),$e=!0)},o:function(qe){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(v.$$.fragment,qe),$e=!1},d:function(qe){qe&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(y),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(v),Ge=!1,Ke()}}}function create_if_block(je){var y,v,$e,Ge,Ke;return v=new _component_icon_icon_svelte__WEBPACK_IMPORTED_MODULE_2__.Z({props:{name:"clear"}}),{c:function(){y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.YCL)(v.$$.fragment),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(y,"class","vc-cmd-clear-btn")},m:function(qe,Ye){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(qe,y,Ye),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.yef)(v,y,null),$e=!0,Ge||(Ke=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(y,"click",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(je[19])),Ge=!0)},p:svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ZTd,i:function(qe){$e||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(v.$$.fragment,qe),$e=!0)},o:function(qe){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(v.$$.fragment,qe),$e=!1},d:function(qe){qe&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(y),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.vpE)(v),Ge=!1,Ke()}}}function create_fragment(je){for(var y,v,$e,Ge,Ke,qe,Ye,Je,Qe,st,Mt,on,sn,fn,hn,to,Xr,co,lo,fo,Uo,mo=je[3].length>0&&create_if_block_2(je),rd=je[3],od=[],fd=0;fd<rd.length;fd+=1)od[fd]=create_each_block(get_each_context(je,rd,fd));var hd=null;rd.length||(hd=create_else_block());var vd=je[1].length>0&&create_if_block_1(je),Td=je[4].length>0&&create_if_block(je);return{c:function(){y=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),v=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),mo&&mo.c(),$e=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)();for(var Od=0;Od<od.length;Od+=1)od[Od].c();hd&&hd.c(),Ge=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),Ke=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),qe=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),Ye=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),vd&&vd.c(),Je=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(Qe=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="OK",st=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),Mt=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("form"),on=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("ul"),sn=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),fn=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("div"),hn=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("textarea"),to=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),Td&&Td.c(),Xr=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.DhX)(),(co=(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.bGB)("button")).textContent="Filter",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(v,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(v,"style",je[2]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(qe,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(qe,"placeholder","command..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(Ke,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(Qe,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(Qe,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(y,"class","vc-cmd"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(on,"class","vc-cmd-prompted"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(hn,"class","vc-cmd-input"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(hn,"placeholder","filter..."),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(fn,"class","vc-cmd-input-wrap"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(co,"class","vc-cmd-btn"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(co,"type","submit"),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(Mt,"class","vc-cmd vc-filter")},m:function(Od,Md){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(Od,y,Md),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(y,v),mo&&mo.m(v,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(v,$e);for(var Fd=0;Fd<od.length;Fd+=1)od[Fd].m(v,null);hd&&hd.m(v,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(y,Ge),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(y,Ke),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Ke,qe),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(qe,je[1]),je[16](qe),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Ke,Ye),vd&&vd.m(Ke,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(y,Je),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(y,Qe),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(Od,st,Md),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.$Tr)(Od,Mt,Md),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Mt,on),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Mt,sn),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Mt,fn),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(fn,hn),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(hn,je[4]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(fn,to),Td&&Td.m(fn,null),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Mt,Xr),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.R3I)(Mt,co),lo=!0,fo||(Uo=[(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(qe,"input",je[15]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(qe,"keydown",je[10]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(qe,"keyup",je[11]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(qe,"focus",je[8]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(qe,"blur",je[9]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(y,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(je[12])),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(hn,"input",je[18]),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.oLt)(Mt,"submit",(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.AT7)(je[13]))],fo=!0)},p:function(Od,Md){var Fd=Md[0];if(Od[3].length>0?mo?mo.p(Od,Fd):((mo=create_if_block_2(Od)).c(),mo.m(v,$e)):mo&&(mo.d(1),mo=null),136&Fd){var Ud;for(rd=Od[3],Ud=0;Ud<rd.length;Ud+=1){var pd=get_each_context(Od,rd,Ud);od[Ud]?od[Ud].p(pd,Fd):(od[Ud]=create_each_block(pd),od[Ud].c(),od[Ud].m(v,null))}for(;Ud<od.length;Ud+=1)od[Ud].d(1);od.length=rd.length,!rd.length&&hd?hd.p(Od,Fd):rd.length?hd&&(hd.d(1),hd=null):((hd=create_else_block()).c(),hd.m(v,null))}(!lo||4&Fd)&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ljt)(v,"style",Od[2]),2&Fd&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(qe,Od[1]),Od[1].length>0?vd?(vd.p(Od,Fd),2&Fd&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(vd,1)):((vd=create_if_block_1(Od)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(vd,1),vd.m(Ke,null)):vd&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(vd,1,1,function(){vd=null}),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)()),16&Fd&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.BmG)(hn,Od[4]),Od[4].length>0?Td?(Td.p(Od,Fd),16&Fd&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(Td,1)):((Td=create_if_block(Od)).c(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(Td,1),Td.m(fn,null)):Td&&((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.dvw)(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(Td,1,1,function(){Td=null}),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.gbL)())},i:function(Od){lo||((0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(vd),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.Ui)(Td),lo=!0)},o:function(Od){(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(vd),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.etI)(Td),lo=!1},d:function(Od){Od&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(y),mo&&mo.d(),(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.RMB)(od,Od),hd&&hd.d(),je[16](null),vd&&vd.d(),Od&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(st),Od&&(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.ogt)(Mt),Td&&Td.d(),fo=!1,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.j7q)(Uo)}}}function instance($$self,$$props,$$invalidate){var module=_log_model__WEBPACK_IMPORTED_MODULE_3__.W.getSingleton(_log_model__WEBPACK_IMPORTED_MODULE_3__.W,"VConsoleLogModel"),cachedObjKeys={},dispatch=(0,svelte__WEBPACK_IMPORTED_MODULE_1__.x)(),cmdElement,cmdValue="",promptedStyle="",promptedList=[],filterValue="";(0,svelte__WEBPACK_IMPORTED_MODULE_1__.H3)(function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.use()}),(0,svelte__WEBPACK_IMPORTED_MODULE_1__.ev)(function(){_logCommand_less__WEBPACK_IMPORTED_MODULE_4__.Z.unuse()});var evalCommand=function(je){module.evalCommand(je)},moveCursorToPos=function(je,y){je.setSelectionRange&&setTimeout(function(){je.setSelectionRange(y,y)},1)},clearPromptedList=function(){$$invalidate(2,promptedStyle="display: none;"),$$invalidate(3,promptedList=[])},updatePromptedList=function updatePromptedList(identifier){if(cmdValue!==""){identifier||(identifier=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(cmdValue));var objName="window",keyName=cmdValue;if(identifier.front.text!=="."&&identifier.front.text!=="["||(objName=identifier.front.before,keyName=identifier.back.text!==""?identifier.back.before:identifier.front.after),keyName=keyName.replace(/(^['"]+)|(['"']+$)/g,""),!cachedObjKeys[objName])try{cachedObjKeys[objName]=Object.getOwnPropertyNames(eval("("+objName+")")).sort()}catch(je){}try{if(cachedObjKeys[objName])for(var i=0;i<cachedObjKeys[objName].length&&!(promptedList.length>=100);i++){var key=String(cachedObjKeys[objName][i]),keyPattern=new RegExp("^"+keyName,"i");if(keyPattern.test(key)){var completeCmd=objName;identifier.front.text==="."||identifier.front.text===""?completeCmd+="."+key:identifier.front.text==="["&&(completeCmd+="['"+key+"']"),promptedList.push({text:key,value:completeCmd})}}}catch(je){}if(promptedList.length>0){var m=Math.min(200,31*(promptedList.length+1));$$invalidate(2,promptedStyle="display: block; height: "+m+"px; margin-top: "+(-m-2)+"px;"),$$invalidate(3,promptedList)}else clearPromptedList()}else clearPromptedList()},autoCompleteBrackets=function(je,y){if(!(y===8||y===46)&&je.front.after==="")switch(je.front.text){case"[":return $$invalidate(1,cmdValue+="]"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"(":return $$invalidate(1,cmdValue+=")"),void moveCursorToPos(cmdElement,cmdValue.length-1);case"{":return $$invalidate(1,cmdValue+="}"),void moveCursorToPos(cmdElement,cmdValue.length-1)}},dispatchFilterEvent=function(){dispatch("filterText",{filterText:filterValue})},onTapClearText=function(je){je==="cmd"?($$invalidate(1,cmdValue=""),clearPromptedList()):je==="filter"&&($$invalidate(4,filterValue=""),dispatchFilterEvent())},onTapPromptedItem=function onTapPromptedItem(item){var type="";try{type=eval("typeof "+item.value)}catch(je){}$$invalidate(1,cmdValue=item.value+(type==="function"?"()":"")),clearPromptedList()},onCmdFocus=function(){updatePromptedList()},onCmdBlur=function(){},onCmdKeyDown=function(je){je.keyCode===13&&(je.preventDefault(),onCmdSubmit())},onCmdKeyUp=function(je){$$invalidate(3,promptedList=[]);var y=(0,_logTool__WEBPACK_IMPORTED_MODULE_5__.oj)(je.target.value);autoCompleteBrackets(y,je.keyCode),updatePromptedList(y)},onCmdSubmit=function(){cmdValue!==""&&evalCommand(cmdValue),clearPromptedList()},onFilterSubmit=function(je){dispatchFilterEvent()},click_handler=function(je){return onTapPromptedItem(je)};function textarea0_input_handler(){cmdValue=this.value,$$invalidate(1,cmdValue)}function textarea0_binding(je){svelte_internal__WEBPACK_IMPORTED_MODULE_0__.VnY[je?"unshift":"push"](function(){$$invalidate(0,cmdElement=je)})}var click_handler_1=function(){return onTapClearText("cmd")};function textarea1_input_handler(){filterValue=this.value,$$invalidate(4,filterValue)}var click_handler_2=function(){return onTapClearText("filter")};return[cmdElement,cmdValue,promptedStyle,promptedList,filterValue,clearPromptedList,onTapClearText,onTapPromptedItem,onCmdFocus,onCmdBlur,onCmdKeyDown,onCmdKeyUp,onCmdSubmit,onFilterSubmit,click_handler,textarea0_input_handler,textarea0_binding,click_handler_1,textarea1_input_handler,click_handler_2]}var LogCommand=function(je){function y(v){var $e;return $e=je.call(this)||this,(0,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.S1n)((0,_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__.Z)($e),v,instance,create_fragment,svelte_internal__WEBPACK_IMPORTED_MODULE_0__.N8,{}),$e}return(0,_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_6__.Z)(y,je),y}(svelte_internal__WEBPACK_IMPORTED_MODULE_0__.f_C);__webpack_exports__.Z=LogCommand},4687:function(je,y,v){v.d(y,{x:function(){return Ge}});var $e=v(3313),Ge=function(){var Ke=(0,$e.fZ)({updateTime:0}),qe=Ke.subscribe,Ye=Ke.set,Je=Ke.update;return{subscribe:qe,set:Ye,update:Je,updateTime:function(){Je(function(Qe){return Qe.updateTime=Date.now(),Qe})}}}()},643:function(je,y,v){v.d(y,{N:function(){return $e}});var $e=function(){function Ge(){this._onDataUpdateCallbacks=[]}return Ge.getSingleton=function(Ke,qe){return qe||(qe=Ke.toString()),Ge.singleton[qe]||(Ge.singleton[qe]=new Ke),Ge.singleton[qe]},Ge}();$e.singleton={}},5103:function(je,y,v){function $e(yd){var Ld=yd>0?new Date(yd):new Date,zd=Ld.getDate()<10?"0"+Ld.getDate():Ld.getDate(),Jd=Ld.getMonth()<9?"0"+(Ld.getMonth()+1):Ld.getMonth()+1,cp=Ld.getFullYear(),mp=Ld.getHours()<10?"0"+Ld.getHours():Ld.getHours(),gp=Ld.getMinutes()<10?"0"+Ld.getMinutes():Ld.getMinutes(),_p=Ld.getSeconds()<10?"0"+Ld.getSeconds():Ld.getSeconds(),vp=Ld.getMilliseconds()<10?"0"+Ld.getMilliseconds():Ld.getMilliseconds();return vp<100&&(vp="0"+vp),{time:+Ld,year:cp,month:Jd,day:zd,hour:mp,minute:gp,second:_p,millisecond:vp}}function Ge(yd){return Object.prototype.toString.call(yd)==="[object Number]"}function Ke(yd){return typeof yd=="bigint"}function qe(yd){return typeof yd=="string"}function Ye(yd){return Object.prototype.toString.call(yd)==="[object Array]"}function Je(yd){return typeof yd=="boolean"}function Qe(yd){return yd===void 0}function st(yd){return yd===null}function Mt(yd){return typeof yd=="symbol"}function on(yd){return!(Object.prototype.toString.call(yd)!=="[object Object]"&&(Ge(yd)||Ke(yd)||qe(yd)||Je(yd)||Ye(yd)||st(yd)||sn(yd)||Qe(yd)||Mt(yd)))}function sn(yd){return typeof yd=="function"}function fn(yd){return typeof HTMLElement=="object"?yd instanceof HTMLElement:yd&&typeof yd=="object"&&yd!==null&&yd.nodeType===1&&typeof yd.nodeName=="string"}function hn(yd){var Ld=Object.prototype.toString.call(yd);return Ld==="[object Window]"||Ld==="[object DOMWindow]"||Ld==="[object global]"}function to(yd){return yd!=null&&typeof yd!="string"&&typeof yd!="boolean"&&typeof yd!="number"&&typeof yd!="function"&&typeof yd!="symbol"&&typeof yd!="bigint"&&typeof Symbol<"u"&&typeof yd[Symbol.iterator]=="function"}function Xr(yd){return Object.prototype.toString.call(yd).replace(/\[object (.*)\]/,"$1")}v.d(y,{C4:function(){return Ke},DV:function(){return lo},FJ:function(){return hn},Ft:function(){return st},HD:function(){return qe},H_:function(){return jd},KL:function(){return vd},Kn:function(){return on},MH:function(){return Fd},PO:function(){return fo},QI:function(){return $d},QK:function(){return Ud},TW:function(){return to},_3:function(){return $e},_D:function(){return pd},cF:function(){return Bd},hZ:function(){return hd},hj:function(){return Ge},id:function(){return Td},jn:function(){return Je},kJ:function(){return Ye},kK:function(){return fn},mf:function(){return sn},o8:function(){return Qe},po:function(){return _d},qr:function(){return Md},qt:function(){return Pd},rE:function(){return rd},yk:function(){return Mt},zl:function(){return Xr}});var co=/(function|class) ([^ \{\()}]{1,})[\(| ]/;function lo(yd){var Ld;if(yd==null)return"";var zd=co.exec((yd==null||(Ld=yd.constructor)==null?void 0:Ld.toString())||"");return zd&&zd.length>1?zd[2]:""}function fo(yd){var Ld,zd=Object.prototype.hasOwnProperty;if(!yd||typeof yd!="object"||yd.nodeType||hn(yd))return!1;try{if(yd.constructor&&!zd.call(yd,"constructor")&&!zd.call(yd.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}for(Ld in yd);return Ld===void 0||zd.call(yd,Ld)}var Uo=/[\n\t]/g,mo=function(yd){return{"\n":"\\n","	":"\\t"}[yd]};function rd(yd){return typeof yd!="string"?yd:String(yd).replace(Uo,mo)}var od=function(yd,Ld){Ld===void 0&&(Ld=0);var zd="";return qe(yd)?(Ld>0&&(yd=Td(yd,Ld)),zd+='"'+rd(yd)+'"'):Mt(yd)?zd+=String(yd).replace(/^Symbol\((.*)\)$/i,'Symbol("$1")'):sn(yd)?zd+=(yd.name||"function")+"()":Ke(yd)?zd+=String(yd)+"n":zd+=String(yd),zd},fd=function yd(Ld,zd,Jd){if(Jd===void 0&&(Jd=0),on(Ld)||Ye(Ld))if(zd.circularFinder(Ld)){var cp="";if(Ye(Ld))cp="(Circular Array)";else if(on(Ld)){var mp;cp="(Circular "+(((mp=Ld.constructor)==null?void 0:mp.name)||"Object")+")"}zd.ret+=zd.standardJSON?'"'+cp+'"':cp}else{var gp="",_p="";if(zd.pretty){for(var vp=0;vp<=Jd;vp++)gp+="  ";_p=`
`}var wp="{",md="}";Ye(Ld)&&(wp="[",md="]"),zd.ret+=wp+_p;for(var Ad=Fd(Ld),Nd=0;Nd<Ad.length;Nd++){var Hd=Ad[Nd];zd.ret+=gp;try{Ye(Ld)||(on(Hd)||Ye(Hd)||Mt(Hd)?zd.ret+=Object.prototype.toString.call(Hd):qe(Hd)&&zd.standardJSON?zd.ret+='"'+Hd+'"':zd.ret+=Hd,zd.ret+=": ")}catch{continue}try{var Kd=Ld[Hd];if(Ye(Kd))zd.maxDepth>-1&&Jd>=zd.maxDepth?zd.ret+="Array("+Kd.length+")":yd(Kd,zd,Jd+1);else if(on(Kd)){var Qd;zd.maxDepth>-1&&Jd>=zd.maxDepth?zd.ret+=(((Qd=Kd.constructor)==null?void 0:Qd.name)||"Object")+" {}":yd(Kd,zd,Jd+1)}else zd.ret+=od(Kd,zd.keyMaxLen)}catch{zd.ret+=zd.standardJSON?'"(PARSE_ERROR)"':"(PARSE_ERROR)"}if(zd.keyMaxLen>0&&zd.ret.length>=10*zd.keyMaxLen){zd.ret+=", (...)";break}Nd<Ad.length-1&&(zd.ret+=", "),zd.ret+=_p}zd.ret+=gp.substring(0,gp.length-2)+md}else zd.ret+=od(Ld,zd.keyMaxLen)};function hd(yd,Ld){Ld===void 0&&(Ld={maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1});var zd,Jd=Object.assign({ret:"",maxDepth:-1,keyMaxLen:-1,pretty:!1,standardJSON:!1,circularFinder:(zd=new WeakSet,function(cp){if(typeof cp=="object"&&cp!==null){if(zd.has(cp))return!0;zd.add(cp)}return!1})},Ld);return fd(yd,Jd),Jd.ret}function vd(yd){return yd<=0?"":yd>=1e6?(yd/1e3/1e3).toFixed(1)+" MB":yd>=1e3?(yd/1e3).toFixed(1)+" KB":yd+" B"}function Td(yd,Ld){return yd.length>Ld&&(yd=yd.substring(0,Ld)+"...("+vd(function(zd){try{return encodeURI(zd).split(/%(?:u[0-9A-F]{2})?[0-9A-F]{2}|./).length-1}catch{return 0}}(yd))+")"),yd}var Od=function(yd,Ld){return String(yd).localeCompare(String(Ld),void 0,{numeric:!0,sensitivity:"base"})};function Md(yd){return yd.sort(Od)}function Fd(yd){return on(yd)||Ye(yd)?Object.keys(yd):[]}function Ud(yd){var Ld=Fd(yd),zd=function(Jd){return on(Jd)||Ye(Jd)?Object.getOwnPropertyNames(Jd):[]}(yd);return zd.filter(function(Jd){return Ld.indexOf(Jd)===-1})}function pd(yd){return on(yd)||Ye(yd)?Object.getOwnPropertySymbols(yd):[]}function _d(yd,Ld){window.localStorage&&(yd="vConsole_"+yd,localStorage.setItem(yd,Ld))}function Bd(yd){if(window.localStorage)return yd="vConsole_"+yd,localStorage.getItem(yd)}function $d(yd){return yd===void 0&&(yd=""),"__vc_"+yd+Math.random().toString(36).substring(2,8)}function jd(){return typeof window<"u"&&!!window.__wxConfig&&!!window.wx&&!!window.__virtualDOM__}function Pd(yd){if(jd()&&typeof window.wx[yd]=="function")try{for(var Ld,zd=arguments.length,Jd=new Array(zd>1?zd-1:0),cp=1;cp<zd;cp++)Jd[cp-1]=arguments[cp];var mp=(Ld=window.wx[yd]).call.apply(Ld,[window.wx].concat(Jd));return mp}catch(gp){return void console.debug("[vConsole] Fail to call wx."+yd+"():",gp)}}},5629:function(je,y,v){v.d(y,{W:function(){return fn}});var $e=v(8270),Ge=v(6881),Ke=v(5103),qe=v(643),Ye=v(4687),Je=v(8665),Qe=v(9923);function st(hn,to){var Xr=Object.keys(hn);if(Object.getOwnPropertySymbols){var co=Object.getOwnPropertySymbols(hn);to&&(co=co.filter(function(lo){return Object.getOwnPropertyDescriptor(hn,lo).enumerable})),Xr.push.apply(Xr,co)}return Xr}function Mt(hn){for(var to=1;to<arguments.length;to++){var Xr=arguments[to]!=null?arguments[to]:{};to%2?st(Object(Xr),!0).forEach(function(co){(0,$e.Z)(hn,co,Xr[co])}):Object.getOwnPropertyDescriptors?Object.defineProperties(hn,Object.getOwnPropertyDescriptors(Xr)):st(Object(Xr)).forEach(function(co){Object.defineProperty(hn,co,Object.getOwnPropertyDescriptor(Xr,co))})}return hn}function on(hn,to){var Xr=typeof Symbol<"u"&&hn[Symbol.iterator]||hn["@@iterator"];if(Xr)return(Xr=Xr.call(hn)).next.bind(Xr);if(Array.isArray(hn)||(Xr=function(lo,fo){if(lo){if(typeof lo=="string")return sn(lo,fo);var Uo=Object.prototype.toString.call(lo).slice(8,-1);if(Uo==="Object"&&lo.constructor&&(Uo=lo.constructor.name),Uo==="Map"||Uo==="Set")return Array.from(lo);if(Uo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Uo))return sn(lo,fo)}}(hn))||to){Xr&&(hn=Xr);var co=0;return function(){return co>=hn.length?{done:!0}:{done:!1,value:hn[co++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sn(hn,to){(to==null||to>hn.length)&&(to=hn.length);for(var Xr=0,co=new Array(to);Xr<to;Xr++)co[Xr]=hn[Xr];return co}var fn=function(hn){function to(){for(var co,lo=arguments.length,fo=new Array(lo),Uo=0;Uo<lo;Uo++)fo[Uo]=arguments[Uo];return(co=hn.call.apply(hn,[this].concat(fo))||this).LOG_METHODS=["log","info","warn","debug","error"],co.ADDED_LOG_PLUGIN_ID=[],co.maxLogNumber=1e3,co.logCounter=0,co.groupLevel=0,co.groupLabelCollapsedStack=[],co.pluginPattern=void 0,co.logQueue=[],co.flushLogScheduled=!1,co.origConsole={},co}(0,Ge.Z)(to,hn);var Xr=to.prototype;return Xr.bindPlugin=function(co){return!(this.ADDED_LOG_PLUGIN_ID.indexOf(co)>-1)&&(this.ADDED_LOG_PLUGIN_ID.length===0&&this.mockConsole(),Qe.O.create(co),this.ADDED_LOG_PLUGIN_ID.push(co),this.pluginPattern=new RegExp("^\\[("+this.ADDED_LOG_PLUGIN_ID.join("|")+")\\]$","i"),!0)},Xr.unbindPlugin=function(co){var lo=this.ADDED_LOG_PLUGIN_ID.indexOf(co);return lo!==-1&&(this.ADDED_LOG_PLUGIN_ID.splice(lo,1),Qe.O.delete(co),this.ADDED_LOG_PLUGIN_ID.length===0&&this.unmockConsole(),!0)},Xr.mockConsole=function(){var co=this;typeof this.origConsole.log!="function"&&(window.console?(this.LOG_METHODS.map(function(lo){co.origConsole[lo]=window.console[lo]}),this.origConsole.time=window.console.time,this.origConsole.timeEnd=window.console.timeEnd,this.origConsole.clear=window.console.clear,this.origConsole.group=window.console.group,this.origConsole.groupCollapsed=window.console.groupCollapsed,this.origConsole.groupEnd=window.console.groupEnd):window.console={},this._mockConsoleLog(),this._mockConsoleTime(),this._mockConsoleGroup(),this._mockConsoleClear(),window._vcOrigConsole=this.origConsole)},Xr._mockConsoleLog=function(){var co=this;this.LOG_METHODS.map(function(lo){window.console[lo]=(function(){for(var fo=arguments.length,Uo=new Array(fo),mo=0;mo<fo;mo++)Uo[mo]=arguments[mo];co.addLog({type:lo,origData:Uo||[]})}).bind(window.console)})},Xr._mockConsoleTime=function(){var co=this,lo={};window.console.time=(function(fo){fo===void 0&&(fo=""),lo[fo]=Date.now()}).bind(window.console),window.console.timeEnd=(function(fo){fo===void 0&&(fo="");var Uo=lo[fo],mo=0;Uo&&(mo=Date.now()-Uo,delete lo[fo]),co.addLog({type:"log",origData:[fo+": "+mo+"ms"]})}).bind(window.console)},Xr._mockConsoleGroup=function(){var co=this,lo=function(fo){return(function(Uo){Uo===void 0&&(Uo="console.group");var mo=Symbol(Uo);co.groupLabelCollapsedStack.push({label:mo,collapsed:fo}),co.addLog({type:"log",origData:[Uo],isGroupHeader:fo?2:1,isGroupCollapsed:!1},{noOrig:!0}),co.groupLevel++,fo?co.origConsole.groupCollapsed(Uo):co.origConsole.group(Uo)}).bind(window.console)};window.console.group=lo(!1),window.console.groupCollapsed=lo(!0),window.console.groupEnd=(function(){co.groupLabelCollapsedStack.pop(),co.groupLevel=Math.max(0,co.groupLevel-1),co.origConsole.groupEnd()}).bind(window.console)},Xr._mockConsoleClear=function(){var co=this;window.console.clear=(function(){co.resetGroup(),co.clearLog();for(var lo=arguments.length,fo=new Array(lo),Uo=0;Uo<lo;Uo++)fo[Uo]=arguments[Uo];co.callOriginalConsole.apply(co,["clear"].concat(fo))}).bind(window.console)},Xr.unmockConsole=function(){for(var co in this.origConsole)window.console[co]=this.origConsole[co],delete this.origConsole[co];window._vcOrigConsole&&delete window._vcOrigConsole},Xr.callOriginalConsole=function(co){if(typeof this.origConsole[co]=="function"){for(var lo=arguments.length,fo=new Array(lo>1?lo-1:0),Uo=1;Uo<lo;Uo++)fo[Uo-1]=arguments[Uo];this.origConsole[co].apply(window.console,fo)}},Xr.resetGroup=function(){for(;this.groupLevel>0;)console.groupEnd()},Xr.clearLog=function(){var co=Qe.O.getAll();for(var lo in co)this.clearPluginLog(lo)},Xr.clearPluginLog=function(co){var lo=this.logQueue;this.logQueue=[];for(var fo,Uo=on(lo);!(fo=Uo()).done;){var mo=fo.value;this._extractPluginIdByLog(mo)!==co&&this.logQueue.push(mo)}Qe.O.get(co).update(function(rd){return rd.logList.length=0,rd}),Ye.x.updateTime()},Xr.addLog=function(co,lo){co===void 0&&(co={type:"log",origData:[],isGroupHeader:0,isGroupCollapsed:!1});var fo=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-2],Uo=this.groupLabelCollapsedStack[this.groupLabelCollapsedStack.length-1],mo={_id:Ke.QI(),type:co.type,cmdType:lo==null?void 0:lo.cmdType,toggle:{},date:Date.now(),data:(0,Je.b1)(co.origData||[]),repeated:0,groupLabel:Uo==null?void 0:Uo.label,groupLevel:this.groupLevel,groupHeader:co.isGroupHeader,groupCollapsed:co.isGroupHeader?!(fo==null||!fo.collapsed):!(Uo==null||!Uo.collapsed)};this._signalLog(mo),lo!=null&&lo.noOrig||this.callOriginalConsole.apply(this,[co.type].concat(co.origData))},Xr.evalCommand=function(co){this.addLog({type:"log",origData:[co]},{cmdType:"input"});var lo=void 0;try{lo=eval.call(window,"("+co+")")}catch{try{lo=eval.call(window,co)}catch{}}this.addLog({type:"log",origData:[lo]},{cmdType:"output"})},Xr._signalLog=function(co){var lo=this;this.flushLogScheduled||(this.flushLogScheduled=!0,window.requestAnimationFrame(function(){lo.flushLogScheduled=!1,lo._flushLogs()})),this.logQueue.push(co)},Xr._flushLogs=function(){var co=this,lo=this.logQueue;this.logQueue=[];for(var fo,Uo={},mo=on(lo);!(fo=mo()).done;){var rd=fo.value,od=this._extractPluginIdByLog(rd);(Uo[od]=Uo[od]||[]).push(rd)}for(var fd=function(Td){var Od=Uo[Td];Qe.O.get(Td).update(function(Md){for(var Fd,Ud=[].concat(Md.logList),pd=on(Od);!(Fd=pd()).done;){var _d=Fd.value;co._isRepeatedLog(Ud,_d)?co._updateLastLogRepeated(Ud):Ud.push(_d)}return{logList:Ud=co._limitLogListLength(Ud)}})},hd=0,vd=Object.keys(Uo);hd<vd.length;hd++)fd(vd[hd]);Ye.x.updateTime()},Xr._extractPluginIdByLog=function(co){var lo,fo="default",Uo=(lo=co.data[0])==null?void 0:lo.origData;if(Ke.HD(Uo)){var mo=Uo.match(this.pluginPattern);if(mo!==null&&mo.length>1){var rd=mo[1].toLowerCase();this.ADDED_LOG_PLUGIN_ID.indexOf(rd)>-1&&(fo=rd,co.data.shift())}}return fo},Xr._isRepeatedLog=function(co,lo){var fo=co[co.length-1];if(!fo)return!1;var Uo=!1;if(lo.type===fo.type&&lo.cmdType===fo.cmdType&&lo.data.length===fo.data.length){Uo=!0;for(var mo=0;mo<lo.data.length;mo++)if(lo.data[mo].origData!==fo.data[mo].origData){Uo=!1;break}}return Uo},Xr._updateLastLogRepeated=function(co){var lo=co[co.length-1],fo=lo.repeated?lo.repeated+1:2;return co[co.length-1]=Mt(Mt({},lo),{},{repeated:fo}),co},Xr._limitLogListLength=function(co){var lo=co.length,fo=this.maxLogNumber;return lo>fo?co.slice(lo-fo,lo):co},to}(qe.N)},9923:function(je,y,v){v.d(y,{O:function(){return Ge}});var $e=v(3313),Ge=function(){function Ke(){}return Ke.create=function(qe){return this.storeMap[qe]||(this.storeMap[qe]=(0,$e.fZ)({logList:[]})),this.storeMap[qe]},Ke.delete=function(qe){this.storeMap[qe]&&delete this.storeMap[qe]},Ke.get=function(qe){return this.storeMap[qe]},Ke.getRaw=function(qe){return(0,$e.U2)(this.storeMap[qe])},Ke.getAll=function(){return this.storeMap},Ke}();Ge.storeMap={}},8665:function(je,y,v){v.d(y,{HX:function(){return st},LH:function(){return Ke},Tg:function(){return sn},b1:function(){return on},oj:function(){return Qe}});var $e=v(5103),Ge=function(fn){var hn=$e.hZ(fn,{maxDepth:0}),to=hn.substring(0,36),Xr=$e.DV(fn);return hn.length>36&&(to+="..."),Xr=$e.rE(Xr+" "+to)},Ke=function(fn,hn){hn===void 0&&(hn=!0);var to="undefined",Xr=fn;return fn instanceof sn?(to="uninvocatable",Xr="(...)"):$e.kJ(fn)?(to="array",Xr=Ge(fn)):$e.Kn(fn)?(to="object",Xr=Ge(fn)):$e.HD(fn)?(to="string",Xr=$e.rE(fn),hn&&(Xr='"'+Xr+'"')):$e.hj(fn)?(to="number",Xr=String(fn)):$e.C4(fn)?(to="bigint",Xr=String(fn)+"n"):$e.jn(fn)?(to="boolean",Xr=String(fn)):$e.Ft(fn)?(to="null",Xr="null"):$e.o8(fn)?(to="undefined",Xr="undefined"):$e.mf(fn)?(to="function",Xr=(fn.name||"function")+"()"):$e.yk(fn)&&(to="symbol",Xr=String(fn)),{text:Xr,valueType:to}},qe=[".","[","(","{","}"],Ye=["]",")","}"],Je=function(fn,hn,to){to===void 0&&(to=0);for(var Xr={text:"",pos:-1,before:"",after:""},co=fn.length-1;co>=to;co--){var lo=hn.indexOf(fn[co]);if(lo>-1){Xr.text=hn[lo],Xr.pos=co,Xr.before=fn.substring(to,co),Xr.after=fn.substring(co+1,fn.length);break}}return Xr},Qe=function(fn){var hn=Je(fn,qe,0);return{front:hn,back:Je(fn,Ye,hn.pos+1)}},st=function(fn,hn){if(hn==="")return!0;for(var to=0;to<fn.data.length;to++)if(typeof fn.data[to].origData=="string"&&fn.data[to].origData.indexOf(hn)>-1)return!0;return!1},Mt=/(\%[csdo] )|( \%[csdo])/g,on=function(fn){if(Mt.lastIndex=0,$e.HD(fn[0])&&Mt.test(fn[0])){for(var hn,to=[].concat(fn),Xr=to.shift().split(Mt).filter(function(vd){return vd!==void 0&&vd!==""}),co=to,lo=[],fo=!1,Uo="";Xr.length>0;){var mo=Xr.shift();if(/ ?\%c ?/.test(mo)?co.length>0?typeof(Uo=co.shift())!="string"&&(Uo=""):(hn=mo,Uo="",fo=!0):/ ?\%[sd] ?/.test(mo)?(hn=co.length>0?$e.Kn(co[0])?$e.DV(co.shift()):String(co.shift()):mo,fo=!0):/ ?\%o ?/.test(mo)?(hn=co.length>0?co.shift():mo,fo=!0):(hn=mo,fo=!0),fo){var rd={origData:hn};Uo&&(rd.style=Uo),lo.push(rd),fo=!1,hn=void 0,Uo=""}}for(var od=0;od<co.length;od++)lo.push({origData:co[od]});return lo}for(var fd=[],hd=0;hd<fn.length;hd++)fd.push({origData:fn[hd]});return fd},sn=function(){}},5313:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-icon {
  word-break: normal;
  white-space: normal;
  overflow: visible;
}
.vc-icon svg {
  fill: var(--VC-FG-2);
  height: 1em;
  width: 1em;
  vertical-align: -0.11em;
}
.vc-icon .vc-icon-delete {
  vertical-align: -0.11em;
}
.vc-icon .vc-icon-copy {
  height: 1.1em;
  width: 1.1em;
  vertical-align: -0.16em;
}
.vc-icon .vc-icon-suc {
  fill: var(--VC-TEXTGREEN);
  height: 1.1em;
  width: 1.1em;
  vertical-align: -0.16em;
}
`,""]),y.Z=qe},1142:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-scroller-viewport {
  position: relative;
  overflow: hidden;
  height: 100%;
}
.vc-scroller-contents {
  min-height: 100%;
  will-change: transform;
}
.vc-scroller-items {
  will-change: height;
  position: relative;
}
.vc-scroller-item {
  display: none;
  position: absolute;
  left: 0;
  right: 0;
}
.vc-scroller-viewport.static .vc-scroller-item {
  display: block;
  position: static;
}
.vc-scroller-scrollbar-track {
  width: 4px;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  padding: 1px;
}
.vc-scroller-scrollbar-thumb {
  position: relative;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  border-radius: 999px;
}
`,""]),y.Z=qe},3283:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`#__vconsole {
  --VC-BG-0: #ededed;
  --VC-BG-1: #f7f7f7;
  --VC-BG-2: #fff;
  --VC-BG-3: #f7f7f7;
  --VC-BG-4: #4c4c4c;
  --VC-BG-5: #fff;
  --VC-BG-6: rgba(0, 0, 0, 0.1);
  --VC-FG-0: rgba(0, 0, 0, 0.9);
  --VC-FG-HALF: rgba(0, 0, 0, 0.9);
  --VC-FG-1: rgba(0, 0, 0, 0.5);
  --VC-FG-2: rgba(0, 0, 0, 0.3);
  --VC-FG-3: rgba(0, 0, 0, 0.1);
  --VC-RED: #fa5151;
  --VC-ORANGE: #fa9d3b;
  --VC-YELLOW: #ffc300;
  --VC-GREEN: #91d300;
  --VC-LIGHTGREEN: #95ec69;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1485ee;
  --VC-PURPLE: #6467f0;
  --VC-LINK: #576b95;
  --VC-TEXTGREEN: #06ae56;
  --VC-FG: black;
  --VC-BG: white;
  --VC-BG-COLOR-ACTIVE: #ececec;
  --VC-WARN-BG: #fff3cc;
  --VC-WARN-BORDER: #ffe799;
  --VC-ERROR-BG: #fedcdc;
  --VC-ERROR-BORDER: #fdb9b9;
  --VC-DOM-TAG-NAME-COLOR: #881280;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #994500;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #1a1aa6;
  --VC-CODE-KEY-FG: #881391;
  --VC-CODE-PRIVATE-KEY-FG: #cfa1d3;
  --VC-CODE-FUNC-FG: #0d22aa;
  --VC-CODE-NUMBER-FG: #1c00cf;
  --VC-CODE-STR-FG: #c41a16;
  --VC-CODE-NULL-FG: #808080;
  color: var(--VC-FG-0);
  font-size: 13px;
  font-family: Helvetica Neue, Helvetica, Arial, sans-serif;
  -webkit-user-select: auto;
  /* global */
}
#__vconsole .vc-max-height {
  max-height: 19.23076923em;
}
#__vconsole .vc-max-height-line {
  max-height: 6.30769231em;
}
#__vconsole .vc-min-height {
  min-height: 3.07692308em;
}
#__vconsole dd,
#__vconsole dl,
#__vconsole pre {
  margin: 0;
}
#__vconsole pre {
  white-space: pre-wrap;
}
#__vconsole i {
  font-style: normal;
}
.vc-table {
  height: 100%;
}
.vc-table .vc-table-row {
  line-height: 1.5;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  overflow: hidden;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-table .vc-table-row.vc-left-border {
  border-left: 1px solid var(--VC-FG-3);
}
.vc-table .vc-table-row-icon {
  margin-left: 4px;
}
.vc-table .vc-table-col {
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  padding: 0.23076923em 0.30769231em;
  border-left: 1px solid var(--VC-FG-3);
  overflow: auto;
}
.vc-table .vc-table-col:first-child {
  border: none;
}
.vc-table .vc-table-col-value {
  white-space: pre-wrap;
  word-break: break-word;
  /*white-space: nowrap;
    text-overflow: ellipsis;*/
  -webkit-overflow-scrolling: touch;
}
.vc-table .vc-small .vc-table-col {
  padding: 0 0.30769231em;
  font-size: 0.92307692em;
}
.vc-table .vc-table-col-2 {
  -webkit-box-flex: 2;
  -webkit-flex: 2;
  -moz-box-flex: 2;
  -ms-flex: 2;
  flex: 2;
}
.vc-table .vc-table-col-3 {
  -webkit-box-flex: 3;
  -webkit-flex: 3;
  -moz-box-flex: 3;
  -ms-flex: 3;
  flex: 3;
}
.vc-table .vc-table-col-4 {
  -webkit-box-flex: 4;
  -webkit-flex: 4;
  -moz-box-flex: 4;
  -ms-flex: 4;
  flex: 4;
}
.vc-table .vc-table-col-5 {
  -webkit-box-flex: 5;
  -webkit-flex: 5;
  -moz-box-flex: 5;
  -ms-flex: 5;
  flex: 5;
}
.vc-table .vc-table-col-6 {
  -webkit-box-flex: 6;
  -webkit-flex: 6;
  -moz-box-flex: 6;
  -ms-flex: 6;
  flex: 6;
}
.vc-table .vc-table-row-error {
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
.vc-table .vc-table-row-error .vc-table-col {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
}
.vc-table .vc-table-col-title {
  font-weight: bold;
}
.vc-table .vc-table-action {
  display: flex;
  justify-content: space-evenly;
}
.vc-table .vc-table-action .vc-icon {
  flex: 1;
  text-align: center;
  display: block;
}
.vc-table .vc-table-action .vc-icon:hover {
  background: var(--VC-BG-3);
}
.vc-table .vc-table-action .vc-icon:active {
  background: var(--VC-BG-1);
}
.vc-table .vc-table-input {
  width: 100%;
  border: none;
  color: var(--VC-FG-0);
  background-color: var(--VC-BG-6);
  height: 3.53846154em;
}
.vc-table .vc-table-input:focus {
  background-color: var(--VC-FG-2);
}
@media (prefers-color-scheme: dark) {
  #__vconsole:not([data-theme="light"]) {
    --VC-BG-0: #191919;
    --VC-BG-1: #1f1f1f;
    --VC-BG-2: #232323;
    --VC-BG-3: #2f2f2f;
    --VC-BG-4: #606060;
    --VC-BG-5: #2c2c2c;
    --VC-BG-6: rgba(255, 255, 255, 0.2);
    --VC-FG-0: rgba(255, 255, 255, 0.8);
    --VC-FG-HALF: rgba(255, 255, 255, 0.6);
    --VC-FG-1: rgba(255, 255, 255, 0.5);
    --VC-FG-2: rgba(255, 255, 255, 0.3);
    --VC-FG-3: rgba(255, 255, 255, 0.05);
    --VC-RED: #fa5151;
    --VC-ORANGE: #c87d2f;
    --VC-YELLOW: #cc9c00;
    --VC-GREEN: #74a800;
    --VC-LIGHTGREEN: #28b561;
    --VC-BRAND: #07c160;
    --VC-BLUE: #10aeff;
    --VC-INDIGO: #1196ff;
    --VC-PURPLE: #8183ff;
    --VC-LINK: #7d90a9;
    --VC-TEXTGREEN: #259c5c;
    --VC-FG: white;
    --VC-BG: black;
    --VC-BG-COLOR-ACTIVE: #282828;
    --VC-WARN-BG: #332700;
    --VC-WARN-BORDER: #664e00;
    --VC-ERROR-BG: #321010;
    --VC-ERROR-BORDER: #642020;
    --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
    --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
    --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
    --VC-CODE-KEY-FG: #e36eec;
    --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
    --VC-CODE-FUNC-FG: #556af2;
    --VC-CODE-NUMBER-FG: #9980ff;
    --VC-CODE-STR-FG: #e93f3b;
    --VC-CODE-NULL-FG: #808080;
  }
}
#__vconsole[data-theme="dark"] {
  --VC-BG-0: #191919;
  --VC-BG-1: #1f1f1f;
  --VC-BG-2: #232323;
  --VC-BG-3: #2f2f2f;
  --VC-BG-4: #606060;
  --VC-BG-5: #2c2c2c;
  --VC-BG-6: rgba(255, 255, 255, 0.2);
  --VC-FG-0: rgba(255, 255, 255, 0.8);
  --VC-FG-HALF: rgba(255, 255, 255, 0.6);
  --VC-FG-1: rgba(255, 255, 255, 0.5);
  --VC-FG-2: rgba(255, 255, 255, 0.3);
  --VC-FG-3: rgba(255, 255, 255, 0.05);
  --VC-RED: #fa5151;
  --VC-ORANGE: #c87d2f;
  --VC-YELLOW: #cc9c00;
  --VC-GREEN: #74a800;
  --VC-LIGHTGREEN: #28b561;
  --VC-BRAND: #07c160;
  --VC-BLUE: #10aeff;
  --VC-INDIGO: #1196ff;
  --VC-PURPLE: #8183ff;
  --VC-LINK: #7d90a9;
  --VC-TEXTGREEN: #259c5c;
  --VC-FG: white;
  --VC-BG: black;
  --VC-BG-COLOR-ACTIVE: #282828;
  --VC-WARN-BG: #332700;
  --VC-WARN-BORDER: #664e00;
  --VC-ERROR-BG: #321010;
  --VC-ERROR-BORDER: #642020;
  --VC-DOM-TAG-NAME-COLOR: #5DB0D7;
  --VC-DOM-ATTRIBUTE-NAME-COLOR: #9BBBDC;
  --VC-DOM-ATTRIBUTE-VALUE-COLOR: #f29766;
  --VC-CODE-KEY-FG: #e36eec;
  --VC-CODE-PRIVATE-KEY-FG: #f4c5f7;
  --VC-CODE-FUNC-FG: #556af2;
  --VC-CODE-NUMBER-FG: #9980ff;
  --VC-CODE-STR-FG: #e93f3b;
  --VC-CODE-NULL-FG: #808080;
}
.vc-tabbar {
  border-bottom: 1px solid var(--VC-FG-3);
  overflow-x: auto;
  height: 3em;
  width: auto;
  white-space: nowrap;
}
.vc-tabbar .vc-tab {
  display: inline-block;
  line-height: 3em;
  padding: 0 1.15384615em;
  border-right: 1px solid var(--VC-FG-3);
  text-decoration: none;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.vc-tabbar .vc-tab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-tabbar .vc-tab.vc-actived {
  background-color: var(--VC-BG-1);
}
.vc-toolbar {
  border-top: 1px solid var(--VC-FG-3);
  line-height: 3em;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
}
.vc-toolbar .vc-tool {
  display: none;
  font-style: normal;
  text-decoration: none;
  color: var(--VC-FG-0);
  width: 50%;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  text-align: center;
  position: relative;
  -webkit-touch-callout: none;
}
.vc-toolbar .vc-tool.vc-toggle,
.vc-toolbar .vc-tool.vc-global-tool {
  display: block;
}
.vc-toolbar .vc-tool:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-toolbar .vc-tool:after {
  content: " ";
  position: absolute;
  top: 0.53846154em;
  bottom: 0.53846154em;
  right: 0;
  border-left: 1px solid var(--VC-FG-3);
}
.vc-toolbar .vc-tool-last:after {
  border: none;
}
.vc-topbar {
  background-color: var(--VC-BG-1);
  display: -webkit-box;
  display: -webkit-flex;
  display: -moz-box;
  display: -ms-flexbox;
  display: flex;
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
  -webkit-flex-direction: row;
  -moz-box-orient: horizontal;
  -moz-box-direction: normal;
  -ms-flex-direction: row;
  flex-direction: row;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  width: 100%;
}
.vc-topbar .vc-toptab {
  display: none;
  -webkit-box-flex: 1;
  -webkit-flex: 1;
  -moz-box-flex: 1;
  -ms-flex: 1;
  flex: 1;
  line-height: 2.30769231em;
  padding: 0 1.15384615em;
  border-bottom: 1px solid var(--VC-FG-3);
  text-decoration: none;
  text-align: center;
  color: var(--VC-FG-0);
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
}
.vc-topbar .vc-toptab.vc-toggle {
  display: block;
}
.vc-topbar .vc-toptab:active {
  background-color: rgba(0, 0, 0, 0.15);
}
.vc-topbar .vc-toptab.vc-actived {
  border-bottom: 1px solid var(--VC-INDIGO);
}
.vc-mask {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 10001;
  -webkit-transition: background 0.3s;
  transition: background 0.3s;
  -webkit-tap-highlight-color: transparent;
  overflow-y: scroll;
}
.vc-panel {
  display: none;
  position: fixed;
  min-height: 85%;
  left: 0;
  right: 0;
  bottom: -100%;
  z-index: 10002;
  background-color: var(--VC-BG-0);
  transition: bottom 0.3s;
}
.vc-toggle .vc-switch {
  display: none;
}
.vc-toggle .vc-mask {
  background: rgba(0, 0, 0, 0.6);
  display: block;
}
.vc-toggle .vc-panel {
  bottom: 0;
}
.vc-content {
  background-color: var(--VC-BG-2);
  overflow-x: hidden;
  overflow-y: auto;
  position: absolute;
  top: 3.07692308em;
  left: 0;
  right: 0;
  bottom: 3.07692308em;
  -webkit-overflow-scrolling: touch;
  margin-bottom: constant(safe-area-inset-bottom);
  margin-bottom: env(safe-area-inset-bottom);
}
.vc-content.vc-has-topbar {
  top: 5.46153846em;
}
.vc-plugin-box {
  display: none;
  position: relative;
  min-height: 100%;
}
.vc-plugin-box.vc-fixed-height {
  height: 100%;
}
.vc-plugin-box.vc-actived {
  display: block;
}
.vc-plugin-content {
  display: flex;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  flex-direction: column;
  -webkit-tap-highlight-color: transparent;
}
.vc-plugin-content:empty:before {
  content: "Empty";
  color: var(--VC-FG-1);
  position: absolute;
  top: 45%;
  left: 0;
  right: 0;
  bottom: 0;
  font-size: 1.15384615em;
  text-align: center;
}
.vc-plugin-empty {
  color: var(--VC-FG-1);
  font-size: 1.15384615em;
  height: 100%;
  width: 100%;
  padding: 1.15384615em 0;
  text-align: center;
  display: flex;
  flex-direction: column;
  justify-content: center;
}
@supports (bottom: constant(safe-area-inset-bottom)) or (bottom: env(safe-area-inset-bottom)) {
  .vc-toolbar,
  .vc-switch {
    bottom: constant(safe-area-inset-bottom);
    bottom: env(safe-area-inset-bottom);
  }
}
`,""]),y.Z=qe},7558:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-switch {
  display: block;
  position: fixed;
  right: 0.76923077em;
  bottom: 0.76923077em;
  color: #FFF;
  background-color: var(--VC-BRAND);
  line-height: 1;
  font-size: 1.07692308em;
  padding: 0.61538462em 1.23076923em;
  z-index: 10000;
  border-radius: 0.30769231em;
  box-shadow: 0 0 0.61538462em rgba(0, 0, 0, 0.4);
}
`,""]),y.Z=qe},5670:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`/* color */
.vcelm-node {
  color: var(--VC-DOM-TAG-NAME-COLOR);
}
.vcelm-k {
  color: var(--VC-DOM-ATTRIBUTE-NAME-COLOR);
}
.vcelm-v {
  color: var(--VC-DOM-ATTRIBUTE-VALUE-COLOR);
}
.vcelm-l.vc-actived > .vcelm-node {
  background-color: var(--VC-FG-3);
}
/* layout */
.vcelm-l {
  padding-left: 8px;
  position: relative;
  word-wrap: break-word;
  line-height: 1.2;
}
/*.vcelm-l.vcelm-noc {
  padding-left: 0;
}*/
.vcelm-l .vcelm-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vcelm-l.vcelm-noc .vcelm-node:active {
  background-color: transparent;
}
.vcelm-t {
  white-space: pre-wrap;
  word-wrap: break-word;
}
/* level */
/* arrow */
.vcelm-l:before {
  content: "";
  display: block;
  position: absolute;
  top: 6px;
  left: 3px;
  width: 0;
  height: 0;
  border: transparent solid 3px;
  border-left-color: var(--VC-FG-1);
}
.vcelm-l.vc-toggle:before {
  display: block;
  top: 6px;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vcelm-l.vcelm-noc:before {
  display: none;
}
`,""]),y.Z=qe},3327:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,"",""]),y.Z=qe},1130:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-cmd {
  height: 3.07692308em;
  border-top: 1px solid var(--VC-FG-3);
  display: flex;
  flex-direction: row;
}
.vc-cmd.vc-filter {
  bottom: 0;
}
.vc-cmd-input-wrap {
  display: flex;
  align-items: center;
  flex: 1;
  position: relative;
  height: 2.15384615em;
  padding: 0.46153846em 0.61538462em;
}
.vc-cmd-input {
  width: 100%;
  border: none;
  resize: none;
  outline: none;
  padding: 0;
  font-size: 0.92307692em;
  background-color: transparent;
  color: var(--VC-FG-0);
}
.vc-cmd-input::-webkit-input-placeholder {
  line-height: 2.15384615em;
}
.vc-cmd-btn {
  width: 3.07692308em;
  border: none;
  background-color: var(--VC-BG-0);
  color: var(--VC-FG-0);
  outline: none;
  -webkit-touch-callout: none;
  font-size: 1em;
}
.vc-cmd-clear-btn {
  flex: 1 3.07692308em;
  text-align: center;
  line-height: 3.07692308em;
}
.vc-cmd-btn:active,
.vc-cmd-clear-btn:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-cmd-prompted {
  position: absolute;
  left: 0.46153846em;
  right: 0.46153846em;
  background-color: var(--VC-BG-3);
  border: 1px solid var(--VC-FG-3);
  overflow-x: scroll;
  display: none;
}
.vc-cmd-prompted li {
  list-style: none;
  line-height: 30px;
  padding: 0 0.46153846em;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-cmd-prompted li:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-cmd-prompted-hide {
  text-align: center;
}
`,""]),y.Z=qe},7147:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-log-row {
  margin: 0;
  padding: 0.46153846em 0.61538462em;
  overflow: hidden;
  line-height: 1.3;
  border-bottom: 1px solid var(--VC-FG-3);
  word-break: break-word;
  position: relative;
  display: flex;
}
.vc-log-info {
  color: var(--VC-PURPLE);
}
.vc-log-debug {
  color: var(--VC-YELLOW);
}
.vc-log-warn {
  color: var(--VC-ORANGE);
  border-color: var(--VC-WARN-BORDER);
  background-color: var(--VC-WARN-BG);
}
.vc-log-error {
  color: var(--VC-RED);
  border-color: var(--VC-ERROR-BORDER);
  background-color: var(--VC-ERROR-BG);
}
.vc-logrow-icon {
  margin-left: auto;
}
.vc-log-padding {
  width: 1.53846154em;
  border-left: 1px solid var(--VC-FG-3);
}
.vc-log-group .vc-log-content {
  font-weight: bold;
}
.vc-log-group-toggle {
  padding-left: 0.76923077em;
}
.vc-log-group-toggle {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
.vc-log-group-toggle:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-log-group > .vc-log-group-toggle::before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
.vc-log-group.vc-toggle > .vc-log-group-toggle::before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vc-log-time {
  width: 6.15384615em;
  color: #777;
}
.vc-log-repeat i {
  margin-right: 0.30769231em;
  padding: 0 6.5px;
  color: #D7E0EF;
  background-color: #42597F;
  border-radius: 8.66666667px;
}
.vc-log-error .vc-log-repeat i {
  color: #901818;
  background-color: var(--VC-RED);
}
.vc-log-warn .vc-log-repeat i {
  color: #987D20;
  background-color: #F4BD02;
}
.vc-log-content {
  flex: 1;
}
.vc-log-input,
.vc-log-output {
  padding-left: 0.92307692em;
}
.vc-log-input:before,
.vc-log-output:before {
  content: "›";
  position: absolute;
  top: 0.15384615em;
  left: 0;
  font-size: 1.23076923em;
  color: #6A5ACD;
}
.vc-log-output:before {
  content: "‹";
}
`,""]),y.Z=qe},1237:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-log-tree {
  display: block;
  overflow: auto;
  position: relative;
  -webkit-overflow-scrolling: touch;
}
.vc-log-tree-node {
  display: block;
  font-style: italic;
  padding-left: 0.76923077em;
  position: relative;
}
.vc-log-tree.vc-is-tree > .vc-log-tree-node:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-log-tree.vc-is-tree > .vc-log-tree-node::before {
  content: "";
  position: absolute;
  top: 0.30769231em;
  left: 0.15384615em;
  width: 0;
  height: 0;
  border: transparent solid 0.30769231em;
  border-left-color: var(--VC-FG-1);
}
.vc-log-tree.vc-is-tree.vc-toggle > .vc-log-tree-node::before {
  top: 0.46153846em;
  left: 0;
  border-top-color: var(--VC-FG-1);
  border-left-color: transparent;
}
.vc-log-tree-child {
  margin-left: 0.76923077em;
}
.vc-log-tree-loadmore {
  text-decoration: underline;
  padding-left: 1.84615385em;
  position: relative;
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-tree-loadmore::before {
  content: "››";
  position: absolute;
  top: -0.15384615em;
  left: 0.76923077em;
  font-size: 1.23076923em;
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-tree-loadmore:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
`,""]),y.Z=qe},845:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-log-key {
  color: var(--VC-CODE-KEY-FG);
}
.vc-log-key-private {
  color: var(--VC-CODE-PRIVATE-KEY-FG);
}
.vc-log-val {
  white-space: pre-line;
}
.vc-log-val-function {
  color: var(--VC-CODE-FUNC-FG);
  font-style: italic !important;
}
.vc-log-val-bigint {
  color: var(--VC-CODE-FUNC-FG);
}
.vc-log-val-number,
.vc-log-val-boolean {
  color: var(--VC-CODE-NUMBER-FG);
}
.vc-log-val-string {
  white-space: pre-wrap;
}
.vc-log-val-string.vc-log-val-haskey {
  color: var(--VC-CODE-STR-FG);
  white-space: normal;
}
.vc-log-val-null,
.vc-log-val-undefined,
.vc-log-val-uninvocatable {
  color: var(--VC-CODE-NULL-FG);
}
.vc-log-val-symbol {
  color: var(--VC-CODE-STR-FG);
}
`,""]),y.Z=qe},8747:function(je,y,v){var $e=v(6738),Ge=v.n($e),Ke=v(7705),qe=v.n(Ke)()(Ge());qe.push([je.id,`.vc-group .vc-group-preview {
  -webkit-touch-callout: none;
}
.vc-group .vc-group-preview:active {
  background-color: var(--VC-BG-COLOR-ACTIVE);
}
.vc-group .vc-group-detail {
  display: none;
  padding: 0 0 0.76923077em 1.53846154em;
  border-bottom: 1px solid var(--VC-FG-3);
}
.vc-group.vc-actived .vc-group-detail {
  display: block;
  background-color: var(--VC-BG-1);
}
.vc-group.vc-actived .vc-table-row {
  background-color: var(--VC-BG-2);
}
.vc-group.vc-actived .vc-group-preview {
  background-color: var(--VC-BG-1);
}
`,""]),y.Z=qe},3411:function(je,y,v){var $e=v(3379),Ge=v.n($e),Ke=v(7795),qe=v.n(Ke),Ye=v(569),Je=v.n(Ye),Qe=v(3565),st=v.n(Qe),Mt=v(9216),on=v.n(Mt),sn=v(4589),fn=v.n(sn),hn=v(1130),to={};hn.Z&&hn.Z.locals&&(to.locals=hn.Z.locals);var Xr,co=0,lo={};lo.styleTagTransform=fn(),lo.setAttributes=st(),lo.insert=Je().bind(null,"head"),lo.domAPI=qe(),lo.insertStyleElement=on(),to.use=function(fo){return lo.options=fo||{},co++||(Xr=Ge()(hn.Z,lo)),to},to.unuse=function(){co>0&&!--co&&(Xr(),Xr=null)},y.Z=to},3379:function(je){var y=[];function v(Ke){for(var qe=-1,Ye=0;Ye<y.length;Ye++)if(y[Ye].identifier===Ke){qe=Ye;break}return qe}function $e(Ke,qe){for(var Ye={},Je=[],Qe=0;Qe<Ke.length;Qe++){var st=Ke[Qe],Mt=qe.base?st[0]+qe.base:st[0],on=Ye[Mt]||0,sn="".concat(Mt," ").concat(on);Ye[Mt]=on+1;var fn=v(sn),hn={css:st[1],media:st[2],sourceMap:st[3],supports:st[4],layer:st[5]};if(fn!==-1)y[fn].references++,y[fn].updater(hn);else{var to=Ge(hn,qe);qe.byIndex=Qe,y.splice(Qe,0,{identifier:sn,updater:to,references:1})}Je.push(sn)}return Je}function Ge(Ke,qe){var Ye=qe.domAPI(qe);return Ye.update(Ke),function(Je){if(Je){if(Je.css===Ke.css&&Je.media===Ke.media&&Je.sourceMap===Ke.sourceMap&&Je.supports===Ke.supports&&Je.layer===Ke.layer)return;Ye.update(Ke=Je)}else Ye.remove()}}je.exports=function(Ke,qe){var Ye=$e(Ke=Ke||[],qe=qe||{});return function(Je){Je=Je||[];for(var Qe=0;Qe<Ye.length;Qe++){var st=v(Ye[Qe]);y[st].references--}for(var Mt=$e(Je,qe),on=0;on<Ye.length;on++){var sn=v(Ye[on]);y[sn].references===0&&(y[sn].updater(),y.splice(sn,1))}Ye=Mt}}},569:function(je){var y={};je.exports=function(v,$e){var Ge=function(Ke){if(y[Ke]===void 0){var qe=document.querySelector(Ke);if(window.HTMLIFrameElement&&qe instanceof window.HTMLIFrameElement)try{qe=qe.contentDocument.head}catch{qe=null}y[Ke]=qe}return y[Ke]}(v);if(!Ge)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");Ge.appendChild($e)}},9216:function(je){je.exports=function(y){var v=document.createElement("style");return y.setAttributes(v,y.attributes),y.insert(v,y.options),v}},3565:function(je,y,v){je.exports=function($e){var Ge=v.nc;Ge&&$e.setAttribute("nonce",Ge)}},7795:function(je){je.exports=function(y){var v=y.insertStyleElement(y);return{update:function($e){(function(Ge,Ke,qe){var Ye="";qe.supports&&(Ye+="@supports (".concat(qe.supports,") {")),qe.media&&(Ye+="@media ".concat(qe.media," {"));var Je=qe.layer!==void 0;Je&&(Ye+="@layer".concat(qe.layer.length>0?" ".concat(qe.layer):""," {")),Ye+=qe.css,Je&&(Ye+="}"),qe.media&&(Ye+="}"),qe.supports&&(Ye+="}");var Qe=qe.sourceMap;Qe&&typeof btoa<"u"&&(Ye+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(Qe))))," */")),Ke.styleTagTransform(Ye,Ge,Ke.options)})(v,y,$e)},remove:function(){(function($e){if($e.parentNode===null)return!1;$e.parentNode.removeChild($e)})(v)}}}},4589:function(je){je.exports=function(y,v){if(v.styleSheet)v.styleSheet.cssText=y;else{for(;v.firstChild;)v.removeChild(v.firstChild);v.appendChild(document.createTextNode(y))}}},6464:function(je,y,v){function $e(Ge){if(Ge===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ge}v.d(y,{Z:function(){return $e}})},4296:function(je,y,v){function $e(Ke,qe){for(var Ye=0;Ye<qe.length;Ye++){var Je=qe[Ye];Je.enumerable=Je.enumerable||!1,Je.configurable=!0,"value"in Je&&(Je.writable=!0),Object.defineProperty(Ke,Je.key,Je)}}function Ge(Ke,qe,Ye){return qe&&$e(Ke.prototype,qe),Ye&&$e(Ke,Ye),Object.defineProperty(Ke,"prototype",{writable:!1}),Ke}v.d(y,{Z:function(){return Ge}})},8270:function(je,y,v){function $e(Ge,Ke,qe){return Ke in Ge?Object.defineProperty(Ge,Ke,{value:qe,enumerable:!0,configurable:!0,writable:!0}):Ge[Ke]=qe,Ge}v.d(y,{Z:function(){return $e}})},6881:function(je,y,v){v.d(y,{Z:function(){return Ge}});var $e=v(2717);function Ge(Ke,qe){Ke.prototype=Object.create(qe.prototype),Ke.prototype.constructor=Ke,(0,$e.Z)(Ke,qe)}},2717:function(je,y,v){function $e(Ge,Ke){return $e=Object.setPrototypeOf||function(qe,Ye){return qe.__proto__=Ye,qe},$e(Ge,Ke)}v.d(y,{Z:function(){return $e}})},7003:function(je,y,v){v.d(y,{H3:function(){return $e.H3E},ev:function(){return $e.evW},x:function(){return $e.xa3}});var $e=v(2942)},2942:function(je,y,v){v.d(y,{f_C:function(){return vv},hjT:function(){return Qd},R3I:function(){return Uo},Ljt:function(){return pd},akz:function(){return ap},VnY:function(){return vp},cKT:function(){return gp},gbL:function(){return Cp},FIv:function(){return sn},XGm:function(){return lo},xa3:function(){return mp},YCL:function(){return dp},nuO:function(){return fn},vpE:function(){return Ap},RMB:function(){return od},ogt:function(){return rd},bGB:function(){return fd},cSb:function(){return Od},yl1:function(){return ip},VOJ:function(){return co},u2N:function(){return to},$XI:function(){return on},lig:function(){return Mp},dvw:function(){return bp},S1n:function(){return Zp},$Tr:function(){return mo},sBU:function(){return Ye},oLt:function(){return Md},yef:function(){return Ep},ZTd:function(){return $e},AqN:function(){return Qe},evW:function(){return cp},H3E:function(){return Jd},cly:function(){return jp},AT7:function(){return Fd},j7q:function(){return qe},N8:function(){return Je},rTO:function(){return _d},BmG:function(){return Bd},fxP:function(){return fo},czc:function(){return $d},DhX:function(){return Td},XET:function(){return Ud},LdU:function(){return Mt},bi5:function(){return hd},fLW:function(){return vd},VHj:function(){return jd},Ui:function(){return Dp},etI:function(){return Lp},GQg:function(){return ev},kmG:function(){return Xr}}),v(2717),v(6881);function $e(){}function Ge(Vd){return Vd()}function Ke(){return Object.create(null)}function qe(Vd){Vd.forEach(Ge)}function Ye(Vd){return typeof Vd=="function"}function Je(Vd,Yd){return Vd!=Vd?Yd==Yd:Vd!==Yd||Vd&&typeof Vd=="object"||typeof Vd=="function"}function Qe(Vd,Yd){return Vd!=Vd?Yd==Yd:Vd!==Yd}function st(Vd){return Object.keys(Vd).length===0}function Mt(Vd){if(Vd==null)return $e;for(var Yd=arguments.length,qd=new Array(Yd>1?Yd-1:0),ep=1;ep<Yd;ep++)qd[ep-1]=arguments[ep];var fp=Vd.subscribe.apply(Vd,qd);return fp.unsubscribe?function(){return fp.unsubscribe()}:fp}function on(Vd){var Yd;return Mt(Vd,function(qd){return Yd=qd})(),Yd}function sn(Vd,Yd,qd){Vd.$$.on_destroy.push(Mt(Yd,qd))}function fn(Vd,Yd,qd,ep){if(Vd){var fp=hn(Vd,Yd,qd,ep);return Vd[0](fp)}}function hn(Vd,Yd,qd,ep){return Vd[1]&&ep?function(fp,Op){for(var Wp in Op)fp[Wp]=Op[Wp];return fp}(qd.ctx.slice(),Vd[1](ep(Yd))):qd.ctx}function to(Vd,Yd,qd,ep){if(Vd[2]&&ep){var fp=Vd[2](ep(qd));if(Yd.dirty===void 0)return fp;if(typeof fp=="object"){for(var Op=[],Wp=Math.max(Yd.dirty.length,fp.length),iv=0;iv<Wp;iv+=1)Op[iv]=Yd.dirty[iv]|fp[iv];return Op}return Yd.dirty|fp}return Yd.dirty}function Xr(Vd,Yd,qd,ep,fp,Op){if(fp){var Wp=hn(Yd,qd,ep,Op);Vd.p(Wp,fp)}}function co(Vd){if(Vd.ctx.length>32){for(var Yd=[],qd=Vd.ctx.length/32,ep=0;ep<qd;ep++)Yd[ep]=-1;return Yd}return-1}function lo(Vd){var Yd={};for(var qd in Vd)Yd[qd]=!0;return Yd}function fo(Vd,Yd,qd){return Vd.set(qd),Yd}function Uo(Vd,Yd){Vd.appendChild(Yd)}function mo(Vd,Yd,qd){Vd.insertBefore(Yd,qd||null)}function rd(Vd){Vd.parentNode.removeChild(Vd)}function od(Vd,Yd){for(var qd=0;qd<Vd.length;qd+=1)Vd[qd]&&Vd[qd].d(Yd)}function fd(Vd){return document.createElement(Vd)}function hd(Vd){return document.createElementNS("http://www.w3.org/2000/svg",Vd)}function vd(Vd){return document.createTextNode(Vd)}function Td(){return vd(" ")}function Od(){return vd("")}function Md(Vd,Yd,qd,ep){return Vd.addEventListener(Yd,qd,ep),function(){return Vd.removeEventListener(Yd,qd,ep)}}function Fd(Vd){return function(Yd){return Yd.preventDefault(),Vd.call(this,Yd)}}function Ud(Vd){return function(Yd){return Yd.stopPropagation(),Vd.call(this,Yd)}}function pd(Vd,Yd,qd){qd==null?Vd.removeAttribute(Yd):Vd.getAttribute(Yd)!==qd&&Vd.setAttribute(Yd,qd)}function _d(Vd,Yd){Yd=""+Yd,Vd.wholeText!==Yd&&(Vd.data=Yd)}function Bd(Vd,Yd){Vd.value=Yd??""}function $d(Vd,Yd,qd,ep){qd===null?Vd.style.removeProperty(Yd):Vd.style.setProperty(Yd,qd,ep?"important":"")}function jd(Vd,Yd,qd){Vd.classList[qd?"add":"remove"](Yd)}function Pd(Vd,Yd,qd){qd===void 0&&(qd=!1);var ep=document.createEvent("CustomEvent");return ep.initCustomEvent(Vd,qd,!1,Yd),ep}var yd;function Ld(Vd){yd=Vd}function zd(){if(!yd)throw new Error("Function called outside component initialization");return yd}function Jd(Vd){zd().$$.on_mount.push(Vd)}function cp(Vd){zd().$$.on_destroy.push(Vd)}function mp(){var Vd=zd();return function(Yd,qd){var ep=Vd.$$.callbacks[Yd];if(ep){var fp=Pd(Yd,qd);ep.slice().forEach(function(Op){Op.call(Vd,fp)})}}}function gp(Vd,Yd){var qd=this,ep=Vd.$$.callbacks[Yd.type];ep&&ep.slice().forEach(function(fp){return fp.call(qd,Yd)})}var _p=[],vp=[],wp=[],md=[],Ad=Promise.resolve(),Nd=!1;function Hd(){Nd||(Nd=!0,Ad.then(ip))}function Kd(Vd){wp.push(Vd)}function Qd(Vd){md.push(Vd)}var rp=new Set,np=0;function ip(){var Vd=yd;do{for(;np<_p.length;){var Yd=_p[np];np++,Ld(Yd),Zd(Yd.$$)}for(Ld(null),_p.length=0,np=0;vp.length;)vp.pop()();for(var qd=0;qd<wp.length;qd+=1){var ep=wp[qd];rp.has(ep)||(rp.add(ep),ep())}wp.length=0}while(_p.length);for(;md.length;)md.pop()();Nd=!1,rp.clear(),Ld(Vd)}function Zd(Vd){if(Vd.fragment!==null){Vd.update(),qe(Vd.before_update);var Yd=Vd.dirty;Vd.dirty=[-1],Vd.fragment&&Vd.fragment.p(Vd.ctx,Yd),Vd.after_update.forEach(Kd)}}var sp,yp=new Set;function bp(){sp={r:0,c:[],p:sp}}function Cp(){sp.r||qe(sp.c),sp=sp.p}function Dp(Vd,Yd){Vd&&Vd.i&&(yp.delete(Vd),Vd.i(Yd))}function Lp(Vd,Yd,qd,ep){if(Vd&&Vd.o){if(yp.has(Vd))return;yp.add(Vd),sp.c.push(function(){yp.delete(Vd),ep&&(qd&&Vd.d(1),ep())}),Vd.o(Yd)}}var Mp=typeof window<"u"?window:typeof globalThis<"u"?globalThis:commonjsGlobal;function jp(Vd,Yd){Lp(Vd,1,1,function(){Yd.delete(Vd.key)})}function ev(Vd,Yd,qd,ep,fp,Op,Wp,iv,gv,sv,Vv,Zv){for(var Ev=Vd.length,Cv=Op.length,kv=Ev,Uv={};kv--;)Uv[Vd[kv].key]=kv;var Jv=[],rm=new Map,om=new Map;for(kv=Cv;kv--;){var im=Zv(fp,Op,kv),jv=qd(im),am=Wp.get(jv);am?ep&&am.p(im,Yd):(am=sv(jv,im)).c(),rm.set(jv,Jv[kv]=am),jv in Uv&&om.set(jv,Math.abs(kv-Uv[jv]))}var ym=new Set,zv=new Set;function lm(Xv){Dp(Xv,1),Xv.m(iv,Vv),Wp.set(Xv.key,Xv),Vv=Xv.first,Cv--}for(;Ev&&Cv;){var Fv=Jv[Cv-1],$v=Vd[Ev-1],qv=Fv.key,Kv=$v.key;Fv===$v?(Vv=Fv.first,Ev--,Cv--):rm.has(Kv)?!Wp.has(qv)||ym.has(qv)?lm(Fv):zv.has(Kv)?Ev--:om.get(qv)>om.get(Kv)?(zv.add(qv),lm(Fv)):(ym.add(Kv),Ev--):(gv($v,Wp),Ev--)}for(;Ev--;){var Bv=Vd[Ev];rm.has(Bv.key)||gv(Bv,Wp)}for(;Cv;)lm(Jv[Cv-1]);return Jv}function ap(Vd,Yd,qd){var ep=Vd.$$.props[Yd];ep!==void 0&&(Vd.$$.bound[ep]=qd,qd(Vd.$$.ctx[ep]))}function dp(Vd){Vd&&Vd.c()}function Ep(Vd,Yd,qd,ep){var fp=Vd.$$,Op=fp.fragment,Wp=fp.on_mount,iv=fp.on_destroy,gv=fp.after_update;Op&&Op.m(Yd,qd),ep||Kd(function(){var sv=Wp.map(Ge).filter(Ye);iv?iv.push.apply(iv,sv):qe(sv),Vd.$$.on_mount=[]}),gv.forEach(Kd)}function Ap(Vd,Yd){var qd=Vd.$$;qd.fragment!==null&&(qe(qd.on_destroy),qd.fragment&&qd.fragment.d(Yd),qd.on_destroy=qd.fragment=null,qd.ctx=[])}function Np(Vd,Yd){Vd.$$.dirty[0]===-1&&(_p.push(Vd),Hd(),Vd.$$.dirty.fill(0)),Vd.$$.dirty[Yd/31|0]|=1<<Yd%31}function Zp(Vd,Yd,qd,ep,fp,Op,Wp,iv){iv===void 0&&(iv=[-1]);var gv=yd;Ld(Vd);var sv=Vd.$$={fragment:null,ctx:null,props:Op,update:$e,not_equal:fp,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(Yd.context||(gv?gv.$$.context:[])),callbacks:Ke(),dirty:iv,skip_bound:!1,root:Yd.target||gv.$$.root};Wp&&Wp(sv.root);var Vv,Zv=!1;if(sv.ctx=qd?qd(Vd,Yd.props||{},function(Cv,kv){var Uv=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:kv;return sv.ctx&&fp(sv.ctx[Cv],sv.ctx[Cv]=Uv)&&(!sv.skip_bound&&sv.bound[Cv]&&sv.bound[Cv](Uv),Zv&&Np(Vd,Cv)),kv}):[],sv.update(),Zv=!0,qe(sv.before_update),sv.fragment=!!ep&&ep(sv.ctx),Yd.target){if(Yd.hydrate){var Ev=(Vv=Yd.target,Array.from(Vv.childNodes));sv.fragment&&sv.fragment.l(Ev),Ev.forEach(rd)}else sv.fragment&&sv.fragment.c();Yd.intro&&Dp(Vd.$$.fragment),Ep(Vd,Yd.target,Yd.anchor,Yd.customElement),ip()}Ld(gv)}var vv=function(){function Vd(){}var Yd=Vd.prototype;return Yd.$destroy=function(){Ap(this,1),this.$destroy=$e},Yd.$on=function(qd,ep){var fp=this.$$.callbacks[qd]||(this.$$.callbacks[qd]=[]);return fp.push(ep),function(){var Op=fp.indexOf(ep);Op!==-1&&fp.splice(Op,1)}},Yd.$set=function(qd){this.$$set&&!st(qd)&&(this.$$.skip_bound=!0,this.$$set(qd),this.$$.skip_bound=!1)},Vd}()},3313:function(je,y,v){v.d(y,{U2:function(){return $e.$XI},fZ:function(){return Ye}});var $e=v(2942);function Ge(Je,Qe){var st=typeof Symbol<"u"&&Je[Symbol.iterator]||Je["@@iterator"];if(st)return(st=st.call(Je)).next.bind(st);if(Array.isArray(Je)||(st=function(on,sn){if(on){if(typeof on=="string")return Ke(on,sn);var fn=Object.prototype.toString.call(on).slice(8,-1);if(fn==="Object"&&on.constructor&&(fn=on.constructor.name),fn==="Map"||fn==="Set")return Array.from(on);if(fn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(fn))return Ke(on,sn)}}(Je))||Qe){st&&(Je=st);var Mt=0;return function(){return Mt>=Je.length?{done:!0}:{done:!1,value:Je[Mt++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ke(Je,Qe){(Qe==null||Qe>Je.length)&&(Qe=Je.length);for(var st=0,Mt=new Array(Qe);st<Qe;st++)Mt[st]=Je[st];return Mt}var qe=[];function Ye(Je,Qe){var st;Qe===void 0&&(Qe=$e.ZTd);var Mt=new Set;function on(sn){if((0,$e.N8)(Je,sn)&&(Je=sn,st)){for(var fn,hn=!qe.length,to=Ge(Mt);!(fn=to()).done;){var Xr=fn.value;Xr[1](),qe.push(Xr,Je)}if(hn){for(var co=0;co<qe.length;co+=2)qe[co][0](qe[co+1]);qe.length=0}}}return{set:on,update:function(sn){on(sn(Je))},subscribe:function(sn,fn){fn===void 0&&(fn=$e.ZTd);var hn=[sn,fn];return Mt.add(hn),Mt.size===1&&(st=Qe(on)||$e.ZTd),sn(Je),function(){Mt.delete(hn),Mt.size===0&&(st(),st=null)}}}}}},__webpack_module_cache__={};function __webpack_require__(je){var y=__webpack_module_cache__[je];if(y!==void 0)return y.exports;var v=__webpack_module_cache__[je]={id:je,exports:{}};return __webpack_modules__[je](v,v.exports,__webpack_require__),v.exports}__webpack_require__.n=function(je){var y=je&&je.__esModule?function(){return je.default}:function(){return je};return __webpack_require__.d(y,{a:y}),y},__webpack_require__.d=function(je,y){for(var v in y)__webpack_require__.o(y,v)&&!__webpack_require__.o(je,v)&&Object.defineProperty(je,v,{enumerable:!0,get:y[v]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=function(je,y){return Object.prototype.hasOwnProperty.call(je,y)};var __webpack_exports__={};return function(){__webpack_require__.d(__webpack_exports__,{default:function(){return Qy}}),__webpack_require__(5441),__webpack_require__(8765);var je=__webpack_require__(4296),y=__webpack_require__(5103),v={one:function(cn,an){an===void 0&&(an=document);try{return an.querySelector(cn)||void 0}catch{return}},all:function(cn,an){an===void 0&&(an=document);try{var nn=an.querySelectorAll(cn);return[].slice.call(nn)}catch{return[]}},addClass:function(cn,an){if(cn)for(var nn=(0,y.kJ)(cn)?cn:[cn],rn=0;rn<nn.length;rn++){var un=(nn[rn].className||"").split(" ");un.indexOf(an)>-1||(un.push(an),nn[rn].className=un.join(" "))}},removeClass:function(cn,an){if(cn)for(var nn=(0,y.kJ)(cn)?cn:[cn],rn=0;rn<nn.length;rn++){for(var un=nn[rn].className.split(" "),ln=0;ln<un.length;ln++)un[ln]==an&&(un[ln]="");nn[rn].className=un.join(" ").trim()}},hasClass:function(cn,an){return!(!cn||!cn.classList)&&cn.classList.contains(an)},bind:function(cn,an,nn,rn){rn===void 0&&(rn=!1),cn&&((0,y.kJ)(cn)?cn:[cn]).forEach(function(un){un.addEventListener(an,nn,!!rn)})},delegate:function(cn,an,nn,rn){cn&&cn.addEventListener(an,function(un){var ln=v.all(nn,cn);if(ln)e:for(var uo=0;uo<ln.length;uo++)for(var ho=un.target;ho;){if(ho==ln[uo]){rn.call(ho,un,ho);break e}if((ho=ho.parentNode)==cn)break}},!1)},removeChildren:function(cn){for(;cn.firstChild;)cn.removeChild(cn.lastChild);return cn}},$e=v,Ge=__webpack_require__(6464),Ke=__webpack_require__(6881),qe=__webpack_require__(2942),Ye=__webpack_require__(7003),Je=__webpack_require__(3379),Qe=__webpack_require__.n(Je),st=__webpack_require__(7795),Mt=__webpack_require__.n(st),on=__webpack_require__(569),sn=__webpack_require__.n(on),fn=__webpack_require__(3565),hn=__webpack_require__.n(fn),to=__webpack_require__(9216),Xr=__webpack_require__.n(to),co=__webpack_require__(4589),lo=__webpack_require__.n(co),fo=__webpack_require__(7558),Uo={};fo.Z&&fo.Z.locals&&(Uo.locals=fo.Z.locals);var mo,rd=0,od={};od.styleTagTransform=lo(),od.setAttributes=hn(),od.insert=sn().bind(null,"head"),od.domAPI=Mt(),od.insertStyleElement=Xr(),Uo.use=function(cn){return od.options=cn||{},rd++||(mo=Qe()(fo.Z,od)),Uo},Uo.unuse=function(){rd>0&&!--rd&&(mo(),mo=null)};var fd=Uo;function hd(cn){var an,nn,rn,un;return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.fLW)("vConsole"),(0,qe.Ljt)(an,"class","vc-switch"),(0,qe.czc)(an,"right",cn[2].x+"px"),(0,qe.czc)(an,"bottom",cn[2].y+"px"),(0,qe.czc)(an,"display",cn[0]?"block":"none")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),(0,qe.R3I)(an,nn),cn[8](an),rn||(un=[(0,qe.oLt)(an,"touchstart",cn[3],{passive:!1}),(0,qe.oLt)(an,"touchend",cn[4],{passive:!1}),(0,qe.oLt)(an,"touchmove",cn[5],{passive:!1}),(0,qe.oLt)(an,"click",cn[7])],rn=!0)},p:function(ln,uo){var ho=uo[0];4&ho&&(0,qe.czc)(an,"right",ln[2].x+"px"),4&ho&&(0,qe.czc)(an,"bottom",ln[2].y+"px"),1&ho&&(0,qe.czc)(an,"display",ln[0]?"block":"none")},i:qe.ZTd,o:qe.ZTd,d:function(ln){ln&&(0,qe.ogt)(an),cn[8](null),rn=!1,(0,qe.j7q)(un)}}}function vd(cn,an,nn){var rn,un=an.show,ln=un===void 0||un,uo=an.position,ho=uo===void 0?{x:0,y:0}:uo,Mi={hasMoved:!1,x:0,y:0,startX:0,startY:0,endX:0,endY:0},ld={x:0,y:0};(0,Ye.H3)(function(){fd.use()}),(0,Ye.ev)(function(){fd.unuse()});var dd=function(gd,Wd){var Dd=Sd(gd,Wd);gd=Dd[0],Wd=Dd[1],Mi.x=gd,Mi.y=Wd,nn(2,ld.x=gd,ld),nn(2,ld.y=Wd,ld),y.po("switch_x",gd+""),y.po("switch_y",Wd+"")},Sd=function(gd,Wd){var Dd=Math.max(document.documentElement.offsetWidth,window.innerWidth),Gd=Math.max(document.documentElement.offsetHeight,window.innerHeight);return gd+rn.offsetWidth>Dd&&(gd=Dd-rn.offsetWidth),Wd+rn.offsetHeight>Gd&&(Wd=Gd-rn.offsetHeight),gd<0&&(gd=0),Wd<20&&(Wd=20),[gd,Wd]};return cn.$$set=function(gd){"show"in gd&&nn(0,ln=gd.show),"position"in gd&&nn(6,ho=gd.position)},cn.$$.update=function(){66&cn.$$.dirty&&rn&&dd(ho.x,ho.y)},[ln,rn,ld,function(gd){Mi.startX=gd.touches[0].pageX,Mi.startY=gd.touches[0].pageY,Mi.hasMoved=!1},function(gd){Mi.hasMoved&&(Mi.startX=0,Mi.startY=0,Mi.hasMoved=!1,dd(Mi.endX,Mi.endY))},function(gd){if(!(gd.touches.length<=0)){var Wd=gd.touches[0].pageX-Mi.startX,Dd=gd.touches[0].pageY-Mi.startY,Gd=Math.floor(Mi.x-Wd),Xd=Math.floor(Mi.y-Dd),tp=Sd(Gd,Xd);Gd=tp[0],Xd=tp[1],nn(2,ld.x=Gd,ld),nn(2,ld.y=Xd,ld),Mi.endX=Gd,Mi.endY=Xd,Mi.hasMoved=!0,gd.preventDefault()}},ho,function(gd){qe.cKT.call(this,cn,gd)},function(gd){qe.VnY[gd?"unshift":"push"](function(){nn(1,rn=gd)})}]}var Td=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,vd,hd,qe.N8,{show:0,position:6}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({show:nn}),(0,qe.yl1)()}},{key:"position",get:function(){return this.$$.ctx[6]},set:function(nn){this.$$set({position:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),Od=Td;function Md(cn){var an,nn;return{c:function(){an=(0,qe.bGB)("div"),(0,qe.Ljt)(an,"id",nn="__vc_plug_"+cn[0]),(0,qe.Ljt)(an,"class","vc-plugin-box"),(0,qe.VHj)(an,"vc-fixed-height",cn[1]),(0,qe.VHj)(an,"vc-actived",cn[2])},m:function(rn,un){(0,qe.$Tr)(rn,an,un),cn[6](an)},p:function(rn,un){var ln=un[0];1&ln&&nn!==(nn="__vc_plug_"+rn[0])&&(0,qe.Ljt)(an,"id",nn),2&ln&&(0,qe.VHj)(an,"vc-fixed-height",rn[1]),4&ln&&(0,qe.VHj)(an,"vc-actived",rn[2])},i:qe.ZTd,o:qe.ZTd,d:function(rn){rn&&(0,qe.ogt)(an),cn[6](null)}}}function Fd(cn,an,nn){var rn=an.pluginId,un=rn===void 0?"":rn,ln=an.fixedHeight,uo=ln!==void 0&&ln,ho=an.actived,Mi=ho!==void 0&&ho,ld=an.content,dd=ld===void 0?void 0:ld,Sd=void 0,gd=void 0;return cn.$$set=function(Wd){"pluginId"in Wd&&nn(0,un=Wd.pluginId),"fixedHeight"in Wd&&nn(1,uo=Wd.fixedHeight),"actived"in Wd&&nn(2,Mi=Wd.actived),"content"in Wd&&nn(4,dd=Wd.content)},cn.$$.update=function(){57&cn.$$.dirty&&gd!==un&&dd&&Sd&&(nn(5,gd=un),nn(3,Sd.innerHTML="",Sd),(0,y.HD)(dd)?nn(3,Sd.innerHTML=dd,Sd):(0,y.kK)(dd)&&Sd.appendChild(dd))},[un,uo,Mi,Sd,dd,gd,function(Wd){qe.VnY[Wd?"unshift":"push"](function(){nn(3,Sd=Wd),nn(5,gd),nn(0,un),nn(4,dd)})}]}var Ud=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Fd,Md,qe.N8,{pluginId:0,fixedHeight:1,actived:2,content:4}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"pluginId",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({pluginId:nn}),(0,qe.yl1)()}},{key:"fixedHeight",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({fixedHeight:nn}),(0,qe.yl1)()}},{key:"actived",get:function(){return this.$$.ctx[2]},set:function(nn){this.$$set({actived:nn}),(0,qe.yl1)()}},{key:"content",get:function(){return this.$$.ctx[4]},set:function(nn){this.$$set({content:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),pd=Ud,_d=__webpack_require__(4687),Bd=__webpack_require__(3283),$d={};Bd.Z&&Bd.Z.locals&&($d.locals=Bd.Z.locals);var jd,Pd=0,yd={};yd.styleTagTransform=lo(),yd.setAttributes=hn(),yd.insert=sn().bind(null,"head"),yd.domAPI=Mt(),yd.insertStyleElement=Xr(),$d.use=function(cn){return yd.options=cn||{},Pd++||(jd=Qe()(Bd.Z,yd)),$d},$d.unuse=function(){Pd>0&&!--Pd&&(jd(),jd=null)};var Ld=$d;function zd(cn,an,nn){var rn=cn.slice();return rn[39]=an[nn][0],rn[40]=an[nn][1],rn}function Jd(cn,an,nn){var rn=cn.slice();return rn[43]=an[nn],rn[45]=nn,rn}function cp(cn,an,nn){var rn=cn.slice();return rn[39]=an[nn][0],rn[40]=an[nn][1],rn}function mp(cn,an,nn){var rn=cn.slice();return rn[39]=an[nn][0],rn[40]=an[nn][1],rn}function gp(cn,an,nn){var rn=cn.slice();return rn[43]=an[nn],rn[45]=nn,rn}function _p(cn,an,nn){var rn=cn.slice();return rn[39]=an[nn][0],rn[40]=an[nn][1],rn}function vp(cn){var an,nn,rn,un,ln,uo=cn[40].name+"";function ho(){return cn[25](cn[40])}return{c:function(){an=(0,qe.bGB)("a"),nn=(0,qe.fLW)(uo),(0,qe.Ljt)(an,"class","vc-tab"),(0,qe.Ljt)(an,"id",rn="__vc_tab_"+cn[40].id),(0,qe.VHj)(an,"vc-actived",cn[40].id===cn[2])},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.R3I)(an,nn),un||(ln=(0,qe.oLt)(an,"click",ho),un=!0)},p:function(Mi,ld){cn=Mi,8&ld[0]&&uo!==(uo=cn[40].name+"")&&(0,qe.rTO)(nn,uo),8&ld[0]&&rn!==(rn="__vc_tab_"+cn[40].id)&&(0,qe.Ljt)(an,"id",rn),12&ld[0]&&(0,qe.VHj)(an,"vc-actived",cn[40].id===cn[2])},d:function(Mi){Mi&&(0,qe.ogt)(an),un=!1,ln()}}}function wp(cn){var an,nn=cn[40].hasTabPanel&&vp(cn);return{c:function(){nn&&nn.c(),an=(0,qe.cSb)()},m:function(rn,un){nn&&nn.m(rn,un),(0,qe.$Tr)(rn,an,un)},p:function(rn,un){rn[40].hasTabPanel?nn?nn.p(rn,un):((nn=vp(rn)).c(),nn.m(an.parentNode,an)):nn&&(nn.d(1),nn=null)},d:function(rn){nn&&nn.d(rn),rn&&(0,qe.ogt)(an)}}}function md(cn){var an,nn,rn,un,ln,uo=cn[43].name+"";function ho(){for(var Mi,ld=arguments.length,dd=new Array(ld),Sd=0;Sd<ld;Sd++)dd[Sd]=arguments[Sd];return(Mi=cn)[26].apply(Mi,[cn[40],cn[45]].concat(dd))}return{c:function(){an=(0,qe.bGB)("i"),nn=(0,qe.fLW)(uo),(0,qe.Ljt)(an,"class",rn="vc-toptab vc-topbar-"+cn[40].id+" "+cn[43].className),(0,qe.VHj)(an,"vc-toggle",cn[40].id===cn[2]),(0,qe.VHj)(an,"vc-actived",cn[43].actived)},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.R3I)(an,nn),un||(ln=(0,qe.oLt)(an,"click",ho),un=!0)},p:function(Mi,ld){cn=Mi,8&ld[0]&&uo!==(uo=cn[43].name+"")&&(0,qe.rTO)(nn,uo),8&ld[0]&&rn!==(rn="vc-toptab vc-topbar-"+cn[40].id+" "+cn[43].className)&&(0,qe.Ljt)(an,"class",rn),12&ld[0]&&(0,qe.VHj)(an,"vc-toggle",cn[40].id===cn[2]),8&ld[0]&&(0,qe.VHj)(an,"vc-actived",cn[43].actived)},d:function(Mi){Mi&&(0,qe.ogt)(an),un=!1,ln()}}}function Ad(cn){for(var an,nn=cn[40].topbarList,rn=[],un=0;un<nn.length;un+=1)rn[un]=md(gp(cn,nn,un));return{c:function(){for(var ln=0;ln<rn.length;ln+=1)rn[ln].c();an=(0,qe.cSb)()},m:function(ln,uo){for(var ho=0;ho<rn.length;ho+=1)rn[ho].m(ln,uo);(0,qe.$Tr)(ln,an,uo)},p:function(ln,uo){if(8204&uo[0]){var ho;for(nn=ln[40].topbarList,ho=0;ho<nn.length;ho+=1){var Mi=gp(ln,nn,ho);rn[ho]?rn[ho].p(Mi,uo):(rn[ho]=md(Mi),rn[ho].c(),rn[ho].m(an.parentNode,an))}for(;ho<rn.length;ho+=1)rn[ho].d(1);rn.length=nn.length}},d:function(ln){(0,qe.RMB)(rn,ln),ln&&(0,qe.ogt)(an)}}}function Nd(cn){var an,nn,rn,un=pd;function ln(uo){var ho;return{props:{pluginId:uo[40].id,fixedHeight:(ho=uo[40].tabOptions)==null?void 0:ho.fixedHeight,actived:uo[40].id===uo[2],content:uo[40].content}}}return un&&(an=new un(ln(cn))),{c:function(){an&&(0,qe.YCL)(an.$$.fragment),nn=(0,qe.cSb)()},m:function(uo,ho){an&&(0,qe.yef)(an,uo,ho),(0,qe.$Tr)(uo,nn,ho),rn=!0},p:function(uo,ho){var Mi,ld={};if(8&ho[0]&&(ld.pluginId=uo[40].id),8&ho[0]&&(ld.fixedHeight=(Mi=uo[40].tabOptions)==null?void 0:Mi.fixedHeight),12&ho[0]&&(ld.actived=uo[40].id===uo[2]),8&ho[0]&&(ld.content=uo[40].content),un!==(un=pd)){if(an){(0,qe.dvw)();var dd=an;(0,qe.etI)(dd.$$.fragment,1,0,function(){(0,qe.vpE)(dd,1)}),(0,qe.gbL)()}un?(an=new un(ln(uo)),(0,qe.YCL)(an.$$.fragment),(0,qe.Ui)(an.$$.fragment,1),(0,qe.yef)(an,nn.parentNode,nn)):an=null}else un&&an.$set(ld)},i:function(uo){rn||(an&&(0,qe.Ui)(an.$$.fragment,uo),rn=!0)},o:function(uo){an&&(0,qe.etI)(an.$$.fragment,uo),rn=!1},d:function(uo){uo&&(0,qe.ogt)(nn),an&&(0,qe.vpE)(an,uo)}}}function Hd(cn){var an,nn,rn,un,ln,uo=cn[43].name+"";function ho(){for(var Mi,ld=arguments.length,dd=new Array(ld),Sd=0;Sd<ld;Sd++)dd[Sd]=arguments[Sd];return(Mi=cn)[28].apply(Mi,[cn[40],cn[45]].concat(dd))}return{c:function(){an=(0,qe.bGB)("i"),nn=(0,qe.fLW)(uo),(0,qe.Ljt)(an,"class",rn="vc-tool vc-tool-"+cn[40].id),(0,qe.VHj)(an,"vc-global-tool",cn[43].global),(0,qe.VHj)(an,"vc-toggle",cn[40].id===cn[2])},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.R3I)(an,nn),un||(ln=(0,qe.oLt)(an,"click",ho),un=!0)},p:function(Mi,ld){cn=Mi,8&ld[0]&&uo!==(uo=cn[43].name+"")&&(0,qe.rTO)(nn,uo),8&ld[0]&&rn!==(rn="vc-tool vc-tool-"+cn[40].id)&&(0,qe.Ljt)(an,"class",rn),8&ld[0]&&(0,qe.VHj)(an,"vc-global-tool",cn[43].global),12&ld[0]&&(0,qe.VHj)(an,"vc-toggle",cn[40].id===cn[2])},d:function(Mi){Mi&&(0,qe.ogt)(an),un=!1,ln()}}}function Kd(cn){for(var an,nn=cn[40].toolbarList,rn=[],un=0;un<nn.length;un+=1)rn[un]=Hd(Jd(cn,nn,un));return{c:function(){for(var ln=0;ln<rn.length;ln+=1)rn[ln].c();an=(0,qe.cSb)()},m:function(ln,uo){for(var ho=0;ho<rn.length;ho+=1)rn[ho].m(ln,uo);(0,qe.$Tr)(ln,an,uo)},p:function(ln,uo){if(16396&uo[0]){var ho;for(nn=ln[40].toolbarList,ho=0;ho<nn.length;ho+=1){var Mi=Jd(ln,nn,ho);rn[ho]?rn[ho].p(Mi,uo):(rn[ho]=Hd(Mi),rn[ho].c(),rn[ho].m(an.parentNode,an))}for(;ho<rn.length;ho+=1)rn[ho].d(1);rn.length=nn.length}},d:function(ln){(0,qe.RMB)(rn,ln),ln&&(0,qe.ogt)(an)}}}function Qd(cn){var an,nn,rn,un,ln,uo,ho,Mi,ld,dd,Sd,gd,Wd,Dd,Gd,Xd,tp,op,lp,Pp,Ip;function Gp(Rp){cn[23](Rp)}function zp(Rp){cn[24](Rp)}var Kp={};cn[0]!==void 0&&(Kp.show=cn[0]),cn[1]!==void 0&&(Kp.position=cn[1]),nn=new Od({props:Kp}),qe.VnY.push(function(){return(0,qe.akz)(nn,"show",Gp)}),qe.VnY.push(function(){return(0,qe.akz)(nn,"position",zp)}),nn.$on("click",cn[10]);for(var kp=Object.entries(cn[3]),Sp=[],Xp=0;Xp<kp.length;Xp+=1)Sp[Xp]=wp(_p(cn,kp,Xp));for(var fv=Object.entries(cn[3]),Yp=[],qp=0;qp<fv.length;qp+=1)Yp[qp]=Ad(mp(cn,fv,qp));for(var Fp=Object.entries(cn[3]),hp=[],xp=0;xp<Fp.length;xp+=1)hp[xp]=Nd(cp(cn,Fp,xp));for(var Qp=function(Rp){return(0,qe.etI)(hp[Rp],1,1,function(){hp[Rp]=null})},up=Object.entries(cn[3]),Tp=[],$p=0;$p<up.length;$p+=1)Tp[$p]=Kd(zd(cn,up,$p));return{c:function(){var Rp,Hp;an=(0,qe.bGB)("div"),(0,qe.YCL)(nn.$$.fragment),ln=(0,qe.DhX)(),uo=(0,qe.bGB)("div"),ho=(0,qe.DhX)(),Mi=(0,qe.bGB)("div"),ld=(0,qe.bGB)("div");for(var av=0;av<Sp.length;av+=1)Sp[av].c();dd=(0,qe.DhX)(),Sd=(0,qe.bGB)("div");for(var cv=0;cv<Yp.length;cv+=1)Yp[cv].c();gd=(0,qe.DhX)(),Wd=(0,qe.bGB)("div");for(var dv=0;dv<hp.length;dv+=1)hp[dv].c();Dd=(0,qe.DhX)(),Gd=(0,qe.bGB)("div");for(var tv=0;tv<Tp.length;tv+=1)Tp[tv].c();Xd=(0,qe.DhX)(),(tp=(0,qe.bGB)("i")).textContent="Hide",(0,qe.Ljt)(uo,"class","vc-mask"),(0,qe.czc)(uo,"display",cn[8]?"block":"none"),(0,qe.Ljt)(ld,"class","vc-tabbar"),(0,qe.Ljt)(Sd,"class","vc-topbar"),(0,qe.Ljt)(Wd,"class","vc-content"),(0,qe.VHj)(Wd,"vc-has-topbar",((Rp=cn[3][cn[2]])==null||(Hp=Rp.topbarList)==null?void 0:Hp.length)>0),(0,qe.Ljt)(tp,"class","vc-tool vc-global-tool vc-tool-last vc-hide"),(0,qe.Ljt)(Gd,"class","vc-toolbar"),(0,qe.Ljt)(Mi,"class","vc-panel"),(0,qe.czc)(Mi,"display",cn[7]?"block":"none"),(0,qe.Ljt)(an,"id","__vconsole"),(0,qe.Ljt)(an,"style",op=cn[5]?"font-size:"+cn[5]+";":""),(0,qe.Ljt)(an,"data-theme",cn[4]),(0,qe.VHj)(an,"vc-toggle",cn[6])},m:function(Rp,Hp){(0,qe.$Tr)(Rp,an,Hp),(0,qe.yef)(nn,an,null),(0,qe.R3I)(an,ln),(0,qe.R3I)(an,uo),(0,qe.R3I)(an,ho),(0,qe.R3I)(an,Mi),(0,qe.R3I)(Mi,ld);for(var av=0;av<Sp.length;av+=1)Sp[av].m(ld,null);(0,qe.R3I)(Mi,dd),(0,qe.R3I)(Mi,Sd);for(var cv=0;cv<Yp.length;cv+=1)Yp[cv].m(Sd,null);(0,qe.R3I)(Mi,gd),(0,qe.R3I)(Mi,Wd);for(var dv=0;dv<hp.length;dv+=1)hp[dv].m(Wd,null);cn[27](Wd),(0,qe.R3I)(Mi,Dd),(0,qe.R3I)(Mi,Gd);for(var tv=0;tv<Tp.length;tv+=1)Tp[tv].m(Gd,null);(0,qe.R3I)(Gd,Xd),(0,qe.R3I)(Gd,tp),lp=!0,Pp||(Ip=[(0,qe.oLt)(uo,"click",cn[11]),(0,qe.oLt)(Wd,"touchstart",cn[15]),(0,qe.oLt)(Wd,"touchmove",cn[16]),(0,qe.oLt)(Wd,"touchend",cn[17]),(0,qe.oLt)(Wd,"scroll",cn[18]),(0,qe.oLt)(tp,"click",cn[11]),(0,qe.oLt)(an,"touchstart",cn[19].touchStart,{passive:!1,capture:!0}),(0,qe.oLt)(an,"touchmove",cn[19].touchMove,{passive:!1,capture:!0}),(0,qe.oLt)(an,"touchend",cn[19].touchEnd,{passive:!1,capture:!0})],Pp=!0)},p:function(Rp,Hp){var av,cv,dv={};if(!rn&&1&Hp[0]&&(rn=!0,dv.show=Rp[0],(0,qe.hjT)(function(){return rn=!1})),!un&&2&Hp[0]&&(un=!0,dv.position=Rp[1],(0,qe.hjT)(function(){return un=!1})),nn.$set(dv),(!lp||256&Hp[0])&&(0,qe.czc)(uo,"display",Rp[8]?"block":"none"),4108&Hp[0]){var tv;for(kp=Object.entries(Rp[3]),tv=0;tv<kp.length;tv+=1){var Sv=_p(Rp,kp,tv);Sp[tv]?Sp[tv].p(Sv,Hp):(Sp[tv]=wp(Sv),Sp[tv].c(),Sp[tv].m(ld,null))}for(;tv<Sp.length;tv+=1)Sp[tv].d(1);Sp.length=kp.length}if(8204&Hp[0]){var pv;for(fv=Object.entries(Rp[3]),pv=0;pv<fv.length;pv+=1){var Av=mp(Rp,fv,pv);Yp[pv]?Yp[pv].p(Av,Hp):(Yp[pv]=Ad(Av),Yp[pv].c(),Yp[pv].m(Sd,null))}for(;pv<Yp.length;pv+=1)Yp[pv].d(1);Yp.length=fv.length}if(12&Hp[0]){var uv;for(Fp=Object.entries(Rp[3]),uv=0;uv<Fp.length;uv+=1){var Pv=cp(Rp,Fp,uv);hp[uv]?(hp[uv].p(Pv,Hp),(0,qe.Ui)(hp[uv],1)):(hp[uv]=Nd(Pv),hp[uv].c(),(0,qe.Ui)(hp[uv],1),hp[uv].m(Wd,null))}for((0,qe.dvw)(),uv=Fp.length;uv<hp.length;uv+=1)Qp(uv);(0,qe.gbL)()}if(12&Hp[0]&&(0,qe.VHj)(Wd,"vc-has-topbar",((av=Rp[3][Rp[2]])==null||(cv=av.topbarList)==null?void 0:cv.length)>0),16396&Hp[0]){var hv;for(up=Object.entries(Rp[3]),hv=0;hv<up.length;hv+=1){var Wv=zd(Rp,up,hv);Tp[hv]?Tp[hv].p(Wv,Hp):(Tp[hv]=Kd(Wv),Tp[hv].c(),Tp[hv].m(Gd,Xd))}for(;hv<Tp.length;hv+=1)Tp[hv].d(1);Tp.length=up.length}(!lp||128&Hp[0])&&(0,qe.czc)(Mi,"display",Rp[7]?"block":"none"),(!lp||32&Hp[0]&&op!==(op=Rp[5]?"font-size:"+Rp[5]+";":""))&&(0,qe.Ljt)(an,"style",op),(!lp||16&Hp[0])&&(0,qe.Ljt)(an,"data-theme",Rp[4]),64&Hp[0]&&(0,qe.VHj)(an,"vc-toggle",Rp[6])},i:function(Rp){if(!lp){(0,qe.Ui)(nn.$$.fragment,Rp);for(var Hp=0;Hp<Fp.length;Hp+=1)(0,qe.Ui)(hp[Hp]);lp=!0}},o:function(Rp){(0,qe.etI)(nn.$$.fragment,Rp),hp=hp.filter(Boolean);for(var Hp=0;Hp<hp.length;Hp+=1)(0,qe.etI)(hp[Hp]);lp=!1},d:function(Rp){Rp&&(0,qe.ogt)(an),(0,qe.vpE)(nn),(0,qe.RMB)(Sp,Rp),(0,qe.RMB)(Yp,Rp),(0,qe.RMB)(hp,Rp),cn[27](null),(0,qe.RMB)(Tp,Rp),Pp=!1,(0,qe.j7q)(Ip)}}}function rp(cn,an,nn){var rn,un,ln=an.theme,uo=ln===void 0?"":ln,ho=an.disableScrolling,Mi=ho!==void 0&&ho,ld=an.show,dd=ld!==void 0&&ld,Sd=an.showSwitchButton,gd=Sd===void 0||Sd,Wd=an.switchButtonPosition,Dd=Wd===void 0?{x:0,y:0}:Wd,Gd=an.activedPluginId,Xd=Gd===void 0?"":Gd,tp=an.pluginList,op=tp===void 0?{}:tp,lp=(0,Ye.x)(),Pp=!1,Ip="",Gp=!1,zp=!1,Kp=!1,kp=!0,Sp=0,Xp=null,fv={};(0,Ye.H3)(function(){var up=document.querySelectorAll('[name="viewport"]');if(up&&up[0]){var Tp=(up[up.length-1].getAttribute("content")||"").match(/initial\-scale\=\d+(\.\d+)?/),$p=Tp?parseFloat(Tp[0].split("=")[1]):1;$p!==1&&nn(5,Ip=Math.floor(1/$p*13)+"px")}Ld.use&&Ld.use(),rn=_d.x.subscribe(function(Rp){dd&&Sp!==Rp.updateTime&&(Sp=Rp.updateTime,Yp())})}),(0,Ye.ev)(function(){Ld.unuse&&Ld.unuse(),rn&&rn()});var Yp=function(){!Mi&&kp&&un&&nn(9,un.scrollTop=un.scrollHeight-un.offsetHeight,un)},qp=function(up){up!==Xd&&(nn(2,Xd=up),lp("changePanel",{pluginId:up}),setTimeout(function(){un&&nn(9,un.scrollTop=fv[Xd]||0,un)},0))},Fp=function(up,Tp,$p){var Rp=op[Tp].topbarList[$p],Hp=!0;if(y.mf(Rp.onClick)&&(Hp=Rp.onClick.call(up.target,up,Rp.data)),Hp!==!1){for(var av=0;av<op[Tp].topbarList.length;av++)nn(3,op[Tp].topbarList[av].actived=$p===av,op);nn(3,op)}},hp=function(up,Tp,$p){var Rp=op[Tp].toolbarList[$p];y.mf(Rp.onClick)&&Rp.onClick.call(up.target,up,Rp.data)},xp={tapTime:700,tapBoundary:10,lastTouchStartTime:0,touchstartX:0,touchstartY:0,touchHasMoved:!1,targetElem:null},Qp={touchStart:function(up){if(xp.lastTouchStartTime===0){var Tp=up.targetTouches[0];xp.touchstartX=Tp.pageX,xp.touchstartY=Tp.pageY,xp.lastTouchStartTime=up.timeStamp,xp.targetElem=up.target.nodeType===Node.TEXT_NODE?up.target.parentNode:up.target}},touchMove:function(up){var Tp=up.changedTouches[0];(Math.abs(Tp.pageX-xp.touchstartX)>xp.tapBoundary||Math.abs(Tp.pageY-xp.touchstartY)>xp.tapBoundary)&&(xp.touchHasMoved=!0)},touchEnd:function(up){if(xp.touchHasMoved===!1&&up.timeStamp-xp.lastTouchStartTime<xp.tapTime&&xp.targetElem!=null){var Tp=!1;switch(xp.targetElem.tagName.toLowerCase()){case"textarea":Tp=!0;break;case"select":Tp=!xp.targetElem.disabled&&!xp.targetElem.readOnly;break;case"input":switch(xp.targetElem.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":Tp=!1;break;default:Tp=!xp.targetElem.disabled&&!xp.targetElem.readOnly}}Tp?xp.targetElem.focus():up.preventDefault();var $p=up.changedTouches[0],Rp=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:$p.screenX,screenY:$p.screenY,clientX:$p.clientX,clientY:$p.clientY});xp.targetElem.dispatchEvent(Rp)}xp.lastTouchStartTime=0,xp.touchHasMoved=!1,xp.targetElem=null}};return cn.$$set=function(up){"theme"in up&&nn(4,uo=up.theme),"disableScrolling"in up&&nn(20,Mi=up.disableScrolling),"show"in up&&nn(21,dd=up.show),"showSwitchButton"in up&&nn(0,gd=up.showSwitchButton),"switchButtonPosition"in up&&nn(1,Dd=up.switchButtonPosition),"activedPluginId"in up&&nn(2,Xd=up.activedPluginId),"pluginList"in up&&nn(3,op=up.pluginList)},cn.$$.update=function(){6291456&cn.$$.dirty[0]&&(dd===!0?(nn(7,zp=!0),nn(8,Kp=!0),Xp&&clearTimeout(Xp),nn(22,Xp=setTimeout(function(){nn(6,Gp=!0),Yp()},10))):(nn(6,Gp=!1),Xp&&clearTimeout(Xp),nn(22,Xp=setTimeout(function(){nn(7,zp=!1),nn(8,Kp=!1)},330))))},[gd,Dd,Xd,op,uo,Ip,Gp,zp,Kp,un,function(up){lp("show",{show:!0})},function(up){lp("show",{show:!1})},qp,Fp,hp,function(up){if(!(up.target.tagName==="INPUT"||up.target.tagName==="TEXTAREA")){var Tp=!1;if(typeof window.getComputedStyle=="function"){var $p=window.getComputedStyle(up.target);$p.overflow!=="auto"&&$p.overflow!=="initial"&&$p.overflow!=="scroll"||(Tp=!0)}if(!Tp){var Rp=un.scrollTop,Hp=un.scrollHeight,av=Rp+un.offsetHeight;Rp===0?(nn(9,un.scrollTop=1,un),un.scrollTop===0&&(Pp=!0)):av===Hp&&(nn(9,un.scrollTop=Rp-1,un),un.scrollTop===Rp&&(Pp=!0))}}},function(up){Pp&&up.preventDefault()},function(up){Pp=!1},function(up){dd&&(kp=un.scrollTop+un.offsetHeight>=un.scrollHeight-50,fv[Xd]=un.scrollTop)},Qp,Mi,dd,Xp,function(up){nn(0,gd=up)},function(up){nn(1,Dd=up)},function(up){return qp(up.id)},function(up,Tp,$p){return Fp($p,up.id,Tp)},function(up){qe.VnY[up?"unshift":"push"](function(){nn(9,un=up)})},function(up,Tp,$p){return hp($p,up.id,Tp)}]}var np=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,rp,Qd,qe.N8,{theme:4,disableScrolling:20,show:21,showSwitchButton:0,switchButtonPosition:1,activedPluginId:2,pluginList:3},null,[-1,-1]),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"theme",get:function(){return this.$$.ctx[4]},set:function(nn){this.$$set({theme:nn}),(0,qe.yl1)()}},{key:"disableScrolling",get:function(){return this.$$.ctx[20]},set:function(nn){this.$$set({disableScrolling:nn}),(0,qe.yl1)()}},{key:"show",get:function(){return this.$$.ctx[21]},set:function(nn){this.$$set({show:nn}),(0,qe.yl1)()}},{key:"showSwitchButton",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({showSwitchButton:nn}),(0,qe.yl1)()}},{key:"switchButtonPosition",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({switchButtonPosition:nn}),(0,qe.yl1)()}},{key:"activedPluginId",get:function(){return this.$$.ctx[2]},set:function(nn){this.$$set({activedPluginId:nn}),(0,qe.yl1)()}},{key:"pluginList",get:function(){return this.$$.ctx[3]},set:function(nn){this.$$set({pluginList:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),ip=np,Zd=function(){function cn(nn,rn){rn===void 0&&(rn="newPlugin"),this.isReady=!1,this.eventMap=new Map,this.exporter=void 0,this._id=void 0,this._name=void 0,this._vConsole=void 0,this.id=nn,this.name=rn,this.isReady=!1}var an=cn.prototype;return an.on=function(nn,rn){return this.eventMap.set(nn,rn),this},an.onRemove=function(){this.unbindExporter()},an.trigger=function(nn,rn){var un=this.eventMap.get(nn);if(typeof un=="function")un.call(this,rn);else{var ln="on"+nn.charAt(0).toUpperCase()+nn.slice(1);typeof this[ln]=="function"&&this[ln].call(this,rn)}return this},an.bindExporter=function(){if(this._vConsole&&this.exporter){var nn=this.id==="default"?"log":this.id;this._vConsole[nn]=this.exporter}},an.unbindExporter=function(){var nn=this.id==="default"?"log":this.id;this._vConsole&&this._vConsole[nn]&&(this._vConsole[nn]=void 0)},an.getUniqueID=function(nn){return nn===void 0&&(nn=""),(0,y.QI)(nn)},(0,je.Z)(cn,[{key:"id",get:function(){return this._id},set:function(nn){if(typeof nn!="string")throw"[vConsole] Plugin ID must be a string.";if(!nn)throw"[vConsole] Plugin ID cannot be empty.";this._id=nn.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(nn){if(typeof nn!="string")throw"[vConsole] Plugin name must be a string.";if(!nn)throw"[vConsole] Plugin name cannot be empty.";this._name=nn}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(nn){if(!nn)throw"[vConsole] vConsole cannot be empty";this._vConsole=nn,this.bindExporter()}}]),cn}(),sp=function(cn){function an(rn,un,ln,uo){var ho;return(ho=cn.call(this,rn,un)||this).CompClass=void 0,ho.compInstance=void 0,ho.initialProps=void 0,ho.CompClass=ln,ho.initialProps=uo,ho}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onReady=function(){this.isReady=!0},nn.onRenderTab=function(rn){var un=document.createElement("div"),ln=this.compInstance=new this.CompClass({target:un,props:this.initialProps});rn(un.firstElementChild,ln.options)},nn.onRemove=function(){cn.prototype.onRemove&&cn.prototype.onRemove.call(this),this.compInstance&&this.compInstance.$destroy()},an}(Zd),yp=__webpack_require__(8665),bp=__webpack_require__(9923),Cp=__webpack_require__(8702);function Dp(cn){var an,nn;return(an=new Cp.Z({props:{name:cn[0]?"success":"copy"}})).$on("click",cn[1]),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};1&un[0]&&(ln.name=rn[0]?"success":"copy"),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function Lp(cn,an,nn){var rn=an.content,un=rn===void 0?"":rn,ln=an.handler,uo=ln===void 0?void 0:ln,ho={target:document.documentElement},Mi=!1;return cn.$$set=function(ld){"content"in ld&&nn(2,un=ld.content),"handler"in ld&&nn(3,uo=ld.handler)},[Mi,function(ld){(function(dd,Sd){var gd=(Sd===void 0?{}:Sd).target,Wd=gd===void 0?document.body:gd,Dd=document.createElement("textarea"),Gd=document.activeElement;Dd.value=dd,Dd.setAttribute("readonly",""),Dd.style.contain="strict",Dd.style.position="absolute",Dd.style.left="-9999px",Dd.style.fontSize="12pt";var Xd=document.getSelection(),tp=!1;Xd.rangeCount>0&&(tp=Xd.getRangeAt(0)),Wd.append(Dd),Dd.select(),Dd.selectionStart=0,Dd.selectionEnd=dd.length;var op=!1;try{op=document.execCommand("copy")}catch{}Dd.remove(),tp&&(Xd.removeAllRanges(),Xd.addRange(tp)),Gd&&Gd.focus()})(y.mf(uo)?uo(un)||"":y.Kn(un)||y.kJ(un)?y.hZ(un,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}):un,ho),nn(0,Mi=!0),setTimeout(function(){nn(0,Mi=!1)},600)},un,uo]}var Mp=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Lp,Dp,qe.N8,{content:2,handler:3}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"content",get:function(){return this.$$.ctx[2]},set:function(nn){this.$$set({content:nn}),(0,qe.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[3]},set:function(nn){this.$$set({handler:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),jp=Mp,ev=__webpack_require__(845),ap={};ev.Z&&ev.Z.locals&&(ap.locals=ev.Z.locals);var dp,Ep=0,Ap={};Ap.styleTagTransform=lo(),Ap.setAttributes=hn(),Ap.insert=sn().bind(null,"head"),Ap.domAPI=Mt(),Ap.insertStyleElement=Xr(),ap.use=function(cn){return Ap.options=cn||{},Ep++||(dp=Qe()(ev.Z,Ap)),ap},ap.unuse=function(){Ep>0&&!--Ep&&(dp(),dp=null)};var Np=ap;function Zp(cn){var an,nn,rn,un=y.rE(cn[1])+"";return{c:function(){an=(0,qe.bGB)("i"),nn=(0,qe.fLW)(un),rn=(0,qe.fLW)(":"),(0,qe.Ljt)(an,"class","vc-log-key"),(0,qe.VHj)(an,"vc-log-key-symbol",cn[2]==="symbol"),(0,qe.VHj)(an,"vc-log-key-private",cn[2]==="private")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),(0,qe.R3I)(an,nn),(0,qe.$Tr)(ln,rn,uo)},p:function(ln,uo){2&uo&&un!==(un=y.rE(ln[1])+"")&&(0,qe.rTO)(nn,un),4&uo&&(0,qe.VHj)(an,"vc-log-key-symbol",ln[2]==="symbol"),4&uo&&(0,qe.VHj)(an,"vc-log-key-private",ln[2]==="private")},d:function(ln){ln&&(0,qe.ogt)(an),ln&&(0,qe.ogt)(rn)}}}function vv(cn){var an,nn,rn,un,ln=cn[1]!==void 0&&Zp(cn);return{c:function(){ln&&ln.c(),an=(0,qe.DhX)(),nn=(0,qe.bGB)("i"),rn=(0,qe.fLW)(cn[3]),(0,qe.Ljt)(nn,"class",un="vc-log-val vc-log-val-"+cn[4]),(0,qe.Ljt)(nn,"style",cn[0]),(0,qe.VHj)(nn,"vc-log-val-haskey",cn[1]!==void 0)},m:function(uo,ho){ln&&ln.m(uo,ho),(0,qe.$Tr)(uo,an,ho),(0,qe.$Tr)(uo,nn,ho),(0,qe.R3I)(nn,rn)},p:function(uo,ho){var Mi=ho[0];uo[1]!==void 0?ln?ln.p(uo,Mi):((ln=Zp(uo)).c(),ln.m(an.parentNode,an)):ln&&(ln.d(1),ln=null),8&Mi&&(0,qe.rTO)(rn,uo[3]),16&Mi&&un!==(un="vc-log-val vc-log-val-"+uo[4])&&(0,qe.Ljt)(nn,"class",un),1&Mi&&(0,qe.Ljt)(nn,"style",uo[0]),18&Mi&&(0,qe.VHj)(nn,"vc-log-val-haskey",uo[1]!==void 0)},i:qe.ZTd,o:qe.ZTd,d:function(uo){ln&&ln.d(uo),uo&&(0,qe.ogt)(an),uo&&(0,qe.ogt)(nn)}}}function Vd(cn,an,nn){var rn=an.origData,un=an.style,ln=un===void 0?"":un,uo=an.dataKey,ho=uo===void 0?void 0:uo,Mi=an.keyType,ld=Mi===void 0?"":Mi,dd="",Sd="",gd=!1;return(0,Ye.H3)(function(){Np.use()}),(0,Ye.ev)(function(){Np.unuse()}),cn.$$set=function(Wd){"origData"in Wd&&nn(5,rn=Wd.origData),"style"in Wd&&nn(0,ln=Wd.style),"dataKey"in Wd&&nn(1,ho=Wd.dataKey),"keyType"in Wd&&nn(2,ld=Wd.keyType)},cn.$$.update=function(){if(122&cn.$$.dirty){nn(6,gd=ho!==void 0);var Wd=(0,yp.LH)(rn,gd);nn(4,Sd=Wd.valueType),nn(3,dd=Wd.text),gd||Sd!=="string"||nn(3,dd=dd.replace(/\\n/g,`
`).replace(/\\t/g,"    "))}},[ln,ho,ld,dd,Sd,rn,gd]}var Yd=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Vd,vv,qe.AqN,{origData:5,style:0,dataKey:1,keyType:2}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"origData",get:function(){return this.$$.ctx[5]},set:function(nn){this.$$set({origData:nn}),(0,qe.yl1)()}},{key:"style",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({style:nn}),(0,qe.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({dataKey:nn}),(0,qe.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[2]},set:function(nn){this.$$set({keyType:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),qd=Yd,ep=__webpack_require__(1237),fp={};ep.Z&&ep.Z.locals&&(fp.locals=ep.Z.locals);var Op,Wp=0,iv={};iv.styleTagTransform=lo(),iv.setAttributes=hn(),iv.insert=sn().bind(null,"head"),iv.domAPI=Mt(),iv.insertStyleElement=Xr(),fp.use=function(cn){return iv.options=cn||{},Wp++||(Op=Qe()(ep.Z,iv)),fp},fp.unuse=function(){Wp>0&&!--Wp&&(Op(),Op=null)};var gv=fp;function sv(cn,an,nn){var rn=cn.slice();return rn[19]=an[nn],rn[21]=nn,rn}function Vv(cn,an,nn){var rn=cn.slice();return rn[19]=an[nn],rn}function Zv(cn,an,nn){var rn=cn.slice();return rn[19]=an[nn],rn[21]=nn,rn}function Ev(cn){for(var an,nn,rn,un,ln,uo,ho,Mi=[],ld=new Map,dd=[],Sd=new Map,gd=[],Wd=new Map,Dd=cn[7],Gd=function(hp){return hp[19]},Xd=0;Xd<Dd.length;Xd+=1){var tp=Zv(cn,Dd,Xd),op=Gd(tp);ld.set(op,Mi[Xd]=kv(op,tp))}for(var lp=cn[11]<cn[7].length&&Uv(cn),Pp=cn[9],Ip=function(hp){return hp[19]},Gp=0;Gp<Pp.length;Gp+=1){var zp=Vv(cn,Pp,Gp),Kp=Ip(zp);Sd.set(Kp,dd[Gp]=Jv(Kp,zp))}for(var kp=cn[8],Sp=function(hp){return hp[19]},Xp=0;Xp<kp.length;Xp+=1){var fv=sv(cn,kp,Xp),Yp=Sp(fv);Wd.set(Yp,gd[Xp]=om(Yp,fv))}var qp=cn[12]<cn[8].length&&im(cn),Fp=cn[10]&&jv(cn);return{c:function(){an=(0,qe.bGB)("div");for(var hp=0;hp<Mi.length;hp+=1)Mi[hp].c();nn=(0,qe.DhX)(),lp&&lp.c(),rn=(0,qe.DhX)();for(var xp=0;xp<dd.length;xp+=1)dd[xp].c();un=(0,qe.DhX)();for(var Qp=0;Qp<gd.length;Qp+=1)gd[Qp].c();ln=(0,qe.DhX)(),qp&&qp.c(),uo=(0,qe.DhX)(),Fp&&Fp.c(),(0,qe.Ljt)(an,"class","vc-log-tree-child")},m:function(hp,xp){(0,qe.$Tr)(hp,an,xp);for(var Qp=0;Qp<Mi.length;Qp+=1)Mi[Qp].m(an,null);(0,qe.R3I)(an,nn),lp&&lp.m(an,null),(0,qe.R3I)(an,rn);for(var up=0;up<dd.length;up+=1)dd[up].m(an,null);(0,qe.R3I)(an,un);for(var Tp=0;Tp<gd.length;Tp+=1)gd[Tp].m(an,null);(0,qe.R3I)(an,ln),qp&&qp.m(an,null),(0,qe.R3I)(an,uo),Fp&&Fp.m(an,null),ho=!0},p:function(hp,xp){67721&xp&&(Dd=hp[7],(0,qe.dvw)(),Mi=(0,qe.GQg)(Mi,xp,Gd,1,hp,Dd,ld,an,qe.cly,kv,nn,Zv),(0,qe.gbL)()),hp[11]<hp[7].length?lp?lp.p(hp,xp):((lp=Uv(hp)).c(),lp.m(an,rn)):lp&&(lp.d(1),lp=null),66057&xp&&(Pp=hp[9],(0,qe.dvw)(),dd=(0,qe.GQg)(dd,xp,Ip,1,hp,Pp,Sd,an,qe.cly,Jv,un,Vv),(0,qe.gbL)()),69897&xp&&(kp=hp[8],(0,qe.dvw)(),gd=(0,qe.GQg)(gd,xp,Sp,1,hp,kp,Wd,an,qe.cly,om,ln,sv),(0,qe.gbL)()),hp[12]<hp[8].length?qp?qp.p(hp,xp):((qp=im(hp)).c(),qp.m(an,uo)):qp&&(qp.d(1),qp=null),hp[10]?Fp?(Fp.p(hp,xp),1024&xp&&(0,qe.Ui)(Fp,1)):((Fp=jv(hp)).c(),(0,qe.Ui)(Fp,1),Fp.m(an,null)):Fp&&((0,qe.dvw)(),(0,qe.etI)(Fp,1,1,function(){Fp=null}),(0,qe.gbL)())},i:function(hp){if(!ho){for(var xp=0;xp<Dd.length;xp+=1)(0,qe.Ui)(Mi[xp]);for(var Qp=0;Qp<Pp.length;Qp+=1)(0,qe.Ui)(dd[Qp]);for(var up=0;up<kp.length;up+=1)(0,qe.Ui)(gd[up]);(0,qe.Ui)(Fp),ho=!0}},o:function(hp){for(var xp=0;xp<Mi.length;xp+=1)(0,qe.etI)(Mi[xp]);for(var Qp=0;Qp<dd.length;Qp+=1)(0,qe.etI)(dd[Qp]);for(var up=0;up<gd.length;up+=1)(0,qe.etI)(gd[up]);(0,qe.etI)(Fp),ho=!1},d:function(hp){hp&&(0,qe.ogt)(an);for(var xp=0;xp<Mi.length;xp+=1)Mi[xp].d();lp&&lp.d();for(var Qp=0;Qp<dd.length;Qp+=1)dd[Qp].d();for(var up=0;up<gd.length;up+=1)gd[up].d();qp&&qp.d(),Fp&&Fp.d()}}}function Cv(cn){var an,nn;return an=new zv({props:{origData:cn[16](cn[19]),dataKey:cn[19],keyPath:cn[3]+"."+cn[19],toggle:cn[0]}}),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};128&un&&(ln.origData=rn[16](rn[19])),128&un&&(ln.dataKey=rn[19]),136&un&&(ln.keyPath=rn[3]+"."+rn[19]),1&un&&(ln.toggle=rn[0]),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function kv(cn,an){var nn,rn,un,ln=an[21]<an[11]&&Cv(an);return{key:cn,first:null,c:function(){nn=(0,qe.cSb)(),ln&&ln.c(),rn=(0,qe.cSb)(),this.first=nn},m:function(uo,ho){(0,qe.$Tr)(uo,nn,ho),ln&&ln.m(uo,ho),(0,qe.$Tr)(uo,rn,ho),un=!0},p:function(uo,ho){(an=uo)[21]<an[11]?ln?(ln.p(an,ho),2176&ho&&(0,qe.Ui)(ln,1)):((ln=Cv(an)).c(),(0,qe.Ui)(ln,1),ln.m(rn.parentNode,rn)):ln&&((0,qe.dvw)(),(0,qe.etI)(ln,1,1,function(){ln=null}),(0,qe.gbL)())},i:function(uo){un||((0,qe.Ui)(ln),un=!0)},o:function(uo){(0,qe.etI)(ln),un=!1},d:function(uo){uo&&(0,qe.ogt)(nn),ln&&ln.d(uo),uo&&(0,qe.ogt)(rn)}}}function Uv(cn){var an,nn,rn,un,ln=cn[14](cn[7].length-cn[11])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.fLW)(ln),(0,qe.Ljt)(an,"class","vc-log-tree-loadmore")},m:function(uo,ho){(0,qe.$Tr)(uo,an,ho),(0,qe.R3I)(an,nn),rn||(un=(0,qe.oLt)(an,"click",cn[17]),rn=!0)},p:function(uo,ho){2176&ho&&ln!==(ln=uo[14](uo[7].length-uo[11])+"")&&(0,qe.rTO)(nn,ln)},d:function(uo){uo&&(0,qe.ogt)(an),rn=!1,un()}}}function Jv(cn,an){var nn,rn,un;return rn=new zv({props:{origData:an[16](an[19]),dataKey:String(an[19]),keyType:"symbol",keyPath:an[3]+"["+String(an[19])+"]",toggle:an[0]}}),{key:cn,first:null,c:function(){nn=(0,qe.cSb)(),(0,qe.YCL)(rn.$$.fragment),this.first=nn},m:function(ln,uo){(0,qe.$Tr)(ln,nn,uo),(0,qe.yef)(rn,ln,uo),un=!0},p:function(ln,uo){an=ln;var ho={};512&uo&&(ho.origData=an[16](an[19])),512&uo&&(ho.dataKey=String(an[19])),520&uo&&(ho.keyPath=an[3]+"["+String(an[19])+"]"),1&uo&&(ho.toggle=an[0]),rn.$set(ho)},i:function(ln){un||((0,qe.Ui)(rn.$$.fragment,ln),un=!0)},o:function(ln){(0,qe.etI)(rn.$$.fragment,ln),un=!1},d:function(ln){ln&&(0,qe.ogt)(nn),(0,qe.vpE)(rn,ln)}}}function rm(cn){var an,nn;return an=new zv({props:{origData:cn[16](cn[19]),dataKey:cn[19],keyType:"private",keyPath:cn[3]+"."+cn[19],toggle:cn[0]}}),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};256&un&&(ln.origData=rn[16](rn[19])),256&un&&(ln.dataKey=rn[19]),264&un&&(ln.keyPath=rn[3]+"."+rn[19]),1&un&&(ln.toggle=rn[0]),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function om(cn,an){var nn,rn,un,ln=an[21]<an[12]&&rm(an);return{key:cn,first:null,c:function(){nn=(0,qe.cSb)(),ln&&ln.c(),rn=(0,qe.cSb)(),this.first=nn},m:function(uo,ho){(0,qe.$Tr)(uo,nn,ho),ln&&ln.m(uo,ho),(0,qe.$Tr)(uo,rn,ho),un=!0},p:function(uo,ho){(an=uo)[21]<an[12]?ln?(ln.p(an,ho),4352&ho&&(0,qe.Ui)(ln,1)):((ln=rm(an)).c(),(0,qe.Ui)(ln,1),ln.m(rn.parentNode,rn)):ln&&((0,qe.dvw)(),(0,qe.etI)(ln,1,1,function(){ln=null}),(0,qe.gbL)())},i:function(uo){un||((0,qe.Ui)(ln),un=!0)},o:function(uo){(0,qe.etI)(ln),un=!1},d:function(uo){uo&&(0,qe.ogt)(nn),ln&&ln.d(uo),uo&&(0,qe.ogt)(rn)}}}function im(cn){var an,nn,rn,un,ln=cn[14](cn[8].length-cn[12])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.fLW)(ln),(0,qe.Ljt)(an,"class","vc-log-tree-loadmore")},m:function(uo,ho){(0,qe.$Tr)(uo,an,ho),(0,qe.R3I)(an,nn),rn||(un=(0,qe.oLt)(an,"click",cn[18]),rn=!0)},p:function(uo,ho){4352&ho&&ln!==(ln=uo[14](uo[8].length-uo[12])+"")&&(0,qe.rTO)(nn,ln)},d:function(uo){uo&&(0,qe.ogt)(an),rn=!1,un()}}}function jv(cn){var an,nn;return an=new zv({props:{origData:cn[16]("__proto__"),dataKey:"__proto__",keyType:"private",keyPath:cn[3]+".__proto__",toggle:cn[0]}}),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};8&un&&(ln.keyPath=rn[3]+".__proto__"),1&un&&(ln.toggle=rn[0]),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function am(cn){var an,nn,rn,un,ln,uo,ho;rn=new qd({props:{origData:cn[1],dataKey:cn[2],keyType:cn[4]}});var Mi=cn[6]&&cn[5]&&Ev(cn);return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),(0,qe.YCL)(rn.$$.fragment),un=(0,qe.DhX)(),Mi&&Mi.c(),(0,qe.Ljt)(nn,"class","vc-log-tree-node"),(0,qe.Ljt)(an,"class","vc-log-tree"),(0,qe.Ljt)(an,"data-keypath",cn[3]),(0,qe.VHj)(an,"vc-toggle",cn[5]),(0,qe.VHj)(an,"vc-is-tree",cn[6])},m:function(ld,dd){(0,qe.$Tr)(ld,an,dd),(0,qe.R3I)(an,nn),(0,qe.yef)(rn,nn,null),(0,qe.R3I)(an,un),Mi&&Mi.m(an,null),ln=!0,uo||(ho=(0,qe.oLt)(nn,"click",(0,qe.XET)(cn[15])),uo=!0)},p:function(ld,dd){var Sd=dd[0],gd={};2&Sd&&(gd.origData=ld[1]),4&Sd&&(gd.dataKey=ld[2]),16&Sd&&(gd.keyType=ld[4]),rn.$set(gd),ld[6]&&ld[5]?Mi?(Mi.p(ld,Sd),96&Sd&&(0,qe.Ui)(Mi,1)):((Mi=Ev(ld)).c(),(0,qe.Ui)(Mi,1),Mi.m(an,null)):Mi&&((0,qe.dvw)(),(0,qe.etI)(Mi,1,1,function(){Mi=null}),(0,qe.gbL)()),(!ln||8&Sd)&&(0,qe.Ljt)(an,"data-keypath",ld[3]),32&Sd&&(0,qe.VHj)(an,"vc-toggle",ld[5]),64&Sd&&(0,qe.VHj)(an,"vc-is-tree",ld[6])},i:function(ld){ln||((0,qe.Ui)(rn.$$.fragment,ld),(0,qe.Ui)(Mi),ln=!0)},o:function(ld){(0,qe.etI)(rn.$$.fragment,ld),(0,qe.etI)(Mi),ln=!1},d:function(ld){ld&&(0,qe.ogt)(an),(0,qe.vpE)(rn),Mi&&Mi.d(),uo=!1,ho()}}}function ym(cn,an,nn){var rn,un,ln,uo=an.origData,ho=an.dataKey,Mi=ho===void 0?void 0:ho,ld=an.keyPath,dd=ld===void 0?"":ld,Sd=an.keyType,gd=Sd===void 0?"":Sd,Wd=an.toggle,Dd=Wd===void 0?{}:Wd,Gd=!1,Xd=!1,tp=!1,op=50,lp=50;(0,Ye.H3)(function(){gv.use()}),(0,Ye.ev)(function(){gv.unuse()});var Pp=function(Ip){Ip==="enum"?nn(11,op+=50):Ip==="nonEnum"&&nn(12,lp+=50)};return cn.$$set=function(Ip){"origData"in Ip&&nn(1,uo=Ip.origData),"dataKey"in Ip&&nn(2,Mi=Ip.dataKey),"keyPath"in Ip&&nn(3,dd=Ip.keyPath),"keyType"in Ip&&nn(4,gd=Ip.keyType),"toggle"in Ip&&nn(0,Dd=Ip.toggle)},cn.$$.update=function(){1003&cn.$$.dirty&&(nn(5,Gd=Dd[dd]||!1),nn(6,Xd=!(uo instanceof yp.Tg)&&(y.kJ(uo)||y.Kn(uo))),Xd&&Gd&&(nn(7,rn=rn||y.qr(y.MH(uo))),nn(8,un=un||y.qr(y.QK(uo))),nn(9,ln=ln||y._D(uo)),nn(10,tp=y.Kn(uo)&&un.indexOf("__proto__")===-1)))},[Dd,uo,Mi,dd,gd,Gd,Xd,rn,un,ln,tp,op,lp,Pp,function(Ip){return"(..."+Ip+" Key"+(Ip>1?"s":"")+" Left)"},function(){nn(5,Gd=!Gd),nn(0,Dd[dd]=Gd,Dd)},function(Ip){try{return uo[Ip]}catch{return new yp.Tg}},function(){return Pp("enum")},function(){return Pp("nonEnum")}]}var zv=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,ym,am,qe.AqN,{origData:1,dataKey:2,keyPath:3,keyType:4,toggle:0}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"origData",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({origData:nn}),(0,qe.yl1)()}},{key:"dataKey",get:function(){return this.$$.ctx[2]},set:function(nn){this.$$set({dataKey:nn}),(0,qe.yl1)()}},{key:"keyPath",get:function(){return this.$$.ctx[3]},set:function(nn){this.$$set({keyPath:nn}),(0,qe.yl1)()}},{key:"keyType",get:function(){return this.$$.ctx[4]},set:function(nn){this.$$set({keyType:nn}),(0,qe.yl1)()}},{key:"toggle",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({toggle:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),lm=zv,Fv=__webpack_require__(7147),$v={};Fv.Z&&Fv.Z.locals&&($v.locals=Fv.Z.locals);var qv,Kv=0,Bv={};Bv.styleTagTransform=lo(),Bv.setAttributes=hn(),Bv.insert=sn().bind(null,"head"),Bv.domAPI=Mt(),Bv.insertStyleElement=Xr(),$v.use=function(cn){return Bv.options=cn||{},Kv++||(qv=Qe()(Fv.Z,Bv)),$v},$v.unuse=function(){Kv>0&&!--Kv&&(qv(),qv=null)};var Xv=$v;function ng(cn,an,nn){var rn=cn.slice();return rn[9]=an[nn],rn[11]=nn,rn}function rg(cn,an,nn){var rn=cn.slice();return rn[12]=an[nn],rn}function og(cn){for(var an,nn,rn,un,ln,uo,ho,Mi,ld,dd,Sd,gd,Wd,Dd=[],Gd=new Map,Xd=cn[0].groupLevel&&ig(cn),tp=cn[2]>0&&sg(),op=cn[1]&&ug(cn),lp=cn[0].repeated&&cg(cn),Pp=cn[0].data,Ip=function(kp){return kp[11]},Gp=0;Gp<Pp.length;Gp+=1){var zp=ng(cn,Pp,Gp),Kp=Ip(zp);Gd.set(Kp,Dd[Gp]=lg(Kp,zp))}return ld=new jp({props:{handler:cn[6]}}),{c:function(){an=(0,qe.bGB)("div"),Xd&&Xd.c(),nn=(0,qe.DhX)(),tp&&tp.c(),rn=(0,qe.DhX)(),op&&op.c(),un=(0,qe.DhX)(),lp&&lp.c(),ln=(0,qe.DhX)(),uo=(0,qe.bGB)("div");for(var kp=0;kp<Dd.length;kp+=1)Dd[kp].c();ho=(0,qe.DhX)(),Mi=(0,qe.bGB)("div"),(0,qe.YCL)(ld.$$.fragment),(0,qe.Ljt)(uo,"class","vc-log-content"),(0,qe.Ljt)(Mi,"class","vc-logrow-icon"),(0,qe.Ljt)(an,"class",dd="vc-log-row vc-log-"+cn[0].type),(0,qe.VHj)(an,"vc-log-input",cn[0].cmdType==="input"),(0,qe.VHj)(an,"vc-log-output",cn[0].cmdType==="output"),(0,qe.VHj)(an,"vc-log-group",cn[2]>0),(0,qe.VHj)(an,"vc-toggle",cn[2]===1)},m:function(kp,Sp){(0,qe.$Tr)(kp,an,Sp),Xd&&Xd.m(an,null),(0,qe.R3I)(an,nn),tp&&tp.m(an,null),(0,qe.R3I)(an,rn),op&&op.m(an,null),(0,qe.R3I)(an,un),lp&&lp.m(an,null),(0,qe.R3I)(an,ln),(0,qe.R3I)(an,uo);for(var Xp=0;Xp<Dd.length;Xp+=1)Dd[Xp].m(uo,null);(0,qe.R3I)(an,ho),(0,qe.R3I)(an,Mi),(0,qe.yef)(ld,Mi,null),Sd=!0,gd||(Wd=(0,qe.oLt)(an,"click",cn[5]),gd=!0)},p:function(kp,Sp){kp[0].groupLevel?Xd?Xd.p(kp,Sp):((Xd=ig(kp)).c(),Xd.m(an,nn)):Xd&&(Xd.d(1),Xd=null),kp[2]>0?tp||((tp=sg()).c(),tp.m(an,rn)):tp&&(tp.d(1),tp=null),kp[1]?op?op.p(kp,Sp):((op=ug(kp)).c(),op.m(an,un)):op&&(op.d(1),op=null),kp[0].repeated?lp?lp.p(kp,Sp):((lp=cg(kp)).c(),lp.m(an,ln)):lp&&(lp.d(1),lp=null),17&Sp&&(Pp=kp[0].data,(0,qe.dvw)(),Dd=(0,qe.GQg)(Dd,Sp,Ip,1,kp,Pp,Gd,uo,qe.cly,lg,null,ng),(0,qe.gbL)()),(!Sd||1&Sp&&dd!==(dd="vc-log-row vc-log-"+kp[0].type))&&(0,qe.Ljt)(an,"class",dd),1&Sp&&(0,qe.VHj)(an,"vc-log-input",kp[0].cmdType==="input"),1&Sp&&(0,qe.VHj)(an,"vc-log-output",kp[0].cmdType==="output"),5&Sp&&(0,qe.VHj)(an,"vc-log-group",kp[2]>0),5&Sp&&(0,qe.VHj)(an,"vc-toggle",kp[2]===1)},i:function(kp){if(!Sd){for(var Sp=0;Sp<Pp.length;Sp+=1)(0,qe.Ui)(Dd[Sp]);(0,qe.Ui)(ld.$$.fragment,kp),Sd=!0}},o:function(kp){for(var Sp=0;Sp<Dd.length;Sp+=1)(0,qe.etI)(Dd[Sp]);(0,qe.etI)(ld.$$.fragment,kp),Sd=!1},d:function(kp){kp&&(0,qe.ogt)(an),Xd&&Xd.d(),tp&&tp.d(),op&&op.d(),lp&&lp.d();for(var Sp=0;Sp<Dd.length;Sp+=1)Dd[Sp].d();(0,qe.vpE)(ld),gd=!1,Wd()}}}function ig(cn){for(var an,nn=new Array(cn[0].groupLevel),rn=[],un=0;un<nn.length;un+=1)rn[un]=ag(rg(cn,nn,un));return{c:function(){for(var ln=0;ln<rn.length;ln+=1)rn[ln].c();an=(0,qe.cSb)()},m:function(ln,uo){for(var ho=0;ho<rn.length;ho+=1)rn[ho].m(ln,uo);(0,qe.$Tr)(ln,an,uo)},p:function(ln,uo){if(1&uo){var ho;for(nn=new Array(ln[0].groupLevel),ho=0;ho<nn.length;ho+=1){var Mi=rg(ln,nn,ho);rn[ho]?rn[ho].p(Mi,uo):(rn[ho]=ag(),rn[ho].c(),rn[ho].m(an.parentNode,an))}for(;ho<rn.length;ho+=1)rn[ho].d(1);rn.length=nn.length}},d:function(ln){(0,qe.RMB)(rn,ln),ln&&(0,qe.ogt)(an)}}}function ag(cn){var an;return{c:function(){an=(0,qe.bGB)("i"),(0,qe.Ljt)(an,"class","vc-log-padding")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},p:qe.ZTd,d:function(nn){nn&&(0,qe.ogt)(an)}}}function sg(cn){var an;return{c:function(){an=(0,qe.bGB)("div"),(0,qe.Ljt)(an,"class","vc-log-group-toggle")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},d:function(nn){nn&&(0,qe.ogt)(an)}}}function ug(cn){var an,nn;return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.fLW)(cn[3]),(0,qe.Ljt)(an,"class","vc-log-time")},m:function(rn,un){(0,qe.$Tr)(rn,an,un),(0,qe.R3I)(an,nn)},p:function(rn,un){8&un&&(0,qe.rTO)(nn,rn[3])},d:function(rn){rn&&(0,qe.ogt)(an)}}}function cg(cn){var an,nn,rn,un=cn[0].repeated+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("i"),rn=(0,qe.fLW)(un),(0,qe.Ljt)(an,"class","vc-log-repeat")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn)},p:function(ln,uo){1&uo&&un!==(un=ln[0].repeated+"")&&(0,qe.rTO)(rn,un)},d:function(ln){ln&&(0,qe.ogt)(an)}}}function I0(cn){var an,nn;return an=new qd({props:{origData:cn[9].origData,style:cn[9].style}}),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};1&un&&(ln.origData=rn[9].origData),1&un&&(ln.style=rn[9].style),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function T0(cn){var an,nn;return an=new lm({props:{origData:cn[9].origData,keyPath:String(cn[11]),toggle:cn[0].toggle}}),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};1&un&&(ln.origData=rn[9].origData),1&un&&(ln.keyPath=String(rn[11])),1&un&&(ln.toggle=rn[0].toggle),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function lg(cn,an){var nn,rn,un,ln,uo,ho,Mi=[T0,I0],ld=[];function dd(Sd,gd){return 1&gd&&(rn=null),rn==null&&(rn=!!Sd[4](Sd[9].origData)),rn?0:1}return un=dd(an,-1),ln=ld[un]=Mi[un](an),{key:cn,first:null,c:function(){nn=(0,qe.cSb)(),ln.c(),uo=(0,qe.cSb)(),this.first=nn},m:function(Sd,gd){(0,qe.$Tr)(Sd,nn,gd),ld[un].m(Sd,gd),(0,qe.$Tr)(Sd,uo,gd),ho=!0},p:function(Sd,gd){var Wd=un;(un=dd(an=Sd,gd))===Wd?ld[un].p(an,gd):((0,qe.dvw)(),(0,qe.etI)(ld[Wd],1,1,function(){ld[Wd]=null}),(0,qe.gbL)(),(ln=ld[un])?ln.p(an,gd):(ln=ld[un]=Mi[un](an)).c(),(0,qe.Ui)(ln,1),ln.m(uo.parentNode,uo))},i:function(Sd){ho||((0,qe.Ui)(ln),ho=!0)},o:function(Sd){(0,qe.etI)(ln),ho=!1},d:function(Sd){Sd&&(0,qe.ogt)(nn),ld[un].d(Sd),Sd&&(0,qe.ogt)(uo)}}}function k0(cn){var an,nn,rn=cn[0]&&og(cn);return{c:function(){rn&&rn.c(),an=(0,qe.cSb)()},m:function(un,ln){rn&&rn.m(un,ln),(0,qe.$Tr)(un,an,ln),nn=!0},p:function(un,ln){var uo=ln[0];un[0]?rn?(rn.p(un,uo),1&uo&&(0,qe.Ui)(rn,1)):((rn=og(un)).c(),(0,qe.Ui)(rn,1),rn.m(an.parentNode,an)):rn&&((0,qe.dvw)(),(0,qe.etI)(rn,1,1,function(){rn=null}),(0,qe.gbL)())},i:function(un){nn||((0,qe.Ui)(rn),nn=!0)},o:function(un){(0,qe.etI)(rn),nn=!1},d:function(un){rn&&rn.d(un),un&&(0,qe.ogt)(an)}}}function S0(cn,an,nn){var rn=an.log,un=an.showTimestamps,ln=un!==void 0&&un,uo=an.groupHeader,ho=uo===void 0?0:uo,Mi=(0,Ye.x)(),ld="",dd=function(Sd,gd){var Wd="000"+Sd;return Wd.substring(Wd.length-gd)};return(0,Ye.H3)(function(){Xv.use()}),(0,Ye.ev)(function(){Xv.unuse()}),cn.$$set=function(Sd){"log"in Sd&&nn(0,rn=Sd.log),"showTimestamps"in Sd&&nn(1,ln=Sd.showTimestamps),"groupHeader"in Sd&&nn(2,ho=Sd.groupHeader)},cn.$$.update=function(){if(3&cn.$$.dirty&&ln){var Sd=new Date(rn.date);nn(3,ld=dd(Sd.getHours(),2)+":"+dd(Sd.getMinutes(),2)+":"+dd(Sd.getSeconds(),2)+":"+dd(Sd.getMilliseconds(),3))}},[rn,ln,ho,ld,function(Sd){return!(Sd instanceof yp.Tg)&&(y.kJ(Sd)||y.Kn(Sd))},function(){ho>0&&Mi("groupCollapsed",{groupLabel:rn.groupLabel,groupHeader:ho===1?2:1,isGroupCollapsed:ho===1})},function(){var Sd=[];try{for(var gd=0;gd<rn.data.length;gd++)y.HD(rn.data[gd].origData)||y.hj(rn.data[gd].origData)?Sd.push(rn.data[gd].origData):Sd.push(y.hZ(rn.data[gd].origData,{maxDepth:10,keyMaxLen:1e4,pretty:!1,standardJSON:!0}))}catch{}return Sd.join(" ")}]}var A0=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,S0,k0,qe.AqN,{log:0,showTimestamps:1,groupHeader:2}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"log",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({log:nn}),(0,qe.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({showTimestamps:nn}),(0,qe.yl1)()}},{key:"groupHeader",get:function(){return this.$$.ctx[2]},set:function(nn){this.$$set({groupHeader:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),D0=A0,O0=__webpack_require__(3903),bm=__webpack_require__(3327),fm={};bm.Z&&bm.Z.locals&&(fm.locals=bm.Z.locals);var Fm,Bm=0,Qv={};Qv.styleTagTransform=lo(),Qv.setAttributes=hn(),Qv.insert=sn().bind(null,"head"),Qv.domAPI=Mt(),Qv.insertStyleElement=Xr(),fm.use=function(cn){return Qv.options=cn||{},Bm++||(Fm=Qe()(bm.Z,Qv)),fm},fm.unuse=function(){Bm>0&&!--Bm&&(Fm(),Fm=null)};var fg=fm,P0=__webpack_require__(4264),nv=__webpack_require__.n(P0),L0=function(){function cn(nn){console.debug("[vConsole] `ResizeObserver` is not supported in the browser, vConsole cannot render correctly."),nn([{contentRect:{height:30}}],this)}var an=cn.prototype;return an.disconnect=function(){},an.observe=function(nn,rn){},an.unobserve=function(nn){},cn}(),Wm=function(){return typeof window.ResizeObserver=="function"},hg=function(){return window.ResizeObserver||L0};function M0(cn){var an,nn,rn=cn[6].default,un=(0,qe.nuO)(rn,cn,cn[5],null);return{c:function(){an=(0,qe.bGB)("div"),un&&un.c(),(0,qe.Ljt)(an,"class","vc-scroller-item"),(0,qe.czc)(an,"display",cn[0]?"block":"none",!1),(0,qe.czc)(an,"top",cn[3]?cn[1]+"px":"auto",!1)},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),un&&un.m(an,null),cn[7](an),nn=!0},p:function(ln,uo){var ho=uo[0];un&&un.p&&(!nn||32&ho)&&(0,qe.kmG)(un,rn,ln,ln[5],nn?(0,qe.u2N)(rn,ln[5],ho,null):(0,qe.VOJ)(ln[5]),null),1&ho&&(0,qe.czc)(an,"display",ln[0]?"block":"none",!1),2&ho&&(0,qe.czc)(an,"top",ln[3]?ln[1]+"px":"auto",!1)},i:function(ln){nn||((0,qe.Ui)(un,ln),nn=!0)},o:function(ln){(0,qe.etI)(un,ln),nn=!1},d:function(ln){ln&&(0,qe.ogt)(an),un&&un.d(ln),cn[7](null)}}}function N0(cn,an,nn){var rn,un=an.$$slots,ln=un===void 0?{}:un,uo=an.$$scope,ho=an.show,Mi=ho===void 0?!Wm():ho,ld=an.top,dd=an.onResize,Sd=dd===void 0?function(){}:dd,gd=null,Wd=Wm();return(0,Ye.H3)(function(){if(Mi&&Sd(rn.getBoundingClientRect().height),Wd){var Dd=hg();(gd=new Dd(function(Gd){var Xd=Gd[0];Mi&&Sd(Xd.contentRect.height)})).observe(rn)}}),(0,Ye.ev)(function(){Wd&&gd.disconnect()}),cn.$$set=function(Dd){"show"in Dd&&nn(0,Mi=Dd.show),"top"in Dd&&nn(1,ld=Dd.top),"onResize"in Dd&&nn(4,Sd=Dd.onResize),"$$scope"in Dd&&nn(5,uo=Dd.$$scope)},[Mi,ld,rn,Wd,Sd,uo,ln,function(Dd){qe.VnY[Dd?"unshift":"push"](function(){nn(2,rn=Dd)})}]}var F0=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,N0,M0,qe.N8,{show:0,top:1,onResize:4}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"show",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({show:nn}),(0,qe.yl1)()}},{key:"top",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({top:nn}),(0,qe.yl1)()}},{key:"onResize",get:function(){return this.$$.ctx[4]},set:function(nn){this.$$set({onResize:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),B0=F0,W0=function(){function cn(){this._x=0,this._endX=0,this._v=0,this._startTime=0,this._endTime=0}var an=cn.prototype;return an.set=function(nn,rn,un,ln){this._x=nn,this._endX=rn,this._v=(rn-nn)/un,this._startTime=ln||Date.now(),this._endTime=this._startTime+un},an.x=function(nn){if(this.done(nn))return this._endX;var rn=nn-this._startTime;return this._x+this._v*rn},an.dx=function(nn){return this.done(nn)?0:this._v},an.done=function(nn){return nn>=this._endTime},cn}(),V0=function(){function cn(nn){this._drag=void 0,this._dragLog=void 0,this._x=0,this._v=0,this._startTime=0,this._drag=nn,this._dragLog=Math.log(nn)}var an=cn.prototype;return an.set=function(nn,rn,un){this._x=nn,this._v=rn,this._startTime=un||Date.now()},an.x=function(nn){var rn=(nn-this._startTime)/1e3;return this._x+this._v*Math.pow(this._drag,rn)/this._dragLog-this._v/this._dragLog},an.dx=function(nn){var rn=(nn-this._startTime)/1e3;return this._v*Math.pow(this._drag,rn)},an.done=function(nn){return Math.abs(this.dx(nn))<3},cn}(),dg=function(cn,an){return cn>an-.1&&cn<an+.1},pg=function(cn){return dg(cn,0)},U0=function(){function cn(nn,rn,un){this._solver=void 0,this._solution=void 0,this._endPosition=void 0,this._startTime=void 0,this._solver=function(ln,uo,ho){var Mi=ho,ld=ln,dd=uo,Sd=Mi*Mi-4*ld*dd;if(Sd==0){var gd=-Mi/(2*ld);return function(tp,op){var lp=tp,Pp=op/(gd*tp);return{x:function(Ip){return(lp+Pp*Ip)*Math.pow(Math.E,gd*Ip)},dx:function(Ip){return(gd*(lp+Pp*Ip)+Pp)*Math.pow(Math.E,gd*Ip)}}}}if(Sd>0){var Wd=(-Mi-Math.sqrt(Sd))/(2*ld),Dd=(-Mi+Math.sqrt(Sd))/(2*ld);return function(tp,op){var lp=(op-Wd*tp)/(Dd-Wd),Pp=tp-lp;return{x:function(Ip){return Pp*Math.pow(Math.E,Wd*Ip)+lp*Math.pow(Math.E,Dd*Ip)},dx:function(Ip){return Pp*Wd*Math.pow(Math.E,Wd*Ip)+lp*Dd*Math.pow(Math.E,Dd*Ip)}}}}var Gd=Math.sqrt(4*ld*dd-Mi*Mi)/(2*ld),Xd=-Mi/2*ld;return function(tp,op){var lp=tp,Pp=(op-Xd*tp)/Gd;return{x:function(Ip){return Math.pow(Math.E,Xd*Ip)*(lp*Math.cos(Gd*Ip)+Pp*Math.sin(Gd*Ip))},dx:function(Ip){var Gp=Math.pow(Math.E,Xd*Ip),zp=Math.cos(Gd*Ip),Kp=Math.sin(Gd*Ip);return Gp*(Pp*Gd*zp-lp*Gd*Kp)+Xd*Gp*(Pp*Kp+lp*zp)}}}}(nn,rn,un),this._solution=null,this._endPosition=0,this._startTime=0}var an=cn.prototype;return an.x=function(nn){if(!this._solution)return 0;var rn=(nn-this._startTime)/1e3;return this._endPosition+this._solution.x(rn)},an.dx=function(nn){if(!this._solution)return 0;var rn=(nn-this._startTime)/1e3;return this._solution.dx(rn)},an.set=function(nn,rn,un,ln){ln||(ln=Date.now()),this._endPosition=nn,rn==nn&&pg(un)||(this._solution=this._solver(rn-nn,un),this._startTime=ln)},an.done=function(nn){return nn||(nn=Date.now()),dg(this.x(nn),this._endPosition)&&pg(this.dx(nn))},cn}(),j0=function(){function cn(nn,rn){this._enableSpring=rn,this._getExtend=void 0,this._friction=new V0(.05),this._spring=new U0(1,90,20),this._toEdge=!1,this._getExtend=nn}var an=cn.prototype;return an.set=function(nn,rn,un){if(un===void 0&&(un=Date.now()),this._friction.set(nn,rn,un),nn>0&&rn>=0)this._toEdge=!0,this._enableSpring&&this._spring.set(0,nn,rn,un);else{var ln=this._getExtend();nn<-ln&&rn<=0?(this._toEdge=!0,this._enableSpring&&this._spring.set(-ln,nn,rn,un)):this._toEdge=!1}},an.x=function(nn){if(this._enableSpring&&this._toEdge)return this._spring.x(nn);var rn=this._friction.x(nn),un=this._friction.dx(nn);if(rn>0&&un>=0){if(this._toEdge=!0,!this._enableSpring)return 0;this._spring.set(0,rn,un,nn)}else{var ln=this._getExtend();if(rn<-ln&&un<=0){if(this._toEdge=!0,!this._enableSpring)return-ln;this._spring.set(-ln,rn,un,nn)}}return rn},an.dx=function(nn){return this._toEdge?this._enableSpring?this._spring.dx(nn):0:this._friction.dx(nn)},an.done=function(nn){return this._toEdge?!this._enableSpring||this._spring.done(nn):this._friction.done(nn)},cn}();function Vm(cn,an){var nn,rn;return function un(){if(!rn){var ln=Date.now();an(ln),cn.done(ln)||(nn=requestAnimationFrame(un))}}(),{cancel:function(){cancelAnimationFrame(nn),rn=!0}}}var $0=function(){function cn(nn,rn){this._updatePosition=rn,this._scrollModel=void 0,this._linearModel=void 0,this._startPosition=0,this._position=0,this._animate=null,this._getExtent=void 0,this._getExtent=nn,this._scrollModel=new j0(nn,!1),this._linearModel=new W0}var an=cn.prototype;return an.onTouchStart=function(){var nn=this._position;if(nn>0)nn*=0;else{var rn=this._getExtent();nn<-rn&&(nn=0*(nn+rn)-rn)}this._startPosition=this._position=nn,this._animate&&(this._animate.cancel(),this._animate=null),this._updatePosition(-nn)},an.onTouchMove=function(nn,rn){var un=rn+this._startPosition;if(un>0)un*=0;else{var ln=this._getExtent();un<-ln&&(un=0*(un+ln)-ln)}this._position=un,this._updatePosition(-un)},an.onTouchEnd=function(nn,rn,un,ln){var uo=this,ho=rn+this._startPosition;if(ho>0)ho*=0;else{var Mi=this._getExtent();ho<-Mi&&(ho=0*(ho+Mi)-Mi)}if(this._position=ho,this._updatePosition(-ho),!(Math.abs(rn)<=.1&&Math.abs(ln)<=.1)){var ld=this._scrollModel;ld.set(ho,ln),this._animate=Vm(ld,function(dd){var Sd=uo._position=ld.x(dd);uo._updatePosition(-Sd)})}},an.onTouchCancel=function(){var nn=this,rn=this._position;if(rn>0)rn*=0;else{var un=this._getExtent();rn<-un&&(rn=0*(rn+un)-un)}this._position=rn;var ln=this._scrollModel;ln.set(rn,0),this._animate=Vm(ln,function(uo){var ho=nn._position=ln.x(uo);nn._updatePosition(-ho)})},an.onWheel=function(nn,rn){var un=this._position-rn;if(this._animate&&(this._animate.cancel(),this._animate=null),un>0)un=0;else{var ln=this._getExtent();un<-ln&&(un=-ln)}this._position=un,this._updatePosition(-un)},an.getPosition=function(){return-this._position},an.updatePosition=function(nn){var rn=-nn-this._position;this._startPosition+=rn,this._position+=rn;var un=this._position;this._updatePosition(-un);var ln=this._scrollModel,uo=Date.now();if(!ln.done(uo)){var ho=ln.dx(uo);ln.set(un,ho,uo)}},an.scrollTo=function(nn,rn){var un=this;if(this._animate&&(this._animate.cancel(),this._animate=null),rn>0){var ln=this._linearModel;ln.set(this._position,-nn,rn),this._animate=Vm(this._linearModel,function(uo){var ho=un._position=ln.x(uo);un._updatePosition(-ho)})}else this._updatePosition(nn)},cn}();function H0(cn,an){var nn=typeof Symbol<"u"&&cn[Symbol.iterator]||cn["@@iterator"];if(nn)return(nn=nn.call(cn)).next.bind(nn);if(Array.isArray(cn)||(nn=function(un,ln){if(un){if(typeof un=="string")return vg(un,ln);var uo=Object.prototype.toString.call(un).slice(8,-1);if(uo==="Object"&&un.constructor&&(uo=un.constructor.name),uo==="Map"||uo==="Set")return Array.from(un);if(uo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(uo))return vg(un,ln)}}(cn))||an){nn&&(cn=nn);var rn=0;return function(){return rn>=cn.length?{done:!0}:{done:!1,value:cn[rn++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vg(cn,an){(an==null||an>cn.length)&&(an=cn.length);for(var nn=0,rn=new Array(an);nn<an;nn++)rn[nn]=cn[nn];return rn}var G0=function(cn){var an=null,nn=!1,rn=function un(){nn=!1,cn(),an=requestAnimationFrame(function(){an=null,nn&&un()})};return{trigger:function(){an===null?rn():nn=!0},cancel:function(){an&&(cancelAnimationFrame(an),nn=!1,an=null)}}},z0=function(){function cn(an){var nn=this;this._handler=an,this._touchId=null,this._startX=0,this._startY=0,this._historyX=[],this._historyY=[],this._historyTime=[],this._wheelDeltaX=0,this._wheelDeltaY=0,this._onTouchMove=function(){var rn=nn._historyX[nn._historyX.length-1],un=nn._historyY[nn._historyY.length-1];nn._handler.onTouchMove(rn,un)},this._onWheel=G0(function(){var rn=nn._wheelDeltaX,un=nn._wheelDeltaY;nn._wheelDeltaX=0,nn._wheelDeltaY=0,nn._handler.onWheel(rn,un)}),this.handleTouchStart=function(rn){var un;if(((un=rn.target.dataset)==null?void 0:un.scrollable)!=="1"){rn.preventDefault();var ln=rn.touches[0];nn._touchId=ln.identifier,nn._startX=ln.pageX,nn._startY=ln.pageY,nn._historyX=[0],nn._historyY=[0],nn._historyTime=[Date.now()],nn._handler.onTouchStart()}},this.handleTouchMove=function(rn){var un;if(((un=rn.target.dataset)==null?void 0:un.scrollable)!=="1"){rn.preventDefault();var ln=nn._getTouchDelta(rn);ln!==null&&(nn._historyX.push(ln.x),nn._historyY.push(ln.y),nn._historyTime.push(Date.now()),nn._onTouchMove())}},this.handleTouchEnd=function(rn){var un;if(((un=rn.target.dataset)==null?void 0:un.scrollable)!=="1"){rn.preventDefault();var ln=nn._getTouchDelta(rn);if(ln!==null){for(var uo=0,ho=0,Mi=Date.now(),ld=ln.y,dd=ln.x,Sd=nn._historyTime,gd=Sd.length-1;gd>0;gd-=1){var Wd=Mi-Sd[gd];if(Wd>30){uo=1e3*(dd-nn._historyX[gd])/Wd,ho=1e3*(ld-nn._historyY[gd])/Wd;break}}nn._touchId=null,nn._handler.onTouchEnd(ln.x,ln.y,uo,ho)}}},this.handleTouchCancel=function(rn){var un;((un=rn.target.dataset)==null?void 0:un.scrollable)!=="1"&&(rn.preventDefault(),nn._getTouchDelta(rn)!==null&&(nn._touchId=null,nn._handler.onTouchCancel()))},this.handleWheel=function(rn){var un;((un=rn.target.dataset)==null?void 0:un.scrollable)!=="1"&&(rn.preventDefault(),nn._wheelDeltaX+=rn.deltaX,nn._wheelDeltaY+=rn.deltaY,nn._onWheel.trigger())}}return cn.prototype._getTouchDelta=function(an){if(this._touchId===null)return null;for(var nn,rn=H0(an.changedTouches);!(nn=rn()).done;){var un=nn.value;if(un.identifier===this._touchId)return{x:un.pageX-this._startX,y:un.pageY-this._startY}}return null},cn}(),xm=__webpack_require__(1142),hm={};xm.Z&&xm.Z.locals&&(hm.locals=xm.Z.locals);var Um,jm=0,em={};em.styleTagTransform=lo(),em.setAttributes=hn(),em.insert=sn().bind(null,"head"),em.domAPI=Mt(),em.insertStyleElement=Xr(),hm.use=function(cn){return em.options=cn||{},jm++||(Um=Qe()(xm.Z,em)),hm},hm.unuse=function(){jm>0&&!--jm&&(Um(),Um=null)};var mg=hm,q0=function(){var cn=[],an=[],nn=0,rn=0,un=0,ln=0,uo=0;return function(ho,Mi,ld){if(un===ho&&ln===Mi&&uo===ld)return cn;var dd=an.length,Sd=Mi<=rn?Math.max(0,Math.min(Mi,Math.max(nn,Math.min(rn-1,ld-dd)))):Mi,gd=nn<=ld?Math.max(ld,Math.min(ho,Math.max(nn+1,Math.min(rn,Sd+dd)))):ld;if(dd===0||gd-Sd<dd){for(var Wd=cn.length=an.length=ld-Mi,Dd=0;Dd<Wd;Dd+=1)an[Dd]=Dd,cn[Dd]={key:Dd,index:Dd+Mi,show:!0};return nn=Mi,rn=ld,un=ho,ln=Mi,uo=ld,cn}var Gd=0,Xd=0,tp=0,op=0;rn<Sd||gd<nn?(tp=Sd,op=Sd+dd):nn<Sd?(Xd=Sd-nn,tp=Sd,op=Sd+dd):gd<rn?(Xd=dd-(rn-gd),tp=gd-dd,op=gd):Sd<=nn&&rn<=gd&&(tp=nn,op=rn);for(var lp=Sd;lp<Mi;lp+=1,Gd+=1){var Pp=an[(Xd+Gd)%dd],Ip=cn[lp-Sd];Ip.key=Pp,Ip.index=lp,Ip.show=!1}for(var Gp=Mi,zp=0;Gp<ld;Gp+=1){var Kp=void 0;tp<=Gp&&Gp<op?(Kp=an[(Xd+Gd)%dd],Gd+=1):(Kp=dd+zp,zp+=1);var kp=Gp-Sd;if(kp<cn.length){var Sp=cn[kp];Sp.key=Kp,Sp.index=Gp,Sp.show=!0}else cn.push({key:Kp,index:Gp,show:!0})}for(var Xp=ld;Xp<gd;Xp+=1,Gd+=1){var fv=an[(Xd+Gd)%dd],Yp=cn[Xp-Sd];Yp.key=fv,Yp.index=Xp,Yp.show=!1}for(var qp=0;qp<cn.length;qp+=1)an[qp]=cn[qp].key;return cn.sort(function(Fp,hp){return Fp.key-hp.key}),nn=Sd,rn=gd,un=ho,ln=Mi,uo=ld,cn}},K0=qe.lig.Map,X0=function(cn){return{}},gg=function(cn){return{}},Y0=function(cn){return{}},yg=function(cn){return{}};function bg(cn,an,nn){var rn=cn.slice();return rn[53]=an[nn],rn[55]=nn,rn}var Z0=function(cn){return{item:1025&cn[0]}},xg=function(cn){return{item:cn[0][cn[53].index]}},J0=function(cn){return{}},_g=function(cn){return{}};function wg(cn){var an,nn,rn=cn[24].header,un=(0,qe.nuO)(rn,cn,cn[31],_g);return{c:function(){an=(0,qe.bGB)("div"),un&&un.c(),(0,qe.Ljt)(an,"class","vc-scroller-header")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),un&&un.m(an,null),cn[25](an),nn=!0},p:function(ln,uo){un&&un.p&&(!nn||1&uo[1])&&(0,qe.kmG)(un,rn,ln,ln[31],nn?(0,qe.u2N)(rn,ln[31],uo,J0):(0,qe.VOJ)(ln[31]),_g)},i:function(ln){nn||((0,qe.Ui)(un,ln),nn=!0)},o:function(ln){(0,qe.etI)(un,ln),nn=!1},d:function(ln){ln&&(0,qe.ogt)(an),un&&un.d(ln),cn[25](null)}}}function Q0(cn){var an,nn=cn[24].empty,rn=(0,qe.nuO)(nn,cn,cn[31],yg);return{c:function(){rn&&rn.c()},m:function(un,ln){rn&&rn.m(un,ln),an=!0},p:function(un,ln){rn&&rn.p&&(!an||1&ln[1])&&(0,qe.kmG)(rn,nn,un,un[31],an?(0,qe.u2N)(nn,un[31],ln,Y0):(0,qe.VOJ)(un[31]),yg)},i:function(un){an||((0,qe.Ui)(rn,un),an=!0)},o:function(un){(0,qe.etI)(rn,un),an=!1},d:function(un){rn&&rn.d(un)}}}function ey(cn){for(var an,nn,rn=[],un=new K0,ln=cn[10],uo=function(dd){return dd[53].key},ho=0;ho<ln.length;ho+=1){var Mi=bg(cn,ln,ho),ld=uo(Mi);un.set(ld,rn[ho]=Cg(ld,Mi))}return{c:function(){for(var dd=0;dd<rn.length;dd+=1)rn[dd].c();an=(0,qe.cSb)()},m:function(dd,Sd){for(var gd=0;gd<rn.length;gd+=1)rn[gd].m(dd,Sd);(0,qe.$Tr)(dd,an,Sd),nn=!0},p:function(dd,Sd){17921&Sd[0]|1&Sd[1]&&(ln=dd[10],(0,qe.dvw)(),rn=(0,qe.GQg)(rn,Sd,uo,1,dd,ln,un,an.parentNode,qe.cly,Cg,an,bg),(0,qe.gbL)())},i:function(dd){if(!nn){for(var Sd=0;Sd<ln.length;Sd+=1)(0,qe.Ui)(rn[Sd]);nn=!0}},o:function(dd){for(var Sd=0;Sd<rn.length;Sd+=1)(0,qe.etI)(rn[Sd]);nn=!1},d:function(dd){for(var Sd=0;Sd<rn.length;Sd+=1)rn[Sd].d(dd);dd&&(0,qe.ogt)(an)}}}function ty(cn){var an,nn,rn=cn[24].item,un=(0,qe.nuO)(rn,cn,cn[31],xg),ln=un||function(uo){var ho;return{c:function(){ho=(0,qe.fLW)("Missing template")},m:function(Mi,ld){(0,qe.$Tr)(Mi,ho,ld)},d:function(Mi){Mi&&(0,qe.ogt)(ho)}}}();return{c:function(){ln&&ln.c(),an=(0,qe.DhX)()},m:function(uo,ho){ln&&ln.m(uo,ho),(0,qe.$Tr)(uo,an,ho),nn=!0},p:function(uo,ho){un&&un.p&&(!nn||1025&ho[0]|1&ho[1])&&(0,qe.kmG)(un,rn,uo,uo[31],nn?(0,qe.u2N)(rn,uo[31],ho,Z0):(0,qe.VOJ)(uo[31]),xg)},i:function(uo){nn||((0,qe.Ui)(ln,uo),nn=!0)},o:function(uo){(0,qe.etI)(ln,uo),nn=!1},d:function(uo){ln&&ln.d(uo),uo&&(0,qe.ogt)(an)}}}function Cg(cn,an){var nn,rn,un;function ln(){for(var uo,ho=arguments.length,Mi=new Array(ho),ld=0;ld<ho;ld++)Mi[ld]=arguments[ld];return(uo=an)[26].apply(uo,[an[53]].concat(Mi))}return rn=new B0({props:{show:an[53].show,top:an[9][an[53].index],onResize:ln,$$slots:{default:[ty]},$$scope:{ctx:an}}}),{key:cn,first:null,c:function(){nn=(0,qe.cSb)(),(0,qe.YCL)(rn.$$.fragment),this.first=nn},m:function(uo,ho){(0,qe.$Tr)(uo,nn,ho),(0,qe.yef)(rn,uo,ho),un=!0},p:function(uo,ho){an=uo;var Mi={};1024&ho[0]&&(Mi.show=an[53].show),1536&ho[0]&&(Mi.top=an[9][an[53].index]),1024&ho[0]&&(Mi.onResize=ln),1025&ho[0]|1&ho[1]&&(Mi.$$scope={dirty:ho,ctx:an}),rn.$set(Mi)},i:function(uo){un||((0,qe.Ui)(rn.$$.fragment,uo),un=!0)},o:function(uo){(0,qe.etI)(rn.$$.fragment,uo),un=!1},d:function(uo){uo&&(0,qe.ogt)(nn),(0,qe.vpE)(rn,uo)}}}function Eg(cn){var an,nn,rn=cn[24].footer,un=(0,qe.nuO)(rn,cn,cn[31],gg);return{c:function(){an=(0,qe.bGB)("div"),un&&un.c(),(0,qe.Ljt)(an,"class","vc-scroller-footer")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),un&&un.m(an,null),cn[28](an),nn=!0},p:function(ln,uo){un&&un.p&&(!nn||1&uo[1])&&(0,qe.kmG)(un,rn,ln,ln[31],nn?(0,qe.u2N)(rn,ln[31],uo,X0):(0,qe.VOJ)(ln[31]),gg)},i:function(ln){nn||((0,qe.Ui)(un,ln),nn=!0)},o:function(ln){(0,qe.etI)(un,ln),nn=!1},d:function(ln){ln&&(0,qe.ogt)(an),un&&un.d(ln),cn[28](null)}}}function Rg(cn){var an,nn,rn=cn[7]+"%",un=cn[8]+"%";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),(0,qe.Ljt)(nn,"class","vc-scroller-scrollbar-thumb"),(0,qe.czc)(nn,"height",rn,!1),(0,qe.czc)(nn,"top",un,!1),(0,qe.Ljt)(an,"class","vc-scroller-scrollbar-track"),(0,qe.czc)(an,"display",cn[7]<100?"block":"none",!1)},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),(0,qe.R3I)(an,nn)},p:function(ln,uo){128&uo[0]&&rn!==(rn=ln[7]+"%")&&(0,qe.czc)(nn,"height",rn,!1),256&uo[0]&&un!==(un=ln[8]+"%")&&(0,qe.czc)(nn,"top",un,!1),128&uo[0]&&(0,qe.czc)(an,"display",ln[7]<100?"block":"none",!1)},d:function(ln){ln&&(0,qe.ogt)(an)}}}function ny(cn){var an,nn,rn,un,ln,uo,ho,Mi,ld,dd,Sd,gd=cn[15].header&&wg(cn),Wd=[ey,Q0],Dd=[];function Gd(op,lp){return op[0].length?0:1}ln=Gd(cn),uo=Dd[ln]=Wd[ln](cn);var Xd=cn[15].footer&&Eg(cn),tp=cn[1]&&Rg(cn);return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),gd&&gd.c(),rn=(0,qe.DhX)(),un=(0,qe.bGB)("div"),uo.c(),ho=(0,qe.DhX)(),Xd&&Xd.c(),Mi=(0,qe.DhX)(),tp&&tp.c(),(0,qe.Ljt)(un,"class","vc-scroller-items"),(0,qe.Ljt)(nn,"class","vc-scroller-contents"),(0,qe.Ljt)(an,"class","vc-scroller-viewport"),(0,qe.VHj)(an,"static",!cn[13])},m:function(op,lp){(0,qe.$Tr)(op,an,lp),(0,qe.R3I)(an,nn),gd&&gd.m(nn,null),(0,qe.R3I)(nn,rn),(0,qe.R3I)(nn,un),Dd[ln].m(un,null),cn[27](un),(0,qe.R3I)(nn,ho),Xd&&Xd.m(nn,null),cn[29](nn),(0,qe.R3I)(an,Mi),tp&&tp.m(an,null),cn[30](an),ld=!0,dd||(Sd=[(0,qe.oLt)(an,"touchstart",function(){(0,qe.sBU)(cn[13]?cn[11].handleTouchStart:cn[12])&&(cn[13]?cn[11].handleTouchStart:cn[12]).apply(this,arguments)}),(0,qe.oLt)(an,"touchmove",function(){(0,qe.sBU)(cn[13]?cn[11].handleTouchMove:cn[12])&&(cn[13]?cn[11].handleTouchMove:cn[12]).apply(this,arguments)}),(0,qe.oLt)(an,"touchend",function(){(0,qe.sBU)(cn[13]?cn[11].handleTouchEnd:cn[12])&&(cn[13]?cn[11].handleTouchEnd:cn[12]).apply(this,arguments)}),(0,qe.oLt)(an,"touchcancel",function(){(0,qe.sBU)(cn[13]?cn[11].handleTouchCancel:cn[12])&&(cn[13]?cn[11].handleTouchCancel:cn[12]).apply(this,arguments)}),(0,qe.oLt)(an,"wheel",function(){(0,qe.sBU)(cn[13]?cn[11].handleWheel:cn[12])&&(cn[13]?cn[11].handleWheel:cn[12]).apply(this,arguments)})],dd=!0)},p:function(op,lp){(cn=op)[15].header?gd?(gd.p(cn,lp),32768&lp[0]&&(0,qe.Ui)(gd,1)):((gd=wg(cn)).c(),(0,qe.Ui)(gd,1),gd.m(nn,rn)):gd&&((0,qe.dvw)(),(0,qe.etI)(gd,1,1,function(){gd=null}),(0,qe.gbL)());var Pp=ln;(ln=Gd(cn))===Pp?Dd[ln].p(cn,lp):((0,qe.dvw)(),(0,qe.etI)(Dd[Pp],1,1,function(){Dd[Pp]=null}),(0,qe.gbL)(),(uo=Dd[ln])?uo.p(cn,lp):(uo=Dd[ln]=Wd[ln](cn)).c(),(0,qe.Ui)(uo,1),uo.m(un,null)),cn[15].footer?Xd?(Xd.p(cn,lp),32768&lp[0]&&(0,qe.Ui)(Xd,1)):((Xd=Eg(cn)).c(),(0,qe.Ui)(Xd,1),Xd.m(nn,null)):Xd&&((0,qe.dvw)(),(0,qe.etI)(Xd,1,1,function(){Xd=null}),(0,qe.gbL)()),cn[1]?tp?tp.p(cn,lp):((tp=Rg(cn)).c(),tp.m(an,null)):tp&&(tp.d(1),tp=null)},i:function(op){ld||((0,qe.Ui)(gd),(0,qe.Ui)(uo),(0,qe.Ui)(Xd),ld=!0)},o:function(op){(0,qe.etI)(gd),(0,qe.etI)(uo),(0,qe.etI)(Xd),ld=!1},d:function(op){op&&(0,qe.ogt)(an),gd&&gd.d(),Dd[ln].d(),cn[27](null),Xd&&Xd.d(),cn[29](null),tp&&tp.d(),cn[30](null),dd=!1,(0,qe.j7q)(Sd)}}}function ry(cn,an,nn){var rn,un,ln,uo,ho,Mi,ld,dd=an.$$slots,Sd=dd===void 0?{}:dd,gd=an.$$scope,Wd=(0,qe.XGm)(Sd),Dd=this&&this.__awaiter||function(pp,Vp,Bp,Up){return new(Bp||(Bp=Promise))(function(Jp,rv){function Lv(lv){try{Ov(Up.next(lv))}catch(Iv){rv(Iv)}}function Dv(lv){try{Ov(Up.throw(lv))}catch(Iv){rv(Iv)}}function Ov(lv){var Iv;lv.done?Jp(lv.value):(Iv=lv.value,Iv instanceof Bp?Iv:new Bp(function(Gv){Gv(Iv)})).then(Lv,Dv)}Ov((Up=Up.apply(pp,Vp||[])).next())})},Gd=an.items,Xd=an.itemKey,tp=Xd===void 0?void 0:Xd,op=an.itemHeight,lp=op===void 0?void 0:op,Pp=an.buffer,Ip=Pp===void 0?200:Pp,Gp=an.stickToBottom,zp=Gp!==void 0&&Gp,Kp=an.scrollbar,kp=Kp!==void 0&&Kp,Sp=an.start,Xp=Sp===void 0?0:Sp,fv=an.end,Yp=fv===void 0?0:fv,qp=0,Fp=0,hp=0,xp=0,Qp=100,up=0,Tp=[],$p=[],Rp=[],Hp=q0(),av=function(){return Math.max(0,xp+qp+Fp-hp)},cv=!0,dv=!1,tv=[],Sv=!1,pv=!1,Av=Wm(),uv=function(pp,Vp){var Bp;(0,Ye.H3)(function(){var Up=pp();if(Up){Vp(Up.getBoundingClientRect().height),Bp&&Bp.disconnect();var Jp=hg();(Bp=new Jp(function(rv){var Lv=rv[0];Vp(Lv.contentRect.height)})).observe(Up)}else Vp(0),Bp&&(Bp.disconnect(),Bp=null)}),(0,Ye.ev)(function(){Bp&&(Bp.disconnect(),Bp=null)})},Pv=function(){var pp=Mi.getPosition(),Vp=100/(xp+qp+Fp);nn(8,up=pp*Vp),nn(7,Qp=hp*Vp)},hv=function(pp){var Vp=av();(pp||Mi.getPosition()>Vp)&&Mi.updatePosition(Vp)},Wv=function(pp){(function(Vp,Bp,Up){for(var Jp=new Map,rv=0;rv<tv.length;rv+=1){var Lv=tv[rv],Dv=tp===void 0?Lv:Lv[tp];Jp.set(Dv,Tp[rv])}nn(9,$p.length=Tp.length=Vp.length,$p);for(var Ov=0,lv=0;lv<Vp.length;lv+=1){var Iv=Vp[lv],Gv=tp===void 0?Iv:Iv[tp];Jp.has(Gv)?Tp[lv]=Jp.get(Gv):Tp[lv]=Up,nn(9,$p[lv]=Ov,$p),Ov+=Tp[lv]}xp=Math.max(Ov,Bp-qp-Fp),tv=Vp,Av?(Hv(Vp,Mi.getPosition(),Bp),nn(6,ho.style.height=xp+"px",ho),hv(cv&&zp),Pv()):Hv(Vp,0,9e6)})(pp,hp,lp)};function Hv(pp,Vp,Bp){for(var Up=0,Jp=0;Up<pp.length&&Jp+Tp[Up]<Vp-Ip;)Jp+=Tp[Up],Up+=1;for(nn(16,Xp=Up);Up<pp.length&&Bp&&Jp<Vp+Bp+Ip;)Jp+=Tp[Up],Up+=1;nn(17,Yp=Up),nn(10,Rp=Hp(pp.length,Xp,Yp))}var cm=function(pp,Vp){return Dd(void 0,void 0,void 0,nv().mark(function Bp(){var Up,Jp,rv,Lv;return nv().wrap(function(Dv){for(;;)switch(Dv.prev=Dv.next){case 0:if(Tp[pp]!==Vp&&hp!==0){Dv.next=2;break}return Dv.abrupt("return");case 2:for(Up=Tp[pp],Tp[pp]=Vp,Jp=Gd.length,rv=pp;rv<Jp-1;rv+=1)nn(9,$p[rv+1]=$p[rv]+Tp[rv],$p);return xp=Math.max($p[Jp-1]+Tp[Jp-1],hp-qp-Fp),Lv=Mi.getPosition(),dv=!0,$p[pp]+Up<Lv?Mi.updatePosition(Lv+Vp-Up):hv(cv&&zp),Dv.next=12,new Promise(function(Ov){return setTimeout(Ov,0)});case 12:Hv(Gd,Mi.getPosition(),hp),nn(6,ho.style.height=xp+"px",ho),Pv();case 15:case"end":return Dv.stop()}},Bp)}))};(0,Ye.H3)(function(){nn(23,Sv=!0),mg.use()}),(0,Ye.ev)(function(){mg.unuse()}),Av&&(Av&&(Mi=Mi||new $0(av,function(pp){return Dd(void 0,void 0,void 0,nv().mark(function Vp(){var Bp;return nv().wrap(function(Up){for(;;)switch(Up.prev=Up.next){case 0:if(Bp=av(),cv=Math.abs(pp-Bp)<=1,nn(5,uo.style.transform="translateY("+-pp+"px) translateZ(0)",uo),Pv(),!dv){Up.next=8;break}dv=!1,Up.next=11;break;case 8:return Up.next=10,new Promise(function(Jp){return setTimeout(Jp,0)});case 10:Hv(Gd,pp,hp);case 11:case"end":return Up.stop()}},Vp)}))}),nn(11,ld=ld||new z0(Mi))),!pv&&Av&&(uv(function(){return ln},function(pp){return Dd(void 0,void 0,void 0,nv().mark(function Vp(){var Bp,Up;return nv().wrap(function(Jp){for(;;)switch(Jp.prev=Jp.next){case 0:if(hp!==pp){Jp.next=2;break}return Jp.abrupt("return");case 2:for(hp=pp,Bp=0,Up=0;Up<Gd.length;Up+=1)Bp+=Tp[Up];return xp=Math.max(Bp,hp-Fp),nn(6,ho.style.height=xp+"px",ho),Jp.next=9,new Promise(function(rv){return setTimeout(rv,0)});case 9:Wv(Gd),Hv(Gd,Mi.getPosition(),hp),hp!==0&&hv(cv&&zp),Pv();case 13:case"end":return Jp.stop()}},Vp)}))}),uv(function(){return un},function(pp){if(Fp!==pp){Fp=pp;for(var Vp=0,Bp=0;Bp<Gd.length;Bp+=1)Vp+=Tp[Bp];xp=Math.max(Vp,hp-qp-Fp),nn(6,ho.style.height=xp+"px",ho),hp!==0&&hv(cv&&zp),Pv()}}),uv(function(){return rn},function(pp){qp!==pp&&(qp=pp,Wv(Gd),Pv())})));var gm={scrollTo:function(pp){if(Av){var Vp=$p[Math.max(0,Math.min(Gd.length-1,pp))],Bp=Math.min(av(),Vp),Up=Math.min(Math.floor(500*Math.abs(Mi.getPosition()-Bp)/2e3),500);Mi.scrollTo(Bp,Up)}}};return cn.$$set=function(pp){"items"in pp&&nn(0,Gd=pp.items),"itemKey"in pp&&nn(18,tp=pp.itemKey),"itemHeight"in pp&&nn(19,lp=pp.itemHeight),"buffer"in pp&&nn(20,Ip=pp.buffer),"stickToBottom"in pp&&nn(21,zp=pp.stickToBottom),"scrollbar"in pp&&nn(1,kp=pp.scrollbar),"start"in pp&&nn(16,Xp=pp.start),"end"in pp&&nn(17,Yp=pp.end),"$$scope"in pp&&nn(31,gd=pp.$$scope)},cn.$$.update=function(){8388609&cn.$$.dirty[0]&&Sv&&(Av||nn(4,ln.parentElement.style.height="auto",ln),Wv(Gd),pv=!0)},[Gd,kp,rn,un,ln,uo,ho,Qp,up,$p,Rp,ld,function(){},Av,cm,Wd,Xp,Yp,tp,lp,Ip,zp,gm,Sv,Sd,function(pp){qe.VnY[pp?"unshift":"push"](function(){nn(2,rn=pp)})},function(pp,Vp){return cm(pp.index,Vp)},function(pp){qe.VnY[pp?"unshift":"push"](function(){nn(6,ho=pp)})},function(pp){qe.VnY[pp?"unshift":"push"](function(){nn(3,un=pp)})},function(pp){qe.VnY[pp?"unshift":"push"](function(){nn(5,uo=pp)})},function(pp){qe.VnY[pp?"unshift":"push"](function(){nn(4,ln=pp),nn(23,Sv),nn(13,Av),nn(0,Gd)})},gd]}var oy=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,ry,ny,qe.N8,{items:0,itemKey:18,itemHeight:19,buffer:20,stickToBottom:21,scrollbar:1,start:16,end:17,handler:22},null,[-1,-1]),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"items",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({items:nn}),(0,qe.yl1)()}},{key:"itemKey",get:function(){return this.$$.ctx[18]},set:function(nn){this.$$set({itemKey:nn}),(0,qe.yl1)()}},{key:"itemHeight",get:function(){return this.$$.ctx[19]},set:function(nn){this.$$set({itemHeight:nn}),(0,qe.yl1)()}},{key:"buffer",get:function(){return this.$$.ctx[20]},set:function(nn){this.$$set({buffer:nn}),(0,qe.yl1)()}},{key:"stickToBottom",get:function(){return this.$$.ctx[21]},set:function(nn){this.$$set({stickToBottom:nn}),(0,qe.yl1)()}},{key:"scrollbar",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({scrollbar:nn}),(0,qe.yl1)()}},{key:"start",get:function(){return this.$$.ctx[16]},set:function(nn){this.$$set({start:nn}),(0,qe.yl1)()}},{key:"end",get:function(){return this.$$.ctx[17]},set:function(nn){this.$$set({end:nn}),(0,qe.yl1)()}},{key:"handler",get:function(){return this.$$.ctx[22]}}]),an}(qe.f_C),Ig=oy;function iy(cn){var an;return{c:function(){(an=(0,qe.bGB)("div")).textContent="Empty",(0,qe.Ljt)(an,"slot","empty"),(0,qe.Ljt)(an,"class","vc-plugin-empty")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},p:qe.ZTd,d:function(nn){nn&&(0,qe.ogt)(an)}}}function ay(cn){var an,nn;return(an=new D0({props:{slot:"item",log:cn[16],showTimestamps:cn[1],groupHeader:cn[16].groupHeader}})).$on("groupCollapsed",cn[6]),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:function(rn,un){var ln={};65536&un&&(ln.log=rn[16]),2&un&&(ln.showTimestamps=rn[1]),65536&un&&(ln.groupHeader=rn[16].groupHeader),an.$set(ln)},i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function Tg(cn){var an,nn;return(an=new O0.Z({})).$on("filterText",cn[5]),{c:function(){(0,qe.YCL)(an.$$.fragment)},m:function(rn,un){(0,qe.yef)(an,rn,un),nn=!0},p:qe.ZTd,i:function(rn){nn||((0,qe.Ui)(an.$$.fragment,rn),nn=!0)},o:function(rn){(0,qe.etI)(an.$$.fragment,rn),nn=!1},d:function(rn){(0,qe.vpE)(an,rn)}}}function sy(cn){var an,nn,rn=cn[0]&&Tg(cn);return{c:function(){rn&&rn.c(),an=(0,qe.cSb)()},m:function(un,ln){rn&&rn.m(un,ln),(0,qe.$Tr)(un,an,ln),nn=!0},p:function(un,ln){un[0]?rn?(rn.p(un,ln),1&ln&&(0,qe.Ui)(rn,1)):((rn=Tg(un)).c(),(0,qe.Ui)(rn,1),rn.m(an.parentNode,an)):rn&&((0,qe.dvw)(),(0,qe.etI)(rn,1,1,function(){rn=null}),(0,qe.gbL)())},i:function(un){nn||((0,qe.Ui)(rn),nn=!0)},o:function(un){(0,qe.etI)(rn),nn=!1},d:function(un){rn&&rn.d(un),un&&(0,qe.ogt)(an)}}}function uy(cn){var an,nn,rn,un;function ln(ho){cn[15](ho)}var uo={items:cn[4],itemKey:"_id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{footer:[sy],item:[ay,function(ho){return{16:ho.item}},function(ho){return ho.item?65536:0}],empty:[iy]},$$scope:{ctx:cn}};return cn[3]!==void 0&&(uo.handler=cn[3]),nn=new Ig({props:uo}),qe.VnY.push(function(){return(0,qe.akz)(nn,"handler",ln)}),{c:function(){an=(0,qe.bGB)("div"),(0,qe.YCL)(nn.$$.fragment),(0,qe.Ljt)(an,"class","vc-plugin-content"),(0,qe.VHj)(an,"vc-logs-has-cmd",cn[0])},m:function(ho,Mi){(0,qe.$Tr)(ho,an,Mi),(0,qe.yef)(nn,an,null),un=!0},p:function(ho,Mi){var ld=Mi[0],dd={};16&ld&&(dd.items=ho[4]),196611&ld&&(dd.$$scope={dirty:ld,ctx:ho}),!rn&&8&ld&&(rn=!0,dd.handler=ho[3],(0,qe.hjT)(function(){return rn=!1})),nn.$set(dd),1&ld&&(0,qe.VHj)(an,"vc-logs-has-cmd",ho[0])},i:function(ho){un||((0,qe.Ui)(nn.$$.fragment,ho),un=!0)},o:function(ho){(0,qe.etI)(nn.$$.fragment,ho),un=!1},d:function(ho){ho&&(0,qe.ogt)(an),(0,qe.vpE)(nn)}}}function cy(cn,an,nn){var rn,un=qe.ZTd;cn.$$.on_destroy.push(function(){return un()});var ln,uo,ho=an.pluginId,Mi=ho===void 0?"default":ho,ld=an.showCmd,dd=ld!==void 0&&ld,Sd=an.filterType,gd=Sd===void 0?"all":Sd,Wd=an.showTimestamps,Dd=Wd!==void 0&&Wd,Gd=!1,Xd="",tp=[];return(0,Ye.H3)(function(){fg.use()}),(0,Ye.ev)(function(){fg.unuse()}),cn.$$set=function(op){"pluginId"in op&&nn(7,Mi=op.pluginId),"showCmd"in op&&nn(0,dd=op.showCmd),"filterType"in op&&nn(8,gd=op.filterType),"showTimestamps"in op&&nn(1,Dd=op.showTimestamps)},cn.$$.update=function(){29056&cn.$$.dirty&&(Gd||(nn(2,ln=bp.O.get(Mi)),un(),un=(0,qe.LdU)(ln,function(op){return nn(14,rn=op)}),nn(12,Gd=!0)),nn(4,tp=rn.logList.filter(function(op){return(gd==="all"||gd===op.type)&&(Xd===""||(0,yp.HX)(op,Xd))&&!op.groupCollapsed})))},[dd,Dd,ln,uo,tp,function(op){nn(13,Xd=op.detail.filterText||"")},function(op){var lp=op.detail.groupLabel,Pp=op.detail.groupHeader,Ip=op.detail.isGroupCollapsed;ln.update(function(Gp){return Gp.logList.forEach(function(zp){zp.groupLabel===lp&&(zp.groupHeader>0?zp.groupHeader=Pp:zp.groupCollapsed=Ip)}),Gp})},Mi,gd,function(){uo.scrollTo(0)},function(){uo.scrollTo(tp.length-1)},{fixedHeight:!0},Gd,Xd,rn,function(op){nn(3,uo=op)}]}var ly=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,cy,uy,qe.N8,{pluginId:7,showCmd:0,filterType:8,showTimestamps:1,scrollToTop:9,scrollToBottom:10,options:11}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"pluginId",get:function(){return this.$$.ctx[7]},set:function(nn){this.$$set({pluginId:nn}),(0,qe.yl1)()}},{key:"showCmd",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({showCmd:nn}),(0,qe.yl1)()}},{key:"filterType",get:function(){return this.$$.ctx[8]},set:function(nn){this.$$set({filterType:nn}),(0,qe.yl1)()}},{key:"showTimestamps",get:function(){return this.$$.ctx[1]},set:function(nn){this.$$set({showTimestamps:nn}),(0,qe.yl1)()}},{key:"scrollToTop",get:function(){return this.$$.ctx[9]}},{key:"scrollToBottom",get:function(){return this.$$.ctx[10]}},{key:"options",get:function(){return this.$$.ctx[11]}}]),an}(qe.f_C),fy=ly,_m=__webpack_require__(5629),kg=function(){function cn(an){this.model=void 0,this.pluginId=void 0,this.pluginId=an}return cn.prototype.destroy=function(){this.model=void 0},cn}(),hy=function(cn){function an(){for(var rn,un=arguments.length,ln=new Array(un),uo=0;uo<un;uo++)ln[uo]=arguments[uo];return(rn=cn.call.apply(cn,[this].concat(ln))||this).model=_m.W.getSingleton(_m.W,"VConsoleLogModel"),rn}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.log=function(){for(var rn=arguments.length,un=new Array(rn),ln=0;ln<rn;ln++)un[ln]=arguments[ln];this.addLog.apply(this,["log"].concat(un))},nn.info=function(){for(var rn=arguments.length,un=new Array(rn),ln=0;ln<rn;ln++)un[ln]=arguments[ln];this.addLog.apply(this,["info"].concat(un))},nn.debug=function(){for(var rn=arguments.length,un=new Array(rn),ln=0;ln<rn;ln++)un[ln]=arguments[ln];this.addLog.apply(this,["debug"].concat(un))},nn.warn=function(){for(var rn=arguments.length,un=new Array(rn),ln=0;ln<rn;ln++)un[ln]=arguments[ln];this.addLog.apply(this,["warn"].concat(un))},nn.error=function(){for(var rn=arguments.length,un=new Array(rn),ln=0;ln<rn;ln++)un[ln]=arguments[ln];this.addLog.apply(this,["error"].concat(un))},nn.clear=function(){this.model&&this.model.clearPluginLog(this.pluginId)},nn.addLog=function(rn){if(this.model){for(var un=arguments.length,ln=new Array(un>1?un-1:0),uo=1;uo<un;uo++)ln[uo-1]=arguments[uo];ln.unshift("["+this.pluginId+"]"),this.model.addLog({type:rn,origData:ln},{noOrig:!0})}},an}(kg),$m=function(cn){function an(rn,un){var ln;return(ln=cn.call(this,rn,un,fy,{pluginId:rn,filterType:"all"})||this).model=_m.W.getSingleton(_m.W,"VConsoleLogModel"),ln.isReady=!1,ln.isShow=!1,ln.isInBottom=!0,ln.model.bindPlugin(rn),ln.exporter=new hy(rn),ln}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onReady=function(){var rn,un;cn.prototype.onReady.call(this),this.model.maxLogNumber=Number((rn=this.vConsole.option.log)==null?void 0:rn.maxLogNumber)||1e3,this.compInstance.showTimestamps=!((un=this.vConsole.option.log)==null||!un.showTimestamps)},nn.onRemove=function(){cn.prototype.onRemove.call(this),this.model.unbindPlugin(this.id)},nn.onAddTopBar=function(rn){for(var un=this,ln=["All","Log","Info","Warn","Error"],uo=[],ho=0;ho<ln.length;ho++)uo.push({name:ln[ho],data:{type:ln[ho].toLowerCase()},actived:ho===0,className:"",onClick:function(Mi,ld){if(ld.type===un.compInstance.filterType)return!1;un.compInstance.filterType=ld.type}});uo[0].className="vc-actived",rn(uo)},nn.onAddTool=function(rn){var un=this;rn([{name:"Clear",global:!1,onClick:function(ln){un.model.clearPluginLog(un.id),un.vConsole.triggerEvent("clearLog")}},{name:"Top",global:!1,onClick:function(ln){un.compInstance.scrollToTop()}},{name:"Bottom",global:!1,onClick:function(ln){un.compInstance.scrollToBottom()}}])},nn.onUpdateOption=function(){var rn,un,ln,uo;((rn=this.vConsole.option.log)==null?void 0:rn.maxLogNumber)!==this.model.maxLogNumber&&(this.model.maxLogNumber=Number((ln=this.vConsole.option.log)==null?void 0:ln.maxLogNumber)||1e3),!((un=this.vConsole.option.log)==null||!un.showTimestamps)!==this.compInstance.showTimestamps&&(this.compInstance.showTimestamps=!((uo=this.vConsole.option.log)==null||!uo.showTimestamps))},an}(sp),Sg=function(cn){function an(){for(var rn,un=arguments.length,ln=new Array(un),uo=0;uo<un;uo++)ln[uo]=arguments[uo];return(rn=cn.call.apply(cn,[this].concat(ln))||this).onErrorHandler=void 0,rn.resourceErrorHandler=void 0,rn.rejectionHandler=void 0,rn}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onReady=function(){cn.prototype.onReady.call(this),this.bindErrors(),this.compInstance.showCmd=!0},nn.onRemove=function(){cn.prototype.onRemove.call(this),this.unbindErrors()},nn.bindErrors=function(){y.FJ(window)&&y.mf(window.addEventListener)&&(this.catchWindowOnError(),this.catchResourceError(),this.catchUnhandledRejection())},nn.unbindErrors=function(){y.FJ(window)&&y.mf(window.addEventListener)&&(window.removeEventListener("error",this.onErrorHandler),window.removeEventListener("error",this.resourceErrorHandler),window.removeEventListener("unhandledrejection",this.rejectionHandler))},nn.catchWindowOnError=function(){var rn=this;this.onErrorHandler=this.onErrorHandler?this.onErrorHandler:function(un){var ln=un.message;un.filename&&(ln+="\\n\\t"+un.filename.replace(location.origin,""),(un.lineno||un.colno)&&(ln+=":"+un.lineno+":"+un.colno)),ln+="\\n"+(!!un.error&&!!un.error.stack&&un.error.stack.toString()||""),rn.model.addLog({type:"error",origData:[ln]},{noOrig:!0})},window.removeEventListener("error",this.onErrorHandler),window.addEventListener("error",this.onErrorHandler)},nn.catchResourceError=function(){var rn=this;this.resourceErrorHandler=this.resourceErrorHandler?this.resourceErrorHandler:function(un){var ln=un.target;if(["link","video","script","img","audio"].indexOf(ln.localName)>-1){var uo=ln.href||ln.src||ln.currentSrc;rn.model.addLog({type:"error",origData:["GET <"+ln.localName+"> error: "+uo]},{noOrig:!0})}},window.removeEventListener("error",this.resourceErrorHandler),window.addEventListener("error",this.resourceErrorHandler,!0)},nn.catchUnhandledRejection=function(){var rn=this;this.rejectionHandler=this.rejectionHandler?this.rejectionHandler:function(un){var ln=un&&un.reason,uo="Uncaught (in promise) ",ho=[uo,ln];ln instanceof Error&&(ho=[uo,{name:ln.name,message:ln.message,stack:ln.stack}]),rn.model.addLog({type:"error",origData:ho},{noOrig:!0})},window.removeEventListener("unhandledrejection",this.rejectionHandler),window.addEventListener("unhandledrejection",this.rejectionHandler)},an}($m),Ag=function(cn){function an(){return cn.apply(this,arguments)||this}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onReady=function(){cn.prototype.onReady.call(this),this.printSystemInfo()},nn.printSystemInfo=function(){var rn=navigator.userAgent,un=[],ln=rn.match(/MicroMessenger\/([\d\.]+)/i),uo=ln&&ln[1]?ln[1]:null;location.host==="servicewechat.com"||console.info("[system]","Location:",location.href);var ho=rn.match(/(ipod).*\s([\d_]+)/i),Mi=rn.match(/(ipad).*\s([\d_]+)/i),ld=rn.match(/(iphone)\sos\s([\d_]+)/i),dd=rn.match(/(android)\s([\d\.]+)/i),Sd=rn.match(/(Mac OS X)\s([\d_]+)/i);un=[],dd?un.push("Android "+dd[2]):ld?un.push("iPhone, iOS "+ld[2].replace(/_/g,".")):Mi?un.push("iPad, iOS "+Mi[2].replace(/_/g,".")):ho?un.push("iPod, iOS "+ho[2].replace(/_/g,".")):Sd&&un.push("Mac, MacOS "+Sd[2].replace(/_/g,".")),uo&&un.push("WeChat "+uo),console.info("[system]","Client:",un.length?un.join(", "):"Unknown");var gd=rn.toLowerCase().match(/ nettype\/([^ ]+)/g);gd&&gd[0]&&(un=[(gd=gd[0].split("/"))[1]],console.info("[system]","Network:",un.length?un.join(", "):"Unknown")),console.info("[system]","UA:",rn),setTimeout(function(){var Wd=window.performance||window.msPerformance||window.webkitPerformance;if(Wd&&Wd.timing){var Dd=Wd.timing;Dd.navigationStart&&console.info("[system]","navigationStart:",Dd.navigationStart),Dd.navigationStart&&Dd.domainLookupStart&&console.info("[system]","navigation:",Dd.domainLookupStart-Dd.navigationStart+"ms"),Dd.domainLookupEnd&&Dd.domainLookupStart&&console.info("[system]","dns:",Dd.domainLookupEnd-Dd.domainLookupStart+"ms"),Dd.connectEnd&&Dd.connectStart&&(Dd.connectEnd&&Dd.secureConnectionStart?console.info("[system]","tcp (ssl):",Dd.connectEnd-Dd.connectStart+"ms ("+(Dd.connectEnd-Dd.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",Dd.connectEnd-Dd.connectStart+"ms")),Dd.responseStart&&Dd.requestStart&&console.info("[system]","request:",Dd.responseStart-Dd.requestStart+"ms"),Dd.responseEnd&&Dd.responseStart&&console.info("[system]","response:",Dd.responseEnd-Dd.responseStart+"ms"),Dd.domComplete&&Dd.domLoading&&(Dd.domContentLoadedEventStart&&Dd.domLoading?console.info("[system]","domComplete (domLoaded):",Dd.domComplete-Dd.domLoading+"ms ("+(Dd.domContentLoadedEventStart-Dd.domLoading)+"ms)"):console.info("[system]","domComplete:",Dd.domComplete-Dd.domLoading+"ms")),Dd.loadEventEnd&&Dd.loadEventStart&&console.info("[system]","loadEvent:",Dd.loadEventEnd-Dd.loadEventStart+"ms"),Dd.navigationStart&&Dd.loadEventEnd&&console.info("[system]","total (DOM):",Dd.loadEventEnd-Dd.navigationStart+"ms ("+(Dd.domComplete-Dd.navigationStart)+"ms)")}},0)},an}($m),mv=__webpack_require__(3313),Dg=__webpack_require__(643);function Hm(cn,an){var nn=typeof Symbol<"u"&&cn[Symbol.iterator]||cn["@@iterator"];if(nn)return(nn=nn.call(cn)).next.bind(nn);if(Array.isArray(cn)||(nn=function(un,ln){if(un){if(typeof un=="string")return Og(un,ln);var uo=Object.prototype.toString.call(un).slice(8,-1);if(uo==="Object"&&un.constructor&&(uo=un.constructor.name),uo==="Map"||uo==="Set")return Array.from(un);if(uo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(uo))return Og(un,ln)}}(cn))||an){nn&&(cn=nn);var rn=0;return function(){return rn>=cn.length?{done:!0}:{done:!1,value:cn[rn++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Og(cn,an){(an==null||an>cn.length)&&(an=cn.length);for(var nn=0,rn=new Array(an);nn<an;nn++)rn[nn]=cn[nn];return rn}var Pg=function(cn,an){an===void 0&&(an={}),y.Kn(an)||(an={});var nn=cn?cn.split("?"):[];if(nn.shift(),nn.length>0)for(var rn,un=Hm(nn=nn.join("?").split("&"));!(rn=un()).done;){var ln=rn.value.split("=");try{an[ln[0]]=decodeURIComponent(ln[1])}catch{an[ln[0]]=ln[1]}}return an},sm=function(cn,an){var nn="";switch(cn){case"":case"text":case"json":if(y.HD(an))try{nn=JSON.parse(an),nn=y.hZ(nn,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0})}catch{nn=y.id(String(an),1e4)}else y.Kn(an)||y.kJ(an)?nn=y.hZ(an,{maxDepth:10,keyMaxLen:1e4,pretty:!0,standardJSON:!0}):an!==void 0&&(nn=Object.prototype.toString.call(an));break;default:an!==void 0&&(nn=Object.prototype.toString.call(an))}return nn},Gm=function(cn){if(!cn)return null;var an=null;if(typeof cn=="string")try{an=JSON.parse(cn)}catch{var nn=cn.split("&");if(nn.length===1)an=cn;else{an={};for(var rn,un=Hm(nn);!(rn=un()).done;){var ln=rn.value.split("=");an[ln[0]]=ln[1]===void 0?"undefined":ln[1]}}}else if(y.TW(cn)){an={};for(var uo,ho=Hm(cn);!(uo=ho()).done;){var Mi=uo.value,ld=Mi[0],dd=Mi[1];an[ld]=typeof dd=="string"?dd:"[object Object]"}}else y.PO(cn)?an=cn:an="[object "+y.zl(cn)+"]";return an},zm=function(cn){return cn===void 0&&(cn=""),cn.startsWith("//")&&(cn=""+new URL(window.location.href).protocol+cn),cn.startsWith("http")?new URL(cn):new URL(cn,window.location.href)},dm=function(){this.id="",this.name="",this.method="",this.url="",this.status=0,this.statusText="",this.cancelState=0,this.readyState=0,this.header=null,this.responseType="",this.requestType=void 0,this.requestHeader=null,this.response=void 0,this.responseSize=0,this.responseSizeText="",this.startTime=0,this.startTimeText="",this.endTime=0,this.costTime=0,this.getData=null,this.postData=null,this.actived=!1,this.noVConsole=!1,this.id=(0,y.QI)()},Lg=function(cn){function an(nn){var rn;return(rn=cn.call(this)||this)._response=void 0,new Proxy(nn,an.Handler)||(0,Ge.Z)(rn)}return(0,Ke.Z)(an,cn),an}(dm);Lg.Handler={get:function(cn,an){return an==="response"?cn._response:Reflect.get(cn,an)},set:function(cn,an,nn){var rn;switch(an){case"response":return cn._response=sm(cn.responseType,nn),!0;case"url":var un=((rn=nn=String(nn))==null?void 0:rn.replace(new RegExp("[/]*$"),"").split("/").pop())||"Unknown";Reflect.set(cn,"name",un);var ln=Pg(nn,cn.getData);Reflect.set(cn,"getData",ln);break;case"status":var uo=String(nn)||"Unknown";Reflect.set(cn,"statusText",uo);break;case"startTime":if(nn&&cn.endTime){var ho=cn.endTime-nn;Reflect.set(cn,"costTime",ho)}break;case"endTime":if(nn&&cn.startTime){var Mi=nn-cn.startTime;Reflect.set(cn,"costTime",Mi)}}return Reflect.set(cn,an,nn)}};var dy=function(){function cn(nn,rn){var un=this;this.XMLReq=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.XMLReq=nn,this.XMLReq.onreadystatechange=function(){un.onReadyStateChange()},this.XMLReq.onabort=function(){un.onAbort()},this.XMLReq.ontimeout=function(){un.onTimeout()},this.item=new dm,this.item.requestType="xhr",this.onUpdateCallback=rn}var an=cn.prototype;return an.get=function(nn,rn){switch(rn){case"_noVConsole":return this.item.noVConsole;case"open":return this.getOpen(nn);case"send":return this.getSend(nn);case"setRequestHeader":return this.getSetRequestHeader(nn);default:var un=Reflect.get(nn,rn);return typeof un=="function"?un.bind(nn):un}},an.set=function(nn,rn,un){switch(rn){case"_noVConsole":return void(this.item.noVConsole=!!un);case"onreadystatechange":return this.setOnReadyStateChange(nn,rn,un);case"onabort":return this.setOnAbort(nn,rn,un);case"ontimeout":return this.setOnTimeout(nn,rn,un)}return Reflect.set(nn,rn,un)},an.onReadyStateChange=function(){this.item.readyState=this.XMLReq.readyState,this.item.responseType=this.XMLReq.responseType,this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-this.item.startTime,this.updateItemByReadyState(),this.item.response=sm(this.item.responseType,this.item.response),this.triggerUpdate()},an.onAbort=function(){this.item.cancelState=1,this.item.statusText="Abort",this.triggerUpdate()},an.onTimeout=function(){this.item.cancelState=3,this.item.statusText="Timeout",this.triggerUpdate()},an.triggerUpdate=function(){this.item.noVConsole||this.onUpdateCallback(this.item)},an.getOpen=function(nn){var rn=this,un=Reflect.get(nn,"open");return function(){for(var ln=arguments.length,uo=new Array(ln),ho=0;ho<ln;ho++)uo[ho]=arguments[ho];var Mi=uo[0],ld=uo[1];return rn.item.method=Mi?Mi.toUpperCase():"GET",rn.item.url=ld||"",rn.item.name=rn.item.url.replace(new RegExp("[/]*$"),"").split("/").pop()||"",rn.item.getData=Pg(rn.item.url,{}),rn.triggerUpdate(),un.apply(nn,uo)}},an.getSend=function(nn){var rn=this,un=Reflect.get(nn,"send");return function(){for(var ln=arguments.length,uo=new Array(ln),ho=0;ho<ln;ho++)uo[ho]=arguments[ho];var Mi=uo[0];return rn.item.postData=Gm(Mi),rn.triggerUpdate(),un.apply(nn,uo)}},an.getSetRequestHeader=function(nn){var rn=this,un=Reflect.get(nn,"setRequestHeader");return function(){rn.item.requestHeader||(rn.item.requestHeader={});for(var ln=arguments.length,uo=new Array(ln),ho=0;ho<ln;ho++)uo[ho]=arguments[ho];return rn.item.requestHeader[uo[0]]=uo[1],rn.triggerUpdate(),un.apply(nn,uo)}},an.setOnReadyStateChange=function(nn,rn,un){var ln=this;return Reflect.set(nn,rn,function(){ln.onReadyStateChange();for(var uo=arguments.length,ho=new Array(uo),Mi=0;Mi<uo;Mi++)ho[Mi]=arguments[Mi];un.apply(nn,ho)})},an.setOnAbort=function(nn,rn,un){var ln=this;return Reflect.set(nn,rn,function(){ln.onAbort();for(var uo=arguments.length,ho=new Array(uo),Mi=0;Mi<uo;Mi++)ho[Mi]=arguments[Mi];un.apply(nn,ho)})},an.setOnTimeout=function(nn,rn,un){var ln=this;return Reflect.set(nn,rn,function(){ln.onTimeout();for(var uo=arguments.length,ho=new Array(uo),Mi=0;Mi<uo;Mi++)ho[Mi]=arguments[Mi];un.apply(nn,ho)})},an.updateItemByReadyState=function(){switch(this.XMLReq.readyState){case 0:case 1:if(this.item.status=0,this.item.statusText="Pending",!this.item.startTime){this.item.startTime=Date.now();var nn=(0,y._3)(this.item.startTime);this.item.startTimeText=nn.year+"-"+nn.month+"-"+nn.day+" "+nn.hour+":"+nn.minute+":"+nn.second+"."+nn.millisecond}break;case 2:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.item.header={};for(var rn=(this.XMLReq.getAllResponseHeaders()||"").split(`
`),un=0;un<rn.length;un++){var ln=rn[un];if(ln){var uo=ln.split(": "),ho=uo[0],Mi=uo.slice(1).join(": ");this.item.header[ho]=Mi}}break;case 3:this.item.status=this.XMLReq.status,this.item.statusText="Loading",this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,y.KL)(this.item.responseSize));break;case 4:this.item.status=this.XMLReq.status||this.item.status||0,this.item.statusText=String(this.item.status),this.item.endTime=Date.now(),this.item.costTime=this.item.endTime-(this.item.startTime||this.item.endTime),this.item.response=this.XMLReq.response,this.XMLReq.response&&this.XMLReq.response.length&&(this.item.responseSize=this.XMLReq.response.length,this.item.responseSizeText=(0,y.KL)(this.item.responseSize));break;default:this.item.status=this.XMLReq.status,this.item.statusText="Unknown"}},cn}(),qm=function(){function cn(){}return cn.create=function(an){return new Proxy(XMLHttpRequest,{construct:function(nn){var rn=new nn;return new Proxy(rn,new dy(rn,an))}})},cn}();function Km(cn,an){var nn=typeof Symbol<"u"&&cn[Symbol.iterator]||cn["@@iterator"];if(nn)return(nn=nn.call(cn)).next.bind(nn);if(Array.isArray(cn)||(nn=function(un,ln){if(un){if(typeof un=="string")return Mg(un,ln);var uo=Object.prototype.toString.call(un).slice(8,-1);if(uo==="Object"&&un.constructor&&(uo=un.constructor.name),uo==="Map"||uo==="Set")return Array.from(un);if(uo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(uo))return Mg(un,ln)}}(cn))||an){nn&&(cn=nn);var rn=0;return function(){return rn>=cn.length?{done:!0}:{done:!1,value:cn[rn++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mg(cn,an){(an==null||an>cn.length)&&(an=cn.length);for(var nn=0,rn=new Array(an);nn<an;nn++)rn[nn]=cn[nn];return rn}qm.origXMLHttpRequest=XMLHttpRequest;var py=function(){function cn(nn,rn,un){this.resp=void 0,this.item=void 0,this.onUpdateCallback=void 0,this.resp=nn,this.item=rn,this.onUpdateCallback=un,this.mockReader()}var an=cn.prototype;return an.set=function(nn,rn,un){return Reflect.set(nn,rn,un)},an.get=function(nn,rn){var un=this,ln=Reflect.get(nn,rn);switch(rn){case"arrayBuffer":case"blob":case"formData":case"json":case"text":return function(){return un.item.responseType=rn.toLowerCase(),ln.apply(nn).then(function(uo){return un.item.response=sm(un.item.responseType,uo),un.onUpdateCallback(un.item),uo})}}return typeof ln=="function"?ln.bind(nn):ln},an.mockReader=function(){var nn,rn=this;if(this.resp.body&&typeof this.resp.body.getReader=="function"){var un=this.resp.body.getReader;this.resp.body.getReader=function(){var ln=un.apply(rn.resp.body);if(rn.item.readyState===4)return ln;var uo=ln.read,ho=ln.cancel;return rn.item.responseType="arraybuffer",ln.read=function(){return uo.apply(ln).then(function(Mi){if(nn){var ld=new Uint8Array(nn.length+Mi.value.length);ld.set(nn),ld.set(Mi.value,nn.length),nn=ld}else nn=new Uint8Array(Mi.value);return rn.item.endTime=Date.now(),rn.item.costTime=rn.item.endTime-(rn.item.startTime||rn.item.endTime),rn.item.readyState=Mi.done?4:3,rn.item.statusText=Mi.done?String(rn.item.status):"Loading",rn.item.responseSize=nn.length,rn.item.responseSizeText=y.KL(rn.item.responseSize),Mi.done&&(rn.item.response=sm(rn.item.responseType,nn)),rn.onUpdateCallback(rn.item),Mi})},ln.cancel=function(){rn.item.cancelState=2,rn.item.statusText="Cancel",rn.item.endTime=Date.now(),rn.item.costTime=rn.item.endTime-(rn.item.startTime||rn.item.endTime),rn.item.response=sm(rn.item.responseType,nn),rn.onUpdateCallback(rn.item);for(var Mi=arguments.length,ld=new Array(Mi),dd=0;dd<Mi;dd++)ld[dd]=arguments[dd];return ho.apply(ln,ld)},ln}}},cn}(),vy=function(){function cn(nn){this.onUpdateCallback=void 0,this.onUpdateCallback=nn}var an=cn.prototype;return an.apply=function(nn,rn,un){var ln=this,uo=un[0],ho=un[1],Mi=new dm;return this.beforeFetch(Mi,uo,ho),nn.apply(window,un).then(this.afterFetch(Mi)).catch(function(ld){throw Mi.endTime=Date.now(),Mi.costTime=Mi.endTime-(Mi.startTime||Mi.endTime),ln.onUpdateCallback(Mi),ld})},an.beforeFetch=function(nn,rn,un){var ln,uo="GET",ho=null;if(y.HD(rn)?(uo=(un==null?void 0:un.method)||"GET",ln=zm(rn),ho=(un==null?void 0:un.headers)||null):(uo=rn.method||"GET",ln=zm(rn.url),ho=rn.headers),nn.method=uo,nn.requestType="fetch",nn.requestHeader=ho,nn.url=ln.toString(),nn.name=(ln.pathname.split("/").pop()||"")+ln.search,nn.status=0,nn.statusText="Pending",nn.readyState=1,!nn.startTime){nn.startTime=Date.now();var Mi=y._3(nn.startTime);nn.startTimeText=Mi.year+"-"+Mi.month+"-"+Mi.day+" "+Mi.hour+":"+Mi.minute+":"+Mi.second+"."+Mi.millisecond}if(Object.prototype.toString.call(ho)==="[object Headers]"){nn.requestHeader={};for(var ld,dd=Km(ho);!(ld=dd()).done;){var Sd=ld.value,gd=Sd[0],Wd=Sd[1];nn.requestHeader[gd]=Wd}}else nn.requestHeader=ho;if(ln.search&&ln.searchParams){nn.getData={};for(var Dd,Gd=Km(ln.searchParams);!(Dd=Gd()).done;){var Xd=Dd.value,tp=Xd[0],op=Xd[1];nn.getData[tp]=op}}un!=null&&un.body&&(nn.postData=Gm(un.body)),this.onUpdateCallback(nn)},an.afterFetch=function(nn){var rn=this;return function(un){nn.endTime=Date.now(),nn.costTime=nn.endTime-(nn.startTime||nn.endTime),nn.status=un.status,nn.statusText=String(un.status);var ln=!1;nn.header={};for(var uo,ho=Km(un.headers);!(uo=ho()).done;){var Mi=uo.value,ld=Mi[0],dd=Mi[1];nn.header[ld]=dd,ln=dd.toLowerCase().indexOf("chunked")>-1||ln}return ln?nn.readyState=3:(nn.readyState=4,rn.handleResponseBody(un.clone(),nn).then(function(Sd){nn.responseSize=typeof Sd=="string"?Sd.length:Sd.byteLength,nn.responseSizeText=y.KL(nn.responseSize),nn.response=sm(nn.responseType,Sd),rn.onUpdateCallback(nn)})),rn.onUpdateCallback(nn),new Proxy(un,new py(un,nn,rn.onUpdateCallback))}},an.handleResponseBody=function(nn,rn){var un=nn.headers.get("content-type");return un&&un.includes("application/json")?(rn.responseType="json",nn.text()):un&&(un.includes("text/html")||un.includes("text/plain"))?(rn.responseType="text",nn.text()):(rn.responseType="arraybuffer",nn.arrayBuffer())},cn}(),Xm=function(){function cn(){}return cn.create=function(an){return new Proxy(fetch,new vy(an))},cn}();function my(cn,an){var nn=typeof Symbol<"u"&&cn[Symbol.iterator]||cn["@@iterator"];if(nn)return(nn=nn.call(cn)).next.bind(nn);if(Array.isArray(cn)||(nn=function(un,ln){if(un){if(typeof un=="string")return Ng(un,ln);var uo=Object.prototype.toString.call(un).slice(8,-1);if(uo==="Object"&&un.constructor&&(uo=un.constructor.name),uo==="Map"||uo==="Set")return Array.from(un);if(uo==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(uo))return Ng(un,ln)}}(cn))||an){nn&&(cn=nn);var rn=0;return function(){return rn>=cn.length?{done:!0}:{done:!1,value:cn[rn++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ng(cn,an){(an==null||an>cn.length)&&(an=cn.length);for(var nn=0,rn=new Array(an);nn<an;nn++)rn[nn]=cn[nn];return rn}Xm.origFetch=fetch;var gy=function(cn){return cn instanceof Blob?cn.type:cn instanceof FormData?"multipart/form-data":cn instanceof URLSearchParams?"application/x-www-form-urlencoded;charset=UTF-8":"text/plain;charset=UTF-8"},yy=function(){function cn(an){this.onUpdateCallback=void 0,this.onUpdateCallback=an}return cn.prototype.apply=function(an,nn,rn){var un=rn[0],ln=rn[1],uo=new dm,ho=zm(un);if(uo.method="POST",uo.url=un,uo.name=(ho.pathname.split("/").pop()||"")+ho.search,uo.requestType="ping",uo.requestHeader={"Content-Type":gy(ln)},uo.status=0,uo.statusText="Pending",ho.search&&ho.searchParams){uo.getData={};for(var Mi,ld=my(ho.searchParams);!(Mi=ld()).done;){var dd=Mi.value,Sd=dd[0],gd=dd[1];uo.getData[Sd]=gd}}uo.postData=Gm(ln),uo.startTime||(uo.startTime=Date.now()),this.onUpdateCallback(uo);var Wd=an.apply(nn,rn);return Wd?(uo.endTime=Date.now(),uo.costTime=uo.endTime-(uo.startTime||uo.endTime),uo.status=0,uo.statusText="Sent",uo.readyState=4):(uo.status=500,uo.statusText="Unknown"),this.onUpdateCallback(uo),Wd},cn}(),Ym=function(){function cn(){}return cn.create=function(an){return new Proxy(navigator.sendBeacon,new yy(an))},cn}();Ym.origSendBeacon=navigator.sendBeacon;var Yv=(0,mv.fZ)({}),wm=function(cn){function an(){var rn;return(rn=cn.call(this)||this).maxNetworkNumber=1e3,rn.ignoreUrlRegExp=void 0,rn.itemCounter=0,rn.mockXHR(),rn.mockFetch(),rn.mockSendBeacon(),rn}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.unMock=function(){window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=qm.origXMLHttpRequest),window.hasOwnProperty("fetch")&&(window.fetch=Xm.origFetch),window.navigator.sendBeacon&&(window.navigator.sendBeacon=Ym.origSendBeacon)},nn.clearLog=function(){Yv.set({})},nn.updateRequest=function(rn,un){var ln,uo=un.url;if(!uo||(ln=this.ignoreUrlRegExp)==null||!ln.test(uo)){var ho=(0,mv.U2)(Yv),Mi=!!ho[rn];if(Mi){var ld=ho[rn];for(var dd in un)ld[dd]=un[dd];un=ld}Yv.update(function(Sd){return Sd[rn]=un,Sd}),Mi||(_d.x.updateTime(),this.limitListLength())}},nn.mockXHR=function(){var rn=this;window.hasOwnProperty("XMLHttpRequest")&&(window.XMLHttpRequest=qm.create(function(un){rn.updateRequest(un.id,un)}))},nn.mockFetch=function(){var rn=this;window.hasOwnProperty("fetch")&&(window.fetch=Xm.create(function(un){rn.updateRequest(un.id,un)}))},nn.mockSendBeacon=function(){var rn,un,ln=this;(rn=window)!=null&&(un=rn.navigator)!=null&&un.sendBeacon&&(window.navigator.sendBeacon=Ym.create(function(uo){ln.updateRequest(uo.id,uo)}))},nn.limitListLength=function(){var rn=this;if(this.itemCounter++,this.itemCounter%10==0){this.itemCounter=0;var un=(0,mv.U2)(Yv),ln=Object.keys(un);ln.length>this.maxNetworkNumber-10&&Yv.update(function(uo){for(var ho=ln.splice(0,ln.length-rn.maxNetworkNumber+10),Mi=0;Mi<ho.length;Mi++)uo[ho[Mi]]=void 0,delete uo[ho[Mi]];return uo})}},an}(Dg.N),Cm=__webpack_require__(8747),pm={};Cm.Z&&Cm.Z.locals&&(pm.locals=Cm.Z.locals);var Zm,Jm=0,tm={};tm.styleTagTransform=lo(),tm.setAttributes=hn(),tm.insert=sn().bind(null,"head"),tm.domAPI=Mt(),tm.insertStyleElement=Xr(),pm.use=function(cn){return tm.options=cn||{},Jm++||(Zm=Qe()(Cm.Z,tm)),pm},pm.unuse=function(){Jm>0&&!--Jm&&(Zm(),Zm=null)};var Fg=pm;function Bg(cn,an,nn){var rn=cn.slice();return rn[11]=an[nn][0],rn[12]=an[nn][1],rn}function Wg(cn,an,nn){var rn=cn.slice();return rn[11]=an[nn][0],rn[12]=an[nn][1],rn}function Vg(cn,an,nn){var rn=cn.slice();return rn[11]=an[nn][0],rn[12]=an[nn][1],rn}function Ug(cn,an,nn){var rn=cn.slice();return rn[11]=an[nn][0],rn[12]=an[nn][1],rn}function jg(cn){var an,nn,rn;return{c:function(){an=(0,qe.fLW)("("),nn=(0,qe.fLW)(cn[0]),rn=(0,qe.fLW)(")")},m:function(un,ln){(0,qe.$Tr)(un,an,ln),(0,qe.$Tr)(un,nn,ln),(0,qe.$Tr)(un,rn,ln)},p:function(un,ln){1&ln&&(0,qe.rTO)(nn,un[0])},d:function(un){un&&(0,qe.ogt)(an),un&&(0,qe.ogt)(nn),un&&(0,qe.ogt)(rn)}}}function by(cn){var an,nn,rn,un,ln,uo,ho=cn[0]>0&&jg(cn);return{c:function(){an=(0,qe.bGB)("dl"),nn=(0,qe.bGB)("dd"),rn=(0,qe.fLW)("Name "),ho&&ho.c(),(un=(0,qe.bGB)("dd")).textContent="Method",(ln=(0,qe.bGB)("dd")).textContent="Status",(uo=(0,qe.bGB)("dd")).textContent="Time",(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-4"),(0,qe.Ljt)(un,"class","vc-table-col"),(0,qe.Ljt)(ln,"class","vc-table-col"),(0,qe.Ljt)(uo,"class","vc-table-col"),(0,qe.Ljt)(an,"class","vc-table-row")},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),ho&&ho.m(nn,null),(0,qe.R3I)(an,un),(0,qe.R3I)(an,ln),(0,qe.R3I)(an,uo)},p:function(Mi,ld){Mi[0]>0?ho?ho.p(Mi,ld):((ho=jg(Mi)).c(),ho.m(nn,null)):ho&&(ho.d(1),ho=null)},d:function(Mi){Mi&&(0,qe.ogt)(an),ho&&ho.d()}}}function xy(cn){var an;return{c:function(){(an=(0,qe.bGB)("div")).textContent="Empty",(0,qe.Ljt)(an,"slot","empty"),(0,qe.Ljt)(an,"class","vc-plugin-empty")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},p:qe.ZTd,d:function(nn){nn&&(0,qe.ogt)(an)}}}function $g(cn){var an,nn,rn,un,ln,uo,ho,Mi;uo=new jp({props:{content:cn[10].requestHeader}});for(var ld=Object.entries(cn[10].requestHeader),dd=[],Sd=0;Sd<ld.length;Sd+=1)dd[Sd]=Hg(Ug(cn,ld,Sd));return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("dl"),rn=(0,qe.bGB)("dt"),un=(0,qe.fLW)(`Request Headers
                `),ln=(0,qe.bGB)("i"),(0,qe.YCL)(uo.$$.fragment),ho=(0,qe.DhX)();for(var gd=0;gd<dd.length;gd+=1)dd[gd].c();(0,qe.Ljt)(ln,"class","vc-table-row-icon"),(0,qe.Ljt)(rn,"class","vc-table-col vc-table-col-title"),(0,qe.Ljt)(nn,"class","vc-table-row vc-left-border")},m:function(gd,Wd){(0,qe.$Tr)(gd,an,Wd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(rn,un),(0,qe.R3I)(rn,ln),(0,qe.yef)(uo,ln,null),(0,qe.R3I)(an,ho);for(var Dd=0;Dd<dd.length;Dd+=1)dd[Dd].m(an,null);Mi=!0},p:function(gd,Wd){var Dd={};if(1024&Wd&&(Dd.content=gd[10].requestHeader),uo.$set(Dd),1040&Wd){var Gd;for(ld=Object.entries(gd[10].requestHeader),Gd=0;Gd<ld.length;Gd+=1){var Xd=Ug(gd,ld,Gd);dd[Gd]?dd[Gd].p(Xd,Wd):(dd[Gd]=Hg(Xd),dd[Gd].c(),dd[Gd].m(an,null))}for(;Gd<dd.length;Gd+=1)dd[Gd].d(1);dd.length=ld.length}},i:function(gd){Mi||((0,qe.Ui)(uo.$$.fragment,gd),Mi=!0)},o:function(gd){(0,qe.etI)(uo.$$.fragment,gd),Mi=!1},d:function(gd){gd&&(0,qe.ogt)(an),(0,qe.vpE)(uo),(0,qe.RMB)(dd,gd)}}}function Hg(cn){var an,nn,rn,un,ln,uo,ho,Mi=cn[11]+"",ld=cn[4](cn[12])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),rn=(0,qe.fLW)(Mi),un=(0,qe.DhX)(),ln=(0,qe.bGB)("div"),uo=(0,qe.fLW)(ld),ho=(0,qe.DhX)(),(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(ln,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(an,"class","vc-table-row vc-left-border vc-small")},m:function(dd,Sd){(0,qe.$Tr)(dd,an,Sd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(an,un),(0,qe.R3I)(an,ln),(0,qe.R3I)(ln,uo),(0,qe.R3I)(an,ho)},p:function(dd,Sd){1024&Sd&&Mi!==(Mi=dd[11]+"")&&(0,qe.rTO)(rn,Mi),1024&Sd&&ld!==(ld=dd[4](dd[12])+"")&&(0,qe.rTO)(uo,ld)},d:function(dd){dd&&(0,qe.ogt)(an)}}}function Gg(cn){var an,nn,rn,un,ln,uo,ho,Mi;uo=new jp({props:{content:cn[10].getData}});for(var ld=Object.entries(cn[10].getData),dd=[],Sd=0;Sd<ld.length;Sd+=1)dd[Sd]=zg(Vg(cn,ld,Sd));return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("dl"),rn=(0,qe.bGB)("dt"),un=(0,qe.fLW)(`Query String Parameters
                `),ln=(0,qe.bGB)("i"),(0,qe.YCL)(uo.$$.fragment),ho=(0,qe.DhX)();for(var gd=0;gd<dd.length;gd+=1)dd[gd].c();(0,qe.Ljt)(ln,"class","vc-table-row-icon"),(0,qe.Ljt)(rn,"class","vc-table-col vc-table-col-title"),(0,qe.Ljt)(nn,"class","vc-table-row vc-left-border")},m:function(gd,Wd){(0,qe.$Tr)(gd,an,Wd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(rn,un),(0,qe.R3I)(rn,ln),(0,qe.yef)(uo,ln,null),(0,qe.R3I)(an,ho);for(var Dd=0;Dd<dd.length;Dd+=1)dd[Dd].m(an,null);Mi=!0},p:function(gd,Wd){var Dd={};if(1024&Wd&&(Dd.content=gd[10].getData),uo.$set(Dd),1040&Wd){var Gd;for(ld=Object.entries(gd[10].getData),Gd=0;Gd<ld.length;Gd+=1){var Xd=Vg(gd,ld,Gd);dd[Gd]?dd[Gd].p(Xd,Wd):(dd[Gd]=zg(Xd),dd[Gd].c(),dd[Gd].m(an,null))}for(;Gd<dd.length;Gd+=1)dd[Gd].d(1);dd.length=ld.length}},i:function(gd){Mi||((0,qe.Ui)(uo.$$.fragment,gd),Mi=!0)},o:function(gd){(0,qe.etI)(uo.$$.fragment,gd),Mi=!1},d:function(gd){gd&&(0,qe.ogt)(an),(0,qe.vpE)(uo),(0,qe.RMB)(dd,gd)}}}function zg(cn){var an,nn,rn,un,ln,uo,ho,Mi=cn[11]+"",ld=cn[4](cn[12])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),rn=(0,qe.fLW)(Mi),un=(0,qe.DhX)(),ln=(0,qe.bGB)("div"),uo=(0,qe.fLW)(ld),ho=(0,qe.DhX)(),(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(ln,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(an,"class","vc-table-row vc-left-border vc-small")},m:function(dd,Sd){(0,qe.$Tr)(dd,an,Sd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(an,un),(0,qe.R3I)(an,ln),(0,qe.R3I)(ln,uo),(0,qe.R3I)(an,ho)},p:function(dd,Sd){1024&Sd&&Mi!==(Mi=dd[11]+"")&&(0,qe.rTO)(rn,Mi),1024&Sd&&ld!==(ld=dd[4](dd[12])+"")&&(0,qe.rTO)(uo,ld)},d:function(dd){dd&&(0,qe.ogt)(an)}}}function qg(cn){var an,nn,rn,un,ln,uo,ho,Mi;function ld(gd,Wd){return typeof gd[10].postData=="string"?wy:_y}uo=new jp({props:{content:cn[10].postData}});var dd=ld(cn),Sd=dd(cn);return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("dl"),rn=(0,qe.bGB)("dt"),un=(0,qe.fLW)(`Request Payload
                `),ln=(0,qe.bGB)("i"),(0,qe.YCL)(uo.$$.fragment),ho=(0,qe.DhX)(),Sd.c(),(0,qe.Ljt)(ln,"class","vc-table-row-icon"),(0,qe.Ljt)(rn,"class","vc-table-col vc-table-col-title"),(0,qe.Ljt)(nn,"class","vc-table-row vc-left-border")},m:function(gd,Wd){(0,qe.$Tr)(gd,an,Wd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(rn,un),(0,qe.R3I)(rn,ln),(0,qe.yef)(uo,ln,null),(0,qe.R3I)(an,ho),Sd.m(an,null),Mi=!0},p:function(gd,Wd){var Dd={};1024&Wd&&(Dd.content=gd[10].postData),uo.$set(Dd),dd===(dd=ld(gd))&&Sd?Sd.p(gd,Wd):(Sd.d(1),(Sd=dd(gd))&&(Sd.c(),Sd.m(an,null)))},i:function(gd){Mi||((0,qe.Ui)(uo.$$.fragment,gd),Mi=!0)},o:function(gd){(0,qe.etI)(uo.$$.fragment,gd),Mi=!1},d:function(gd){gd&&(0,qe.ogt)(an),(0,qe.vpE)(uo),Sd.d()}}}function _y(cn){for(var an,nn=Object.entries(cn[10].postData),rn=[],un=0;un<nn.length;un+=1)rn[un]=Kg(Wg(cn,nn,un));return{c:function(){for(var ln=0;ln<rn.length;ln+=1)rn[ln].c();an=(0,qe.cSb)()},m:function(ln,uo){for(var ho=0;ho<rn.length;ho+=1)rn[ho].m(ln,uo);(0,qe.$Tr)(ln,an,uo)},p:function(ln,uo){if(1040&uo){var ho;for(nn=Object.entries(ln[10].postData),ho=0;ho<nn.length;ho+=1){var Mi=Wg(ln,nn,ho);rn[ho]?rn[ho].p(Mi,uo):(rn[ho]=Kg(Mi),rn[ho].c(),rn[ho].m(an.parentNode,an))}for(;ho<rn.length;ho+=1)rn[ho].d(1);rn.length=nn.length}},d:function(ln){(0,qe.RMB)(rn,ln),ln&&(0,qe.ogt)(an)}}}function wy(cn){var an,nn,rn,un=cn[10].postData+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("pre"),rn=(0,qe.fLW)(un),(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(nn,"data-scrollable","1"),(0,qe.Ljt)(an,"class","vc-table-row vc-left-border vc-small")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn)},p:function(ln,uo){1024&uo&&un!==(un=ln[10].postData+"")&&(0,qe.rTO)(rn,un)},d:function(ln){ln&&(0,qe.ogt)(an)}}}function Kg(cn){var an,nn,rn,un,ln,uo,ho,Mi=cn[11]+"",ld=cn[4](cn[12])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),rn=(0,qe.fLW)(Mi),un=(0,qe.DhX)(),ln=(0,qe.bGB)("div"),uo=(0,qe.fLW)(ld),ho=(0,qe.DhX)(),(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(ln,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(ln,"data-scrollable","1"),(0,qe.Ljt)(an,"class","vc-table-row vc-left-border vc-small")},m:function(dd,Sd){(0,qe.$Tr)(dd,an,Sd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(an,un),(0,qe.R3I)(an,ln),(0,qe.R3I)(ln,uo),(0,qe.R3I)(an,ho)},p:function(dd,Sd){1024&Sd&&Mi!==(Mi=dd[11]+"")&&(0,qe.rTO)(rn,Mi),1024&Sd&&ld!==(ld=dd[4](dd[12])+"")&&(0,qe.rTO)(uo,ld)},d:function(dd){dd&&(0,qe.ogt)(an)}}}function Xg(cn){var an,nn,rn,un,ln,uo,ho,Mi;uo=new jp({props:{content:cn[10].header}});for(var ld=Object.entries(cn[10].header),dd=[],Sd=0;Sd<ld.length;Sd+=1)dd[Sd]=Yg(Bg(cn,ld,Sd));return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("dl"),rn=(0,qe.bGB)("dt"),un=(0,qe.fLW)(`Response Headers
                `),ln=(0,qe.bGB)("i"),(0,qe.YCL)(uo.$$.fragment),ho=(0,qe.DhX)();for(var gd=0;gd<dd.length;gd+=1)dd[gd].c();(0,qe.Ljt)(ln,"class","vc-table-row-icon"),(0,qe.Ljt)(rn,"class","vc-table-col vc-table-col-title"),(0,qe.Ljt)(nn,"class","vc-table-row vc-left-border")},m:function(gd,Wd){(0,qe.$Tr)(gd,an,Wd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(rn,un),(0,qe.R3I)(rn,ln),(0,qe.yef)(uo,ln,null),(0,qe.R3I)(an,ho);for(var Dd=0;Dd<dd.length;Dd+=1)dd[Dd].m(an,null);Mi=!0},p:function(gd,Wd){var Dd={};if(1024&Wd&&(Dd.content=gd[10].header),uo.$set(Dd),1040&Wd){var Gd;for(ld=Object.entries(gd[10].header),Gd=0;Gd<ld.length;Gd+=1){var Xd=Bg(gd,ld,Gd);dd[Gd]?dd[Gd].p(Xd,Wd):(dd[Gd]=Yg(Xd),dd[Gd].c(),dd[Gd].m(an,null))}for(;Gd<dd.length;Gd+=1)dd[Gd].d(1);dd.length=ld.length}},i:function(gd){Mi||((0,qe.Ui)(uo.$$.fragment,gd),Mi=!0)},o:function(gd){(0,qe.etI)(uo.$$.fragment,gd),Mi=!1},d:function(gd){gd&&(0,qe.ogt)(an),(0,qe.vpE)(uo),(0,qe.RMB)(dd,gd)}}}function Yg(cn){var an,nn,rn,un,ln,uo,ho,Mi=cn[11]+"",ld=cn[4](cn[12])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),rn=(0,qe.fLW)(Mi),un=(0,qe.DhX)(),ln=(0,qe.bGB)("div"),uo=(0,qe.fLW)(ld),ho=(0,qe.DhX)(),(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(ln,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(an,"class","vc-table-row vc-left-border vc-small")},m:function(dd,Sd){(0,qe.$Tr)(dd,an,Sd),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(an,un),(0,qe.R3I)(an,ln),(0,qe.R3I)(ln,uo),(0,qe.R3I)(an,ho)},p:function(dd,Sd){1024&Sd&&Mi!==(Mi=dd[11]+"")&&(0,qe.rTO)(rn,Mi),1024&Sd&&ld!==(ld=dd[4](dd[12])+"")&&(0,qe.rTO)(uo,ld)},d:function(dd){dd&&(0,qe.ogt)(an)}}}function Zg(cn){var an,nn,rn,un,ln,uo=cn[10].responseSizeText+"";return{c:function(){an=(0,qe.bGB)("div"),(nn=(0,qe.bGB)("div")).textContent="Size",rn=(0,qe.DhX)(),un=(0,qe.bGB)("div"),ln=(0,qe.fLW)(uo),(0,qe.Ljt)(nn,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(un,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(an,"class","vc-table-row vc-left-border vc-small")},m:function(ho,Mi){(0,qe.$Tr)(ho,an,Mi),(0,qe.R3I)(an,nn),(0,qe.R3I)(an,rn),(0,qe.R3I)(an,un),(0,qe.R3I)(un,ln)},p:function(ho,Mi){1024&Mi&&uo!==(uo=ho[10].responseSizeText+"")&&(0,qe.rTO)(ln,uo)},d:function(ho){ho&&(0,qe.ogt)(an)}}}function Cy(cn){var an,nn,rn,un,ln,uo,ho,Mi,ld,dd,Sd,gd,Wd,Dd,Gd,Xd,tp,op,lp,Pp,Ip,Gp,zp,Kp,kp,Sp,Xp,fv,Yp,qp,Fp,hp,xp,Qp,up,Tp,$p,Rp,Hp,av,cv,dv,tv,Sv,pv,Av,uv,Pv,hv,Wv,Hv,cm,gm,pp,Vp,Bp,Up,Jp,rv,Lv,Dv,Ov,lv,Iv,Gv,Tv,tg,C0,Tm=cn[10].name+"",km=cn[10].method+"",Sm=cn[10].statusText+"",Am=cn[10].costTime+"",Dm=cn[10].url+"",Om=cn[10].method+"",Pm=cn[10].requestType+"",Lm=cn[10].status+"",Mm=cn[10].startTimeText+"",Nm=(cn[10].response||"")+"";function e1(){return cn[7](cn[10])}op=new jp({props:{handler:cn[3],content:cn[10]}});var bv=cn[10].requestHeader!==null&&$g(cn),xv=cn[10].getData!==null&&Gg(cn),_v=cn[10].postData!==null&&qg(cn),wv=cn[10].header!==null&&Xg(cn);rv=new jp({props:{content:cn[10].response}});var Mv=cn[10].responseSize>0&&Zg(cn);return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("dl"),rn=(0,qe.bGB)("dd"),un=(0,qe.fLW)(Tm),ln=(0,qe.bGB)("dd"),uo=(0,qe.fLW)(km),ho=(0,qe.bGB)("dd"),Mi=(0,qe.fLW)(Sm),ld=(0,qe.bGB)("dd"),dd=(0,qe.fLW)(Am),Sd=(0,qe.DhX)(),gd=(0,qe.bGB)("div"),Wd=(0,qe.bGB)("div"),Dd=(0,qe.bGB)("dl"),Gd=(0,qe.bGB)("dt"),Xd=(0,qe.fLW)(`General
                `),tp=(0,qe.bGB)("i"),(0,qe.YCL)(op.$$.fragment),lp=(0,qe.DhX)(),Pp=(0,qe.bGB)("div"),(Ip=(0,qe.bGB)("div")).textContent="URL",Gp=(0,qe.DhX)(),zp=(0,qe.bGB)("div"),Kp=(0,qe.fLW)(Dm),kp=(0,qe.DhX)(),Sp=(0,qe.bGB)("div"),(Xp=(0,qe.bGB)("div")).textContent="Method",fv=(0,qe.DhX)(),Yp=(0,qe.bGB)("div"),qp=(0,qe.fLW)(Om),Fp=(0,qe.DhX)(),hp=(0,qe.bGB)("div"),(xp=(0,qe.bGB)("div")).textContent="Request Type",Qp=(0,qe.DhX)(),up=(0,qe.bGB)("div"),Tp=(0,qe.fLW)(Pm),$p=(0,qe.DhX)(),Rp=(0,qe.bGB)("div"),(Hp=(0,qe.bGB)("div")).textContent="HTTP Status",av=(0,qe.DhX)(),cv=(0,qe.bGB)("div"),dv=(0,qe.fLW)(Lm),tv=(0,qe.DhX)(),Sv=(0,qe.bGB)("div"),(pv=(0,qe.bGB)("div")).textContent="Start Time",Av=(0,qe.DhX)(),uv=(0,qe.bGB)("div"),Pv=(0,qe.fLW)(Mm),hv=(0,qe.DhX)(),bv&&bv.c(),Wv=(0,qe.DhX)(),xv&&xv.c(),Hv=(0,qe.DhX)(),_v&&_v.c(),cm=(0,qe.DhX)(),wv&&wv.c(),gm=(0,qe.DhX)(),pp=(0,qe.bGB)("div"),Vp=(0,qe.bGB)("dl"),Bp=(0,qe.bGB)("dt"),Up=(0,qe.fLW)(`Response
                `),Jp=(0,qe.bGB)("i"),(0,qe.YCL)(rv.$$.fragment),Lv=(0,qe.DhX)(),Mv&&Mv.c(),Dv=(0,qe.DhX)(),Ov=(0,qe.bGB)("div"),lv=(0,qe.bGB)("pre"),Iv=(0,qe.fLW)(Nm),(0,qe.Ljt)(rn,"class","vc-table-col vc-table-col-4"),(0,qe.Ljt)(ln,"class","vc-table-col"),(0,qe.Ljt)(ho,"class","vc-table-col"),(0,qe.Ljt)(ld,"class","vc-table-col"),(0,qe.Ljt)(nn,"class","vc-table-row vc-group-preview"),(0,qe.VHj)(nn,"vc-table-row-error",cn[10].status>=400),(0,qe.Ljt)(tp,"class","vc-table-row-icon"),(0,qe.Ljt)(Gd,"class","vc-table-col vc-table-col-title"),(0,qe.Ljt)(Dd,"class","vc-table-row vc-left-border"),(0,qe.Ljt)(Ip,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(zp,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(Pp,"class","vc-table-row vc-left-border vc-small"),(0,qe.Ljt)(Xp,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(Yp,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(Sp,"class","vc-table-row vc-left-border vc-small"),(0,qe.Ljt)(xp,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(up,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(hp,"class","vc-table-row vc-left-border vc-small"),(0,qe.Ljt)(Hp,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(cv,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(Rp,"class","vc-table-row vc-left-border vc-small"),(0,qe.Ljt)(pv,"class","vc-table-col vc-table-col-2"),(0,qe.Ljt)(uv,"class","vc-table-col vc-table-col-4 vc-table-col-value vc-max-height-line"),(0,qe.Ljt)(Sv,"class","vc-table-row vc-left-border vc-small"),(0,qe.Ljt)(Jp,"class","vc-table-row-icon"),(0,qe.Ljt)(Bp,"class","vc-table-col vc-table-col-title"),(0,qe.Ljt)(Vp,"class","vc-table-row vc-left-border"),(0,qe.Ljt)(lv,"class","vc-table-col vc-max-height vc-min-height"),(0,qe.Ljt)(lv,"data-scrollable","1"),(0,qe.Ljt)(Ov,"class","vc-table-row vc-left-border vc-small"),(0,qe.Ljt)(gd,"class","vc-group-detail"),(0,qe.Ljt)(an,"slot","item"),(0,qe.Ljt)(an,"class","vc-group"),(0,qe.Ljt)(an,"id",Gv=cn[10].id),(0,qe.VHj)(an,"vc-actived",cn[10].actived)},m:function(Nv,ov){(0,qe.$Tr)(Nv,an,ov),(0,qe.R3I)(an,nn),(0,qe.R3I)(nn,rn),(0,qe.R3I)(rn,un),(0,qe.R3I)(nn,ln),(0,qe.R3I)(ln,uo),(0,qe.R3I)(nn,ho),(0,qe.R3I)(ho,Mi),(0,qe.R3I)(nn,ld),(0,qe.R3I)(ld,dd),(0,qe.R3I)(an,Sd),(0,qe.R3I)(an,gd),(0,qe.R3I)(gd,Wd),(0,qe.R3I)(Wd,Dd),(0,qe.R3I)(Dd,Gd),(0,qe.R3I)(Gd,Xd),(0,qe.R3I)(Gd,tp),(0,qe.yef)(op,tp,null),(0,qe.R3I)(Wd,lp),(0,qe.R3I)(Wd,Pp),(0,qe.R3I)(Pp,Ip),(0,qe.R3I)(Pp,Gp),(0,qe.R3I)(Pp,zp),(0,qe.R3I)(zp,Kp),(0,qe.R3I)(Wd,kp),(0,qe.R3I)(Wd,Sp),(0,qe.R3I)(Sp,Xp),(0,qe.R3I)(Sp,fv),(0,qe.R3I)(Sp,Yp),(0,qe.R3I)(Yp,qp),(0,qe.R3I)(Wd,Fp),(0,qe.R3I)(Wd,hp),(0,qe.R3I)(hp,xp),(0,qe.R3I)(hp,Qp),(0,qe.R3I)(hp,up),(0,qe.R3I)(up,Tp),(0,qe.R3I)(Wd,$p),(0,qe.R3I)(Wd,Rp),(0,qe.R3I)(Rp,Hp),(0,qe.R3I)(Rp,av),(0,qe.R3I)(Rp,cv),(0,qe.R3I)(cv,dv),(0,qe.R3I)(Wd,tv),(0,qe.R3I)(Wd,Sv),(0,qe.R3I)(Sv,pv),(0,qe.R3I)(Sv,Av),(0,qe.R3I)(Sv,uv),(0,qe.R3I)(uv,Pv),(0,qe.R3I)(gd,hv),bv&&bv.m(gd,null),(0,qe.R3I)(gd,Wv),xv&&xv.m(gd,null),(0,qe.R3I)(gd,Hv),_v&&_v.m(gd,null),(0,qe.R3I)(gd,cm),wv&&wv.m(gd,null),(0,qe.R3I)(gd,gm),(0,qe.R3I)(gd,pp),(0,qe.R3I)(pp,Vp),(0,qe.R3I)(Vp,Bp),(0,qe.R3I)(Bp,Up),(0,qe.R3I)(Bp,Jp),(0,qe.yef)(rv,Jp,null),(0,qe.R3I)(pp,Lv),Mv&&Mv.m(pp,null),(0,qe.R3I)(pp,Dv),(0,qe.R3I)(pp,Ov),(0,qe.R3I)(Ov,lv),(0,qe.R3I)(lv,Iv),Tv=!0,tg||(C0=(0,qe.oLt)(nn,"click",e1),tg=!0)},p:function(Nv,ov){cn=Nv,(!Tv||1024&ov)&&Tm!==(Tm=cn[10].name+"")&&(0,qe.rTO)(un,Tm),(!Tv||1024&ov)&&km!==(km=cn[10].method+"")&&(0,qe.rTO)(uo,km),(!Tv||1024&ov)&&Sm!==(Sm=cn[10].statusText+"")&&(0,qe.rTO)(Mi,Sm),(!Tv||1024&ov)&&Am!==(Am=cn[10].costTime+"")&&(0,qe.rTO)(dd,Am),1024&ov&&(0,qe.VHj)(nn,"vc-table-row-error",cn[10].status>=400);var E0={};1024&ov&&(E0.content=cn[10]),op.$set(E0),(!Tv||1024&ov)&&Dm!==(Dm=cn[10].url+"")&&(0,qe.rTO)(Kp,Dm),(!Tv||1024&ov)&&Om!==(Om=cn[10].method+"")&&(0,qe.rTO)(qp,Om),(!Tv||1024&ov)&&Pm!==(Pm=cn[10].requestType+"")&&(0,qe.rTO)(Tp,Pm),(!Tv||1024&ov)&&Lm!==(Lm=cn[10].status+"")&&(0,qe.rTO)(dv,Lm),(!Tv||1024&ov)&&Mm!==(Mm=cn[10].startTimeText+"")&&(0,qe.rTO)(Pv,Mm),cn[10].requestHeader!==null?bv?(bv.p(cn,ov),1024&ov&&(0,qe.Ui)(bv,1)):((bv=$g(cn)).c(),(0,qe.Ui)(bv,1),bv.m(gd,Wv)):bv&&((0,qe.dvw)(),(0,qe.etI)(bv,1,1,function(){bv=null}),(0,qe.gbL)()),cn[10].getData!==null?xv?(xv.p(cn,ov),1024&ov&&(0,qe.Ui)(xv,1)):((xv=Gg(cn)).c(),(0,qe.Ui)(xv,1),xv.m(gd,Hv)):xv&&((0,qe.dvw)(),(0,qe.etI)(xv,1,1,function(){xv=null}),(0,qe.gbL)()),cn[10].postData!==null?_v?(_v.p(cn,ov),1024&ov&&(0,qe.Ui)(_v,1)):((_v=qg(cn)).c(),(0,qe.Ui)(_v,1),_v.m(gd,cm)):_v&&((0,qe.dvw)(),(0,qe.etI)(_v,1,1,function(){_v=null}),(0,qe.gbL)()),cn[10].header!==null?wv?(wv.p(cn,ov),1024&ov&&(0,qe.Ui)(wv,1)):((wv=Xg(cn)).c(),(0,qe.Ui)(wv,1),wv.m(gd,gm)):wv&&((0,qe.dvw)(),(0,qe.etI)(wv,1,1,function(){wv=null}),(0,qe.gbL)());var R0={};1024&ov&&(R0.content=cn[10].response),rv.$set(R0),cn[10].responseSize>0?Mv?Mv.p(cn,ov):((Mv=Zg(cn)).c(),Mv.m(pp,Dv)):Mv&&(Mv.d(1),Mv=null),(!Tv||1024&ov)&&Nm!==(Nm=(cn[10].response||"")+"")&&(0,qe.rTO)(Iv,Nm),(!Tv||1024&ov&&Gv!==(Gv=cn[10].id))&&(0,qe.Ljt)(an,"id",Gv),1024&ov&&(0,qe.VHj)(an,"vc-actived",cn[10].actived)},i:function(Nv){Tv||((0,qe.Ui)(op.$$.fragment,Nv),(0,qe.Ui)(bv),(0,qe.Ui)(xv),(0,qe.Ui)(_v),(0,qe.Ui)(wv),(0,qe.Ui)(rv.$$.fragment,Nv),Tv=!0)},o:function(Nv){(0,qe.etI)(op.$$.fragment,Nv),(0,qe.etI)(bv),(0,qe.etI)(xv),(0,qe.etI)(_v),(0,qe.etI)(wv),(0,qe.etI)(rv.$$.fragment,Nv),Tv=!1},d:function(Nv){Nv&&(0,qe.ogt)(an),(0,qe.vpE)(op),bv&&bv.d(),xv&&xv.d(),_v&&_v.d(),wv&&wv.d(),(0,qe.vpE)(rv),Mv&&Mv.d(),tg=!1,C0()}}}function Ey(cn){var an,nn,rn,un;return rn=new Ig({props:{items:cn[1],itemKey:"id",itemHeight:30,buffer:100,stickToBottom:!0,scrollbar:!0,$$slots:{item:[Cy,function(ln){return{10:ln.item}},function(ln){return ln.item?1024:0}],empty:[xy],header:[by]},$$scope:{ctx:cn}}}),{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("div"),(0,qe.YCL)(rn.$$.fragment),(0,qe.Ljt)(nn,"class","vc-plugin-content"),(0,qe.Ljt)(an,"class","vc-table")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo),(0,qe.R3I)(an,nn),(0,qe.yef)(rn,nn,null),un=!0},p:function(ln,uo){var ho=uo[0],Mi={};2&ho&&(Mi.items=ln[1]),2098177&ho&&(Mi.$$scope={dirty:ho,ctx:ln}),rn.$set(Mi)},i:function(ln){un||((0,qe.Ui)(rn.$$.fragment,ln),un=!0)},o:function(ln){(0,qe.etI)(rn.$$.fragment,ln),un=!1},d:function(ln){ln&&(0,qe.ogt)(an),(0,qe.vpE)(rn)}}}function Ry(cn,an,nn){var rn;(0,qe.FIv)(cn,Yv,function(ld){return nn(6,rn=ld)});var un=0,ln=function(ld){nn(0,un=Object.keys(ld).length)},uo=Yv.subscribe(ln);ln(rn);var ho=[],Mi=function(ld){(0,qe.fxP)(Yv,rn[ld].actived=!rn[ld].actived,rn)};return(0,Ye.H3)(function(){Fg.use()}),(0,Ye.ev)(function(){uo(),Fg.unuse()}),cn.$$.update=function(){64&cn.$$.dirty&&nn(1,ho=Object.values(rn))},[un,ho,Mi,function(ld){var dd="curl -X "+ld.method;return typeof ld.postData=="string"?dd+=" -d '"+ld.postData+"'":typeof ld.postData=="object"&&ld.postData!==null&&(dd+=" -d '"+y.hZ(ld.postData)+"'"),dd+" '"+ld.url+"'"},function(ld){return y.Kn(ld)||y.kJ(ld)?y.hZ(ld,{maxDepth:10,keyMaxLen:1e4,pretty:!0}):ld},{fixedHeight:!0},rn,function(ld){return Mi(ld.id)}]}var Iy=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Ry,Ey,qe.N8,{options:5}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"options",get:function(){return this.$$.ctx[5]}}]),an}(qe.f_C),Ty=Iy,ky=function(cn){function an(){for(var rn,un=arguments.length,ln=new Array(un),uo=0;uo<un;uo++)ln[uo]=arguments[uo];return(rn=cn.call.apply(cn,[this].concat(ln))||this).model=wm.getSingleton(wm,"VConsoleNetworkModel"),rn}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.add=function(rn){var un=new Lg(new dm);for(var ln in rn)un[ln]=rn[ln];return un.startTime=un.startTime||Date.now(),un.requestType=un.requestType||"custom",this.model.updateRequest(un.id,un),un},nn.update=function(rn,un){this.model.updateRequest(rn,un)},nn.clear=function(){this.model.clearLog()},an}(kg),Jg=function(cn){function an(rn,un,ln){var uo;return ln===void 0&&(ln={}),(uo=cn.call(this,rn,un,Ty,ln)||this).model=wm.getSingleton(wm,"VConsoleNetworkModel"),uo.exporter=void 0,uo.exporter=new ky(rn),uo}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onReady=function(){cn.prototype.onReady.call(this),this.onUpdateOption()},nn.onAddTool=function(rn){var un=this;rn([{name:"Clear",global:!1,onClick:function(ln){un.model.clearLog()}}])},nn.onRemove=function(){cn.prototype.onRemove.call(this),this.model&&this.model.unMock()},nn.onUpdateOption=function(){var rn,un,ln;((rn=this.vConsole.option.network)==null?void 0:rn.maxNetworkNumber)!==this.model.maxNetworkNumber&&(this.model.maxNetworkNumber=Number((ln=this.vConsole.option.network)==null?void 0:ln.maxNetworkNumber)||1e3),(un=this.vConsole.option.network)!=null&&un.ignoreUrlRegExp&&(this.model.ignoreUrlRegExp=this.vConsole.option.network.ignoreUrlRegExp)},an}(sp),Sy=__webpack_require__(8679),Ay=__webpack_require__.n(Sy),Em=(0,mv.fZ)(),vm=(0,mv.fZ)(),Rm=__webpack_require__(5670),mm={};Rm.Z&&Rm.Z.locals&&(mm.locals=Rm.Z.locals);var Qm,eg=0,nm={};nm.styleTagTransform=lo(),nm.setAttributes=hn(),nm.insert=sn().bind(null,"head"),nm.domAPI=Mt(),nm.insertStyleElement=Xr(),mm.use=function(cn){return nm.options=cn||{},eg++||(Qm=Qe()(Rm.Z,nm)),mm},mm.unuse=function(){eg>0&&!--eg&&(Qm(),Qm=null)};var Qg=mm;function e0(cn,an,nn){var rn=cn.slice();return rn[8]=an[nn],rn}function t0(cn,an,nn){var rn=cn.slice();return rn[11]=an[nn],rn}function n0(cn){var an,nn,rn,un=cn[0].nodeType===Node.ELEMENT_NODE&&r0(cn),ln=cn[0].nodeType===Node.TEXT_NODE&&l0(cn);return{c:function(){an=(0,qe.bGB)("div"),un&&un.c(),nn=(0,qe.DhX)(),ln&&ln.c(),(0,qe.Ljt)(an,"class","vcelm-l"),(0,qe.VHj)(an,"vc-actived",cn[0]._isActived),(0,qe.VHj)(an,"vc-toggle",cn[0]._isExpand),(0,qe.VHj)(an,"vcelm-noc",cn[0]._isSingleLine)},m:function(uo,ho){(0,qe.$Tr)(uo,an,ho),un&&un.m(an,null),(0,qe.R3I)(an,nn),ln&&ln.m(an,null),rn=!0},p:function(uo,ho){uo[0].nodeType===Node.ELEMENT_NODE?un?(un.p(uo,ho),1&ho&&(0,qe.Ui)(un,1)):((un=r0(uo)).c(),(0,qe.Ui)(un,1),un.m(an,nn)):un&&((0,qe.dvw)(),(0,qe.etI)(un,1,1,function(){un=null}),(0,qe.gbL)()),uo[0].nodeType===Node.TEXT_NODE?ln?ln.p(uo,ho):((ln=l0(uo)).c(),ln.m(an,null)):ln&&(ln.d(1),ln=null),1&ho&&(0,qe.VHj)(an,"vc-actived",uo[0]._isActived),1&ho&&(0,qe.VHj)(an,"vc-toggle",uo[0]._isExpand),1&ho&&(0,qe.VHj)(an,"vcelm-noc",uo[0]._isSingleLine)},i:function(uo){rn||((0,qe.Ui)(un),rn=!0)},o:function(uo){(0,qe.etI)(un),rn=!1},d:function(uo){uo&&(0,qe.ogt)(an),un&&un.d(),ln&&ln.d()}}}function r0(cn){var an,nn,rn,un,ln,uo,ho,Mi,ld,dd,Sd=cn[0].nodeName+"",gd=(cn[0].className||cn[0].attributes.length)&&o0(cn),Wd=cn[0]._isNullEndTag&&a0(),Dd=cn[0].childNodes.length>0&&s0(cn),Gd=!cn[0]._isNullEndTag&&c0(cn);return{c:function(){an=(0,qe.bGB)("span"),nn=(0,qe.fLW)("<"),rn=(0,qe.fLW)(Sd),gd&&gd.c(),un=(0,qe.cSb)(),Wd&&Wd.c(),ln=(0,qe.fLW)(">"),Dd&&Dd.c(),uo=(0,qe.cSb)(),Gd&&Gd.c(),ho=(0,qe.cSb)(),(0,qe.Ljt)(an,"class","vcelm-node")},m:function(Xd,tp){(0,qe.$Tr)(Xd,an,tp),(0,qe.R3I)(an,nn),(0,qe.R3I)(an,rn),gd&&gd.m(an,null),(0,qe.R3I)(an,un),Wd&&Wd.m(an,null),(0,qe.R3I)(an,ln),Dd&&Dd.m(Xd,tp),(0,qe.$Tr)(Xd,uo,tp),Gd&&Gd.m(Xd,tp),(0,qe.$Tr)(Xd,ho,tp),Mi=!0,ld||(dd=(0,qe.oLt)(an,"click",cn[2]),ld=!0)},p:function(Xd,tp){(!Mi||1&tp)&&Sd!==(Sd=Xd[0].nodeName+"")&&(0,qe.rTO)(rn,Sd),Xd[0].className||Xd[0].attributes.length?gd?gd.p(Xd,tp):((gd=o0(Xd)).c(),gd.m(an,un)):gd&&(gd.d(1),gd=null),Xd[0]._isNullEndTag?Wd||((Wd=a0()).c(),Wd.m(an,ln)):Wd&&(Wd.d(1),Wd=null),Xd[0].childNodes.length>0?Dd?(Dd.p(Xd,tp),1&tp&&(0,qe.Ui)(Dd,1)):((Dd=s0(Xd)).c(),(0,qe.Ui)(Dd,1),Dd.m(uo.parentNode,uo)):Dd&&((0,qe.dvw)(),(0,qe.etI)(Dd,1,1,function(){Dd=null}),(0,qe.gbL)()),Xd[0]._isNullEndTag?Gd&&(Gd.d(1),Gd=null):Gd?Gd.p(Xd,tp):((Gd=c0(Xd)).c(),Gd.m(ho.parentNode,ho))},i:function(Xd){Mi||((0,qe.Ui)(Dd),Mi=!0)},o:function(Xd){(0,qe.etI)(Dd),Mi=!1},d:function(Xd){Xd&&(0,qe.ogt)(an),gd&&gd.d(),Wd&&Wd.d(),Dd&&Dd.d(Xd),Xd&&(0,qe.ogt)(uo),Gd&&Gd.d(Xd),Xd&&(0,qe.ogt)(ho),ld=!1,dd()}}}function o0(cn){for(var an,nn=cn[0].attributes,rn=[],un=0;un<nn.length;un+=1)rn[un]=i0(t0(cn,nn,un));return{c:function(){an=(0,qe.bGB)("i");for(var ln=0;ln<rn.length;ln+=1)rn[ln].c();(0,qe.Ljt)(an,"class","vcelm-k")},m:function(ln,uo){(0,qe.$Tr)(ln,an,uo);for(var ho=0;ho<rn.length;ho+=1)rn[ho].m(an,null)},p:function(ln,uo){if(1&uo){var ho;for(nn=ln[0].attributes,ho=0;ho<nn.length;ho+=1){var Mi=t0(ln,nn,ho);rn[ho]?rn[ho].p(Mi,uo):(rn[ho]=i0(Mi),rn[ho].c(),rn[ho].m(an,null))}for(;ho<rn.length;ho+=1)rn[ho].d(1);rn.length=nn.length}},d:function(ln){ln&&(0,qe.ogt)(an),(0,qe.RMB)(rn,ln)}}}function Dy(cn){var an,nn=cn[11].name+"";return{c:function(){an=(0,qe.fLW)(nn)},m:function(rn,un){(0,qe.$Tr)(rn,an,un)},p:function(rn,un){1&un&&nn!==(nn=rn[11].name+"")&&(0,qe.rTO)(an,nn)},d:function(rn){rn&&(0,qe.ogt)(an)}}}function Oy(cn){var an,nn,rn,un,ln,uo=cn[11].name+"",ho=cn[11].value+"";return{c:function(){an=(0,qe.fLW)(uo),nn=(0,qe.fLW)('="'),rn=(0,qe.bGB)("i"),un=(0,qe.fLW)(ho),ln=(0,qe.fLW)('"'),(0,qe.Ljt)(rn,"class","vcelm-v")},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.$Tr)(Mi,nn,ld),(0,qe.$Tr)(Mi,rn,ld),(0,qe.R3I)(rn,un),(0,qe.$Tr)(Mi,ln,ld)},p:function(Mi,ld){1&ld&&uo!==(uo=Mi[11].name+"")&&(0,qe.rTO)(an,uo),1&ld&&ho!==(ho=Mi[11].value+"")&&(0,qe.rTO)(un,ho)},d:function(Mi){Mi&&(0,qe.ogt)(an),Mi&&(0,qe.ogt)(nn),Mi&&(0,qe.ogt)(rn),Mi&&(0,qe.ogt)(ln)}}}function i0(cn){var an,nn;function rn(uo,ho){return uo[11].value!==""?Oy:Dy}var un=rn(cn),ln=un(cn);return{c:function(){an=(0,qe.fLW)(` 
            `),ln.c(),nn=(0,qe.cSb)()},m:function(uo,ho){(0,qe.$Tr)(uo,an,ho),ln.m(uo,ho),(0,qe.$Tr)(uo,nn,ho)},p:function(uo,ho){un===(un=rn(uo))&&ln?ln.p(uo,ho):(ln.d(1),(ln=un(uo))&&(ln.c(),ln.m(nn.parentNode,nn)))},d:function(uo){uo&&(0,qe.ogt)(an),ln.d(uo),uo&&(0,qe.ogt)(nn)}}}function a0(cn){var an;return{c:function(){an=(0,qe.fLW)("/")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},d:function(nn){nn&&(0,qe.ogt)(an)}}}function s0(cn){var an,nn,rn,un,ln=[Ly,Py],uo=[];function ho(Mi,ld){return Mi[0]._isExpand?1:0}return an=ho(cn),nn=uo[an]=ln[an](cn),{c:function(){nn.c(),rn=(0,qe.cSb)()},m:function(Mi,ld){uo[an].m(Mi,ld),(0,qe.$Tr)(Mi,rn,ld),un=!0},p:function(Mi,ld){var dd=an;(an=ho(Mi))===dd?uo[an].p(Mi,ld):((0,qe.dvw)(),(0,qe.etI)(uo[dd],1,1,function(){uo[dd]=null}),(0,qe.gbL)(),(nn=uo[an])?nn.p(Mi,ld):(nn=uo[an]=ln[an](Mi)).c(),(0,qe.Ui)(nn,1),nn.m(rn.parentNode,rn))},i:function(Mi){un||((0,qe.Ui)(nn),un=!0)},o:function(Mi){(0,qe.etI)(nn),un=!1},d:function(Mi){uo[an].d(Mi),Mi&&(0,qe.ogt)(rn)}}}function Py(cn){for(var an,nn,rn=cn[0].childNodes,un=[],ln=0;ln<rn.length;ln+=1)un[ln]=u0(e0(cn,rn,ln));var uo=function(ho){return(0,qe.etI)(un[ho],1,1,function(){un[ho]=null})};return{c:function(){for(var ho=0;ho<un.length;ho+=1)un[ho].c();an=(0,qe.cSb)()},m:function(ho,Mi){for(var ld=0;ld<un.length;ld+=1)un[ld].m(ho,Mi);(0,qe.$Tr)(ho,an,Mi),nn=!0},p:function(ho,Mi){if(1&Mi){var ld;for(rn=ho[0].childNodes,ld=0;ld<rn.length;ld+=1){var dd=e0(ho,rn,ld);un[ld]?(un[ld].p(dd,Mi),(0,qe.Ui)(un[ld],1)):(un[ld]=u0(dd),un[ld].c(),(0,qe.Ui)(un[ld],1),un[ld].m(an.parentNode,an))}for((0,qe.dvw)(),ld=rn.length;ld<un.length;ld+=1)uo(ld);(0,qe.gbL)()}},i:function(ho){if(!nn){for(var Mi=0;Mi<rn.length;Mi+=1)(0,qe.Ui)(un[Mi]);nn=!0}},o:function(ho){un=un.filter(Boolean);for(var Mi=0;Mi<un.length;Mi+=1)(0,qe.etI)(un[Mi]);nn=!1},d:function(ho){(0,qe.RMB)(un,ho),ho&&(0,qe.ogt)(an)}}}function Ly(cn){var an;return{c:function(){an=(0,qe.fLW)("...")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},p:qe.ZTd,i:qe.ZTd,o:qe.ZTd,d:function(nn){nn&&(0,qe.ogt)(an)}}}function u0(cn){var an,nn,rn;return(an=new f0({props:{node:cn[8]}})).$on("toggleNode",cn[4]),{c:function(){(0,qe.YCL)(an.$$.fragment),nn=(0,qe.DhX)()},m:function(un,ln){(0,qe.yef)(an,un,ln),(0,qe.$Tr)(un,nn,ln),rn=!0},p:function(un,ln){var uo={};1&ln&&(uo.node=un[8]),an.$set(uo)},i:function(un){rn||((0,qe.Ui)(an.$$.fragment,un),rn=!0)},o:function(un){(0,qe.etI)(an.$$.fragment,un),rn=!1},d:function(un){(0,qe.vpE)(an,un),un&&(0,qe.ogt)(nn)}}}function c0(cn){var an,nn,rn,un,ln=cn[0].nodeName+"";return{c:function(){an=(0,qe.bGB)("span"),nn=(0,qe.fLW)("</"),rn=(0,qe.fLW)(ln),un=(0,qe.fLW)(">"),(0,qe.Ljt)(an,"class","vcelm-node")},m:function(uo,ho){(0,qe.$Tr)(uo,an,ho),(0,qe.R3I)(an,nn),(0,qe.R3I)(an,rn),(0,qe.R3I)(an,un)},p:function(uo,ho){1&ho&&ln!==(ln=uo[0].nodeName+"")&&(0,qe.rTO)(rn,ln)},d:function(uo){uo&&(0,qe.ogt)(an)}}}function l0(cn){var an,nn,rn=cn[1](cn[0].textContent)+"";return{c:function(){an=(0,qe.bGB)("span"),nn=(0,qe.fLW)(rn),(0,qe.Ljt)(an,"class","vcelm-t vcelm-noc")},m:function(un,ln){(0,qe.$Tr)(un,an,ln),(0,qe.R3I)(an,nn)},p:function(un,ln){1&ln&&rn!==(rn=un[1](un[0].textContent)+"")&&(0,qe.rTO)(nn,rn)},d:function(un){un&&(0,qe.ogt)(an)}}}function My(cn){var an,nn,rn=cn[0]&&n0(cn);return{c:function(){rn&&rn.c(),an=(0,qe.cSb)()},m:function(un,ln){rn&&rn.m(un,ln),(0,qe.$Tr)(un,an,ln),nn=!0},p:function(un,ln){var uo=ln[0];un[0]?rn?(rn.p(un,uo),1&uo&&(0,qe.Ui)(rn,1)):((rn=n0(un)).c(),(0,qe.Ui)(rn,1),rn.m(an.parentNode,an)):rn&&((0,qe.dvw)(),(0,qe.etI)(rn,1,1,function(){rn=null}),(0,qe.gbL)())},i:function(un){nn||((0,qe.Ui)(rn),nn=!0)},o:function(un){(0,qe.etI)(rn),nn=!1},d:function(un){rn&&rn.d(un),un&&(0,qe.ogt)(an)}}}function Ny(cn,an,nn){var rn;(0,qe.FIv)(cn,vm,function(ho){return nn(3,rn=ho)});var un=an.node,ln=(0,Ye.x)(),uo=["br","hr","img","input","link","meta"];return(0,Ye.H3)(function(){Qg.use()}),(0,Ye.ev)(function(){Qg.unuse()}),cn.$$set=function(ho){"node"in ho&&nn(0,un=ho.node)},cn.$$.update=function(){9&cn.$$.dirty&&un&&(nn(0,un._isActived=un===rn,un),nn(0,un._isNullEndTag=function(ho){return uo.indexOf(ho.nodeName)>-1}(un),un),nn(0,un._isSingleLine=un.childNodes.length===0||un._isNullEndTag,un))},[un,function(ho){return ho.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},function(){un._isNullEndTag||(nn(0,un._isExpand=!un._isExpand,un),ln("toggleNode",{node:un}))},rn,function(ho){qe.cKT.call(this,cn,ho)}]}var f0=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Ny,My,qe.N8,{node:0}),rn}return(0,Ke.Z)(an,cn),(0,je.Z)(an,[{key:"node",get:function(){return this.$$.ctx[0]},set:function(nn){this.$$set({node:nn}),(0,qe.yl1)()}}]),an}(qe.f_C),Fy=f0;function By(cn){var an,nn,rn;return(nn=new Fy({props:{node:cn[0]}})).$on("toggleNode",cn[1]),{c:function(){an=(0,qe.bGB)("div"),(0,qe.YCL)(nn.$$.fragment),(0,qe.Ljt)(an,"class","vc-plugin-content")},m:function(un,ln){(0,qe.$Tr)(un,an,ln),(0,qe.yef)(nn,an,null),rn=!0},p:function(un,ln){var uo={};1&ln[0]&&(uo.node=un[0]),nn.$set(uo)},i:function(un){rn||((0,qe.Ui)(nn.$$.fragment,un),rn=!0)},o:function(un){(0,qe.etI)(nn.$$.fragment,un),rn=!1},d:function(un){un&&(0,qe.ogt)(an),(0,qe.vpE)(nn)}}}function Wy(cn,an,nn){var rn;return(0,qe.FIv)(cn,Em,function(un){return nn(0,rn=un)}),[rn,function(un){qe.cKT.call(this,cn,un)}]}var Vy=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Wy,By,qe.N8,{}),rn}return(0,Ke.Z)(an,cn),an}(qe.f_C),Uy=Vy,h0=function(cn){function an(rn,un,ln){var uo;return ln===void 0&&(ln={}),(uo=cn.call(this,rn,un,Uy,ln)||this).isInited=!1,uo.observer=void 0,uo.nodeMap=void 0,uo}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onShow=function(){this.isInited||this._init()},nn.onRemove=function(){cn.prototype.onRemove.call(this),this.isInited&&(this.observer.disconnect(),this.isInited=!1,this.nodeMap=void 0,Em.set(void 0))},nn.onAddTool=function(rn){var un=this;rn([{name:"Expand",global:!1,onClick:function(ln){un._expandActivedNode()}},{name:"Collapse",global:!1,onClick:function(ln){un._collapseActivedNode()}}])},nn._init=function(){var rn=this;this.isInited=!0,this.nodeMap=new WeakMap;var un=this._generateVNode(document.documentElement);un._isExpand=!0,vm.set(un),Em.set(un),this.compInstance.$on("toggleNode",function(ln){vm.set(ln.detail.node)}),this.observer=new(Ay())(function(ln){for(var uo=0;uo<ln.length;uo++){var ho=ln[uo];rn._isInVConsole(ho.target)||rn._handleMutation(ho)}}),this.observer.observe(document.documentElement,{attributes:!0,childList:!0,characterData:!0,subtree:!0})},nn._handleMutation=function(rn){switch(rn.type){case"childList":rn.removedNodes.length>0&&this._onChildRemove(rn),rn.addedNodes.length>0&&this._onChildAdd(rn);break;case"attributes":this._onAttributesChange(rn);break;case"characterData":this._onCharacterDataChange(rn)}},nn._onChildRemove=function(rn){var un=this.nodeMap.get(rn.target);if(un){for(var ln=0;ln<rn.removedNodes.length;ln++){var uo=this.nodeMap.get(rn.removedNodes[ln]);if(uo){for(var ho=0;ho<un.childNodes.length;ho++)if(un.childNodes[ho]===uo){un.childNodes.splice(ho,1);break}this.nodeMap.delete(rn.removedNodes[ln])}}this._refreshStore()}},nn._onChildAdd=function(rn){var un=this.nodeMap.get(rn.target);if(un){for(var ln=0;ln<rn.addedNodes.length;ln++){var uo=rn.addedNodes[ln],ho=this._generateVNode(uo);if(ho){var Mi=void 0,ld=uo;do{if(ld.nextSibling===null)break;ld.nodeType===Node.ELEMENT_NODE&&(Mi=this.nodeMap.get(ld.nextSibling)||void 0),ld=ld.nextSibling}while(Mi===void 0);if(Mi===void 0)un.childNodes.push(ho);else for(var dd=0;dd<un.childNodes.length;dd++)if(un.childNodes[dd]===Mi){un.childNodes.splice(dd,0,ho);break}}}this._refreshStore()}},nn._onAttributesChange=function(rn){this._updateVNodeAttributes(rn.target),this._refreshStore()},nn._onCharacterDataChange=function(rn){var un=this.nodeMap.get(rn.target);un&&(un.textContent=rn.target.textContent,this._refreshStore())},nn._generateVNode=function(rn){if(!this._isIgnoredNode(rn)){var un={nodeType:rn.nodeType,nodeName:rn.nodeName.toLowerCase(),textContent:"",id:"",className:"",attributes:[],childNodes:[]};if(this.nodeMap.set(rn,un),un.nodeType!=rn.TEXT_NODE&&un.nodeType!=rn.DOCUMENT_TYPE_NODE||(un.textContent=rn.textContent),rn.childNodes.length>0){un.childNodes=[];for(var ln=0;ln<rn.childNodes.length;ln++){var uo=this._generateVNode(rn.childNodes[ln]);uo&&un.childNodes.push(uo)}}return this._updateVNodeAttributes(rn),un}},nn._updateVNodeAttributes=function(rn){var un=this.nodeMap.get(rn);if(un&&rn instanceof Element&&(un.id=rn.id||"",un.className=rn.className||"",rn.hasAttributes&&rn.hasAttributes())){un.attributes=[];for(var ln=0;ln<rn.attributes.length;ln++)un.attributes.push({name:rn.attributes[ln].name,value:rn.attributes[ln].value||""})}},nn._expandActivedNode=function(){var rn=(0,mv.U2)(vm);if(rn._isExpand)for(var un=0;un<rn.childNodes.length;un++)rn.childNodes[un]._isExpand=!0;else rn._isExpand=!0;this._refreshStore()},nn._collapseActivedNode=function(){var rn=(0,mv.U2)(vm);if(rn._isExpand){for(var un=!1,ln=0;ln<rn.childNodes.length;ln++)rn.childNodes[ln]._isExpand&&(un=!0,rn.childNodes[ln]._isExpand=!1);un||(rn._isExpand=!1),this._refreshStore()}},nn._isIgnoredNode=function(rn){if(rn.nodeType===rn.TEXT_NODE){if(rn.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,"")==="")return!0}else if(rn.nodeType===rn.COMMENT_NODE)return!0;return!1},nn._isInVConsole=function(rn){for(var un=rn;un!==void 0;){if(un.id=="__vconsole")return!0;un=un.parentElement||void 0}return!1},nn._refreshStore=function(){Em.update(function(rn){return rn})},an}(sp);function d0(cn,an,nn,rn,un,ln,uo){try{var ho=cn[ln](uo),Mi=ho.value}catch(ld){return void nn(ld)}ho.done?an(Mi):Promise.resolve(Mi).then(rn,un)}function um(cn){return function(){var an=this,nn=arguments;return new Promise(function(rn,un){var ln=cn.apply(an,nn);function uo(Mi){d0(ln,rn,un,uo,ho,"next",Mi)}function ho(Mi){d0(ln,rn,un,uo,ho,"throw",Mi)}uo(void 0)})}}var jy=__webpack_require__(8270);function p0(cn,an){var nn=Object.keys(cn);if(Object.getOwnPropertySymbols){var rn=Object.getOwnPropertySymbols(cn);an&&(rn=rn.filter(function(un){return Object.getOwnPropertyDescriptor(cn,un).enumerable})),nn.push.apply(nn,rn)}return nn}function v0(cn){for(var an=1;an<arguments.length;an++){var nn=arguments[an]!=null?arguments[an]:{};an%2?p0(Object(nn),!0).forEach(function(rn){(0,jy.Z)(cn,rn,nn[rn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(cn,Object.getOwnPropertyDescriptors(nn)):p0(Object(nn)).forEach(function(rn){Object.defineProperty(cn,rn,Object.getOwnPropertyDescriptor(nn,rn))})}return cn}var m0=function(cn){if(!cn||cn.length===0)return{};for(var an={},nn=cn.split(";"),rn=0;rn<nn.length;rn++){var un=nn[rn].indexOf("=");if(!(un<0)){var ln=nn[rn].substring(0,un).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),uo=nn[rn].substring(un+1,nn[rn].length);try{ln=decodeURIComponent(ln)}catch{}try{uo=decodeURIComponent(uo)}catch{}an[ln]=uo}}return an},g0=function(cn,an,nn){typeof document<"u"&&document.cookie!==void 0&&(document.cookie=encodeURIComponent(cn)+"="+encodeURIComponent(an)+function(rn){rn===void 0&&(rn={});var un=rn,ln=un.path,uo=un.domain,ho=un.expires,Mi=un.secure,ld=un.sameSite,dd=["none","lax","strict"].indexOf((ld||"").toLowerCase())>-1?ld:null;return[ln==null?"":";path="+ln,uo==null?"":";domain="+uo,ho==null?"":";expires="+ho.toUTCString(),Mi===void 0||Mi===!1?"":";secure",dd===null?"":";SameSite="+dd].join("")}(nn))},y0=function(){return typeof document>"u"||document.cookie===void 0?"":document.cookie},$y=function(){function cn(){}var an=cn.prototype;return an.key=function(nn){return nn<this.keys.length?this.keys[nn]:null},an.setItem=function(nn,rn,un){g0(nn,rn,un)},an.getItem=function(nn){var rn=m0(y0());return Object.prototype.hasOwnProperty.call(rn,nn)?rn[nn]:null},an.removeItem=function(nn,rn){for(var un,ln,uo=["","/"],ho=((un=location)==null||(ln=un.hostname)==null?void 0:ln.split("."))||[];ho.length>1;)uo.push(ho.join(".")),ho.shift();for(var Mi=0;Mi<uo.length;Mi++)for(var ld,dd,Sd=((ld=location)==null||(dd=ld.pathname)==null?void 0:dd.split("/"))||[],gd="";Sd.length>0;){gd+=(gd==="/"?"":"/")+Sd.shift();var Wd=v0(v0({},rn),{},{path:gd,domain:uo[Mi],expires:new Date(0)});g0(nn,"",Wd)}},an.clear=function(){for(var nn=[].concat(this.keys),rn=0;rn<nn.length;rn++)this.removeItem(nn[rn])},(0,je.Z)(cn,[{key:"length",get:function(){return this.keys.length}},{key:"keys",get:function(){var nn=m0(y0());return Object.keys(nn).sort()}}]),cn}(),Hy=function(){function cn(){this.keys=[],this.currentSize=0,this.limitSize=0}var an=cn.prototype;return an.key=function(nn){return nn<this.keys.length?this.keys[nn]:null},an.prepare=function(){var nn=um(nv().mark(function rn(){var un=this;return nv().wrap(function(ln){for(;;)switch(ln.prev=ln.next){case 0:return ln.abrupt("return",new Promise(function(uo,ho){(0,y.qt)("getStorageInfo",{success:function(Mi){un.keys=Mi?Mi.keys.sort():[],un.currentSize=Mi?Mi.currentSize:0,un.limitSize=Mi?Mi.limitSize:0,uo(!0)},fail:function(){ho(!1)}})}));case 1:case"end":return ln.stop()}},rn)}));return function(){return nn.apply(this,arguments)}}(),an.getItem=function(nn){return new Promise(function(rn,un){(0,y.qt)("getStorage",{key:nn,success:function(ln){var uo=ln.data;if(typeof ln.data=="object")try{uo=JSON.stringify(ln.data)}catch{}rn(uo)},fail:function(ln){un(ln)}})})},an.setItem=function(nn,rn){return new Promise(function(un,ln){(0,y.qt)("setStorage",{key:nn,data:rn,success:function(uo){un(uo)},fail:function(uo){ln(uo)}})})},an.removeItem=function(nn){return new Promise(function(rn,un){(0,y.qt)("removeStorage",{key:nn,success:function(ln){rn(ln)},fail:function(ln){un(ln)}})})},an.clear=function(){return new Promise(function(nn,rn){(0,y.qt)("clearStorage",{success:function(un){nn(un)},fail:function(un){rn(un)}})})},(0,je.Z)(cn,[{key:"length",get:function(){return this.keys.length}}]),cn}(),yv={updateTime:(0,mv.fZ)(0),activedName:(0,mv.fZ)(null),defaultStorages:(0,mv.fZ)(["cookies","localStorage","sessionStorage"])},Im=function(cn){function an(){var rn;return(rn=cn.call(this)||this).storage=new Map,yv.activedName.subscribe(function(un){var ln=(0,mv.U2)(yv.defaultStorages);ln.length>0&&ln.indexOf(un)===-1&&yv.activedName.set(ln[0])}),yv.defaultStorages.subscribe(function(un){un.indexOf((0,mv.U2)(yv.activedName))===-1&&yv.activedName.set(un[0]),rn.updateEnabledStorages()}),rn}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.getItem=function(){var rn=um(nv().mark(function un(ln){return nv().wrap(function(uo){for(;;)switch(uo.prev=uo.next){case 0:if(this.activedStorage){uo.next=2;break}return uo.abrupt("return","");case 2:return uo.next=4,this.promisify(this.activedStorage.getItem(ln));case 4:return uo.abrupt("return",uo.sent);case 5:case"end":return uo.stop()}},un,this)}));return function(un){return rn.apply(this,arguments)}}(),nn.setItem=function(){var rn=um(nv().mark(function un(ln,uo){var ho;return nv().wrap(function(Mi){for(;;)switch(Mi.prev=Mi.next){case 0:if(this.activedStorage){Mi.next=2;break}return Mi.abrupt("return");case 2:return Mi.next=4,this.promisify(this.activedStorage.setItem(ln,uo));case 4:return ho=Mi.sent,this.refresh(),Mi.abrupt("return",ho);case 7:case"end":return Mi.stop()}},un,this)}));return function(un,ln){return rn.apply(this,arguments)}}(),nn.removeItem=function(){var rn=um(nv().mark(function un(ln){var uo;return nv().wrap(function(ho){for(;;)switch(ho.prev=ho.next){case 0:if(this.activedStorage){ho.next=2;break}return ho.abrupt("return");case 2:return ho.next=4,this.promisify(this.activedStorage.removeItem(ln));case 4:return uo=ho.sent,this.refresh(),ho.abrupt("return",uo);case 7:case"end":return ho.stop()}},un,this)}));return function(un){return rn.apply(this,arguments)}}(),nn.clear=function(){var rn=um(nv().mark(function un(){var ln;return nv().wrap(function(uo){for(;;)switch(uo.prev=uo.next){case 0:if(this.activedStorage){uo.next=2;break}return uo.abrupt("return");case 2:return uo.next=4,this.promisify(this.activedStorage.clear());case 4:return ln=uo.sent,this.refresh(),uo.abrupt("return",ln);case 7:case"end":return uo.stop()}},un,this)}));return function(){return rn.apply(this,arguments)}}(),nn.refresh=function(){yv.updateTime.set(Date.now())},nn.getEntries=function(){var rn=um(nv().mark(function un(){var ln,uo,ho,Mi,ld;return nv().wrap(function(dd){for(;;)switch(dd.prev=dd.next){case 0:if(ln=this.activedStorage){dd.next=3;break}return dd.abrupt("return",[]);case 3:if(typeof ln.prepare!="function"){dd.next=6;break}return dd.next=6,ln.prepare();case 6:uo=[],ho=0;case 8:if(!(ho<ln.length)){dd.next=17;break}return Mi=ln.key(ho),dd.next=12,this.getItem(Mi);case 12:ld=dd.sent,uo.push([Mi,ld]);case 14:ho++,dd.next=8;break;case 17:return dd.abrupt("return",uo);case 18:case"end":return dd.stop()}},un,this)}));return function(){return rn.apply(this,arguments)}}(),nn.updateEnabledStorages=function(){var rn=(0,mv.U2)(yv.defaultStorages);rn.indexOf("cookies")>-1?document.cookie!==void 0&&this.storage.set("cookies",new $y):this.deleteStorage("cookies"),rn.indexOf("localStorage")>-1?window.localStorage&&this.storage.set("localStorage",window.localStorage):this.deleteStorage("localStorage"),rn.indexOf("sessionStorage")>-1?window.sessionStorage&&this.storage.set("sessionStorage",window.sessionStorage):this.deleteStorage("sessionStorage"),rn.indexOf("wxStorage")>-1?(0,y.H_)()&&this.storage.set("wxStorage",new Hy):this.deleteStorage("wxStorage")},nn.promisify=function(rn){return typeof rn=="string"||rn==null?Promise.resolve(rn):rn},nn.deleteStorage=function(rn){this.storage.has(rn)&&this.storage.delete(rn)},(0,je.Z)(an,[{key:"activedStorage",get:function(){return this.storage.get((0,mv.U2)(yv.activedName))}}]),an}(Dg.N);function b0(cn,an,nn){var rn=cn.slice();return rn[20]=an[nn][0],rn[21]=an[nn][1],rn[23]=nn,rn}function x0(cn){var an;return{c:function(){(an=(0,qe.bGB)("div")).textContent="Empty",(0,qe.Ljt)(an,"class","vc-plugin-empty")},m:function(nn,rn){(0,qe.$Tr)(nn,an,rn)},p:qe.ZTd,d:function(nn){nn&&(0,qe.ogt)(an)}}}function Gy(cn){var an,nn,rn,un,ln,uo=cn[20]+"",ho=cn[5](cn[21])+"";return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.fLW)(uo),rn=(0,qe.DhX)(),un=(0,qe.bGB)("div"),ln=(0,qe.fLW)(ho),(0,qe.Ljt)(an,"class","vc-table-col"),(0,qe.Ljt)(un,"class","vc-table-col vc-table-col-2")},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.R3I)(an,nn),(0,qe.$Tr)(Mi,rn,ld),(0,qe.$Tr)(Mi,un,ld),(0,qe.R3I)(un,ln)},p:function(Mi,ld){1&ld&&uo!==(uo=Mi[20]+"")&&(0,qe.rTO)(nn,uo),1&ld&&ho!==(ho=Mi[5](Mi[21])+"")&&(0,qe.rTO)(ln,ho)},d:function(Mi){Mi&&(0,qe.ogt)(an),Mi&&(0,qe.ogt)(rn),Mi&&(0,qe.ogt)(un)}}}function zy(cn){var an,nn,rn,un,ln,uo,ho;return{c:function(){an=(0,qe.bGB)("div"),nn=(0,qe.bGB)("textarea"),rn=(0,qe.DhX)(),un=(0,qe.bGB)("div"),ln=(0,qe.bGB)("textarea"),(0,qe.Ljt)(nn,"class","vc-table-input"),(0,qe.Ljt)(an,"class","vc-table-col"),(0,qe.Ljt)(ln,"class","vc-table-input"),(0,qe.Ljt)(un,"class","vc-table-col vc-table-col-2")},m:function(Mi,ld){(0,qe.$Tr)(Mi,an,ld),(0,qe.R3I)(an,nn),(0,qe.BmG)(nn,cn[2]),(0,qe.$Tr)(Mi,rn,ld),(0,qe.$Tr)(Mi,un,ld),(0,qe.R3I)(un,ln),(0,qe.BmG)(ln,cn[3]),uo||(ho=[(0,qe.oLt)(nn,"input",cn[11]),(0,qe.oLt)(ln,"input",cn[12])],uo=!0)},p:function(Mi,ld){4&ld&&(0,qe.BmG)(nn,Mi[2]),8&ld&&(0,qe.BmG)(ln,Mi[3])},d:function(Mi){Mi&&(0,qe.ogt)(an),Mi&&(0,qe.ogt)(rn),Mi&&(0,qe.ogt)(un),uo=!1,(0,qe.j7q)(ho)}}}function qy(cn){var an,nn,rn,un,ln,uo;return(an=new Cp.Z({props:{name:"delete"}})).$on("click",function(){return cn[14](cn[20])}),rn=new jp({props:{content:[cn[20],cn[21]].join("=")}}),(ln=new Cp.Z({props:{name:"edit"}})).$on("click",function(){return cn[15](cn[20],cn[21],cn[23])}),{c:function(){(0,qe.YCL)(an.$$.fragment),nn=(0,qe.DhX)(),(0,qe.YCL)(rn.$$.fragment),un=(0,qe.DhX)(),(0,qe.YCL)(ln.$$.fragment)},m:function(ho,Mi){(0,qe.yef)(an,ho,Mi),(0,qe.$Tr)(ho,nn,Mi),(0,qe.yef)(rn,ho,Mi),(0,qe.$Tr)(ho,un,Mi),(0,qe.yef)(ln,ho,Mi),uo=!0},p:function(ho,Mi){cn=ho;var ld={};1&Mi&&(ld.content=[cn[20],cn[21]].join("=")),rn.$set(ld)},i:function(ho){uo||((0,qe.Ui)(an.$$.fragment,ho),(0,qe.Ui)(rn.$$.fragment,ho),(0,qe.Ui)(ln.$$.fragment,ho),uo=!0)},o:function(ho){(0,qe.etI)(an.$$.fragment,ho),(0,qe.etI)(rn.$$.fragment,ho),(0,qe.etI)(ln.$$.fragment,ho),uo=!1},d:function(ho){(0,qe.vpE)(an,ho),ho&&(0,qe.ogt)(nn),(0,qe.vpE)(rn,ho),ho&&(0,qe.ogt)(un),(0,qe.vpE)(ln,ho)}}}function Ky(cn){var an,nn,rn,un;return(an=new Cp.Z({props:{name:"cancel"}})).$on("click",cn[9]),(rn=new Cp.Z({props:{name:"done"}})).$on("click",function(){return cn[13](cn[20])}),{c:function(){(0,qe.YCL)(an.$$.fragment),nn=(0,qe.DhX)(),(0,qe.YCL)(rn.$$.fragment)},m:function(ln,uo){(0,qe.yef)(an,ln,uo),(0,qe.$Tr)(ln,nn,uo),(0,qe.yef)(rn,ln,uo),un=!0},p:function(ln,uo){cn=ln},i:function(ln){un||((0,qe.Ui)(an.$$.fragment,ln),(0,qe.Ui)(rn.$$.fragment,ln),un=!0)},o:function(ln){(0,qe.etI)(an.$$.fragment,ln),(0,qe.etI)(rn.$$.fragment,ln),un=!1},d:function(ln){(0,qe.vpE)(an,ln),ln&&(0,qe.ogt)(nn),(0,qe.vpE)(rn,ln)}}}function _0(cn){var an,nn,rn,un,ln,uo,ho;function Mi(Dd,Gd){return Dd[1]===Dd[23]?zy:Gy}var ld=Mi(cn),dd=ld(cn),Sd=[Ky,qy],gd=[];function Wd(Dd,Gd){return Dd[1]===Dd[23]?0:1}return un=Wd(cn),ln=gd[un]=Sd[un](cn),{c:function(){an=(0,qe.bGB)("div"),dd.c(),nn=(0,qe.DhX)(),rn=(0,qe.bGB)("div"),ln.c(),uo=(0,qe.DhX)(),(0,qe.Ljt)(rn,"class","vc-table-col vc-table-col-1 vc-table-action"),(0,qe.Ljt)(an,"class","vc-table-row")},m:function(Dd,Gd){(0,qe.$Tr)(Dd,an,Gd),dd.m(an,null),(0,qe.R3I)(an,nn),(0,qe.R3I)(an,rn),gd[un].m(rn,null),(0,qe.R3I)(an,uo),ho=!0},p:function(Dd,Gd){ld===(ld=Mi(Dd))&&dd?dd.p(Dd,Gd):(dd.d(1),(dd=ld(Dd))&&(dd.c(),dd.m(an,nn)));var Xd=un;(un=Wd(Dd))===Xd?gd[un].p(Dd,Gd):((0,qe.dvw)(),(0,qe.etI)(gd[Xd],1,1,function(){gd[Xd]=null}),(0,qe.gbL)(),(ln=gd[un])?ln.p(Dd,Gd):(ln=gd[un]=Sd[un](Dd)).c(),(0,qe.Ui)(ln,1),ln.m(rn,null))},i:function(Dd){ho||((0,qe.Ui)(ln),ho=!0)},o:function(Dd){(0,qe.etI)(ln),ho=!1},d:function(Dd){Dd&&(0,qe.ogt)(an),dd.d(),gd[un].d()}}}function Xy(cn){for(var an,nn,rn,un,ln=cn[0],uo=[],ho=0;ho<ln.length;ho+=1)uo[ho]=_0(b0(cn,ln,ho));var Mi=function(dd){return(0,qe.etI)(uo[dd],1,1,function(){uo[dd]=null})},ld=null;return ln.length||(ld=x0()),{c:function(){an=(0,qe.bGB)("div"),(nn=(0,qe.bGB)("div")).innerHTML=`<div class="vc-table-col">Key</div> 
    <div class="vc-table-col vc-table-col-2">Value</div> 
    <div class="vc-table-col vc-table-col-1 vc-table-action"></div>`,rn=(0,qe.DhX)();for(var dd=0;dd<uo.length;dd+=1)uo[dd].c();ld&&ld.c(),(0,qe.Ljt)(nn,"class","vc-table-row"),(0,qe.Ljt)(an,"class","vc-table")},m:function(dd,Sd){(0,qe.$Tr)(dd,an,Sd),(0,qe.R3I)(an,nn),(0,qe.R3I)(an,rn);for(var gd=0;gd<uo.length;gd+=1)uo[gd].m(an,null);ld&&ld.m(an,null),un=!0},p:function(dd,Sd){var gd=Sd[0];if(1007&gd){var Wd;for(ln=dd[0],Wd=0;Wd<ln.length;Wd+=1){var Dd=b0(dd,ln,Wd);uo[Wd]?(uo[Wd].p(Dd,gd),(0,qe.Ui)(uo[Wd],1)):(uo[Wd]=_0(Dd),uo[Wd].c(),(0,qe.Ui)(uo[Wd],1),uo[Wd].m(an,null))}for((0,qe.dvw)(),Wd=ln.length;Wd<uo.length;Wd+=1)Mi(Wd);(0,qe.gbL)(),!ln.length&&ld?ld.p(dd,gd):ln.length?ld&&(ld.d(1),ld=null):((ld=x0()).c(),ld.m(an,null))}},i:function(dd){if(!un){for(var Sd=0;Sd<ln.length;Sd+=1)(0,qe.Ui)(uo[Sd]);un=!0}},o:function(dd){uo=uo.filter(Boolean);for(var Sd=0;Sd<uo.length;Sd+=1)(0,qe.etI)(uo[Sd]);un=!1},d:function(dd){dd&&(0,qe.ogt)(an),(0,qe.RMB)(uo,dd),ld&&ld.d()}}}function Yy(cn,an,nn){var rn,un=this&&this.__awaiter||function(Gd,Xd,tp,op){return new(tp||(tp=Promise))(function(lp,Pp){function Ip(Kp){try{zp(op.next(Kp))}catch(kp){Pp(kp)}}function Gp(Kp){try{zp(op.throw(Kp))}catch(kp){Pp(kp)}}function zp(Kp){var kp;Kp.done?lp(Kp.value):(kp=Kp.value,kp instanceof tp?kp:new tp(function(Sp){Sp(kp)})).then(Ip,Gp)}zp((op=op.apply(Gd,Xd||[])).next())})},ln=Im.getSingleton(Im,"VConsoleStorageModel"),uo=yv.updateTime;(0,qe.FIv)(cn,uo,function(Gd){return nn(10,rn=Gd)});var ho=[],Mi=-1,ld="",dd="",Sd=function(){nn(1,Mi=-1),nn(2,ld=""),nn(3,dd="")},gd=function(Gd){return un(void 0,void 0,void 0,nv().mark(function Xd(){return nv().wrap(function(tp){for(;;)switch(tp.prev=tp.next){case 0:return tp.next=2,ln.removeItem(Gd);case 2:case"end":return tp.stop()}},Xd)}))},Wd=function(Gd){return un(void 0,void 0,void 0,nv().mark(function Xd(){return nv().wrap(function(tp){for(;;)switch(tp.prev=tp.next){case 0:if(ld===Gd){tp.next=3;break}return tp.next=3,ln.removeItem(Gd);case 3:ln.setItem(ld,dd),Sd();case 5:case"end":return tp.stop()}},Xd)}))},Dd=function(Gd,Xd,tp){return un(void 0,void 0,void 0,nv().mark(function op(){return nv().wrap(function(lp){for(;;)switch(lp.prev=lp.next){case 0:nn(2,ld=Gd),nn(3,dd=Xd),nn(1,Mi=tp);case 3:case"end":return lp.stop()}},op)}))};return cn.$$.update=function(){1024&cn.$$.dirty&&rn&&un(void 0,void 0,void 0,nv().mark(function Gd(){return nv().wrap(function(Xd){for(;;)switch(Xd.prev=Xd.next){case 0:return Sd(),Xd.t0=nn,Xd.next=4,ln.getEntries();case 4:Xd.t1=ho=Xd.sent,(0,Xd.t0)(0,Xd.t1);case 6:case"end":return Xd.stop()}},Gd)}))},[ho,Mi,ld,dd,uo,function(Gd){return(0,y.id)(Gd,1024)},gd,Wd,Dd,function(){Sd()},rn,function(){ld=this.value,nn(2,ld)},function(){dd=this.value,nn(3,dd)},function(Gd){return Wd(Gd)},function(Gd){return gd(Gd)},function(Gd,Xd,tp){return Dd(Gd,Xd,tp)}]}var Zy=function(cn){function an(nn){var rn;return rn=cn.call(this)||this,(0,qe.S1n)((0,Ge.Z)(rn),nn,Yy,Xy,qe.N8,{}),rn}return(0,Ke.Z)(an,cn),an}(qe.f_C),Jy=Zy,w0=function(cn){function an(rn,un,ln){var uo;return ln===void 0&&(ln={}),(uo=cn.call(this,rn,un,Jy,ln)||this).model=Im.getSingleton(Im,"VConsoleStorageModel"),uo.onAddTopBarCallback=void 0,uo}(0,Ke.Z)(an,cn);var nn=an.prototype;return nn.onReady=function(){cn.prototype.onReady.call(this),this.onUpdateOption()},nn.onShow=function(){this.model.refresh()},nn.onAddTopBar=function(rn){this.onAddTopBarCallback=rn,this.updateTopBar()},nn.onAddTool=function(rn){var un=this;rn([{name:"Add",global:!1,onClick:function(){un.model.setItem("new_"+Date.now(),"new_value")}},{name:"Refresh",global:!1,onClick:function(){un.model.refresh()}},{name:"Clear",global:!1,onClick:function(){un.model.clear()}}])},nn.onUpdateOption=function(){var rn,un=(rn=this.vConsole.option.storage)==null?void 0:rn.defaultStorages;(0,y.kJ)(un)&&(un=un.length>0?un:["cookies"])!==(0,mv.U2)(yv.defaultStorages)&&(yv.defaultStorages.set(un),yv.activedName.set(un[0]),this.updateTopBar())},nn.updateTopBar=function(){var rn=this;if(typeof this.onAddTopBarCallback=="function"){for(var un=(0,mv.U2)(yv.defaultStorages),ln=[],uo=0;uo<un.length;uo++){var ho=un[uo];ln.push({name:ho[0].toUpperCase()+ho.substring(1),data:{name:ho},actived:ho===(0,mv.U2)(yv.activedName),onClick:function(Mi,ld){var dd=(0,mv.U2)(yv.activedName);if(ld.name===dd)return!1;yv.activedName.set(ld.name),rn.model.refresh()}})}this.onAddTopBarCallback(ln)}},an}(sp),Rv=function(){function cn(nn){var rn=this;if(this.version="3.15.1",this.isInited=!1,this.option={},this.compInstance=void 0,this.pluginList={},this.log=void 0,this.system=void 0,this.network=void 0,cn.instance&&cn.instance instanceof cn)return console.debug("[vConsole] vConsole is already exists."),cn.instance;if(cn.instance=this,this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"],log:{},network:{},storage:{}},y.Kn(nn))for(var un in nn)this.option[un]=nn[un];this.option.maxLogNumber!==void 0&&(this.option.log.maxLogNumber=this.option.maxLogNumber,console.debug("[vConsole] Deprecated option: `maxLogNumber`, use `log.maxLogNumber` instead.")),this.option.onClearLog!==void 0&&console.debug("[vConsole] Deprecated option: `onClearLog`."),this.option.maxNetworkNumber!==void 0&&(this.option.network.maxNetworkNumber=this.option.maxNetworkNumber,console.debug("[vConsole] Deprecated option: `maxNetworkNumber`, use `network.maxNetworkNumber` instead.")),this._addBuiltInPlugins();var ln=function(){rn.isInited||(rn._initComponent(),rn._autoRun())};if(document!==void 0)document.readyState==="loading"?$e.bind(window,"DOMContentLoaded",ln):ln();else{var uo;uo=setTimeout(function ho(){document&&document.readyState=="complete"?(uo&&clearTimeout(uo),ln()):uo=setTimeout(ho,1)},1)}}var an=cn.prototype;return an._addBuiltInPlugins=function(){this.addPlugin(new Sg("default","Log"));var nn=this.option.defaultPlugins,rn={system:{proto:Ag,name:"System"}};if(rn.network={proto:Jg,name:"Network"},rn.element={proto:h0,name:"Element"},rn.storage={proto:w0,name:"Storage"},nn&&y.kJ(nn))for(var un=0;un<nn.length;un++){var ln=rn[nn[un]];ln?this.addPlugin(new ln.proto(nn[un],ln.name)):console.debug("[vConsole] Unrecognized default plugin ID:",nn[un])}},an._initComponent=function(){var nn=this;if(!$e.one("#__vconsole")){var rn,un=1*y.cF("switch_x"),ln=1*y.cF("switch_y");typeof this.option.target=="string"?rn=document.querySelector(this.option.target):this.option.target instanceof HTMLElement&&(rn=this.option.target),rn instanceof HTMLElement||(rn=document.documentElement),this.compInstance=new ip({target:rn,props:{switchButtonPosition:{x:un,y:ln}}}),this.compInstance.$on("show",function(uo){uo.detail.show?nn.show():nn.hide()}),this.compInstance.$on("changePanel",function(uo){var ho=uo.detail.pluginId;nn.showPlugin(ho)})}this._updateComponentByOptions()},an._updateComponentByOptions=function(){if(this.compInstance){if(this.compInstance.theme!==this.option.theme){var nn=this.option.theme;nn=nn!=="light"&&nn!=="dark"?"":nn,this.compInstance.theme=nn}this.compInstance.disableScrolling!==this.option.disableLogScrolling&&(this.compInstance.disableScrolling=!!this.option.disableLogScrolling)}},an.setSwitchPosition=function(nn,rn){this.compInstance.switchButtonPosition={x:nn,y:rn}},an._autoRun=function(){for(var nn in this.isInited=!0,this.pluginList)this._initPlugin(this.pluginList[nn]);this._showFirstPluginWhenEmpty(),this.triggerEvent("ready")},an._showFirstPluginWhenEmpty=function(){var nn=Object.keys(this.pluginList);this.compInstance.activedPluginId===""&&nn.length>0&&this.showPlugin(nn[0])},an.triggerEvent=function(nn,rn){var un=this;nn="on"+nn.charAt(0).toUpperCase()+nn.slice(1),y.mf(this.option[nn])&&setTimeout(function(){un.option[nn].apply(un,rn)},0)},an._initPlugin=function(nn){var rn=this;nn.vConsole=this,this.compInstance.pluginList[nn.id]={id:nn.id,name:nn.name,hasTabPanel:!1,tabOptions:void 0,topbarList:[],toolbarList:[],content:void 0,contentContainer:void 0},this.compInstance.pluginList=this._reorderPluginList(this.compInstance.pluginList),nn.trigger("init"),nn.trigger("renderTab",function(un,ln){ln===void 0&&(ln={});var uo=rn.compInstance.pluginList[nn.id];uo.hasTabPanel=!0,uo.tabOptions=ln,un&&(rn.compInstance.pluginList[nn.id].content=un),rn.compInstance.pluginList=rn.compInstance.pluginList}),nn.trigger("addTopBar",function(un){if(un){for(var ln=[],uo=0;uo<un.length;uo++){var ho=un[uo];ln.push({name:ho.name||"Undefined",className:ho.className||"",actived:!!ho.actived,data:ho.data,onClick:ho.onClick})}rn.compInstance.pluginList[nn.id].topbarList=ln,rn.compInstance.pluginList=rn.compInstance.pluginList}}),nn.trigger("addTool",function(un){if(un){for(var ln=[],uo=0;uo<un.length;uo++){var ho=un[uo];ln.push({name:ho.name||"Undefined",global:!!ho.global,data:ho.data,onClick:ho.onClick})}rn.compInstance.pluginList[nn.id].toolbarList=ln,rn.compInstance.pluginList=rn.compInstance.pluginList}}),nn.isReady=!0,nn.trigger("ready")},an._triggerPluginsEvent=function(nn){for(var rn in this.pluginList)this.pluginList[rn].isReady&&this.pluginList[rn].trigger(nn)},an._triggerPluginEvent=function(nn,rn){var un=this.pluginList[nn];un&&un.isReady&&un.trigger(rn)},an._reorderPluginList=function(nn){var rn=this;if(!y.kJ(this.option.pluginOrder))return nn;for(var un=Object.keys(nn).sort(function(ho,Mi){var ld=rn.option.pluginOrder.indexOf(ho),dd=rn.option.pluginOrder.indexOf(Mi);return ld===dd?0:ld===-1?1:dd===-1?-1:ld-dd}),ln={},uo=0;uo<un.length;uo++)ln[un[uo]]=nn[un[uo]];return ln},an.addPlugin=function(nn){return this.pluginList[nn.id]!==void 0?(console.debug("[vConsole] Plugin `"+nn.id+"` has already been added."),!1):(this.pluginList[nn.id]=nn,this.isInited&&(this._initPlugin(nn),this._showFirstPluginWhenEmpty()),!0)},an.removePlugin=function(nn){nn=(nn+"").toLowerCase();var rn=this.pluginList[nn];if(rn===void 0)return console.debug("[vConsole] Plugin `"+nn+"` does not exist."),!1;rn.trigger("remove");try{delete this.pluginList[nn],delete this.compInstance.pluginList[nn]}catch{this.pluginList[nn]=void 0,this.compInstance.pluginList[nn]=void 0}return this.compInstance.pluginList=this.compInstance.pluginList,this.compInstance.activedPluginId==nn&&(this.compInstance.activedPluginId="",this._showFirstPluginWhenEmpty()),!0},an.show=function(){this.isInited&&(this.compInstance.show=!0,this._triggerPluginsEvent("showConsole"))},an.hide=function(){this.isInited&&(this.compInstance.show=!1,this._triggerPluginsEvent("hideConsole"))},an.showSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!0)},an.hideSwitch=function(){this.isInited&&(this.compInstance.showSwitchButton=!1)},an.showPlugin=function(nn){this.isInited&&(this.pluginList[nn]||console.debug("[vConsole] Plugin `"+nn+"` does not exist."),this.compInstance.activedPluginId&&this._triggerPluginEvent(this.compInstance.activedPluginId,"hide"),this.compInstance.activedPluginId=nn,this._triggerPluginEvent(this.compInstance.activedPluginId,"show"))},an.setOption=function(nn,rn){if(typeof nn=="string"){for(var un=nn.split("."),ln=this.option,uo=0;uo<un.length;uo++){if(un[uo]==="__proto__"||un[uo]==="constructor"||un[uo]==="prototype")return void console.debug("[vConsole] Cannot set `"+un[uo]+"` in `vConsole.setOption()`.");ln[un[uo]]===void 0&&(ln[un[uo]]={}),uo===un.length-1&&(ln[un[uo]]=rn),ln=ln[un[uo]]}this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else if(y.Kn(nn)){for(var ho in nn)ho!=="__proto__"&&ho!=="constructor"&&ho!=="prototype"?this.option[ho]=nn[ho]:console.debug("[vConsole] Cannot set `"+ho+"` in `vConsole.setOption()`.");this._triggerPluginsEvent("updateOption"),this._updateComponentByOptions()}else console.debug("[vConsole] The first parameter of `vConsole.setOption()` must be a string or an object.")},an.destroy=function(){if(this.isInited){this.isInited=!1,cn.instance=void 0;for(var nn=Object.keys(this.pluginList),rn=nn.length-1;rn>=0;rn--)this.removePlugin(nn[rn]);this.compInstance.$destroy()}},(0,je.Z)(cn,null,[{key:"instance",get:function(){return window.__VCONSOLE_INSTANCE},set:function(nn){nn===void 0||nn instanceof cn?window.__VCONSOLE_INSTANCE=nn:console.debug("[vConsole] Cannot set `VConsole.instance` because the value is not the instance of VConsole.")}}]),cn}();Rv.VConsolePlugin=void 0,Rv.VConsoleLogPlugin=void 0,Rv.VConsoleDefaultPlugin=void 0,Rv.VConsoleSystemPlugin=void 0,Rv.VConsoleNetworkPlugin=void 0,Rv.VConsoleElementPlugin=void 0,Rv.VConsoleStoragePlugin=void 0,Rv.VConsolePlugin=Zd,Rv.VConsoleLogPlugin=$m,Rv.VConsoleDefaultPlugin=Sg,Rv.VConsoleSystemPlugin=Ag,Rv.VConsoleNetworkPlugin=Jg,Rv.VConsoleElementPlugin=h0,Rv.VConsoleStoragePlugin=w0;var Qy=Rv}(),__webpack_exports__=__webpack_exports__.default,__webpack_exports__}()})})(vconsole_min);var vconsole_minExports=vconsole_min.exports;const VConsole=getDefaultExportFromCjs(vconsole_minExports);new VConsole;createApp(_sfc_main).mount("#app")});export default n1();
